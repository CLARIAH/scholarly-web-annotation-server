var ScholarlyWebAnnotator =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonpScholarlyWebAnnotator"] = window["webpackJsonpScholarlyWebAnnotator"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/swac.jsx","vendor"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/n3/lib sync recursive ^\\.\\/N3.*$":
/*!*********************************************!*\
  !*** ./node_modules/n3/lib sync ^\.\/N3.*$ ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./N3Lexer\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Lexer.js\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Parser\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Parser.js\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Store\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3Store.js\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3StreamParser\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamParser.js\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamWriter\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3StreamWriter.js\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3Util\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Util.js\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Writer\": \"./node_modules/n3/lib/N3Writer.js\",\n\t\"./N3Writer.js\": \"./node_modules/n3/lib/N3Writer.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/n3/lib sync recursive ^\\\\.\\\\/N3.*$\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbjMvbGliIHN5bmMgcmVjdXJzaXZlIF5cXC5cXC9OMy4qJC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL25vZGVfbW9kdWxlcy9uMy9saWIgc3luYyBeXFwuXFwvTjMuKiQ/YmJhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbWFwID0ge1xuXHRcIi4vTjNMZXhlclwiOiBcIi4vbm9kZV9tb2R1bGVzL24zL2xpYi9OM0xleGVyLmpzXCIsXG5cdFwiLi9OM0xleGVyLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliL04zTGV4ZXIuanNcIixcblx0XCIuL04zUGFyc2VyXCI6IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliL04zUGFyc2VyLmpzXCIsXG5cdFwiLi9OM1BhcnNlci5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL24zL2xpYi9OM1BhcnNlci5qc1wiLFxuXHRcIi4vTjNTdG9yZVwiOiBcIi4vbm9kZV9tb2R1bGVzL24zL2xpYi9OM1N0b3JlLmpzXCIsXG5cdFwiLi9OM1N0b3JlLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliL04zU3RvcmUuanNcIixcblx0XCIuL04zU3RyZWFtUGFyc2VyXCI6IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliL04zU3RyZWFtUGFyc2VyLmpzXCIsXG5cdFwiLi9OM1N0cmVhbVBhcnNlci5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL24zL2xpYi9OM1N0cmVhbVBhcnNlci5qc1wiLFxuXHRcIi4vTjNTdHJlYW1Xcml0ZXJcIjogXCIuL25vZGVfbW9kdWxlcy9uMy9saWIvTjNTdHJlYW1Xcml0ZXIuanNcIixcblx0XCIuL04zU3RyZWFtV3JpdGVyLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliL04zU3RyZWFtV3JpdGVyLmpzXCIsXG5cdFwiLi9OM1V0aWxcIjogXCIuL25vZGVfbW9kdWxlcy9uMy9saWIvTjNVdGlsLmpzXCIsXG5cdFwiLi9OM1V0aWwuanNcIjogXCIuL25vZGVfbW9kdWxlcy9uMy9saWIvTjNVdGlsLmpzXCIsXG5cdFwiLi9OM1dyaXRlclwiOiBcIi4vbm9kZV9tb2R1bGVzL24zL2xpYi9OM1dyaXRlci5qc1wiLFxuXHRcIi4vTjNXcml0ZXIuanNcIjogXCIuL25vZGVfbW9kdWxlcy9uMy9saWIvTjNXcml0ZXIuanNcIlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvbjMvbGliIHN5bmMgcmVjdXJzaXZlIF5cXFxcLlxcXFwvTjMuKiRcIjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/n3/lib sync recursive ^\\.\\/N3.*$\n");

/***/ }),

/***/ "./src/api/AnnotationAPI.js":
/*!**********************************!*\
  !*** ./src/api/AnnotationAPI.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n\nvar AnnotationAPI = {\n  annotationServer: null,\n  userDetails: null,\n  permissions: {\n    accessStatus: \"private\" // default setting is private\n\n  },\n  serverNotSet: function serverNotSet() {\n    return Error(\"No annotation server configured.\");\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    AnnotationAPI.annotationServer = apiURL;\n  },\n  getServerAddress: function getServerAddress() {\n    return AnnotationAPI.annotationServer;\n  },\n  checkServerAvailable: function checkServerAvailable(callback) {\n    fetch(AnnotationAPI.annotationServer, {}).then(function (response) {\n      return response.status; //return response.json();\n      //}).then((data) => {\n    }).then(function () {\n      return callback(true); //}).catch((error) => {\n    }).catch(function () {\n      return callback(false);\n    });\n  },\n  setUserDetails: function setUserDetails(userDetails) {\n    AnnotationAPI.userDetails = userDetails;\n  },\n  setPermissions: function setPermissions(permissions) {\n    if (permissions.hasOwnProperty(\"accessStatus\")) {\n      if (![\"private\", \"shared\", \"public\"].includes(permissions.accessStatus)) {\n        return Error(\"Invalid accessStatus option. Must be 'private', 'shared' or 'public'\");\n      }\n\n      AnnotationAPI.permissions.accessStatus = permissions.accessStatus;\n    }\n  },\n  getPermissions: function getPermissions() {\n    return AnnotationAPI.permissions;\n  },\n  removeUserDetails: function removeUserDetails() {\n    AnnotationAPI.userDetails = null;\n  },\n  makeRequest: function makeRequest(url, options, callback) {\n    if (!AnnotationAPI.annotationServer) callback(AnnotationAPI.serverNotSet(), null);\n    var status = null;\n    options.cache = \"no-cache\";\n    options.mode = \"cors\";\n\n    if (AnnotationAPI.userDetails) {\n      AnnotationAPI.addAuthorization(options);\n    }\n\n    fetch(url, options).then(function (response) {\n      status = response.status;\n\n      if (status === 204) {\n        return {};\n      }\n\n      return response.json();\n    }).then(function (data) {\n      if (status === 403 && AnnotationAPI.userDetails && AnnotationAPI.userDetails.token) {\n        // token expired, remove token\n        delete AnnotationAPI.userDetails.token;\n        localStorage.setItem(\"userDetails\", JSON.stringify(AnnotationAPI.userDetails));\n      }\n\n      if (status >= 400 && status < 500) {\n        var error = {\n          status: status,\n          message: data.message\n        };\n        return callback(error, null);\n      }\n\n      return callback(null, data);\n    }).catch(function (error) {\n      console.log(error);\n      return callback(error, null);\n    });\n  },\n  addAuthorization: function addAuthorization(options) {\n    if (!options.hasOwnProperty(\"headers\")) {\n      options.headers = {};\n    }\n\n    var authorizationString = \"\";\n\n    if (AnnotationAPI.userDetails.token) {\n      authorizationString = AnnotationAPI.userDetails.token + \":unused\";\n    } else {\n      authorizationString = AnnotationAPI.userDetails.username + \":\" + AnnotationAPI.userDetails.password;\n    }\n\n    options.headers[\"Authorization\"] = \"Basic \" + btoa(authorizationString);\n  },\n  saveAnnotation: function saveAnnotation(annotation, permission, callback) {\n    // default is POSTing a new annotation\n    var url = AnnotationAPI.annotationServer + \"/annotations/\";\n    var method = \"POST\"; // if annotation already has an id, it's an update, so PUT\n\n    if (annotation.id) {\n      url = AnnotationAPI.annotationServer + \"/annotations/\" + annotation.id;\n      url = annotation.id;\n      method = \"PUT\";\n    }\n\n    url = url + \"?access_status=\" + permission;\n    var options = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(annotation)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationById: function getAnnotationById(annotationId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/annotations/\" + annotationId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotations: function getAnnotations(callback) {\n    var url = AnnotationAPI.annotationServer + \"/annotations/\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationsByTarget: function getAnnotationsByTarget(targetId, accessStatus, callback) {\n    if (typeof targetId !== \"string\") {\n      var error = new TypeError(\"resource ID should be string\");\n      return callback(error, null);\n    }\n\n    var url = AnnotationAPI.annotationServer + \"/annotations/\" + \"?\" + \"target_id=\" + targetId + \"&access_status=\" + accessStatus.join(\",\") + \"&include_permissions=true\";\n    var options = {\n      headers: {\n        \"Prefer\": \"return=representation;include='http://www.w3.org/ns/oa#PreferContainedDescriptions'\"\n      },\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationsByTargets: function getAnnotationsByTargets(targetIds, accessStatus, callback) {\n    var annotations = [];\n    var ids = [];\n    targetIds.forEach(function (targetId, targetIndex) {\n      AnnotationAPI.getAnnotationsByTarget(targetId, accessStatus, function (error, annotationContainer) {\n        if (error) return callback(error, null);\n        var items = [];\n\n        if (annotationContainer.first && annotationContainer.first.hasOwnProperty(\"items\")) {\n          items = annotationContainer.first.items;\n        }\n\n        items.forEach(function (annotation, index) {\n          if (ids.indexOf(annotation.id) === -1) {\n            ids.push(annotation.id);\n            annotations.push(annotation);\n          }\n\n          if (index === items.length - 1 && targetIndex === targetIds.length - 1) {\n            return callback(null, annotations);\n          }\n        });\n\n        if (annotationContainer.total === 0) {\n          if (targetIndex === targetIds.length - 1) {\n            return callback(null, annotations);\n          }\n        }\n      });\n    });\n  },\n  deleteAnnotation: function deleteAnnotation(annotation, callback) {\n    if (!annotation.id) {\n      var error = Error(\"annotation MUST have an id property\");\n      callback(error, null);\n    } //let url = AnnotationAPI.annotationServer + \"/annotations/\" + annotation.id;\n\n\n    var url = annotation.id;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  deleteAnnotationById: function deleteAnnotationById(annotationId, callback) {\n    //let url = AnnotationAPI.annotationServer + \"/annotations/\" + annotationId;\n    var url = annotationId;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollections: function getCollections(callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections/\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollection: function getCollection(collectionId, callback) {\n    //let url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId;\n    var url = collectionId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollectionPage: function getCollectionPage(pageURL, callback) {\n    //let url = AnnotationAPI.annotationServer + '/pages/' + pageId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(pageURL, options, function (error, data) {\n      if (error) {\n        return callback(error, null);\n      }\n\n      var items = [];\n\n      if (data && data.first && data.first instanceof Object && data.first.items) {\n        items = data.first.items;\n      }\n\n      return callback(error, items);\n    });\n  },\n  saveCollection: function saveCollection(collection, callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections/\";\n    var method = \"POST\"; // if annotation already has an id, it's an update, so PUT\n\n    if (collection.id) {\n      //url = AnnotationAPI.annotationServer + \"/collections/\" + collection.id;\n      url = collection.id;\n      method = \"PUT\";\n    }\n\n    var options = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(collection)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  deleteCollection: function deleteCollection(collection, callback) {\n    if (!collection.id) {\n      var error = Error(\"collection MUST have an id property\");\n      callback(error, null);\n    } //let url = AnnotationAPI.annotationServer + \"/collections/\" + collection.id;\n\n\n    var url = collection.id;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  addAnnotation: function addAnnotation(collectionId, annotation, callback) {\n    //let url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId + \"/annotations/\";\n    var url = clllectionId + \"/annotations/\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(annotation)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  removeAnnotation: function removeAnnotation(collectionId, annotationId, callback) {\n    //let url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId + \"/annotations/\" + annotationId;\n    var url = clllectionId + \"/annotations/\" + annotationId;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  registerUser: function registerUser(userDetails, callback) {\n    var url = AnnotationAPI.annotationServer + \"/users/\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userDetails)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, authorizationData) {\n      if (!error) {\n        userDetails.user_id = authorizationData.user.username;\n        userDetails.token = authorizationData.user.token;\n        AnnotationAPI.setUserDetails(userDetails);\n      }\n\n      return callback(error, authorizationData);\n    });\n  },\n  loginUser: function loginUser(userDetails, callback) {\n    AnnotationAPI.setUserDetails(userDetails);\n    var url = AnnotationAPI.annotationServer + \"/users/login\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userDetails)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, authorizationData) {\n      if (!error) {\n        userDetails.user_id = authorizationData.user.username;\n        userDetails.token = authorizationData.user.token;\n        AnnotationAPI.setUserDetails(userDetails);\n      }\n\n      return callback(error, authorizationData);\n    });\n  },\n  logoutUser: function logoutUser(callback) {\n    var url = AnnotationAPI.annotationServer + \"/users/logout\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      AnnotationAPI.removeUserDetails();\n      return callback(error, data);\n    });\n  },\n  deleteUser: function deleteUser(userDetails, callback) {\n    var url = AnnotationAPI.annotationServer + \"/users\";\n    var options = {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": \"Basic \" + btoa(userDetails.username + \":\" + userDetails.password)\n      }\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      AnnotationAPI.removeUserDetails();\n      return callback(error, data);\n    });\n  },\n  checkResource: function checkResource(resourceId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/resources/\" + resourceId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  registerResource: function registerResource(resourceMap, callback) {\n    var url = AnnotationAPI.annotationServer + \"/resources\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(resourceMap)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationAPI);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL0Fubm90YXRpb25BUEkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvYXBpL0Fubm90YXRpb25BUEkuanM/OGU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcblwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBBbm5vdGF0aW9uQVBJID0ge1xuXG4gICAgYW5ub3RhdGlvblNlcnZlciA6IG51bGwsXG5cbiAgICB1c2VyRGV0YWlscyA6IG51bGwsXG5cbiAgICBwZXJtaXNzaW9ucyA6IHtcbiAgICAgICAgYWNjZXNzU3RhdHVzIDogXCJwcml2YXRlXCIgLy8gZGVmYXVsdCBzZXR0aW5nIGlzIHByaXZhdGVcbiAgICB9LFxuXG4gICAgc2VydmVyTm90U2V0IDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gRXJyb3IoXCJObyBhbm5vdGF0aW9uIHNlcnZlciBjb25maWd1cmVkLlwiKTtcbiAgICB9LFxuXG4gICAgc2V0U2VydmVyQWRkcmVzcyA6IChhcGlVUkwpID0+IHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyID0gYXBpVVJMO1xuICAgIH0sXG5cbiAgICBnZXRTZXJ2ZXJBZGRyZXNzIDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyO1xuICAgIH0sXG5cbiAgICBjaGVja1NlcnZlckF2YWlsYWJsZSA6IChjYWxsYmFjaykgPT4ge1xuICAgICAgICBmZXRjaChBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIsIHt9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICAgIC8vcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgLy99KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAvL30pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgc2V0VXNlckRldGFpbHMgOiAodXNlckRldGFpbHMpID0+IHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS51c2VyRGV0YWlscyA9IHVzZXJEZXRhaWxzO1xuICAgIH0sXG5cbiAgICBzZXRQZXJtaXNzaW9ucyA6IChwZXJtaXNzaW9ucykgPT4ge1xuICAgICAgICBpZiAocGVybWlzc2lvbnMuaGFzT3duUHJvcGVydHkoXCJhY2Nlc3NTdGF0dXNcIikpIHtcbiAgICAgICAgICAgIGlmICghW1wicHJpdmF0ZVwiLCBcInNoYXJlZFwiLCBcInB1YmxpY1wiXS5pbmNsdWRlcyhwZXJtaXNzaW9ucy5hY2Nlc3NTdGF0dXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVycm9yKFwiSW52YWxpZCBhY2Nlc3NTdGF0dXMgb3B0aW9uLiBNdXN0IGJlICdwcml2YXRlJywgJ3NoYXJlZCcgb3IgJ3B1YmxpYydcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBbm5vdGF0aW9uQVBJLnBlcm1pc3Npb25zLmFjY2Vzc1N0YXR1cyA9IHBlcm1pc3Npb25zLmFjY2Vzc1N0YXR1cztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRQZXJtaXNzaW9ucyA6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25BUEkucGVybWlzc2lvbnM7XG4gICAgfSxcblxuICAgIHJlbW92ZVVzZXJEZXRhaWxzIDogKCkgPT4ge1xuICAgICAgICBBbm5vdGF0aW9uQVBJLnVzZXJEZXRhaWxzID0gbnVsbDtcbiAgICB9LFxuXG4gICAgbWFrZVJlcXVlc3QgOiBmdW5jdGlvbih1cmwsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyKVxuICAgICAgICAgICAgY2FsbGJhY2soQW5ub3RhdGlvbkFQSS5zZXJ2ZXJOb3RTZXQoKSwgbnVsbCk7XG4gICAgICAgIHZhciBzdGF0dXMgPSBudWxsO1xuICAgICAgICBvcHRpb25zLmNhY2hlID0gXCJuby1jYWNoZVwiO1xuICAgICAgICBvcHRpb25zLm1vZGUgPSBcImNvcnNcIjtcbiAgICAgICAgaWYgKEFubm90YXRpb25BUEkudXNlckRldGFpbHMpIHtcbiAgICAgICAgICAgIEFubm90YXRpb25BUEkuYWRkQXV0aG9yaXphdGlvbihvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAyMDQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMgJiYgQW5ub3RhdGlvbkFQSS51c2VyRGV0YWlscyAmJiBBbm5vdGF0aW9uQVBJLnVzZXJEZXRhaWxzLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9rZW4gZXhwaXJlZCwgcmVtb3ZlIHRva2VuXG4gICAgICAgICAgICAgICAgZGVsZXRlIEFubm90YXRpb25BUEkudXNlckRldGFpbHMudG9rZW47XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyRGV0YWlsc1wiLCBKU09OLnN0cmluZ2lmeShBbm5vdGF0aW9uQVBJLnVzZXJEZXRhaWxzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA1MDApe1xuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgYWRkQXV0aG9yaXphdGlvbiA6IChvcHRpb25zKSA9PiB7XG4gICAgICAgIGlmICghb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcImhlYWRlcnNcIikpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdXRob3JpemF0aW9uU3RyaW5nID0gXCJcIjtcbiAgICAgICAgaWYgKEFubm90YXRpb25BUEkudXNlckRldGFpbHMudG9rZW4pIHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25TdHJpbmcgPSBBbm5vdGF0aW9uQVBJLnVzZXJEZXRhaWxzLnRva2VuK1wiOnVudXNlZFwiO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uU3RyaW5nID0gQW5ub3RhdGlvbkFQSS51c2VyRGV0YWlscy51c2VybmFtZStcIjpcIitBbm5vdGF0aW9uQVBJLnVzZXJEZXRhaWxzLnBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJhc2ljIFwiICsgYnRvYShhdXRob3JpemF0aW9uU3RyaW5nKTtcbiAgICB9LFxuXG4gICAgc2F2ZUFubm90YXRpb24gOiAoYW5ub3RhdGlvbiwgcGVybWlzc2lvbiwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgLy8gZGVmYXVsdCBpcyBQT1NUaW5nIGEgbmV3IGFubm90YXRpb25cbiAgICAgICAgdmFyIHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2Fubm90YXRpb25zL1wiO1xuICAgICAgICB2YXIgbWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICAgICAgLy8gaWYgYW5ub3RhdGlvbiBhbHJlYWR5IGhhcyBhbiBpZCwgaXQncyBhbiB1cGRhdGUsIHNvIFBVVFxuICAgICAgICBpZihhbm5vdGF0aW9uLmlkKSB7XG4gICAgICAgICAgICB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyBcIi9hbm5vdGF0aW9ucy9cIiArIGFubm90YXRpb24uaWQ7XG4gICAgICAgICAgICB1cmwgPSBhbm5vdGF0aW9uLmlkO1xuICAgICAgICAgICAgbWV0aG9kID0gXCJQVVRcIjtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSB1cmwgKyBcIj9hY2Nlc3Nfc3RhdHVzPVwiICsgcGVybWlzc2lvbjtcblxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYW5ub3RhdGlvbilcbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEFubm90YXRpb25CeUlkIDogZnVuY3Rpb24oYW5ub3RhdGlvbklkLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvYW5ub3RhdGlvbnMvXCIgKyBhbm5vdGF0aW9uSWQ7XG4gICAgICAgIGxldCBvcHRpb25zID0geyBtZXRob2Q6IFwiR0VUXCIgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEFubm90YXRpb25zIDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2Fubm90YXRpb25zL1wiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiBcIkdFVFwiIH07XG4gICAgICAgIEFubm90YXRpb25BUEkubWFrZVJlcXVlc3QodXJsLCBvcHRpb25zLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRBbm5vdGF0aW9uc0J5VGFyZ2V0IDogKHRhcmdldElkLCBhY2Nlc3NTdGF0dXMsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YodGFyZ2V0SWQpICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgVHlwZUVycm9yKFwicmVzb3VyY2UgSUQgc2hvdWxkIGJlIHN0cmluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2Fubm90YXRpb25zL1wiICsgXCI/XCJcbiAgICAgICAgKyBcInRhcmdldF9pZD1cIiArIHRhcmdldElkXG4gICAgICAgICsgXCImYWNjZXNzX3N0YXR1cz1cIiArIGFjY2Vzc1N0YXR1cy5qb2luKFwiLFwiKVxuICAgICAgICArIFwiJmluY2x1ZGVfcGVybWlzc2lvbnM9dHJ1ZVwiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIlByZWZlclwiOiBcInJldHVybj1yZXByZXNlbnRhdGlvbjtpbmNsdWRlPSdodHRwOi8vd3d3LnczLm9yZy9ucy9vYSNQcmVmZXJDb250YWluZWREZXNjcmlwdGlvbnMnXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCJcbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEFubm90YXRpb25zQnlUYXJnZXRzIDogKHRhcmdldElkcywgYWNjZXNzU3RhdHVzLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICB2YXIgYW5ub3RhdGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICB0YXJnZXRJZHMuZm9yRWFjaCgodGFyZ2V0SWQsIHRhcmdldEluZGV4KSA9PiB7XG4gICAgICAgICAgICBBbm5vdGF0aW9uQVBJLmdldEFubm90YXRpb25zQnlUYXJnZXQodGFyZ2V0SWQsIGFjY2Vzc1N0YXR1cywgKGVycm9yLCBhbm5vdGF0aW9uQ29udGFpbmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25Db250YWluZXIuZmlyc3QgJiYgYW5ub3RhdGlvbkNvbnRhaW5lci5maXJzdC5oYXNPd25Qcm9wZXJ0eShcIml0ZW1zXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gYW5ub3RhdGlvbkNvbnRhaW5lci5maXJzdC5pdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoYW5ub3RhdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkcy5pbmRleE9mKGFubm90YXRpb24uaWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9ucy5wdXNoKGFubm90YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gaXRlbXMubGVuZ3RoIC0gMSAmJiB0YXJnZXRJbmRleCA9PT0gdGFyZ2V0SWRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBhbm5vdGF0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoYW5ub3RhdGlvbkNvbnRhaW5lci50b3RhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SW5kZXggPT09IHRhcmdldElkcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYW5ub3RhdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBkZWxldGVBbm5vdGF0aW9uIDogZnVuY3Rpb24gKGFubm90YXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmKCFhbm5vdGF0aW9uLmlkKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBFcnJvcihcImFubm90YXRpb24gTVVTVCBoYXZlIGFuIGlkIHByb3BlcnR5XCIpO1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIC8vbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2Fubm90YXRpb25zL1wiICsgYW5ub3RhdGlvbi5pZDtcbiAgICAgICAgbGV0IHVybCA9IGFubm90YXRpb24uaWQ7XG4gICAgICAgIGxldCBvcHRpb25zID0geyBtZXRob2Q6IFwiREVMRVRFXCIgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGRlbGV0ZUFubm90YXRpb25CeUlkIDogZnVuY3Rpb24gKGFubm90YXRpb25JZCwgY2FsbGJhY2spIHtcbiAgICAgICAgLy9sZXQgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvYW5ub3RhdGlvbnMvXCIgKyBhbm5vdGF0aW9uSWQ7XG4gICAgICAgIGxldCB1cmwgPSBhbm5vdGF0aW9uSWQ7XG4gICAgICAgIGxldCBvcHRpb25zID0geyBtZXRob2Q6IFwiREVMRVRFXCIgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldENvbGxlY3Rpb25zIDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2NvbGxlY3Rpb25zL1wiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiBcIkdFVFwiIH07XG4gICAgICAgIEFubm90YXRpb25BUEkubWFrZVJlcXVlc3QodXJsLCBvcHRpb25zLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRDb2xsZWN0aW9uIDogZnVuY3Rpb24oY29sbGVjdGlvbklkLCBjYWxsYmFjaykge1xuICAgICAgICAvL2xldCB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyBcIi9jb2xsZWN0aW9ucy9cIiArIGNvbGxlY3Rpb25JZDtcbiAgICAgICAgbGV0IHVybCA9IGNvbGxlY3Rpb25JZDtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogXCJHRVRcIiB9O1xuICAgICAgICBBbm5vdGF0aW9uQVBJLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0Q29sbGVjdGlvblBhZ2UgOiBmdW5jdGlvbihwYWdlVVJMLCBjYWxsYmFjaykge1xuICAgICAgICAvL2xldCB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyAnL3BhZ2VzLycgKyBwYWdlSWQ7XG4gICAgICAgIGxldCBvcHRpb25zID0geyBtZXRob2Q6IFwiR0VUXCIgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdChwYWdlVVJMLCBvcHRpb25zLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5maXJzdCAmJiBkYXRhLmZpcnN0IGluc3RhbmNlb2YgT2JqZWN0ICYmIGRhdGEuZmlyc3QuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IGRhdGEuZmlyc3QuaXRlbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGl0ZW1zKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNhdmVDb2xsZWN0aW9uIDogZnVuY3Rpb24oY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2NvbGxlY3Rpb25zL1wiO1xuICAgICAgICBsZXQgbWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICAgICAgLy8gaWYgYW5ub3RhdGlvbiBhbHJlYWR5IGhhcyBhbiBpZCwgaXQncyBhbiB1cGRhdGUsIHNvIFBVVFxuICAgICAgICBpZihjb2xsZWN0aW9uLmlkKSB7XG4gICAgICAgICAgICAvL3VybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2NvbGxlY3Rpb25zL1wiICsgY29sbGVjdGlvbi5pZDtcbiAgICAgICAgICAgIHVybCA9IGNvbGxlY3Rpb24uaWQ7XG4gICAgICAgICAgICBtZXRob2QgPSBcIlBVVFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNvbGxlY3Rpb24pLFxuICAgICAgICB9O1xuICAgICAgICBBbm5vdGF0aW9uQVBJLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZGVsZXRlQ29sbGVjdGlvbiA6IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xuICAgICAgICBpZighY29sbGVjdGlvbi5pZCkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gRXJyb3IoXCJjb2xsZWN0aW9uIE1VU1QgaGF2ZSBhbiBpZCBwcm9wZXJ0eVwiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICAvL2xldCB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyBcIi9jb2xsZWN0aW9ucy9cIiArIGNvbGxlY3Rpb24uaWQ7XG4gICAgICAgIGxldCB1cmwgPSBjb2xsZWN0aW9uLmlkO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiBcIkRFTEVURVwiIH07XG4gICAgICAgIEFubm90YXRpb25BUEkubWFrZVJlcXVlc3QodXJsLCBvcHRpb25zLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhZGRBbm5vdGF0aW9uIDogZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCwgYW5ub3RhdGlvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgLy9sZXQgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvY29sbGVjdGlvbnMvXCIgKyBjb2xsZWN0aW9uSWQgKyBcIi9hbm5vdGF0aW9ucy9cIjtcbiAgICAgICAgbGV0IHVybCA9IGNsbGxlY3Rpb25JZCArIFwiL2Fubm90YXRpb25zL1wiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhbm5vdGF0aW9uKSxcbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlbW92ZUFubm90YXRpb24gOiBmdW5jdGlvbiAoY29sbGVjdGlvbklkLCBhbm5vdGF0aW9uSWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIC8vbGV0IHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL2NvbGxlY3Rpb25zL1wiICsgY29sbGVjdGlvbklkICsgXCIvYW5ub3RhdGlvbnMvXCIgKyBhbm5vdGF0aW9uSWQ7XG4gICAgICAgIGxldCB1cmwgPSBjbGxsZWN0aW9uSWQgKyBcIi9hbm5vdGF0aW9ucy9cIiArIGFubm90YXRpb25JZDtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogXCJERUxFVEVcIiB9O1xuICAgICAgICBBbm5vdGF0aW9uQVBJLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXJVc2VyIDogZnVuY3Rpb24odXNlckRldGFpbHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyBcIi91c2Vycy9cIjtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckRldGFpbHMpXG4gICAgICAgIH07XG4gICAgICAgIEFubm90YXRpb25BUEkubWFrZVJlcXVlc3QodXJsLCBvcHRpb25zLCAoZXJyb3IsIGF1dGhvcml6YXRpb25EYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICAgICAgdXNlckRldGFpbHMudXNlcl9pZCA9IGF1dGhvcml6YXRpb25EYXRhLnVzZXIudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgdXNlckRldGFpbHMudG9rZW4gPSBhdXRob3JpemF0aW9uRGF0YS51c2VyLnRva2VuO1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25BUEkuc2V0VXNlckRldGFpbHModXNlckRldGFpbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBhdXRob3JpemF0aW9uRGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBsb2dpblVzZXIgOiBmdW5jdGlvbih1c2VyRGV0YWlscywgY2FsbGJhY2spIHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5zZXRVc2VyRGV0YWlscyh1c2VyRGV0YWlscyk7XG4gICAgICAgIHZhciB1cmwgPSBBbm5vdGF0aW9uQVBJLmFubm90YXRpb25TZXJ2ZXIgKyBcIi91c2Vycy9sb2dpblwiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyRGV0YWlscylcbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgYXV0aG9yaXphdGlvbkRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB1c2VyRGV0YWlscy51c2VyX2lkID0gYXV0aG9yaXphdGlvbkRhdGEudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgICAgICB1c2VyRGV0YWlscy50b2tlbiA9IGF1dGhvcml6YXRpb25EYXRhLnVzZXIudG9rZW47XG4gICAgICAgICAgICAgICAgQW5ub3RhdGlvbkFQSS5zZXRVc2VyRGV0YWlscyh1c2VyRGV0YWlscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGF1dGhvcml6YXRpb25EYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGxvZ291dFVzZXIgOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICB2YXIgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvdXNlcnMvbG9nb3V0XCI7XG4gICAgICAgIGxldCBvcHRpb25zID0geyBtZXRob2Q6IFwiR0VUXCIgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFQSS5yZW1vdmVVc2VyRGV0YWlscygpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGRlbGV0ZVVzZXIgOiBmdW5jdGlvbih1c2VyRGV0YWlscywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHVybCA9IEFubm90YXRpb25BUEkuYW5ub3RhdGlvblNlcnZlciArIFwiL3VzZXJzXCI7XG4gICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYSh1c2VyRGV0YWlscy51c2VybmFtZStcIjpcIit1c2VyRGV0YWlscy5wYXNzd29yZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5tYWtlUmVxdWVzdCh1cmwsIG9wdGlvbnMsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFQSS5yZW1vdmVVc2VyRGV0YWlscygpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNoZWNrUmVzb3VyY2UgOiBmdW5jdGlvbihyZXNvdXJjZUlkLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvcmVzb3VyY2VzL1wiICsgcmVzb3VyY2VJZDtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogXCJHRVRcIiB9O1xuICAgICAgICBBbm5vdGF0aW9uQVBJLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXJSZXNvdXJjZSA6IGZ1bmN0aW9uKHJlc291cmNlTWFwLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgdXJsID0gQW5ub3RhdGlvbkFQSS5hbm5vdGF0aW9uU2VydmVyICsgXCIvcmVzb3VyY2VzXCI7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlc291cmNlTWFwKVxuICAgICAgICB9O1xuICAgICAgICBBbm5vdGF0aW9uQVBJLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBbm5vdGF0aW9uQVBJO1xuIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQWpZQTtBQW9ZQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/AnnotationAPI.js\n");

/***/ }),

/***/ "./src/components/AnnotationClient.jsx":
/*!*********************************************!*\
  !*** ./src/components/AnnotationClient.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnnotationClient; });\n/* harmony import */ var _ViewSelector_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ViewSelector.jsx */ \"./src/components/ViewSelector.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _annotation_AnnotationViewer_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./annotation/AnnotationViewer.jsx */ \"./src/components/annotation/AnnotationViewer.jsx\");\n/* harmony import */ var _collection_CollectionViewer_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection/CollectionViewer.jsx */ \"./src/components/collection/CollectionViewer.jsx\");\n/* harmony import */ var _resource_ResourceViewer_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resource/ResourceViewer.jsx */ \"./src/components/resource/ResourceViewer.jsx\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _LoginBox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LoginBox */ \"./src/components/LoginBox.jsx\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n //import '../css/swa.css';\n\nvar AnnotationClient =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationClient, _React$Component);\n\n  function AnnotationClient(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationClient);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationClient).call(this, props));\n    _this.state = {\n      user: null,\n      view: \"annotations\",\n      serverAvailable: false,\n      accessStatus: _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].accessStatus //accessStatus: [\"private\", \"public\"],\n\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationClient, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_5__[\"default\"].bind('login-succeeded', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_5__[\"default\"].bind('register-succeeded', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_5__[\"default\"].bind('logout-user', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_5__[\"default\"].bind('server-status-change', this.setServerAvailable.bind(this));\n    }\n  }, {\n    key: \"setServerAvailable\",\n    value: function setServerAvailable(serverAvailable) {\n      this.setState({\n        serverAvailable: serverAvailable\n      });\n    }\n  }, {\n    key: \"setUser\",\n    value: function setUser(user) {\n      this.setState({\n        user: user\n      });\n    }\n  }, {\n    key: \"handleAccessPreferenceChange\",\n    value: function handleAccessPreferenceChange(event) {\n      var level = event.target.value;\n      var accessStatus = this.state.accessStatus;\n\n      if (!accessStatus.includes(level)) {\n        accessStatus.push(level);\n      } else {\n        accessStatus.splice(accessStatus.indexOf(level), 1);\n      }\n\n      this.setState({\n        accessStatus: accessStatus\n      });\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setAccessStatus(accessStatus);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var annotationViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_annotation_AnnotationViewer_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      });\n      var collectionViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_collection_CollectionViewer_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      });\n      /*\n      let resourceViewer = null;\n      */\n\n      var resourceViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_resource_ResourceViewer_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      }); //let itemTypes = [\"annotations\", \"resources\"];\n\n      var itemTypes = [\"annotations\", \"collections\", \"resources\"];\n      var viewer;\n      var viewerTabContents = itemTypes.map(function (itemType) {\n        if (itemType === \"annotations\") viewer = annotationViewer;\n        if (itemType === \"collections\") viewer = collectionViewer;\n        if (itemType === \"resources\") viewer = resourceViewer;\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n          key: itemType + '__tab_content',\n          id: itemType,\n          className: _this2.state.view === itemType ? 'tab-pane active' : 'tab-pane'\n        }, viewer);\n      });\n      var accessPreferences = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"access-preferences\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, \"Show:\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"label\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", {\n        type: \"checkbox\",\n        value: \"private\",\n        checked: this.state.accessStatus.includes(\"private\"),\n        onChange: this.handleAccessPreferenceChange.bind(this)\n      }), \"Private annotations\")), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"label\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", {\n        type: \"checkbox\",\n        value: \"public\",\n        checked: this.state.accessStatus.includes(\"public\"),\n        onChange: this.handleAccessPreferenceChange.bind(this)\n      }), \"Public annotations\")));\n      var viewerTabs = itemTypes.map(function (itemType) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"li\", {\n          key: itemType + '__tab_option',\n          className: \"nav-item viewer-tab \"\n        }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + itemType,\n          className: component.state.view === itemType ? 'nav-link active' : 'nav-link'\n        }, itemType));\n      });\n      var indicator = \"led-red\";\n\n      if (this.state.serverAvailable) {\n        indicator = \"led-green\";\n      }\n\n      var serverAvailable = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: indicator\n      });\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"annotationClient\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"h1\", {\n        className: \"col\"\n      }, \"Annotator\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col-auto\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoginBox__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        user: this.state.user\n      }))), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"server-status row\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col\"\n      }, \"Annotation server status:\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col-auto\"\n      }, serverAvailable)), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs nav-fill viewer-tabs\"\n      }, viewerTabs), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, accessPreferences, viewerTabContents)));\n    }\n  }]);\n\n  return AnnotationClient;\n}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9Bbm5vdGF0aW9uQ2xpZW50LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL0Fubm90YXRpb25DbGllbnQuanN4P2YxNDgiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIGFubm90YXRlLXJkZmEuanMgYWxsb3dzIHVzZXIgdG8gc2VsZWN0IFJERkEtbGFiZWxlZCB0ZXh0IGZyYWdtZW50c1xuICogaW4gUkRGYSBlbnJpY2hlZCBIVE1MIGRvY3VtZW50cy5cbiAqXG4gKi9cblxuLy8gVE8gRE86IGRlYWwgd2l0aCBlbGVtZW50cyB0aGF0IGhhdmUgbXVsdGlwbGUgdHlwZXNcblxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBWaWV3U2VsZWN0b3IgZnJvbSAnLi9WaWV3U2VsZWN0b3IuanN4JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQW5ub3RhdGlvblZpZXdlciBmcm9tICcuL2Fubm90YXRpb24vQW5ub3RhdGlvblZpZXdlci5qc3gnO1xuaW1wb3J0IENvbGxlY3Rpb25WaWV3ZXIgZnJvbSAnLi9jb2xsZWN0aW9uL0NvbGxlY3Rpb25WaWV3ZXIuanN4JztcbmltcG9ydCBSZXNvdXJjZVZpZXdlciBmcm9tICcuL3Jlc291cmNlL1Jlc291cmNlVmlld2VyLmpzeCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4uL2ZsdXgvQW5ub3RhdGlvbkFjdGlvbnMuanMnO1xuaW1wb3J0IExvZ2luQm94IGZyb20gJy4vTG9naW5Cb3gnO1xuLy9pbXBvcnQgJy4uL2Nzcy9zd2EuY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5ub3RhdGlvbkNsaWVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICAgIHZpZXc6IFwiYW5ub3RhdGlvbnNcIixcbiAgICAgICAgICAgIHNlcnZlckF2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBhY2Nlc3NTdGF0dXM6IEFubm90YXRpb25BY3Rpb25zLmFjY2Vzc1N0YXR1cyxcbiAgICAgICAgICAgIC8vYWNjZXNzU3RhdHVzOiBbXCJwcml2YXRlXCIsIFwicHVibGljXCJdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2xvZ2luLXN1Y2NlZWRlZCcsIHRoaXMuc2V0VXNlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ3JlZ2lzdGVyLXN1Y2NlZWRlZCcsIHRoaXMuc2V0VXNlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2xvZ291dC11c2VyJywgdGhpcy5zZXRVc2VyLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgnc2VydmVyLXN0YXR1cy1jaGFuZ2UnLCB0aGlzLnNldFNlcnZlckF2YWlsYWJsZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc2V0U2VydmVyQXZhaWxhYmxlKHNlcnZlckF2YWlsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZXJ2ZXJBdmFpbGFibGU6IHNlcnZlckF2YWlsYWJsZX0pO1xuICAgIH1cbiAgICBzZXRVc2VyKHVzZXIpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXNlcjogdXNlcn0pO1xuICAgIH1cbiAgICBoYW5kbGVBY2Nlc3NQcmVmZXJlbmNlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGxldCBsZXZlbCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgdmFyIGFjY2Vzc1N0YXR1cyA9IHRoaXMuc3RhdGUuYWNjZXNzU3RhdHVzO1xuICAgICAgICBpZiAoIWFjY2Vzc1N0YXR1cy5pbmNsdWRlcyhsZXZlbCkpIHtcbiAgICAgICAgICAgIGFjY2Vzc1N0YXR1cy5wdXNoKGxldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjY2Vzc1N0YXR1cy5zcGxpY2UoYWNjZXNzU3RhdHVzLmluZGV4T2YobGV2ZWwpLCAxKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGFjY2Vzc1N0YXR1czogYWNjZXNzU3RhdHVzXG4gICAgICAgIH0pO1xuICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5zZXRBY2Nlc3NTdGF0dXMoYWNjZXNzU3RhdHVzKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcbiAgICAgICAgbGV0IGFubm90YXRpb25WaWV3ZXIgPSAoXG4gICAgICAgICAgICA8QW5ub3RhdGlvblZpZXdlclxuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyPXt0aGlzLnN0YXRlLnVzZXJ9XG4gICAgICAgICAgICAgICAgY29uZmlnPXt0aGlzLnByb3BzLmNvbmZpZ31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb2xsZWN0aW9uVmlld2VyID0gKFxuICAgICAgICAgICAgPENvbGxlY3Rpb25WaWV3ZXJcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17dGhpcy5zdGF0ZS51c2VyfVxuICAgICAgICAgICAgICAgIGNvbmZpZz17dGhpcy5wcm9wcy5jb25maWd9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICAvKlxuICAgICAgICBsZXQgcmVzb3VyY2VWaWV3ZXIgPSBudWxsO1xuICAgICAgICAqL1xuICAgICAgICBsZXQgcmVzb3VyY2VWaWV3ZXIgPSAoXG4gICAgICAgICAgICA8UmVzb3VyY2VWaWV3ZXJcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17dGhpcy5zdGF0ZS51c2VyfVxuICAgICAgICAgICAgICAgIGNvbmZpZz17dGhpcy5wcm9wcy5jb25maWd9XG4gICAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICAgIC8vbGV0IGl0ZW1UeXBlcyA9IFtcImFubm90YXRpb25zXCIsIFwicmVzb3VyY2VzXCJdO1xuICAgICAgICBsZXQgaXRlbVR5cGVzID0gW1wiYW5ub3RhdGlvbnNcIiwgXCJjb2xsZWN0aW9uc1wiLCBcInJlc291cmNlc1wiXTtcbiAgICAgICAgdmFyIHZpZXdlcjtcbiAgICAgICAgbGV0IHZpZXdlclRhYkNvbnRlbnRzID0gaXRlbVR5cGVzLm1hcCgoaXRlbVR5cGUpID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtVHlwZSA9PT0gXCJhbm5vdGF0aW9uc1wiKVxuICAgICAgICAgICAgICAgIHZpZXdlciA9IGFubm90YXRpb25WaWV3ZXI7XG4gICAgICAgICAgICBpZiAoaXRlbVR5cGUgPT09IFwiY29sbGVjdGlvbnNcIilcbiAgICAgICAgICAgICAgICB2aWV3ZXIgPSBjb2xsZWN0aW9uVmlld2VyO1xuICAgICAgICAgICAgaWYgKGl0ZW1UeXBlID09PSBcInJlc291cmNlc1wiKVxuICAgICAgICAgICAgICAgIHZpZXdlciA9IHJlc291cmNlVmlld2VyO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aXRlbVR5cGUgKyAnX190YWJfY29udGVudCd9XG4gICAgICAgICAgICAgICAgICAgIGlkPXtpdGVtVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLnZpZXcgPT09IGl0ZW1UeXBlID8gJ3RhYi1wYW5lIGFjdGl2ZScgOiAndGFiLXBhbmUnfT5cbiAgICAgICAgICAgICAgICAgICAge3ZpZXdlcn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBhY2Nlc3NQcmVmZXJlbmNlcyA9IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2Nlc3MtcHJlZmVyZW5jZXNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXY+U2hvdzo8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwicHJpdmF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5hY2Nlc3NTdGF0dXMuaW5jbHVkZXMoXCJwcml2YXRlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY2Vzc1ByZWZlcmVuY2VDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICBQcml2YXRlIGFubm90YXRpb25zPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwicHVibGljXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmFjY2Vzc1N0YXR1cy5pbmNsdWRlcyhcInB1YmxpY1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVBY2Nlc3NQcmVmZXJlbmNlQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgUHVibGljIGFubm90YXRpb25zPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHZpZXdlclRhYnMgPSBpdGVtVHlwZXMubWFwKChpdGVtVHlwZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtVHlwZSArICdfX3RhYl9vcHRpb24nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJuYXYtaXRlbSB2aWV3ZXItdGFiIFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8YSBkYXRhLXRvZ2dsZT1cInRhYlwiIGhyZWY9eycjJyArIGl0ZW1UeXBlfSBjbGFzc05hbWU9e2NvbXBvbmVudC5zdGF0ZS52aWV3ID09PSBpdGVtVHlwZSA/ICduYXYtbGluayBhY3RpdmUnIDogJ25hdi1saW5rJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXRlbVR5cGV9XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaW5kaWNhdG9yID0gXCJsZWQtcmVkXCI7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlcnZlckF2YWlsYWJsZSkge1xuICAgICAgICAgICAgaW5kaWNhdG9yID0gXCJsZWQtZ3JlZW5cIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJ2ZXJBdmFpbGFibGUgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2luZGljYXRvcn0+PC9kaXY+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5ub3RhdGlvbkNsaWVudFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJjb2xcIj5Bbm5vdGF0b3I8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1hdXRvXCI+PExvZ2luQm94IHVzZXI9e3RoaXMuc3RhdGUudXNlcn0vPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VydmVyLXN0YXR1cyByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xcIj5Bbm5vdGF0aW9uIHNlcnZlciBzdGF0dXM6PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLWF1dG9cIj57c2VydmVyQXZhaWxhYmxlfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJuYXYgbmF2LXRhYnMgbmF2LWZpbGwgdmlld2VyLXRhYnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3ZXJUYWJzfVxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YWNjZXNzUHJlZmVyZW5jZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICB7dmlld2VyVGFiQ29udGVudHN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBTUE7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFGQTtBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFFQTtBQUNBO0FBRkE7QUFLQTs7OztBQUdBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFDQTtBQUVBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFHQTtBQUFBO0FBT0E7Ozs7QUFuSkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/AnnotationClient.jsx\n");

/***/ }),

/***/ "./src/components/FlexModal.jsx":
/*!**************************************!*\
  !*** ./src/components/FlexModal.jsx ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar FlexModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FlexModal, _React$Component);\n\n  function FlexModal(props) {\n    var _this;\n\n    _classCallCheck(this, FlexModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FlexModal).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(FlexModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).modal({\n        keyboard: true\n      });\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).modal('show');\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).on('hidden.bs.modal', this.props.handleHideModal);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        id: this.props.elementId,\n        className: \"modal fade\",\n        role: \"dialog\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-dialog modal-lg flex-modal\",\n        role: \"document\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-content\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-header\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", {\n        className: \"modal-title\"\n      }, this.props.title), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        \"aria-hidden\": \"true\"\n      }, \"\\xD7\"))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-body\"\n      }, this.props.children), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-footer\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: this.props.confirmAction,\n        \"data-dismiss\": \"modal\"\n      }, this.props.confirmLabel), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        \"data-dismiss\": \"modal\"\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return FlexModal;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FlexModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9GbGV4TW9kYWwuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvRmxleE1vZGFsLmpzeD9iYWFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJ1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuY2xhc3MgRmxleE1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICQoUmVhY3RET00uZmluZERPTU5vZGUodGhpcykpLm1vZGFsKHtcbiAgICAgICAgICAgIGtleWJvYXJkIDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSkubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSkub24oJ2hpZGRlbi5icy5tb2RhbCcsIHRoaXMucHJvcHMuaGFuZGxlSGlkZU1vZGFsKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGlkPXt0aGlzLnByb3BzLmVsZW1lbnRJZH0gY2xhc3NOYW1lPVwibW9kYWwgZmFkZVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWRpYWxvZyBtb2RhbC1sZyBmbGV4LW1vZGFsXCIgcm9sZT1cImRvY3VtZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwibW9kYWwtdGl0bGVcIj57dGhpcy5wcm9wcy50aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmNvbmZpcm1BY3Rpb259IGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+e3RoaXMucHJvcHMuY29uZmlybUxhYmVsfTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmxleE1vZGFsO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBS0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFNQTs7OztBQXJDQTtBQUNBO0FBdUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/FlexModal.jsx\n");

/***/ }),

/***/ "./src/components/LoginBox.jsx":
/*!*************************************!*\
  !*** ./src/components/LoginBox.jsx ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar LoginBox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginBox, _React$Component);\n\n  function LoginBox(props) {\n    var _this;\n\n    _classCallCheck(this, LoginBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginBox).call(this, props));\n    _this.state = {\n      selectedAction: \"login\",\n      username: \"\",\n      password: \"\",\n      warning: \"\",\n      showLoginModal: false,\n      user: null,\n      loggedIn: false,\n      loginButtonLabel: \"Login\"\n    };\n    return _this;\n  }\n\n  _createClass(LoginBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('login-succeeded', this.loginSuccess.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('register-succeeded', this.loginSuccess.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('login-failed', this.loginFailed.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('register-failed', this.loginFailed.bind(this));\n    }\n  }, {\n    key: \"handleLogin\",\n    value: function handleLogin() {\n      if (!this.state.loggedIn) {\n        this.setState({\n          showLoginModal: true\n        });\n      } else {\n        this.setState({\n          user: null,\n          loggedIn: false,\n          loginButtonLabel: \"Login\"\n        });\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].logoutUser();\n        localStorage.removeItem(\"userDetails\");\n      }\n    }\n  }, {\n    key: \"loginSuccess\",\n    value: function loginSuccess(userDetails) {\n      this.setState({\n        user: userDetails,\n        loggedIn: true,\n        loginButtonLabel: \"Logout \" + userDetails.username,\n        warning: null\n      });\n      localStorage.setItem(\"userDetails\", JSON.stringify(userDetails));\n      this.hideLoginForm();\n    }\n  }, {\n    key: \"loginFailed\",\n    value: function loginFailed(error) {\n      this.setState({\n        warning: error.message\n      });\n    }\n  }, {\n    key: \"showLoginForm\",\n    value: function showLoginForm() {\n      this.setState({\n        showLoginModal: true\n      });\n    }\n  }, {\n    key: \"hideLoginForm\",\n    value: function hideLoginForm() {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#login__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      this.setState({\n        showLoginModal: false\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"handleUsernameChange\",\n    value: function handleUsernameChange(e) {\n      this.setState({\n        username: e.target.value\n      });\n    }\n  }, {\n    key: \"handleActionChange\",\n    value: function handleActionChange(e) {\n      this.setState({\n        selectedAction: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n      var userDetails = {\n        username: this.state.username,\n        password: this.state.password\n      };\n\n      if (this.state.selectedAction === \"register\") {\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerUser(userDetails);\n      } else {\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loginUser(userDetails);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.showModal = this.state.showLoginModal;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.handleLogin.bind(this)\n      }, this.state.loginButtonLabel), this.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        elementId: \"login__modal\",\n        handleHideModal: this.hideLoginForm.bind(this),\n        title: \"Login or Register\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-12 text-right\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"btn-group btn-group-toggle\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: this.state.selectedAction === \"login\" ? \"btn btn-primary active\" : \"btn btn-primary\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"login\",\n        checked: this.state.selectedAction === \"login\",\n        onChange: this.handleActionChange.bind(this)\n      }), \" Login\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: this.state.selectedAction === \"register\" ? \"btn btn-primary active\" : \"btn btn-primary\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"register\",\n        checked: this.state.selectedAction === \"register\",\n        onChange: this.handleActionChange.bind(this)\n      }), \" Register\")))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", {\n        className: \"loginForm\",\n        onSubmit: this.handleSubmit.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        htmlFor: \"loginBoxUsername\"\n      }, \"Username\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        id: \"loginBoxUsername\",\n        type: \"text\",\n        placeholder: \"username\",\n        value: this.state.username,\n        onChange: this.handleUsernameChange.bind(this),\n        className: this.state.warning ? \"form-control is-invalid\" : \"form-control\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"invalid-feedback\"\n      }, this.state.warning)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        htmlFor: \"loginBoxPassword\"\n      }, \"Password\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        id: \"loginBoxPassword\",\n        type: \"password\",\n        placeholder: \"password\",\n        value: this.state.password,\n        onChange: this.handlePasswordChange.bind(this),\n        className: this.state.warning ? \"form-control is-invalid\" : \"form-control\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"invalid-feedback\"\n      }, this.state.warning))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n        className: \"text-right\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        value: this.state.selectedAction === \"login\" ? \"Login\" : \"Register\"\n      }))))))) : null);\n    }\n  }]);\n\n  return LoginBox;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LoginBox);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9Mb2dpbkJveC5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9Mb2dpbkJveC5qc3g/YzZhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZsZXhNb2RhbCBmcm9tICcuL0ZsZXhNb2RhbCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4vLi4vZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucyc7XG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5jbGFzcyBMb2dpbkJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEFjdGlvbjogXCJsb2dpblwiLFxuICAgICAgICAgICAgdXNlcm5hbWU6IFwiXCIsXG4gICAgICAgICAgICBwYXNzd29yZDogXCJcIixcbiAgICAgICAgICAgIHdhcm5pbmc6IFwiXCIsXG4gICAgICAgICAgICBzaG93TG9naW5Nb2RhbDogZmFsc2UsXG4gICAgICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICAgICAgbG9nZ2VkSW46IGZhbHNlLFxuICAgICAgICAgICAgbG9naW5CdXR0b25MYWJlbDogXCJMb2dpblwiXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2xvZ2luLXN1Y2NlZWRlZCcsIHRoaXMubG9naW5TdWNjZXNzLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgncmVnaXN0ZXItc3VjY2VlZGVkJywgdGhpcy5sb2dpblN1Y2Nlc3MuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5iaW5kKCdsb2dpbi1mYWlsZWQnLCB0aGlzLmxvZ2luRmFpbGVkLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgncmVnaXN0ZXItZmFpbGVkJywgdGhpcy5sb2dpbkZhaWxlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBoYW5kbGVMb2dpbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmxvZ2dlZEluKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93TG9naW5Nb2RhbDogdHJ1ZX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBsb2dnZWRJbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9naW5CdXR0b25MYWJlbDogXCJMb2dpblwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEFubm90YXRpb25BY3Rpb25zLmxvZ291dFVzZXIoKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidXNlckRldGFpbHNcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2dpblN1Y2Nlc3ModXNlckRldGFpbHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB1c2VyOiB1c2VyRGV0YWlscyxcbiAgICAgICAgICAgIGxvZ2dlZEluOiB0cnVlLFxuICAgICAgICAgICAgbG9naW5CdXR0b25MYWJlbDogXCJMb2dvdXQgXCIgKyB1c2VyRGV0YWlscy51c2VybmFtZSxcbiAgICAgICAgICAgIHdhcm5pbmc6IG51bGxcbiAgICAgICAgfSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlckRldGFpbHNcIiwgSlNPTi5zdHJpbmdpZnkodXNlckRldGFpbHMpKTtcbiAgICAgICAgdGhpcy5oaWRlTG9naW5Gb3JtKCk7XG4gICAgfVxuXG4gICAgbG9naW5GYWlsZWQoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB3YXJuaW5nOiBlcnJvci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dMb2dpbkZvcm0oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dMb2dpbk1vZGFsOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgaGlkZUxvZ2luRm9ybSgpIHtcbiAgICAgICAgJCgnI2xvZ2luX19tb2RhbCcpLm1vZGFsKCdoaWRlJyk7Ly9UT0RPIHVnbHksIGJ1dCB3aXRob3V0IHRoaXMgdGhlIHN0YXRpYyBiYWNrZHJvcCB3b24ndCBkaXNhcHBlYXIhXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dMb2dpbk1vZGFsOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGhhbmRsZVBhc3N3b3JkQ2hhbmdlKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlVXNlcm5hbWVDaGFuZ2UoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt1c2VybmFtZTogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVBY3Rpb25DaGFuZ2UoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEFjdGlvbjogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCB1c2VyRGV0YWlscyA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnN0YXRlLnVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuc3RhdGUucGFzc3dvcmRcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZEFjdGlvbiA9PT0gXCJyZWdpc3RlclwiKSB7XG4gICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5yZWdpc3RlclVzZXIodXNlckRldGFpbHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMubG9naW5Vc2VyKHVzZXJEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5zaG93TW9kYWwgPSB0aGlzLnN0YXRlLnNob3dMb2dpbk1vZGFsO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1saWdodFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTG9naW4uYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmxvZ2luQnV0dG9uTGFiZWx9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAge3RoaXMuc2hvd01vZGFsID9cbiAgICAgICAgICAgICAgICAgICAgPEZsZXhNb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudElkPVwibG9naW5fX21vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUhpZGVNb2RhbD17dGhpcy5oaWRlTG9naW5Gb3JtLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkxvZ2luIG9yIFJlZ2lzdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIHRleHQtcmlnaHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwIGJ0bi1ncm91cC10b2dnbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLnNlbGVjdGVkQWN0aW9uID09PSBcImxvZ2luXCIgPyBcImJ0biBidG4tcHJpbWFyeSBhY3RpdmVcIiA6IFwiYnRuIGJ0bi1wcmltYXJ5XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgdmFsdWU9XCJsb2dpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLnNlbGVjdGVkQWN0aW9uID09PSBcImxvZ2luXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVBY3Rpb25DaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4gTG9naW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3RoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb24gPT09IFwicmVnaXN0ZXJcIiA/IFwiYnRuIGJ0bi1wcmltYXJ5IGFjdGl2ZVwiIDogXCJidG4gYnRuLXByaW1hcnlcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiB2YWx1ZT1cInJlZ2lzdGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb24gPT09IFwicmVnaXN0ZXJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUFjdGlvbkNoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPiBSZWdpc3RlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwibG9naW5Gb3JtXCIgb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibG9naW5Cb3hVc2VybmFtZVwiPlVzZXJuYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJsb2dpbkJveFVzZXJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInVzZXJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVVzZXJuYW1lQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS53YXJuaW5nID8gXCJmb3JtLWNvbnRyb2wgaXMtaW52YWxpZFwiIDogXCJmb3JtLWNvbnRyb2xcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPnt0aGlzLnN0YXRlLndhcm5pbmd9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImxvZ2luQm94UGFzc3dvcmRcIj5QYXNzd29yZDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibG9naW5Cb3hQYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5wYXNzd29yZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLndhcm5pbmcgPyBcImZvcm0tY29udHJvbCBpcy1pbnZhbGlkXCIgOiBcImZvcm0tY29udHJvbFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnZhbGlkLWZlZWRiYWNrXCI+e3RoaXMuc3RhdGUud2FybmluZ308L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnNlbGVjdGVkQWN0aW9uID09PSBcImxvZ2luXCIgPyBcIkxvZ2luXCIgOiBcIlJlZ2lzdGVyXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0ZsZXhNb2RhbD46IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2luQm94O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBRkE7QUFZQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFjQTs7OztBQXJLQTtBQUNBO0FBdUtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/LoginBox.jsx\n");

/***/ }),

/***/ "./src/components/ViewSelector.jsx":
/*!*****************************************!*\
  !*** ./src/components/ViewSelector.jsx ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ViewSelector; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\nvar ViewSelector =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewSelector, _React$Component);\n\n  function ViewSelector(props) {\n    var _this;\n\n    _classCallCheck(this, ViewSelector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewSelector).call(this, props));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.modes = [\"annotations\", \"collections\", \"resources\"];\n    _this.state = {\n      currentMode: \"annotations\"\n    };\n    return _this;\n  }\n\n  _createClass(ViewSelector, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      console.log(event.target.value);\n      this.setState({\n        currentMode: event.target.value\n      });\n      this.props.handleViewChange(event.target.value);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var modes = this.modes.map(function (mode) {\n        var modeId = \"view-selector-\" + mode;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"option\", {\n          key: modeId,\n          value: mode\n        }, mode);\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"ViewSelector\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"select\", {\n        value: this.state.currentMode,\n        onChange: this.handleChange\n      }, modes));\n    }\n  }]);\n\n  return ViewSelector;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9WaWV3U2VsZWN0b3IuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvVmlld1NlbGVjdG9yLmpzeD8xNDU3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4uL2ZsdXgvQW5ub3RhdGlvbkFjdGlvbnMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3U2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXHRjb25zdHJ1Y3Rvcihwcm9wcykge1xuXHRcdHN1cGVyKHByb3BzKTtcblx0XHR0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy5tb2RlcyA9IFtcImFubm90YXRpb25zXCIsIFwiY29sbGVjdGlvbnNcIiwgXCJyZXNvdXJjZXNcIl07XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGN1cnJlbnRNb2RlOiBcImFubm90YXRpb25zXCJcblx0XHR9XG5cdH1cblxuXHRoYW5kbGVDaGFuZ2UoZXZlbnQpIHtcblx0XHRjb25zb2xlLmxvZyhldmVudC50YXJnZXQudmFsdWUpO1xuXHRcdHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRNb2RlOiBldmVudC50YXJnZXQudmFsdWV9KTtcblx0XHR0aGlzLnByb3BzLmhhbmRsZVZpZXdDaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcblx0fVxuXG5cdHJlbmRlcigpIHtcblx0XHRsZXQgbW9kZXMgPSB0aGlzLm1vZGVzLm1hcCgobW9kZSkgPT4ge1xuXHRcdFx0bGV0IG1vZGVJZCA9IFwidmlldy1zZWxlY3Rvci1cIiArIG1vZGU7XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHQ8b3B0aW9uIGtleT17bW9kZUlkfSB2YWx1ZT17bW9kZX0+e21vZGV9PC9vcHRpb24+XG5cdFx0XHQpO1xuXHRcdH0pO1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cIlZpZXdTZWxlY3RvclwiPlxuXHRcdFx0XHQ8c2VsZWN0IHZhbHVlPXt0aGlzLnN0YXRlLmN1cnJlbnRNb2RlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9PlxuXHRcdFx0XHRcdHttb2Rlc31cblx0XHRcdFx0PC9zZWxlY3Q+XG5cdFx0XHQ8L2Rpdj5cblx0XHQpXG5cdH1cblxufVxuXG5cbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUpBO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFLQTs7OztBQTlCQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/ViewSelector.jsx\n");

/***/ }),

/***/ "./src/components/annotation/Annotation.jsx":
/*!**************************************************!*\
  !*** ./src/components/annotation/Annotation.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionStore_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/CollectionStore.js */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../FlexModal */ \"./src/components/FlexModal.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar Annotation =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Annotation, _React$Component);\n\n  function Annotation(props) {\n    var _this;\n\n    _classCallCheck(this, Annotation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Annotation).call(this, props));\n    _this.state = {\n      highlighted: false\n    };\n    return _this;\n  }\n\n  _createClass(Annotation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        targetDOMElements: _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mapTargetsToDOMElements(this.props.annotation)\n      });\n    }\n  }, {\n    key: \"canEdit\",\n    value: function canEdit() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.annotation.creator ? true : false;\n    }\n  }, {\n    key: \"canDelete\",\n    value: function canDelete() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.annotation.creator ? true : false;\n    }\n  }, {\n    key: \"canCopy\",\n    value: function canCopy() {\n      return this.props.currentUser ? true : false;\n      var allowed = true; // TODO: implement permission check (what should permission check be?)\n\n      return allowed;\n    }\n  }, {\n    key: \"editAnnotationTarget\",\n    value: function editAnnotationTarget(annotation) {// ask for adding, changing or removing target\n      // if target is resource, allow new resource selection\n      // if target is annotation, allow new annotation selection\n      // TODO: implement changing target\n    }\n  }, {\n    key: \"editAnnotationBody\",\n    value: function editAnnotationBody(annotation) {\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].edit(annotation);\n    }\n  }, {\n    key: \"copyAnnotation\",\n    value: function copyAnnotation(annotation) {\n      var confirm = window.confirm(\"Are you sure you want to copy this annotation?\");\n\n      if (confirm) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].copyAnnotation(annotation);\n      }\n    }\n  }, {\n    key: \"deleteAnnotation\",\n    value: function deleteAnnotation(annotation) {\n      var confirm = window.confirm(\"Are you sure you want to delete this annotation?\");\n\n      if (confirm) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].delete(annotation);\n      }\n    }\n  }, {\n    key: \"toggleHighlight\",\n    value: function toggleHighlight() {\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toggleHighlight(this.state.targetDOMElements, this.state.highlighted);\n      this.setState({\n        highlighted: this.state.highlighted ? false : true\n      });\n    }\n  }, {\n    key: \"computeClass\",\n    value: function computeClass() {\n      var className = 'list-group-item';\n      if (this.state.highlighted) className += ' active';\n      return className;\n    }\n  }, {\n    key: \"onMouseOverHandler\",\n    value: function onMouseOverHandler(crumb) {\n      crumb.node.style.border += \" 1px solid red\";\n    }\n  }, {\n    key: \"onMouseOutHandler\",\n    value: function onMouseOutHandler(crumb) {\n      var index = crumb.node.style.border.indexOf(\" 1px solid red\");\n      crumb.node.style.border = crumb.node.style.border.substr(0, index);\n    }\n  }, {\n    key: \"createResourceTarget\",\n    value: function createResourceTarget(target, source, targetCount) {\n      var _this2 = this;\n\n      var component = this;\n      var text = \"\";\n\n      if (target.type === \"Text\") {\n        text = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTargetText(target, source);\n      } else if (target.type === \"Image\") {\n        var selector = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTargetMediaFragment(target);\n        var rect = selector.rect;\n        var topLeft = selector.rect.x + ',' + selector.rect.y;\n        var bottomRight = selector.rect.x + selector.rect.w + ',' + (selector.rect.y + selector.rect.h);\n        text = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, '[' + topLeft + ' - ' + bottomRight + ']');\n      } else if (target.type === \"Video\") {\n        var _selector = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTargetMediaFragment(target);\n\n        var segment = _selector.interval;\n        text = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, '[' + _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatTime(segment.start) + ' - ' + _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatTime(segment.end) + ']');\n      }\n\n      if (text.length > 40) {\n        text = text.substr(0, 37) + \"...\";\n      }\n\n      var breadcrumbs = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(source.data.rdfaResource);\n      var breadcrumbLabels = breadcrumbs.map(function (crumb, index) {\n        var next = \" > \";\n        if (!index) next = \"\";\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"crumb\" + index,\n          onMouseOver: component.onMouseOverHandler.bind(_this2, crumb),\n          onMouseOut: component.onMouseOutHandler.bind(_this2, crumb)\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          title: crumb.property\n        }, next), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-info\",\n          title: \"Identifier: \" + crumb.id\n        }, crumb.type), \"\\xA0\");\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"breadcrumbs\"\n      }, breadcrumbLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"badge badge-warning\"\n      }, \"Target content\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"createExternalTarget\",\n    value: function createExternalTarget(target, source, targetCount) {\n      var text = \"\";\n\n      if (target.type === \"Text\") {\n        text = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTargetText(target, source);\n      }\n\n      var breadcrumbs = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(target.source);\n      var breadcrumbLabels = breadcrumbs.map(function (crumb, index) {\n        var next = \" > \";\n        if (!index) next = \"\";\n        var crumbType = crumb.type[0].substr(crumb.type[0].indexOf(\"#\") + 1);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"crumb\" + index\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          title: crumb.property\n        }, next), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-secondary\",\n          title: \"Identifier: \" + crumb.id\n        }, crumbType), \"\\xA0\");\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"breadcrumbs\"\n      }, breadcrumbLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"badge badge-warning\"\n      }, \"Target content\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"createAnnotationTarget\",\n    value: function createAnnotationTarget(target, source) {\n      var body = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extractBodies(source.data)[0];\n      var label = body.type;\n      var text = body.value;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"badge badge-success\"\n      }, label), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var component = this;\n      var annotation = component.props.annotation;\n      var bodyCount = 0;\n      var timestamp = new Date(annotation.created).toLocaleString();\n      var bodies = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extractBodies(annotation).map(function (body) {\n        bodyCount++;\n        var bodyText = body.value; //if (bodyText.length > 100) {\n        //    bodyText = bodyText.substr(0, 97) + \"...\";\n        //}\n        //\n        //data-toggle=\"popover\"\n        //data-trigger=\"hover\"\n        //data-content={body.value}\n        //data-placement=\"top\"\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: bodyCount\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-success\"\n        }, body.purpose), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"annotation-text\"\n        }, bodyText));\n      });\n      var targetCount = 0;\n      var targets = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extractTargets(annotation).map(function (target) {\n        try {\n          targetCount++;\n          var source = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lookupIdentifier(_flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extractTargetIdentifier(target));\n          var text = \"\";\n          var label;\n\n          if (source.type === \"external\") {\n            return _this3.createExternalTarget(target, source, targetCount);\n          }\n\n          if (source.type === \"resource\") {\n            return _this3.createResourceTarget(target, source, targetCount);\n          } else if (source.type === \"annotation\") {\n            return _this3.createAnnotationTarget(target, source);\n          } else if (source.type === undefined) {\n            console.error(\"source.type is not defined, showing content of annotation target and associated indexed source\", target, source);\n          }\n        } catch (error) {\n          // filter out annotation targets that result in errors;\n          return undefined;\n        }\n      }).filter(function (target) {\n        return target !== undefined;\n      });\n\n      var renderEditBody = function renderEditBody() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-primary\",\n          onClick: function onClick() {\n            component.editAnnotationBody(annotation);\n          }\n        }, \"edit body\");\n      };\n\n      var renderEditTarget = function renderEditTarget() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-warning\",\n          onClick: function onClick() {\n            component.editAnnotationTarget(annotation);\n          }\n        }, \"edit target\");\n      };\n\n      var renderDelete = function renderDelete() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-danger\",\n          onClick: function onClick() {\n            component.deleteAnnotation(annotation);\n          }\n        }, \"delete\");\n      };\n\n      var renderCopy = function renderCopy() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-success\",\n          onClick: function onClick() {\n            component.copyAnnotation(annotation);\n          }\n        }, \"copy\");\n      };\n\n      var makeOptions = function makeOptions() {\n        var editBody = component.canEdit() ? renderEditBody() : \"\";\n        var editTarget = component.canEdit() ? renderEditTarget() : \"\";\n        var del = component.canDelete() ? renderDelete() : \"\";\n        var copy = component.canCopy() ? renderCopy() : \"\";\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, editBody, \" \", editTarget, \" \", del, \" \", copy);\n      };\n\n      var options = makeOptions();\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        className: component.computeClass(),\n        title: annotation.id\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        onClick: component.toggleHighlight.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"abbr\", null, timestamp, \"\\xA0 (created by: \", annotation.creator, \")\"), targets, bodies, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null)), options);\n    }\n  }]);\n\n  return Annotation;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Annotation);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0Fubm90YXRpb24uanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9Bbm5vdGF0aW9uLmpzeD8yY2MzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucy5qcyc7XG5pbXBvcnQgQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUuanMnO1xuaW1wb3J0IEFwcENvbGxlY3Rpb25TdG9yZSBmcm9tICcuLi8uLi9mbHV4L0NvbGxlY3Rpb25TdG9yZS5qcyc7XG5pbXBvcnQgRmxleE1vZGFsIGZyb20gJy4vLi4vRmxleE1vZGFsJztcblxuY2xhc3MgQW5ub3RhdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3RhcmdldERPTUVsZW1lbnRzOiBBbm5vdGF0aW9uQWN0aW9ucy5tYXBUYXJnZXRzVG9ET01FbGVtZW50cyh0aGlzLnByb3BzLmFubm90YXRpb24pfSk7XG4gICAgfVxuICAgIGNhbkVkaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmN1cnJlbnRVc2VyICYmIHRoaXMucHJvcHMuY3VycmVudFVzZXIudXNlcm5hbWUgPT09IHRoaXMucHJvcHMuYW5ub3RhdGlvbi5jcmVhdG9yID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH1cbiAgICBjYW5EZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmN1cnJlbnRVc2VyICYmIHRoaXMucHJvcHMuY3VycmVudFVzZXIudXNlcm5hbWUgPT09IHRoaXMucHJvcHMuYW5ub3RhdGlvbi5jcmVhdG9yID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH1cbiAgICBjYW5Db3B5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyZW50VXNlciA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdmFyIGFsbG93ZWQgPSB0cnVlO1xuICAgICAgICAvLyBUT0RPOiBpbXBsZW1lbnQgcGVybWlzc2lvbiBjaGVjayAod2hhdCBzaG91bGQgcGVybWlzc2lvbiBjaGVjayBiZT8pXG4gICAgICAgIHJldHVybiBhbGxvd2VkO1xuICAgIH1cbiAgICBlZGl0QW5ub3RhdGlvblRhcmdldChhbm5vdGF0aW9uKSB7XG4gICAgICAgIC8vIGFzayBmb3IgYWRkaW5nLCBjaGFuZ2luZyBvciByZW1vdmluZyB0YXJnZXRcbiAgICAgICAgLy8gaWYgdGFyZ2V0IGlzIHJlc291cmNlLCBhbGxvdyBuZXcgcmVzb3VyY2Ugc2VsZWN0aW9uXG4gICAgICAgIC8vIGlmIHRhcmdldCBpcyBhbm5vdGF0aW9uLCBhbGxvdyBuZXcgYW5ub3RhdGlvbiBzZWxlY3Rpb25cbiAgICAgICAgLy8gVE9ETzogaW1wbGVtZW50IGNoYW5naW5nIHRhcmdldFxuICAgIH1cbiAgICBlZGl0QW5ub3RhdGlvbkJvZHkoYW5ub3RhdGlvbikge1xuICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5lZGl0KGFubm90YXRpb24pO1xuICAgIH1cbiAgICBjb3B5QW5ub3RhdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgIGxldCBjb25maXJtID0gd2luZG93LmNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29weSB0aGlzIGFubm90YXRpb24/XCIpO1xuICAgICAgICBpZiAoY29uZmlybSkge1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMuY29weUFubm90YXRpb24oYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgIGxldCBjb25maXJtID0gd2luZG93LmNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgYW5ub3RhdGlvbj9cIik7XG4gICAgICAgIGlmIChjb25maXJtKSB7XG4gICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5kZWxldGUoYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9nZ2xlSGlnaGxpZ2h0KCkge1xuICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy50b2dnbGVIaWdobGlnaHQodGhpcy5zdGF0ZS50YXJnZXRET01FbGVtZW50cywgdGhpcy5zdGF0ZS5oaWdobGlnaHRlZCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2hpZ2hsaWdodGVkOiB0aGlzLnN0YXRlLmhpZ2hsaWdodGVkID8gZmFsc2UgOiB0cnVlfSk7XG4gICAgfVxuICAgIGNvbXB1dGVDbGFzcygpIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwLWl0ZW0nO1xuICAgICAgICBpZih0aGlzLnN0YXRlLmhpZ2hsaWdodGVkKVxuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgYWN0aXZlJztcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZTtcbiAgICB9XG5cbiAgICBvbk1vdXNlT3ZlckhhbmRsZXIoY3J1bWIpIHtcbiAgICAgICAgY3J1bWIubm9kZS5zdHlsZS5ib3JkZXIgKz0gXCIgMXB4IHNvbGlkIHJlZFwiO1xuICAgIH1cblxuICAgIG9uTW91c2VPdXRIYW5kbGVyKGNydW1iKSB7XG4gICAgICAgIGxldCBpbmRleCA9IGNydW1iLm5vZGUuc3R5bGUuYm9yZGVyLmluZGV4T2YoXCIgMXB4IHNvbGlkIHJlZFwiKTtcbiAgICAgICAgY3J1bWIubm9kZS5zdHlsZS5ib3JkZXIgPSBjcnVtYi5ub2RlLnN0eWxlLmJvcmRlci5zdWJzdHIoMCwgaW5kZXgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVJlc291cmNlVGFyZ2V0KHRhcmdldCwgc291cmNlLCB0YXJnZXRDb3VudCkge1xuICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcbiAgICAgICAgdmFyIHRleHQgPSBcIlwiO1xuICAgICAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiVGV4dFwiKSB7XG4gICAgICAgICAgICB0ZXh0ID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0VGFyZ2V0VGV4dCh0YXJnZXQsIHNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnR5cGUgPT09IFwiSW1hZ2VcIikge1xuICAgICAgICAgICAgbGV0IHNlbGVjdG9yID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0VGFyZ2V0TWVkaWFGcmFnbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgbGV0IHJlY3QgPSBzZWxlY3Rvci5yZWN0O1xuICAgICAgICAgICAgbGV0IHRvcExlZnQgPSBzZWxlY3Rvci5yZWN0LnggKyAnLCcgKyBzZWxlY3Rvci5yZWN0Lnk7XG4gICAgICAgICAgICBsZXQgYm90dG9tUmlnaHQgPSBzZWxlY3Rvci5yZWN0LnggKyBzZWxlY3Rvci5yZWN0LncgKyAnLCcgKyAoc2VsZWN0b3IucmVjdC55ICsgc2VsZWN0b3IucmVjdC5oKTtcbiAgICAgICAgICAgIHRleHQgPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsnWycgKyB0b3BMZWZ0ICsgJyAtICcgKyBib3R0b21SaWdodCArICddJ31cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnR5cGUgPT09IFwiVmlkZW9cIikge1xuICAgICAgICAgICAgbGV0IHNlbGVjdG9yID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0VGFyZ2V0TWVkaWFGcmFnbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgbGV0IHNlZ21lbnQgPSBzZWxlY3Rvci5pbnRlcnZhbDtcbiAgICAgICAgICAgIHRleHQgPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsnWycgKyBBbm5vdGF0aW9uQWN0aW9ucy5mb3JtYXRUaW1lKHNlZ21lbnQuc3RhcnQpICsgJyAtICcgKyBBbm5vdGF0aW9uQWN0aW9ucy5mb3JtYXRUaW1lKHNlZ21lbnQuZW5kKSArICddJ31cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDQwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgMzcpICsgXCIuLi5cIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYnJlYWRjcnVtYnMgPSBBbm5vdGF0aW9uQWN0aW9ucy5jcmVhdGVCcmVhZGNydW1iVHJhaWwoc291cmNlLmRhdGEucmRmYVJlc291cmNlKTtcbiAgICAgICAgbGV0IGJyZWFkY3J1bWJMYWJlbHMgPSBicmVhZGNydW1icy5tYXAoKGNydW1iLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBcIiA+IFwiO1xuICAgICAgICAgICAgaWYgKCFpbmRleClcbiAgICAgICAgICAgICAgICBuZXh0ID0gXCJcIjtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtcImNydW1iXCIgKyBpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU92ZXI9e2NvbXBvbmVudC5vbk1vdXNlT3ZlckhhbmRsZXIuYmluZCh0aGlzLCBjcnVtYil9XG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdXQ9e2NvbXBvbmVudC5vbk1vdXNlT3V0SGFuZGxlci5iaW5kKHRoaXMsIGNydW1iKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPXtjcnVtYi5wcm9wZXJ0eX0+XG4gICAgICAgICAgICAgICAgICAgIHtuZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiYWRnZSBiYWRnZS1pbmZvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcIklkZW50aWZpZXI6IFwiICsgY3J1bWIuaWR9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAge2NydW1iLnR5cGV9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17dGFyZ2V0Q291bnR9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnJlYWRjcnVtYnNcIj5cbiAgICAgICAgICAgICAgICAgICAge2JyZWFkY3J1bWJMYWJlbHN9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXdhcm5pbmdcIj5UYXJnZXQgY29udGVudDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbm5vdGF0aW9uLXRleHRcIlxuICAgICAgICAgICAgICAgID57dGV4dH08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjcmVhdGVFeHRlcm5hbFRhcmdldCh0YXJnZXQsIHNvdXJjZSwgdGFyZ2V0Q291bnQpIHtcbiAgICAgICAgdmFyIHRleHQgPSBcIlwiO1xuICAgICAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiVGV4dFwiKSB7XG4gICAgICAgICAgICB0ZXh0ID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0VGFyZ2V0VGV4dCh0YXJnZXQsIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJyZWFkY3J1bWJzID0gQW5ub3RhdGlvbkFjdGlvbnMuY3JlYXRlQnJlYWRjcnVtYlRyYWlsKHRhcmdldC5zb3VyY2UpO1xuICAgICAgICBsZXQgYnJlYWRjcnVtYkxhYmVscyA9IGJyZWFkY3J1bWJzLm1hcCgoY3J1bWIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IFwiID4gXCI7XG4gICAgICAgICAgICBpZiAoIWluZGV4KVxuICAgICAgICAgICAgICAgIG5leHQgPSBcIlwiO1xuICAgICAgICAgICAgbGV0IGNydW1iVHlwZSA9IGNydW1iLnR5cGVbMF0uc3Vic3RyKGNydW1iLnR5cGVbMF0uaW5kZXhPZihcIiNcIikgKyAxKTtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtcImNydW1iXCIgKyBpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPXtjcnVtYi5wcm9wZXJ0eX0+XG4gICAgICAgICAgICAgICAgICAgIHtuZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiYWRnZSBiYWRnZS1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1wiSWRlbnRpZmllcjogXCIgKyBjcnVtYi5pZH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICB7Y3J1bWJUeXBlfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17dGFyZ2V0Q291bnR9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnJlYWRjcnVtYnNcIj5cbiAgICAgICAgICAgICAgICAgICAge2JyZWFkY3J1bWJMYWJlbHN9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXdhcm5pbmdcIj5UYXJnZXQgY29udGVudDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbm5vdGF0aW9uLXRleHRcIlxuICAgICAgICAgICAgICAgID57dGV4dH08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjcmVhdGVBbm5vdGF0aW9uVGFyZ2V0KHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgIGxldCBib2R5ID0gQW5ub3RhdGlvbkFjdGlvbnMuZXh0cmFjdEJvZGllcyhzb3VyY2UuZGF0YSlbMF07XG4gICAgICAgIGxldCBsYWJlbCA9IGJvZHkudHlwZTtcbiAgICAgICAgbGV0IHRleHQgPSBib2R5LnZhbHVlO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e3RhcmdldENvdW50fT5cbiAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiXG4gICAgICAgICAgICAgICAgICAgID57bGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFubm90YXRpb24tdGV4dFwiXG4gICAgICAgICAgICAgICAgPnt0ZXh0fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXM7XG4gICAgICAgIGxldCBhbm5vdGF0aW9uID0gY29tcG9uZW50LnByb3BzLmFubm90YXRpb247XG4gICAgICAgIHZhciBib2R5Q291bnQgPSAwO1xuICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5ldyBEYXRlKGFubm90YXRpb24uY3JlYXRlZCkpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICAgIHZhciBib2RpZXMgPSBBbm5vdGF0aW9uQWN0aW9ucy5leHRyYWN0Qm9kaWVzKGFubm90YXRpb24pLm1hcCgoYm9keSkgPT4ge1xuICAgICAgICAgICAgYm9keUNvdW50Kys7XG4gICAgICAgICAgICB2YXIgYm9keVRleHQgPSBib2R5LnZhbHVlO1xuICAgICAgICAgICAgLy9pZiAoYm9keVRleHQubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgICAgICAvLyAgICBib2R5VGV4dCA9IGJvZHlUZXh0LnN1YnN0cigwLCA5NykgKyBcIi4uLlwiO1xuICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhLXRvZ2dsZT1cInBvcG92ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhLXRyaWdnZXI9XCJob3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RhdGEtY29udGVudD17Ym9keS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17Ym9keUNvdW50fSA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPntib2R5LnB1cnBvc2V9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFubm90YXRpb24tdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtib2R5VGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB0YXJnZXRDb3VudCA9IDA7XG4gICAgICAgIHZhciB0YXJnZXRzID0gQW5ub3RhdGlvbkFjdGlvbnMuZXh0cmFjdFRhcmdldHMoYW5ub3RhdGlvbikubWFwKCh0YXJnZXQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Q291bnQrKztcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlID0gQW5ub3RhdGlvbkFjdGlvbnMubG9va3VwSWRlbnRpZmllcihBbm5vdGF0aW9uQWN0aW9ucy5leHRyYWN0VGFyZ2V0SWRlbnRpZmllcih0YXJnZXQpKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsO1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJleHRlcm5hbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUV4dGVybmFsVGFyZ2V0KHRhcmdldCwgc291cmNlLCB0YXJnZXRDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJyZXNvdXJjZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc291cmNlVGFyZ2V0KHRhcmdldCwgc291cmNlLCB0YXJnZXRDb3VudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gXCJhbm5vdGF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQW5ub3RhdGlvblRhcmdldCh0YXJnZXQsIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzb3VyY2UudHlwZSBpcyBub3QgZGVmaW5lZCwgc2hvd2luZyBjb250ZW50IG9mIGFubm90YXRpb24gdGFyZ2V0IGFuZCBhc3NvY2lhdGVkIGluZGV4ZWQgc291cmNlXCIsIHRhcmdldCwgc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgYW5ub3RhdGlvbiB0YXJnZXRzIHRoYXQgcmVzdWx0IGluIGVycm9ycztcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5maWx0ZXIoKHRhcmdldCkgPT4geyByZXR1cm4gdGFyZ2V0ICE9PSB1bmRlZmluZWQgfSk7XG5cbiAgICAgICAgdmFyIHJlbmRlckVkaXRCb2R5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y29tcG9uZW50LmVkaXRBbm5vdGF0aW9uQm9keShhbm5vdGF0aW9uKX19PlxuICAgICAgICAgICAgICAgICAgICBlZGl0IGJvZHlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbmRlckVkaXRUYXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmFkZ2UgYmFkZ2Utd2FybmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtjb21wb25lbnQuZWRpdEFubm90YXRpb25UYXJnZXQoYW5ub3RhdGlvbil9fT5cbiAgICAgICAgICAgICAgICAgICAgZWRpdCB0YXJnZXRcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbmRlckRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJiYWRnZSBiYWRnZS1kYW5nZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y29tcG9uZW50LmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbil9fT5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHZhciByZW5kZXJDb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y29tcG9uZW50LmNvcHlBbm5vdGF0aW9uKGFubm90YXRpb24pfX0+XG4gICAgICAgICAgICAgICAgICAgIGNvcHlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWFrZU9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlZGl0Qm9keSA9IGNvbXBvbmVudC5jYW5FZGl0KCkgPyByZW5kZXJFZGl0Qm9keSgpIDogXCJcIjtcbiAgICAgICAgICAgIHZhciBlZGl0VGFyZ2V0ID0gY29tcG9uZW50LmNhbkVkaXQoKSA/IHJlbmRlckVkaXRUYXJnZXQoKSA6IFwiXCI7XG4gICAgICAgICAgICB2YXIgZGVsID0gY29tcG9uZW50LmNhbkRlbGV0ZSgpID8gcmVuZGVyRGVsZXRlKCkgOiBcIlwiO1xuICAgICAgICAgICAgdmFyIGNvcHkgPSBjb21wb25lbnQuY2FuQ29weSgpID8gcmVuZGVyQ29weSgpIDogXCJcIjtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAge2VkaXRCb2R5fSB7ZWRpdFRhcmdldH0ge2RlbH0ge2NvcHl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gbWFrZU9wdGlvbnMoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjb21wb25lbnQuY29tcHV0ZUNsYXNzKCl9XG4gICAgICAgICAgICAgICAgdGl0bGU9e2Fubm90YXRpb24uaWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjb21wb25lbnQudG9nZ2xlSGlnaGxpZ2h0LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGFiYnI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGltZXN0YW1wfSZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNyZWF0ZWQgYnk6IHthbm5vdGF0aW9uLmNyZWF0b3J9KVxuICAgICAgICAgICAgICAgICAgICA8L2FiYnI+XG4gICAgICAgICAgICAgICAgICAgIHt0YXJnZXRzfVxuICAgICAgICAgICAgICAgICAgICB7Ym9kaWVzfVxuICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHtvcHRpb25zfVxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFubm90YXRpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBS0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBSUE7QUFDQTtBQUZBO0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUdBO0FBREE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFHQTtBQURBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUtBO0FBREE7QUFLQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUtBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFEQTtBQWNBOzs7O0FBaFRBO0FBQ0E7QUFrVEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/annotation/Annotation.jsx\n");

/***/ }),

/***/ "./src/components/annotation/AnnotationCreator.jsx":
/*!*********************************************************!*\
  !*** ./src/components/annotation/AnnotationCreator.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _TargetCreator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TargetCreator */ \"./src/components/annotation/TargetCreator.jsx\");\n/* harmony import */ var _BodyCreator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BodyCreator */ \"./src/components/annotation/BodyCreator.jsx\");\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\n\n\n\nvar AnnotationCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationCreator, _React$Component);\n\n  function AnnotationCreator(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationCreator).call(this, props));\n    _this.selectTargets = _this.selectTargets.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onHide = _this.onHide.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      permission: \"private\",\n      showModal: null,\n      annotations: [],\n      selectedTargets: [],\n      createdBodies: {},\n      create: null\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('create-annotation', this.createAnnotation.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('edit-annotation', this.editAnnotationBody.bind(this));\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"onHide\",\n    value: function onHide() {\n      jquery__WEBPACK_IMPORTED_MODULE_5___default()('#annotation__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n    }\n  }, {\n    key: \"selectTargets\",\n    value: function selectTargets() {\n      var candidates = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCandidates(this.state.annotations, this.props.config.defaults.target);\n      this.setState({\n        editAnnotation: null,\n        candidates: candidates,\n        showModal: true,\n        create: \"target\",\n        createdBodies: {}\n      });\n    }\n  }, {\n    key: \"hideAnnotationForm\",\n    value: function hideAnnotationForm() {\n      jquery__WEBPACK_IMPORTED_MODULE_5___default()('#annotation__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      this.setState({\n        showModal: false,\n        selectedTargets: [],\n        createdBodies: {}\n      });\n    }\n  }, {\n    key: \"editAnnotationBody\",\n    value: function editAnnotationBody(annotation) {\n      this.setState({\n        editAnnotation: annotation,\n        createdBodies: this.categorizeBodies(annotation.body),\n        showModal: true,\n        create: \"body\"\n      });\n    }\n  }, {\n    key: \"addMotivations\",\n    value: function addMotivations() {\n      this.setState({\n        showModal: true,\n        create: \"body\"\n      });\n    }\n  }, {\n    key: \"addTargets\",\n    value: function addTargets() {\n      this.setState({\n        showModal: true,\n        create: \"target\"\n      });\n    }\n  }, {\n    key: \"setTargets\",\n    value: function setTargets(selectedTargets) {\n      this.setState({\n        selectedTargets: selectedTargets\n      });\n    }\n  }, {\n    key: \"setBodies\",\n    value: function setBodies(createdBodies) {\n      this.setState({\n        createdBodies: createdBodies\n      });\n    }\n  }, {\n    key: \"createAnnotation\",\n    value: function createAnnotation(annotationTargets) {\n      var annotation = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__[\"default\"].makeAnnotation(annotationTargets, this.props.currentUser.username);\n      annotation.body = this.listBodies(this.state.createdBodies);\n      this.editAnnotationBody(annotation);\n    }\n  }, {\n    key: \"gatherDataAndSave\",\n    value: function gatherDataAndSave() {\n      var component = this;\n\n      if (this.state.editAnnotation) {\n        var annotation = this.state.editAnnotation;\n      } else {\n        var annotation = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__[\"default\"].makeAnnotation(this.state.selectedTargets, this.props.currentUser.username);\n      }\n\n      var bodies = this.listBodies(this.state.createdBodies);\n\n      if (bodies.length === 0) {\n        alert(\"Cannot save annotation without content. Please add at least one motivation.\");\n      } else {\n        annotation.body = bodies;\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__[\"default\"].save(annotation);\n        this.hideAnnotationForm();\n      }\n    }\n  }, {\n    key: \"handlePermissionChange\",\n    value: function handlePermissionChange(event) {\n      this.setState({\n        permission: event.target.value\n      });\n      _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setPermission(event.target.value);\n    }\n  }, {\n    key: \"listBodies\",\n    value: function listBodies(createdBodies) {\n      var bodies = [];\n      Object.keys(createdBodies).forEach(function (bodyType) {\n        bodies = bodies.concat(createdBodies[bodyType]);\n      });\n      return bodies;\n    }\n  }, {\n    key: \"categorizeBodies\",\n    value: function categorizeBodies(bodies) {\n      var createdBodies = {};\n      bodies.forEach(function (body) {\n        if (!createdBodies[body.type]) createdBodies[body.type] = [];\n        createdBodies[body.type].push(body);\n      });\n      return createdBodies;\n    }\n  }, {\n    key: \"hasTarget\",\n    value: function hasTarget() {\n      return this.state.selectedTargets.length > 0 || this.state.editAnnotation !== null;\n    }\n  }, {\n    key: \"hasBody\",\n    value: function hasBody() {\n      var bodies = this.listBodies(this.state.createdBodies);\n      return bodies.length > 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var targetCreator = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_TargetCreator__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        selectedTargets: this.state.selectedTargets,\n        addMotivations: this.addMotivations.bind(this),\n        setTargets: this.setTargets.bind(this),\n        candidates: this.state.candidates,\n        annotations: this.state.annotations,\n        defaultTargets: this.props.config.defaults.target,\n        permission: this.state.permission\n      });\n      var bodyCreator = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BodyCreator__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        createdBodies: this.state.createdBodies,\n        addTargets: this.addTargets.bind(this),\n        setBodies: this.setBodies.bind(this),\n        currentUser: this.props.currentUser,\n        annotationTasks: this.props.config.annotationTasks,\n        services: this.props.config.services,\n        hideAnnotationForm: this.onHide.bind(this),\n        permission: this.state.permission\n      });\n      var canSave = this.hasTarget() && this.hasBody();\n      var creatorButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"creator-view-buttons col-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: !this.state.candidates,\n        onClick: this.addTargets.bind(this)\n      }, \"Show targets\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: this.state.selectedTargets.length === 0,\n        onClick: this.addMotivations.bind(this)\n      }, \"Show content\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"permission-switch \"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Private\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"private\",\n        checked: this.state.permission === \"private\",\n        onChange: this.handlePermissionChange.bind(this)\n      }), \"\\xA0 \\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"public\",\n        checked: this.state.permission === \"public\",\n        onChange: this.handlePermissionChange.bind(this)\n      }), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Public\"))));\n      var creator = this.state.create === \"target\" ? targetCreator : bodyCreator;\n      var titleLabel = this.state.create === \"target\" ? \"targets\" : \"content\";\n      var title = \"Add one or more annotation \" + titleLabel;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, this.props.currentUser ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.selectTargets.bind(this)\n      }, \"Make annotation\") : null, this.state.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        elementId: \"annotation__modal\",\n        handleHideModal: this.hideAnnotationForm.bind(this),\n        confirmLabel: \"Save\",\n        confirmAction: this.gatherDataAndSave.bind(this),\n        title: title\n      }, creatorButtons, creator) : null);\n    }\n  }]);\n\n  return AnnotationCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationCreator);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0Fubm90YXRpb25DcmVhdG9yLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2Fubm90YXRpb24vQW5ub3RhdGlvbkNyZWF0b3IuanN4PzEyN2EiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVGFyZ2V0Q3JlYXRvciBmcm9tICcuL1RhcmdldENyZWF0b3InO1xuaW1wb3J0IEJvZHlDcmVhdG9yIGZyb20gJy4vQm9keUNyZWF0b3InO1xuaW1wb3J0IEZsZXhNb2RhbCBmcm9tICcuLi9GbGV4TW9kYWwnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4uLy4uL2ZsdXgvQW5ub3RhdGlvbkFjdGlvbnMnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IEFwcEFubm90YXRpb25TdG9yZSBmcm9tICcuLi8uLi9mbHV4L0Fubm90YXRpb25TdG9yZSc7XG5cbmNsYXNzIEFubm90YXRpb25DcmVhdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RUYXJnZXRzID0gdGhpcy5zZWxlY3RUYXJnZXRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25IaWRlID0gdGhpcy5vbkhpZGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHBlcm1pc3Npb246IFwicHJpdmF0ZVwiLFxuICAgICAgICAgICAgc2hvd01vZGFsOiBudWxsLFxuICAgICAgICAgICAgYW5ub3RhdGlvbnM6IFtdLFxuICAgICAgICAgICAgc2VsZWN0ZWRUYXJnZXRzOiBbXSxcbiAgICAgICAgICAgIGNyZWF0ZWRCb2RpZXM6IHt9LFxuICAgICAgICAgICAgY3JlYXRlOiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2xvYWRlZC1hbm5vdGF0aW9ucycsIHRoaXMuc2V0QW5ub3RhdGlvbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5iaW5kKCdjcmVhdGUtYW5ub3RhdGlvbicsIHRoaXMuY3JlYXRlQW5ub3RhdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2VkaXQtYW5ub3RhdGlvbicsIHRoaXMuZWRpdEFubm90YXRpb25Cb2R5LmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzZXRBbm5vdGF0aW9ucyhhbm5vdGF0aW9ucykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthbm5vdGF0aW9uczogYW5ub3RhdGlvbnN9KTtcbiAgICB9XG4gICAgb25IaWRlKCkge1xuICAgICAgICAkKCcjYW5ub3RhdGlvbl9fbW9kYWwnKS5tb2RhbCgnaGlkZScpOy8vVE9ETyB1Z2x5LCBidXQgd2l0aG91dCB0aGlzIHRoZSBzdGF0aWMgYmFja2Ryb3Agd29uJ3QgZGlzYXBwZWFyIVxuICAgIH1cblxuICAgIHNlbGVjdFRhcmdldHMoKSB7XG4gICAgICAgIGxldCBjYW5kaWRhdGVzID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0Q2FuZGlkYXRlcyh0aGlzLnN0YXRlLmFubm90YXRpb25zLCB0aGlzLnByb3BzLmNvbmZpZy5kZWZhdWx0cy50YXJnZXQpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXRBbm5vdGF0aW9uOiBudWxsLFxuICAgICAgICAgICAgY2FuZGlkYXRlczogY2FuZGlkYXRlcyxcbiAgICAgICAgICAgIHNob3dNb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZTogXCJ0YXJnZXRcIixcbiAgICAgICAgICAgIGNyZWF0ZWRCb2RpZXM6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoaWRlQW5ub3RhdGlvbkZvcm0oKSB7XG4gICAgICAgICQoJyNhbm5vdGF0aW9uX19tb2RhbCcpLm1vZGFsKCdoaWRlJyk7Ly9UT0RPIHVnbHksIGJ1dCB3aXRob3V0IHRoaXMgdGhlIHN0YXRpYyBiYWNrZHJvcCB3b24ndCBkaXNhcHBlYXIhXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIHNlbGVjdGVkVGFyZ2V0czogW10sXG4gICAgICAgICAgICBjcmVhdGVkQm9kaWVzOiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWRpdEFubm90YXRpb25Cb2R5KGFubm90YXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0QW5ub3RhdGlvbjogYW5ub3RhdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZWRCb2RpZXM6IHRoaXMuY2F0ZWdvcml6ZUJvZGllcyhhbm5vdGF0aW9uLmJvZHkpLFxuICAgICAgICAgICAgc2hvd01vZGFsOiB0cnVlLCBjcmVhdGU6IFwiYm9keVwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRNb3RpdmF0aW9ucygpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd01vZGFsOiB0cnVlLCBjcmVhdGU6IFwiYm9keVwifSk7XG4gICAgfVxuICAgIGFkZFRhcmdldHMoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dNb2RhbDogdHJ1ZSwgY3JlYXRlOiBcInRhcmdldFwifSk7XG4gICAgfVxuICAgIHNldFRhcmdldHMoc2VsZWN0ZWRUYXJnZXRzKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRUYXJnZXRzOiBzZWxlY3RlZFRhcmdldHNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldEJvZGllcyhjcmVhdGVkQm9kaWVzKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NyZWF0ZWRCb2RpZXM6IGNyZWF0ZWRCb2RpZXN9KTtcbiAgICB9XG4gICAgY3JlYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uVGFyZ2V0cykge1xuICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IEFubm90YXRpb25BY3Rpb25zLm1ha2VBbm5vdGF0aW9uKGFubm90YXRpb25UYXJnZXRzLCB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcbiAgICAgICAgYW5ub3RhdGlvbi5ib2R5ID0gdGhpcy5saXN0Qm9kaWVzKHRoaXMuc3RhdGUuY3JlYXRlZEJvZGllcyk7XG4gICAgICAgIHRoaXMuZWRpdEFubm90YXRpb25Cb2R5KGFubm90YXRpb24pO1xuICAgIH1cbiAgICBnYXRoZXJEYXRhQW5kU2F2ZSgpIHtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXRBbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IHRoaXMuc3RhdGUuZWRpdEFubm90YXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IEFubm90YXRpb25BY3Rpb25zLm1ha2VBbm5vdGF0aW9uKHRoaXMuc3RhdGUuc2VsZWN0ZWRUYXJnZXRzLCB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9kaWVzID0gdGhpcy5saXN0Qm9kaWVzKHRoaXMuc3RhdGUuY3JlYXRlZEJvZGllcyk7XG4gICAgICAgIGlmIChib2RpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBhbGVydChcIkNhbm5vdCBzYXZlIGFubm90YXRpb24gd2l0aG91dCBjb250ZW50LiBQbGVhc2UgYWRkIGF0IGxlYXN0IG9uZSBtb3RpdmF0aW9uLlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFubm90YXRpb24uYm9keSA9IGJvZGllcztcbiAgICAgICAgICAgIEFubm90YXRpb25BY3Rpb25zLnNhdmUoYW5ub3RhdGlvbik7XG4gICAgICAgICAgICB0aGlzLmhpZGVBbm5vdGF0aW9uRm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVBlcm1pc3Npb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cGVybWlzc2lvbjogZXZlbnQudGFyZ2V0LnZhbHVlfSk7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLnNldFBlcm1pc3Npb24oZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG5cbiAgICBsaXN0Qm9kaWVzKGNyZWF0ZWRCb2RpZXMpIHtcbiAgICAgICAgdmFyIGJvZGllcyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyhjcmVhdGVkQm9kaWVzKS5mb3JFYWNoKChib2R5VHlwZSkgPT4ge1xuICAgICAgICAgICAgYm9kaWVzID0gYm9kaWVzLmNvbmNhdChjcmVhdGVkQm9kaWVzW2JvZHlUeXBlXSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYm9kaWVzO1xuICAgIH1cblxuICAgIGNhdGVnb3JpemVCb2RpZXMoYm9kaWVzKSB7XG4gICAgICAgIHZhciBjcmVhdGVkQm9kaWVzID0ge307XG4gICAgICAgIGJvZGllcy5mb3JFYWNoKChib2R5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNyZWF0ZWRCb2RpZXNbYm9keS50eXBlXSlcbiAgICAgICAgICAgICAgICBjcmVhdGVkQm9kaWVzW2JvZHkudHlwZV0gPSBbXTtcbiAgICAgICAgICAgIGNyZWF0ZWRCb2RpZXNbYm9keS50eXBlXS5wdXNoKGJvZHkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRCb2RpZXM7XG4gICAgfVxuXG4gICAgaGFzVGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWxlY3RlZFRhcmdldHMubGVuZ3RoID4gMCB8fCB0aGlzLnN0YXRlLmVkaXRBbm5vdGF0aW9uICE9PSBudWxsO1xuICAgIH1cblxuICAgIGhhc0JvZHkoKSB7XG4gICAgICAgIGxldCBib2RpZXMgPSB0aGlzLmxpc3RCb2RpZXModGhpcy5zdGF0ZS5jcmVhdGVkQm9kaWVzKTtcbiAgICAgICAgcmV0dXJuIGJvZGllcy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHRhcmdldENyZWF0b3IgPSAoXG4gICAgICAgICAgICA8VGFyZ2V0Q3JlYXRvclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVGFyZ2V0cz17dGhpcy5zdGF0ZS5zZWxlY3RlZFRhcmdldHN9XG4gICAgICAgICAgICAgICAgYWRkTW90aXZhdGlvbnM9e3RoaXMuYWRkTW90aXZhdGlvbnMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBzZXRUYXJnZXRzPXt0aGlzLnNldFRhcmdldHMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzPXt0aGlzLnN0YXRlLmNhbmRpZGF0ZXN9XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM9e3RoaXMuc3RhdGUuYW5ub3RhdGlvbnN9XG4gICAgICAgICAgICAgICAgZGVmYXVsdFRhcmdldHM9e3RoaXMucHJvcHMuY29uZmlnLmRlZmF1bHRzLnRhcmdldH1cbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXt0aGlzLnN0YXRlLnBlcm1pc3Npb259XG4gICAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICAgIGxldCBib2R5Q3JlYXRvciA9IChcbiAgICAgICAgICAgIDxCb2R5Q3JlYXRvclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRCb2RpZXM9e3RoaXMuc3RhdGUuY3JlYXRlZEJvZGllc31cbiAgICAgICAgICAgICAgICBhZGRUYXJnZXRzPXt0aGlzLmFkZFRhcmdldHMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBzZXRCb2RpZXM9e3RoaXMuc2V0Qm9kaWVzLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e3RoaXMucHJvcHMuY3VycmVudFVzZXJ9XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvblRhc2tzPXt0aGlzLnByb3BzLmNvbmZpZy5hbm5vdGF0aW9uVGFza3N9XG4gICAgICAgICAgICAgICAgc2VydmljZXM9e3RoaXMucHJvcHMuY29uZmlnLnNlcnZpY2VzfVxuICAgICAgICAgICAgICAgIGhpZGVBbm5vdGF0aW9uRm9ybT17dGhpcy5vbkhpZGUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXt0aGlzLnN0YXRlLnBlcm1pc3Npb259XG4gICAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICAgIHZhciBjYW5TYXZlID0gdGhpcy5oYXNUYXJnZXQoKSAmJiB0aGlzLmhhc0JvZHkoKTtcbiAgICAgICAgbGV0IGNyZWF0b3JCdXR0b25zID0gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNyZWF0b3Itdmlldy1idXR0b25zIGNvbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmNhbmRpZGF0ZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFkZFRhcmdldHMuYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICBTaG93IHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5zZWxlY3RlZFRhcmdldHMubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5hZGRNb3RpdmF0aW9ucy5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgY29udGVudFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwZXJtaXNzaW9uLXN3aXRjaCBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qcml2YXRlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwicHJpdmF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5wZXJtaXNzaW9uID09PSBcInByaXZhdGVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVQZXJtaXNzaW9uQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCJwdWJsaWNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUucGVybWlzc2lvbiA9PT0gXCJwdWJsaWNcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVQZXJtaXNzaW9uQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QdWJsaWM8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIGxldCBjcmVhdG9yID0gdGhpcy5zdGF0ZS5jcmVhdGUgPT09IFwidGFyZ2V0XCIgPyB0YXJnZXRDcmVhdG9yIDogYm9keUNyZWF0b3I7XG4gICAgICAgIGxldCB0aXRsZUxhYmVsID0gdGhpcy5zdGF0ZS5jcmVhdGUgPT09IFwidGFyZ2V0XCIgPyBcInRhcmdldHNcIiA6IFwiY29udGVudFwiO1xuICAgICAgICBsZXQgdGl0bGUgPSBcIkFkZCBvbmUgb3IgbW9yZSBhbm5vdGF0aW9uIFwiICsgdGl0bGVMYWJlbDtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY3VycmVudFVzZXIgP1xuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tbGlnaHRcIiBvbkNsaWNrPXt0aGlzLnNlbGVjdFRhcmdldHMuYmluZCh0aGlzKX0+TWFrZSBhbm5vdGF0aW9uPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93TW9kYWwgP1xuICAgICAgICAgICAgICAgICAgICA8RmxleE1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50SWQ9XCJhbm5vdGF0aW9uX19tb2RhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVIaWRlTW9kYWw9e3RoaXMuaGlkZUFubm90YXRpb25Gb3JtLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtTGFiZWw9XCJTYXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1BY3Rpb249e3RoaXMuZ2F0aGVyRGF0YUFuZFNhdmUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3JlYXRvckJ1dHRvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3JlYXRvcn1cbiAgICAgICAgICAgICAgICAgICAgPC9GbGV4TW9kYWw+OiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBbm5vdGF0aW9uQ3JlYXRvcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBSkE7QUFZQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUhBO0FBS0E7OztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVlBOzs7O0FBOU1BO0FBQ0E7QUFnTkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/annotation/AnnotationCreator.jsx\n");

/***/ }),

/***/ "./src/components/annotation/AnnotationList.jsx":
/*!******************************************************!*\
  !*** ./src/components/annotation/AnnotationList.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _Annotation_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Annotation.jsx */ \"./src/components/annotation/Annotation.jsx\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar AnnotationList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationList, _React$Component);\n\n  function AnnotationList(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationList).call(this, props));\n    _this.state = {\n      annotations: []\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('load-annotations', this.loadAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('changed-target', this.loadAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('deleted-annotation', this.loadAnnotations.bind(this));\n    }\n  }, {\n    key: \"loadAnnotations\",\n    value: function loadAnnotations() {\n      _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadAnnotations();\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var annotationItems = null;\n      var component = this;\n\n      if (this.state.annotations) {\n        annotationItems = this.state.annotations.map(function (annotation) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Annotation_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            annotation: annotation,\n            key: annotation.id,\n            currentUser: component.props.currentUser\n          });\n        });\n      }\n\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(function () {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()(\"[data-toggle=popover]\").popover();\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"annotationList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Stored Annotations\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group annotation-scroll-list\"\n      }, annotationItems));\n    }\n  }]);\n\n  return AnnotationList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationList);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0Fubm90YXRpb25MaXN0LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2Fubm90YXRpb24vQW5ub3RhdGlvbkxpc3QuanN4P2ZmNmIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucyc7XG5pbXBvcnQgQW5ub3RhdGlvbiBmcm9tICcuL0Fubm90YXRpb24uanN4JztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmNsYXNzIEFubm90YXRpb25MaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhbm5vdGF0aW9uczogW10sXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5iaW5kKCdsb2FkZWQtYW5ub3RhdGlvbnMnLCB0aGlzLnNldEFubm90YXRpb25zLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgnbG9hZC1hbm5vdGF0aW9ucycsIHRoaXMubG9hZEFubm90YXRpb25zLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgnY2hhbmdlZC10YXJnZXQnLCB0aGlzLmxvYWRBbm5vdGF0aW9ucy5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2RlbGV0ZWQtYW5ub3RhdGlvbicsIHRoaXMubG9hZEFubm90YXRpb25zLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBsb2FkQW5ub3RhdGlvbnMoKSB7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLmxvYWRBbm5vdGF0aW9ucygpO1xuICAgIH1cbiAgICBzZXRBbm5vdGF0aW9ucyhhbm5vdGF0aW9ucykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthbm5vdGF0aW9uczogYW5ub3RhdGlvbnN9KTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgYW5ub3RhdGlvbkl0ZW1zID0gbnVsbDtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFubm90YXRpb25zKSB7XG4gICAgICAgICAgICBhbm5vdGF0aW9uSXRlbXMgPSB0aGlzLnN0YXRlLmFubm90YXRpb25zLm1hcChmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEFubm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb249e2Fubm90YXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Fubm90YXRpb24uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17Y29tcG9uZW50LnByb3BzLmN1cnJlbnRVc2VyfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkKCgpID0+IHtcbiAgICAgICAgICAgICQoXCJbZGF0YS10b2dnbGU9cG9wb3Zlcl1cIikucG9wb3ZlcigpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbm5vdGF0aW9uTGlzdFwiPlxuICAgICAgICAgICAgICAgIDxoMz5TdG9yZWQgQW5ub3RhdGlvbnM8L2gzPlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWdyb3VwIGFubm90YXRpb24tc2Nyb2xsLWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAge2Fubm90YXRpb25JdGVtc31cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBbm5vdGF0aW9uTGlzdDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUtBOzs7O0FBNUNBO0FBQ0E7QUE4Q0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/annotation/AnnotationList.jsx\n");

/***/ }),

/***/ "./src/components/annotation/AnnotationViewer.jsx":
/*!********************************************************!*\
  !*** ./src/components/annotation/AnnotationViewer.jsx ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnnotationViewer; });\n/* harmony import */ var _AnnotationCreator_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AnnotationCreator.jsx */ \"./src/components/annotation/AnnotationCreator.jsx\");\n/* harmony import */ var _AnnotationList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AnnotationList.jsx */ \"./src/components/annotation/AnnotationList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar AnnotationViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationViewer, _React$Component);\n\n  function AnnotationViewer(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationViewer).call(this, props));\n    _this.state = {\n      view: \"annotations\"\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"annotationViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_AnnotationCreator_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_AnnotationList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return AnnotationViewer;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0Fubm90YXRpb25WaWV3ZXIuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9Bbm5vdGF0aW9uVmlld2VyLmpzeD82MDg4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBhbm5vdGF0ZS1yZGZhLmpzIGFsbG93cyB1c2VyIHRvIHNlbGVjdCBSREZBLWxhYmVsZWQgdGV4dCBmcmFnbWVudHNcbiAqIGluIFJERmEgZW5yaWNoZWQgSFRNTCBkb2N1bWVudHMuXG4gKlxuICovXG5cbi8vIFRPIERPOiBkZWFsIHdpdGggZWxlbWVudHMgdGhhdCBoYXZlIG11bHRpcGxlIHR5cGVzXG5cbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgQW5ub3RhdGlvbkNyZWF0b3IgZnJvbSAnLi9Bbm5vdGF0aW9uQ3JlYXRvci5qc3gnO1xuaW1wb3J0IEFubm90YXRpb25MaXN0IGZyb20gJy4vQW5ub3RhdGlvbkxpc3QuanN4JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4uLy4uL2ZsdXgvQW5ub3RhdGlvbkFjdGlvbnMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbm5vdGF0aW9uVmlld2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB2aWV3OiBcImFubm90YXRpb25zXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5ub3RhdGlvblZpZXdlclwiPlxuICAgICAgICAgICAgPEFubm90YXRpb25DcmVhdG9yXG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e3RoaXMucHJvcHMuY3VycmVudFVzZXJ9XG4gICAgICAgICAgICAgICAgY29uZmlnPXt0aGlzLnByb3BzLmNvbmZpZ31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QW5ub3RhdGlvbkxpc3RcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17dGhpcy5wcm9wcy5jdXJyZW50VXNlcn1cbiAgICAgICAgICAgICAgICBjb25maWc9e3RoaXMucHJvcHMuY29uZmlnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFNQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFGQTtBQU1BOzs7O0FBdEJBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/AnnotationViewer.jsx\n");

/***/ }),

/***/ "./src/components/annotation/BodyCreator.jsx":
/*!***************************************************!*\
  !*** ./src/components/annotation/BodyCreator.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FreetextForm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FreetextForm */ \"./src/components/annotation/FreetextForm.jsx\");\n/* harmony import */ var _ClassifyingForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ClassifyingForm */ \"./src/components/annotation/ClassifyingForm.jsx\");\n/* harmony import */ var _LinkingForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LinkingForm */ \"./src/components/annotation/LinkingForm.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar BodyCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BodyCreator, _React$Component);\n\n  function BodyCreator(props) {\n    var _this;\n\n    _classCallCheck(this, BodyCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BodyCreator).call(this, props));\n    var activeTab = null;\n\n    for (var i = 0; i < Object.keys(_this.props.annotationTasks).length; i++) {\n      if (Object.keys(_this.props.annotationTasks)[i] != 'bookmark') {\n        activeTab = Object.keys(_this.props.annotationTasks)[i];\n        break;\n      }\n    }\n\n    _this.state = {\n      activeTab: activeTab,\n      bodies: _this.props.createdBodies,\n      defaultCollection: null\n    };\n    return _this;\n  }\n\n  _createClass(BodyCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"closeSelectorModal\",\n    value: function closeSelectorModal() {\n      this.setState({\n        showSelectorModal: false\n      });\n    }\n  }, {\n    key: \"updateAnnotationBody\",\n    value: function updateAnnotationBody(annotationMode, value) {\n      var bodies = this.state.bodies;\n      bodies[annotationMode] = value;\n      this.setState({\n        bodies: bodies\n      });\n      this.props.setBodies(bodies);\n    }\n  }, {\n    key: \"addTargets\",\n    value: function addTargets() {\n      this.props.addTargets();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //generate the tabs from the configured modes\n      var tabs = Object.keys(this.props.annotationTasks).map(function (mode) {\n        if (mode == 'bookmark') {\n          return null;\n        }\n\n        ;\n        return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"li\", {\n          key: mode + '__tab_option',\n          className: \"nav-tab\"\n        }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + mode,\n          className: this.state.activeTab == mode ? 'nav-link active' : 'nav-link'\n        }, mode));\n      }, this); //generate the content of each tab (a form based on a annotation mode/motivation)\n\n      var tabContents = Object.keys(this.props.annotationTasks).map(function (mode) {\n        if (mode == 'bookmark') {\n          return null;\n        }\n\n        ;\n        var form = '';\n\n        switch (mode) {\n          case 'classify':\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ClassifyingForm__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n              data: this.state.bodies.classification,\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this),\n              services: this.props.services\n            });\n            break;\n\n          case 'link':\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_LinkingForm__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n              data: this.state.bodies.link,\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this),\n              services: this.props.services\n            });\n            break;\n\n          default:\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_FreetextForm__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n              data: this.state.bodies[this.props.annotationTasks[mode].type],\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this)\n            });\n            break;\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n          key: mode + '__tab_content',\n          id: mode,\n          className: this.state.activeTab == mode ? 'tab-pane active' : 'tab-pane'\n        }, form);\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, tabs), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, tabContents), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", null));\n    }\n  }]);\n\n  return BodyCreator;\n}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BodyCreator);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0JvZHlDcmVhdG9yLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2Fubm90YXRpb24vQm9keUNyZWF0b3IuanN4P2NiN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZyZWV0ZXh0Rm9ybSBmcm9tICcuL0ZyZWV0ZXh0Rm9ybSc7XG5pbXBvcnQgQ2xhc3NpZnlpbmdGb3JtIGZyb20gJy4vQ2xhc3NpZnlpbmdGb3JtJztcbmltcG9ydCBMaW5raW5nRm9ybSBmcm9tICcuL0xpbmtpbmdGb3JtJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuXG5jbGFzcyBCb2R5Q3JlYXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgbGV0IGFjdGl2ZVRhYiA9IG51bGw7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8T2JqZWN0LmtleXModGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3MpLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKHRoaXMucHJvcHMuYW5ub3RhdGlvblRhc2tzKVtpXSAhPSAnYm9va21hcmsnKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3MpW2ldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYWIgOiBhY3RpdmVUYWIsXG4gICAgICAgICAgICBib2RpZXM6IHRoaXMucHJvcHMuY3JlYXRlZEJvZGllcyxcbiAgICAgICAgICAgIGRlZmF1bHRDb2xsZWN0aW9uOiBudWxsLFxuICAgICAgICB9XG4gICAgfVxuXG5cdGNvbXBvbmVudERpZE1vdW50KCkge1xuXHR9XG5cbiAgICBjbG9zZVNlbGVjdG9yTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dTZWxlY3Rvck1vZGFsOiBmYWxzZX0pO1xuICAgIH1cbiAgICB1cGRhdGVBbm5vdGF0aW9uQm9keShhbm5vdGF0aW9uTW9kZSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGJvZGllcyA9IHRoaXMuc3RhdGUuYm9kaWVzO1xuICAgICAgICBib2RpZXNbYW5ub3RhdGlvbk1vZGVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2JvZGllczogYm9kaWVzfSk7XG4gICAgICAgIHRoaXMucHJvcHMuc2V0Qm9kaWVzKGJvZGllcyk7XG4gICAgfVxuXG4gICAgYWRkVGFyZ2V0cygpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hZGRUYXJnZXRzKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvL2dlbmVyYXRlIHRoZSB0YWJzIGZyb20gdGhlIGNvbmZpZ3VyZWQgbW9kZXNcbiAgICAgICAgY29uc3QgdGFicyA9IE9iamVjdC5rZXlzKHRoaXMucHJvcHMuYW5ub3RhdGlvblRhc2tzKS5tYXAoZnVuY3Rpb24obW9kZSkge1xuICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ2Jvb2ttYXJrJykgeyByZXR1cm4gbnVsbCB9O1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAga2V5PXttb2RlICsgJ19fdGFiX29wdGlvbid9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm5hdi10YWJcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGEgZGF0YS10b2dnbGU9XCJ0YWJcIiBocmVmPXsnIycgKyBtb2RlfSBjbGFzc05hbWU9e3RoaXMuc3RhdGUuYWN0aXZlVGFiID09IG1vZGUgPyAnbmF2LWxpbmsgYWN0aXZlJyA6ICduYXYtbGluayd9PlxuICAgICAgICAgICAgICAgICAgICAgICAge21vZGV9XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgfSwgdGhpcylcblxuICAgICAgICAvL2dlbmVyYXRlIHRoZSBjb250ZW50IG9mIGVhY2ggdGFiIChhIGZvcm0gYmFzZWQgb24gYSBhbm5vdGF0aW9uIG1vZGUvbW90aXZhdGlvbilcbiAgICAgICAgdmFyIHRhYkNvbnRlbnRzID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3MpLm1hcChmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PSAnYm9va21hcmsnKSB7IHJldHVybiBudWxsIH07XG4gICAgICAgICAgICBsZXQgZm9ybSA9ICcnO1xuICAgICAgICAgICAgc3dpdGNoKG1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjbGFzc2lmeScgOiBmb3JtID0gKFxuICAgICAgICAgICAgICAgICAgICA8Q2xhc3NpZnlpbmdGb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhPXt0aGlzLnN0YXRlLmJvZGllcy5jbGFzc2lmaWNhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz17dGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3NbbW9kZV19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk91dHB1dD17dGhpcy51cGRhdGVBbm5vdGF0aW9uQm9keS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXM9e3RoaXMucHJvcHMuc2VydmljZXN9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsaW5rJyA6IGZvcm0gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxMaW5raW5nRm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT17dGhpcy5zdGF0ZS5ib2RpZXMubGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz17dGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3NbbW9kZV19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk91dHB1dD17dGhpcy51cGRhdGVBbm5vdGF0aW9uQm9keS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXM9e3RoaXMucHJvcHMuc2VydmljZXN9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0IDogZm9ybSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZyZWV0ZXh0Rm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT17dGhpcy5zdGF0ZS5ib2RpZXNbdGhpcy5wcm9wcy5hbm5vdGF0aW9uVGFza3NbbW9kZV0udHlwZV19XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc9e3RoaXMucHJvcHMuYW5ub3RhdGlvblRhc2tzW21vZGVdfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25PdXRwdXQ9e3RoaXMudXBkYXRlQW5ub3RhdGlvbkJvZHkuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17bW9kZSArICdfX3RhYl9jb250ZW50J31cbiAgICAgICAgICAgICAgICAgICAgaWQ9e21vZGV9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5hY3RpdmVUYWIgPT0gbW9kZSA/ICd0YWItcGFuZSBhY3RpdmUnIDogJ3RhYi1wYW5lJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibmF2IG5hdi10YWJzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0YWJzfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWItY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICB7dGFiQ29udGVudHN9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCb2R5Q3JlYXRvcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFWQTtBQWVBO0FBQ0E7OztBQUNBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBMUJBO0FBQ0E7QUEyQkE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFPQTs7OztBQTFHQTtBQUNBO0FBNEdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/BodyCreator.jsx\n");

/***/ }),

/***/ "./src/components/annotation/CandidateList.jsx":
/*!*****************************************************!*\
  !*** ./src/components/annotation/CandidateList.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CandidateList; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateTarget.jsx */ \"./src/components/annotation/CandidateTarget.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\nvar CandidateList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CandidateList, _React$Component);\n\n  function CandidateList(props) {\n    var _this;\n\n    _classCallCheck(this, CandidateList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CandidateList).call(this, props));\n    _this.selectTarget = _this.selectTarget.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: []\n    };\n    return _this;\n  }\n\n  _createClass(CandidateList, [{\n    key: \"selectTarget\",\n    value: function selectTarget(candidate) {\n      var selected = this.state.selected;\n\n      if (selected.indexOf(candidate) === -1) {\n        selected.push(candidate);\n        this.setState({\n          selected: selected\n        });\n      }\n\n      this.props.addToSelected(candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var candidateList = this;\n\n      var makeAnnotationCandidate = function makeAnnotationCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      };\n\n      var makeResourceCandidate = function makeResourceCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      };\n\n      var makeExternalCandidate = function makeExternalCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.resource,\n          candidate: candidate\n        });\n      };\n\n      if (this.props.candidateType === \"annotation\") {\n        var candidateNodes = this.props.candidates.map(function (candidate) {\n          return makeAnnotationCandidate(candidate);\n        });\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group candidate-scroll-list\"\n        }, candidateNodes));\n      }\n\n      if (this.props.candidateType === \"resource\") {\n        var candidateWholeNodes = this.props.candidates.wholeNodes.map(function (candidate) {\n          return makeResourceCandidate(candidate);\n        });\n        var candidateHighlighted = false;\n\n        if (this.props.candidates.highlighted) {\n          var highlighted = this.props.candidates.highlighted;\n          candidateHighlighted = makeResourceCandidate(this.props.candidates.highlighted);\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList candidate-scroll-list\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateHighlighted\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Highlighted fragment:\"), candidateHighlighted), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateWholeList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Whole elements:\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group\"\n        }, candidateWholeNodes)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null));\n      }\n\n      if (this.props.candidateType === \"external\") {\n        var candidateWholeNodes = this.props.candidates.wholeNodes.map(function (candidate) {\n          return makeExternalCandidate(candidate);\n        });\n        var candidateWholeNodeList = null;\n\n        if (candidateWholeNodes.length === 0) {\n          candidateWholeNodeList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"No whole \", this.props.candidateType, \" elements available\");\n        } else {\n          candidateWholeNodeList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n            className: \"candidateWholeList\"\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Whole elements:\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n            className: \"list-group\"\n          }, candidateWholeNodes));\n        }\n\n        var candidateHighlighted = false;\n\n        if (this.props.candidates.highlighted) {\n          //let highlighted = this.props.candidates.highlighted;\n          var _highlighted = makeExternalCandidate(this.props.candidates.highlighted);\n\n          candidateHighlighted = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n            className: \"candidateHighlighted\"\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Highlighted fragment:\"), _highlighted);\n        } else {\n          candidateHighlighted = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"No \", this.props.candidateType, \" fragments highlighted\");\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList\"\n        }, candidateHighlighted, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), candidateWholeNodeList);\n      }\n    }\n  }]);\n\n  return CandidateList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0NhbmRpZGF0ZUxpc3QuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9DYW5kaWRhdGVMaXN0LmpzeD80Y2IwIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FuZGlkYXRlVGFyZ2V0IGZyb20gJy4vQ2FuZGlkYXRlVGFyZ2V0LmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbmRpZGF0ZUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RUYXJnZXQgPSB0aGlzLnNlbGVjdFRhcmdldC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNlbGVjdFRhcmdldChjYW5kaWRhdGUpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5zdGF0ZS5zZWxlY3RlZDtcbiAgICAgICAgaWYgKHNlbGVjdGVkLmluZGV4T2YoY2FuZGlkYXRlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkOiBzZWxlY3RlZH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvcHMuYWRkVG9TZWxlY3RlZChjYW5kaWRhdGUpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBjYW5kaWRhdGVMaXN0ID0gdGhpcztcbiAgICAgICAgdmFyIG1ha2VBbm5vdGF0aW9uQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxDYW5kaWRhdGVUYXJnZXRcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2FuZGlkYXRlTGlzdC5zZWxlY3RUYXJnZXR9XG4gICAgICAgICAgICAgICAgICAgIGtleT17Y2FuZGlkYXRlLnNvdXJjZX1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlPXtjYW5kaWRhdGV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1ha2VSZXNvdXJjZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Q2FuZGlkYXRlVGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NhbmRpZGF0ZUxpc3Quc2VsZWN0VGFyZ2V0fVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2NhbmRpZGF0ZS5zb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZT17Y2FuZGlkYXRlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYWtlRXh0ZXJuYWxDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPENhbmRpZGF0ZVRhcmdldFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjYW5kaWRhdGVMaXN0LnNlbGVjdFRhcmdldH1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtjYW5kaWRhdGUucmVzb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZT17Y2FuZGlkYXRlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhbmRpZGF0ZVR5cGUgPT09IFwiYW5ub3RhdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgY2FuZGlkYXRlTm9kZXMgPSB0aGlzLnByb3BzLmNhbmRpZGF0ZXMubWFwKGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlQW5ub3RhdGlvbkNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FuZGlkYXRlTGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cCBjYW5kaWRhdGUtc2Nyb2xsLWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5kaWRhdGVOb2Rlc31cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5kaWRhdGVUeXBlID09PSBcInJlc291cmNlXCIpIHtcbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGVXaG9sZU5vZGVzID0gdGhpcy5wcm9wcy5jYW5kaWRhdGVzLndob2xlTm9kZXMubWFwKGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlUmVzb3VyY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZUhpZ2hsaWdodGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5kaWRhdGVzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhpZ2hsaWdodGVkID0gdGhpcy5wcm9wcy5jYW5kaWRhdGVzLmhpZ2hsaWdodGVkO1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZUhpZ2hsaWdodGVkID0gbWFrZVJlc291cmNlQ2FuZGlkYXRlKHRoaXMucHJvcHMuY2FuZGlkYXRlcy5oaWdobGlnaHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FuZGlkYXRlTGlzdCBjYW5kaWRhdGUtc2Nyb2xsLWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYW5kaWRhdGVIaWdobGlnaHRlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0PkhpZ2hsaWdodGVkIGZyYWdtZW50OjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2FuZGlkYXRlSGlnaGxpZ2h0ZWR9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbmRpZGF0ZVdob2xlTGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0Pldob2xlIGVsZW1lbnRzOjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5kaWRhdGVXaG9sZU5vZGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhbmRpZGF0ZVR5cGUgPT09IFwiZXh0ZXJuYWxcIikge1xuICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZVdob2xlTm9kZXMgPSB0aGlzLnByb3BzLmNhbmRpZGF0ZXMud2hvbGVOb2Rlcy5tYXAoZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VFeHRlcm5hbENhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgY2FuZGlkYXRlV2hvbGVOb2RlTGlzdCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlV2hvbGVOb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVXaG9sZU5vZGVMaXN0ID0gKDxkaXY+Tm8gd2hvbGUge3RoaXMucHJvcHMuY2FuZGlkYXRlVHlwZX0gZWxlbWVudHMgYXZhaWxhYmxlPC9kaXY+KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlV2hvbGVOb2RlTGlzdCA9IChcbiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbmRpZGF0ZVdob2xlTGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0Pldob2xlIGVsZW1lbnRzOjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5kaWRhdGVXaG9sZU5vZGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGVIaWdobGlnaHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2FuZGlkYXRlcy5oaWdobGlnaHRlZCkge1xuICAgICAgICAgICAgICAgIC8vbGV0IGhpZ2hsaWdodGVkID0gdGhpcy5wcm9wcy5jYW5kaWRhdGVzLmhpZ2hsaWdodGVkO1xuICAgICAgICAgICAgICAgIGxldCBoaWdobGlnaHRlZCA9IG1ha2VFeHRlcm5hbENhbmRpZGF0ZSh0aGlzLnByb3BzLmNhbmRpZGF0ZXMuaGlnaGxpZ2h0ZWQpO1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZUhpZ2hsaWdodGVkID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbmRpZGF0ZUhpZ2hsaWdodGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+SGlnaGxpZ2h0ZWQgZnJhZ21lbnQ6PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoaWdobGlnaHRlZH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlSGlnaGxpZ2h0ZWQgPSAoPGRpdj5ObyB7dGhpcy5wcm9wcy5jYW5kaWRhdGVUeXBlfSBmcmFnbWVudHMgaGlnaGxpZ2h0ZWQ8L2Rpdj4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbmRpZGF0ZUxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAge2NhbmRpZGF0ZUhpZ2hsaWdodGVkfVxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAge2NhbmRpZGF0ZVdob2xlTm9kZUxpc3R9XG5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgfVxufVxuXG5cbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBTUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBRUE7QUFBQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBT0E7QUFFQTs7OztBQTVIQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/annotation/CandidateList.jsx\n");

/***/ }),

/***/ "./src/components/annotation/CandidateTarget.jsx":
/*!*******************************************************!*\
  !*** ./src/components/annotation/CandidateTarget.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\nvar CandidateTarget =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CandidateTarget, _React$Component);\n\n  function CandidateTarget(props) {\n    var _this;\n\n    _classCallCheck(this, CandidateTarget);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CandidateTarget).call(this, props));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CandidateTarget, [{\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.props.onClick(this.props.candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //console.log(this.props.candidate);\n      var badgeType = \"badge badge-info\";\n      var targetType = \"Resource\";\n\n      if (this.props.candidate.type === \"external\") {\n        badgeType = \"badge badge-secondary\";\n      } // TO DO: deal with elements that have multiple types\n\n\n      var text = \"\";\n\n      if (this.props.candidate.type === \"annotation\") {\n        text = this.props.candidate.params.text;\n        badgeType = \"badge badge-success\";\n        targetType = \"Annotation\";\n      } else if (this.props.candidate.mimeType === \"text\") {\n        if (this.props.candidate.params.quote) {\n          text = this.props.candidate.params.quote.exact;\n        } else if (this.props.candidate.params.text) {\n          text = this.props.candidate.params.text;\n        }\n      } else if (this.props.candidate.mimeType === \"image\") {\n        text = \"Image selection\";\n      }\n\n      if (text.length > 100) {\n        text = text.substr(0, 100) + \"...\";\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        onClick: this.handleClick,\n        className: \"list-group-item candidate-target\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"table\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, targetType, \":\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, this.props.candidate.source))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, \"Type:\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: badgeType\n      }, this.props.candidate.label))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, \"Content:\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text))))));\n    }\n  }]);\n\n  return CandidateTarget;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (CandidateTarget);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0NhbmRpZGF0ZVRhcmdldC5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0NhbmRpZGF0ZVRhcmdldC5qc3g/NDgyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jbGFzcyBDYW5kaWRhdGVUYXJnZXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGljayA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB9XG4gICAgaGFuZGxlQ2xpY2soKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25DbGljayh0aGlzLnByb3BzLmNhbmRpZGF0ZSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmNhbmRpZGF0ZSk7XG4gICAgICAgIHZhciBiYWRnZVR5cGUgPSBcImJhZGdlIGJhZGdlLWluZm9cIjtcbiAgICAgICAgdmFyIHRhcmdldFR5cGUgPSBcIlJlc291cmNlXCI7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhbmRpZGF0ZS50eXBlID09PSBcImV4dGVybmFsXCIpIHtcbiAgICAgICAgICAgIGJhZGdlVHlwZSA9IFwiYmFkZ2UgYmFkZ2Utc2Vjb25kYXJ5XCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE8gRE86IGRlYWwgd2l0aCBlbGVtZW50cyB0aGF0IGhhdmUgbXVsdGlwbGUgdHlwZXNcbiAgICAgICAgdmFyIHRleHQgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5kaWRhdGUudHlwZSA9PT0gXCJhbm5vdGF0aW9uXCIpIHtcbiAgICAgICAgICAgIHRleHQgPSB0aGlzLnByb3BzLmNhbmRpZGF0ZS5wYXJhbXMudGV4dDtcbiAgICAgICAgICAgIGJhZGdlVHlwZSA9IFwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiO1xuICAgICAgICAgICAgdGFyZ2V0VHlwZSA9IFwiQW5ub3RhdGlvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuY2FuZGlkYXRlLm1pbWVUeXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2FuZGlkYXRlLnBhcmFtcy5xdW90ZSkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0aGlzLnByb3BzLmNhbmRpZGF0ZS5wYXJhbXMucXVvdGUuZXhhY3Q7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuY2FuZGlkYXRlLnBhcmFtcy50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMucHJvcHMuY2FuZGlkYXRlLnBhcmFtcy50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuY2FuZGlkYXRlLm1pbWVUeXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgICAgIHRleHQgPSBcIkltYWdlIHNlbGVjdGlvblwiXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHIoMCwxMDApICsgXCIuLi5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsaXN0LWdyb3VwLWl0ZW0gY2FuZGlkYXRlLXRhcmdldFwiPlxuICAgICAgICAgICAgICAgIDx0YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImFubm90YXRpb24tdGV4dFwiPnt0YXJnZXRUeXBlfTo8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhbm5vdGF0aW9uLXRleHRcIj57dGhpcy5wcm9wcy5jYW5kaWRhdGUuc291cmNlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJhbm5vdGF0aW9uLXRleHRcIj5UeXBlOjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YmFkZ2VUeXBlfT57dGhpcy5wcm9wcy5jYW5kaWRhdGUubGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImFubm90YXRpb24tdGV4dFwiPkNvbnRlbnQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYW5ub3RhdGlvbi10ZXh0XCI+e3RleHR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICApXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW5kaWRhdGVUYXJnZXQ7XG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRkE7QUFPQTtBQUFBO0FBR0E7QUFBQTtBQUtBO0FBQUE7QUFHQTtBQUFBO0FBS0E7QUFBQTtBQUdBO0FBQUE7QUFPQTs7OztBQW5FQTtBQUNBO0FBcUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/CandidateTarget.jsx\n");

/***/ }),

/***/ "./src/components/annotation/ClassifyingForm.jsx":
/*!*******************************************************!*\
  !*** ./src/components/annotation/ClassifyingForm.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_autosuggest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-autosuggest */ \"./node_modules/react-autosuggest/dist/index.js\");\n/* harmony import */ var react_autosuggest__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_autosuggest__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n //See: https://github.com/moroshko/react-autosuggest\n\n\n\n/*\nInput:\n    - list of classifications (props.data)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a classification) --> should be changed to Flux?\n\nOutput/emits:\n    - a list of classifications\n*/\n\nvar ClassifyingForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ClassifyingForm, _React$Component);\n\n  function ClassifyingForm(props) {\n    var _this;\n\n    _classCallCheck(this, ClassifyingForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClassifyingForm).call(this, props));\n    var vocabulary = _this.props.config.vocabularies ? _this.props.config.vocabularies[0] : null;\n    _this.state = {\n      data: _this.props.data ? _this.props.data : [],\n      value: '',\n      //the label of the selected classification (autocomplete)\n      suggestionId: null,\n      //stores the id/uri of the selected classification (e.g. GTAA URI)\n      suggestions: [],\n      //current list of suggestions shown\n      isLoading: false,\n      //loading the suggestions from the server\n      vocabulary: vocabulary\n    };\n    _this.xhrs = [];\n    return _this;\n  }\n  /* ------------------- CRUD / loading of classifications ------------------- */\n\n\n  _createClass(ClassifyingForm, [{\n    key: \"addClassification\",\n    value: function addClassification(e) {\n      if (this.state.value != '') {\n        e.preventDefault();\n        var cs = this.state.data;\n\n        if (cs) {\n          cs.push({\n            id: this.state.suggestionId,\n            value: this.state.value,\n            vocabulary: this.state.vocabulary,\n            purpose: this.props.config.purpose,\n            type: this.props.config.type\n          });\n          this.setState({\n            value: '',\n            data: cs\n          }, this.onOutput.bind(this));\n        }\n      }\n    }\n  }, {\n    key: \"toggleDefault\",\n    value: function toggleDefault(index) {// not yet implemented\n      //AnnotationActions.toggleDefault(cs[index]);\n    }\n  }, {\n    key: \"removeClassification\",\n    value: function removeClassification(index) {\n      var cs = this.state.data;\n\n      if (cs) {\n        cs.splice(index, 1);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput(this.props.config.type, this.state.data);\n      }\n    }\n  }, {\n    key: \"setVocabulary\",\n    value: function setVocabulary(event) {\n      this.setState({\n        vocabulary: event.target.value\n      });\n    }\n  }, {\n    key: \"getSuggestions\",\n    value: function getSuggestions(value, callback) {\n      //cancel all previous outgoing requests\n      for (var x = this.xhrs.length; x > 0; x--) {\n        this.xhrs[x - 1].abort();\n        this.xhrs.pop();\n      }\n\n      if (this.props.services[this.state.vocabulary].addWildcard) {\n        value = value + \"*\";\n      }\n\n      var url = this.props.services[this.state.vocabulary].api + value;\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url); // ensure service can return JSON\n\n      xhr.setRequestHeader(\"Accept\", \"application/json\");\n      xhr.send();\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\n          var data = JSON.parse(xhr.responseText); //console.log(\"results:\", data.results);\n\n          callback(data.results);\n        }\n      }; //let url = '/autocomplete?vocab=' + this.state.vocabulary + '&term=' + value;\n\n\n      this.xhrs.push(xhr);\n    }\n    /* ------------------- functions specifically needed for react-autosuggest ------------------- */\n\n  }, {\n    key: \"loadSuggestions\",\n    value: function loadSuggestions(value) {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true,\n        suggestions: []\n      });\n\n      if (value.value === this.state.chosenValue) {\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        this.getSuggestions(value.value, function (data) {\n          if (data.error) {\n            _this2.setState({\n              isLoading: false,\n              suggestions: []\n            });\n          } else {\n            _this2.setState({\n              isLoading: false,\n              suggestions: data\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getSuggestionValue\",\n    value: function getSuggestionValue(suggestion) {\n      this.setState({\n        suggestionId: suggestion.uri\n      });\n      var entry = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parseVocabularySuggestion(suggestion, this.state.vocabulary);\n      return entry.value;\n    } //TODO the rendering should be adapted for different vocabularies\n\n  }, {\n    key: \"renderSuggestion\",\n    value: function renderSuggestion(suggestion) {\n      var entry = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parseVocabularySuggestion(suggestion, this.state.vocabulary);\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", null, entry.value, \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", {\n        className: entry.label.className\n      }, entry.label.value), \"\\xA0\", entry.scopeNote);\n    }\n  }, {\n    key: \"onSuggestionsFetchRequested\",\n    value: function onSuggestionsFetchRequested(value) {\n      this.loadSuggestions(value);\n    }\n  }, {\n    key: \"onSuggestionsClearRequested\",\n    value: function onSuggestionsClearRequested() {\n      this.setState({\n        suggestions: []\n      });\n    }\n  }, {\n    key: \"onSuggestionsUpdateRequested\",\n    value: function onSuggestionsUpdateRequested(value) {\n      this.loadSuggestions(value);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(event, _ref) {\n      var newValue = _ref.newValue;\n      this.setState({\n        chosenValue: newValue,\n        value: newValue\n      });\n    }\n    /* ------------------- end of specific react-autosuggest functions ------------------- */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var classificationList = null;\n      var classifications = this.state.data.map(function (c, index) {\n        var csClass = 'badge badge-success tag';\n\n        if (c.vocabulary == 'DBpedia') {\n          csClass = 'badge badge-danger tag';\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", {\n          key: 'cl__' + index,\n          className: csClass\n        }, c.value, \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this3.removeClassification.bind(_this3, index)\n        }, \"x\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this3.toggleDefault.bind(_this3, index)\n        }, \"o\"), \"\\xA0\");\n      }, this);\n\n      if (classifications.length > 0) {\n        classificationList = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h4\", null, \"Added classifications\"), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n          className: \"well\"\n        }, classifications));\n      }\n\n      var inputProps = {\n        placeholder: \"Search term\",\n        value: this.state.value,\n        onChange: this.onChange.bind(this)\n      }; //generate the options from the config and add a default one\n\n      var vocabularyOptions = this.props.config.vocabularies.map(function (v, index) {\n        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n          className: \"vocabulary-option radio-inline\",\n          key: index\n        }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"input\", {\n          type: \"radio\",\n          name: \"vocabularyOptions\",\n          id: v,\n          value: v,\n          checked: v == _this3.state.vocabulary,\n          onChange: _this3.setVocabulary.bind(_this3)\n        }), ' ' + v);\n      }, this);\n      vocabularyOptions.push(react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n        className: \"vocabulary-option radio-inline\",\n        key: vocabularyOptions.length\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"input\", {\n        type: \"radio\",\n        name: \"vocabularyOptions\",\n        id: \"custom\",\n        value: \"custom\",\n        checked: this.state.vocabulary === 'custom',\n        onChange: this.setVocabulary.bind(this)\n      }), ' ', \"Custom (no external lookup)\"));\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        key: 'form__classify'\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, classificationList)), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h4\", null, \"Add classifications\"), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"text-left\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", null, \"Vocabulary:\\xA0\"), vocabularyOptions), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_autosuggest__WEBPACK_IMPORTED_MODULE_0___default.a, {\n        ref: this.props.config.type,\n        suggestions: this.state.suggestions,\n        onSuggestionsFetchRequested: this.onSuggestionsFetchRequested.bind(this),\n        onSuggestionsClearRequested: this.onSuggestionsClearRequested.bind(this),\n        getSuggestionValue: this.getSuggestionValue.bind(this),\n        renderSuggestion: this.renderSuggestion.bind(this),\n        inputProps: inputProps\n      })), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.addClassification.bind(this)\n      }, \"Add\")))));\n    }\n  }]);\n\n  return ClassifyingForm;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ClassifyingForm);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0NsYXNzaWZ5aW5nRm9ybS5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0NsYXNzaWZ5aW5nRm9ybS5qc3g/NGEzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXV0b3N1Z2dlc3QgZnJvbSAncmVhY3QtYXV0b3N1Z2dlc3QnOyAvL1NlZTogaHR0cHM6Ly9naXRodWIuY29tL21vcm9zaGtvL3JlYWN0LWF1dG9zdWdnZXN0XG5pbXBvcnQgQW5ub3RhdGlvbkFjdGlvbnMgZnJvbSAnLi4vLi4vZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5cbi8qXG5JbnB1dDpcbiAgICAtIGxpc3Qgb2YgY2xhc3NpZmljYXRpb25zIChwcm9wcy5kYXRhKVxuICAgIC0gYSBhbm5vdGF0aW9uIGNvbmZpZyAocHJvcHMuY29uZmlnKVxuICAgIC0gb25PdXRwdXQgKHdoYXQgdG8gZG8gYWZ0ZXIgYWRkaW5nL3JlbW92aW5nIGEgY2xhc3NpZmljYXRpb24pIC0tPiBzaG91bGQgYmUgY2hhbmdlZCB0byBGbHV4P1xuXG5PdXRwdXQvZW1pdHM6XG4gICAgLSBhIGxpc3Qgb2YgY2xhc3NpZmljYXRpb25zXG4qL1xuXG5jbGFzcyBDbGFzc2lmeWluZ0Zvcm0gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB2YXIgdm9jYWJ1bGFyeSA9IHRoaXMucHJvcHMuY29uZmlnLnZvY2FidWxhcmllcyA/IHRoaXMucHJvcHMuY29uZmlnLnZvY2FidWxhcmllc1swXSA6IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBkYXRhOiB0aGlzLnByb3BzLmRhdGEgPyB0aGlzLnByb3BzLmRhdGEgOiBbXSxcbiAgICAgICAgICAgIHZhbHVlIDogJycsIC8vdGhlIGxhYmVsIG9mIHRoZSBzZWxlY3RlZCBjbGFzc2lmaWNhdGlvbiAoYXV0b2NvbXBsZXRlKVxuICAgICAgICAgICAgc3VnZ2VzdGlvbklkIDogbnVsbCwgLy9zdG9yZXMgdGhlIGlkL3VyaSBvZiB0aGUgc2VsZWN0ZWQgY2xhc3NpZmljYXRpb24gKGUuZy4gR1RBQSBVUkkpXG4gICAgICAgICAgICBzdWdnZXN0aW9ucyA6IFtdLCAvL2N1cnJlbnQgbGlzdCBvZiBzdWdnZXN0aW9ucyBzaG93blxuICAgICAgICAgICAgaXNMb2FkaW5nIDogZmFsc2UsIC8vbG9hZGluZyB0aGUgc3VnZ2VzdGlvbnMgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgICAgICB2b2NhYnVsYXJ5IDogdm9jYWJ1bGFyeVxuICAgICAgICB9XG4gICAgICAgIHRoaXMueGhycyA9IFtdO1xuICAgIH1cblxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0gQ1JVRCAvIGxvYWRpbmcgb2YgY2xhc3NpZmljYXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgIGFkZENsYXNzaWZpY2F0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5zdGF0ZS52YWx1ZSAhPSAnJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGNzID0gdGhpcy5zdGF0ZS5kYXRhO1xuICAgICAgICAgICAgaWYoY3MpIHtcbiAgICAgICAgICAgICAgICBjcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaWQgOiB0aGlzLnN0YXRlLnN1Z2dlc3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiB0aGlzLnN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5IDogdGhpcy5zdGF0ZS52b2NhYnVsYXJ5LFxuICAgICAgICAgICAgICAgICAgICBwdXJwb3NlIDogdGhpcy5wcm9wcy5jb25maWcucHVycG9zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA6IHRoaXMucHJvcHMuY29uZmlnLnR5cGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IGNzXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5vbk91dHB1dC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvZ2dsZURlZmF1bHQoaW5kZXgpIHtcbiAgICAgICAgLy8gbm90IHlldCBpbXBsZW1lbnRlZFxuICAgICAgICAvL0Fubm90YXRpb25BY3Rpb25zLnRvZ2dsZURlZmF1bHQoY3NbaW5kZXhdKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2xhc3NpZmljYXRpb24oaW5kZXgpIHtcbiAgICAgICAgdmFyIGNzID0gdGhpcy5zdGF0ZS5kYXRhO1xuICAgICAgICBpZihjcykge1xuICAgICAgICAgICAgY3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2RhdGEgOiBjc30sIHRoaXMub25PdXRwdXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk91dHB1dCgpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy5vbk91dHB1dCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk91dHB1dCh0aGlzLnByb3BzLmNvbmZpZy50eXBlLCB0aGlzLnN0YXRlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0Vm9jYWJ1bGFyeShldmVudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt2b2NhYnVsYXJ5IDogZXZlbnQudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnModmFsdWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIC8vY2FuY2VsIGFsbCBwcmV2aW91cyBvdXRnb2luZyByZXF1ZXN0c1xuICAgICAgICBmb3IobGV0IHg9dGhpcy54aHJzLmxlbmd0aDt4PjA7eC0tKSB7XG4gICAgICAgICAgICB0aGlzLnhocnNbeC0xXS5hYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy54aHJzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlcnZpY2VzW3RoaXMuc3RhdGUudm9jYWJ1bGFyeV0uYWRkV2lsZGNhcmQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIipcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdXJsID0gdGhpcy5wcm9wcy5zZXJ2aWNlc1t0aGlzLnN0YXRlLnZvY2FidWxhcnldLmFwaSArIHZhbHVlO1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHVybCk7XG4gICAgICAgIC8vIGVuc3VyZSBzZXJ2aWNlIGNhbiByZXR1cm4gSlNPTlxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSAmJiB4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlc3VsdHM6XCIsIGRhdGEucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YS5yZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL2xldCB1cmwgPSAnL2F1dG9jb21wbGV0ZT92b2NhYj0nICsgdGhpcy5zdGF0ZS52b2NhYnVsYXJ5ICsgJyZ0ZXJtPScgKyB2YWx1ZTtcbiAgICAgICAgdGhpcy54aHJzLnB1c2goeGhyKTtcbiAgICB9XG5cbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tIGZ1bmN0aW9ucyBzcGVjaWZpY2FsbHkgbmVlZGVkIGZvciByZWFjdC1hdXRvc3VnZ2VzdCAtLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICBsb2FkU3VnZ2VzdGlvbnModmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW11cbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHZhbHVlLnZhbHVlID09PSB0aGlzLnN0YXRlLmNob3NlblZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0U3VnZ2VzdGlvbnModmFsdWUudmFsdWUsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogW11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTdWdnZXN0aW9uVmFsdWUoc3VnZ2VzdGlvbikge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzdWdnZXN0aW9uSWQgOiBzdWdnZXN0aW9uLnVyaX0pO1xuICAgICAgICBsZXQgZW50cnkgPSBBbm5vdGF0aW9uQWN0aW9ucy5wYXJzZVZvY2FidWxhcnlTdWdnZXN0aW9uKHN1Z2dlc3Rpb24sIHRoaXMuc3RhdGUudm9jYWJ1bGFyeSk7XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZTtcbiAgICB9XG5cbiAgICAvL1RPRE8gdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgYWRhcHRlZCBmb3IgZGlmZmVyZW50IHZvY2FidWxhcmllc1xuICAgIHJlbmRlclN1Z2dlc3Rpb24oc3VnZ2VzdGlvbikge1xuICAgICAgICBsZXQgZW50cnkgPSBBbm5vdGF0aW9uQWN0aW9ucy5wYXJzZVZvY2FidWxhcnlTdWdnZXN0aW9uKHN1Z2dlc3Rpb24sIHRoaXMuc3RhdGUudm9jYWJ1bGFyeSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c3Bhbj57ZW50cnkudmFsdWV9Jm5ic3A7XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtlbnRyeS5sYWJlbC5jbGFzc05hbWV9PlxuICAgICAgICAgICAgICAgICAgICB7ZW50cnkubGFiZWwudmFsdWV9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICZuYnNwO3tlbnRyeS5zY29wZU5vdGV9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgb25TdWdnZXN0aW9uc0ZldGNoUmVxdWVzdGVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9hZFN1Z2dlc3Rpb25zKHZhbHVlKTtcbiAgICB9XG5cbiAgICBvblN1Z2dlc3Rpb25zQ2xlYXJSZXF1ZXN0ZWQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uU3VnZ2VzdGlvbnNVcGRhdGVSZXF1ZXN0ZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5sb2FkU3VnZ2VzdGlvbnModmFsdWUpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlKGV2ZW50LCB7IG5ld1ZhbHVlIH0pIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjaG9zZW5WYWx1ZTogbmV3VmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3VmFsdWVcbiAgICAgICAgfSk7XG4gICAgfSAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tIGVuZCBvZiBzcGVjaWZpYyByZWFjdC1hdXRvc3VnZ2VzdCBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgY2xhc3NpZmljYXRpb25MaXN0ID0gbnVsbDtcbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb25zID0gdGhpcy5zdGF0ZS5kYXRhLm1hcCgoYywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjc0NsYXNzID0gJ2JhZGdlIGJhZGdlLXN1Y2Nlc3MgdGFnJztcbiAgICAgICAgICAgIGlmKGMudm9jYWJ1bGFyeSA9PSAnREJwZWRpYScpIHtcbiAgICAgICAgICAgICAgICBjc0NsYXNzID0gJ2JhZGdlIGJhZGdlLWRhbmdlciB0YWcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3BhbiBrZXk9eydjbF9fJyArIGluZGV4fSBjbGFzc05hbWU9e2NzQ2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICB7Yy52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLWxpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVtb3ZlQ2xhc3NpZmljYXRpb24uYmluZCh0aGlzLCBpbmRleCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJiYWRnZSBiYWRnZS1saWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZURlZmF1bHQuYmluZCh0aGlzLCBpbmRleCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgb1xuICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIGlmKGNsYXNzaWZpY2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjbGFzc2lmaWNhdGlvbkxpc3QgPSAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGg0PkFkZGVkIGNsYXNzaWZpY2F0aW9uczwvaDQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzaWZpY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbnB1dFByb3BzID0ge1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIHRlcm1cIixcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vZ2VuZXJhdGUgdGhlIG9wdGlvbnMgZnJvbSB0aGUgY29uZmlnIGFuZCBhZGQgYSBkZWZhdWx0IG9uZVxuICAgICAgICBjb25zdCB2b2NhYnVsYXJ5T3B0aW9ucyA9IHRoaXMucHJvcHMuY29uZmlnLnZvY2FidWxhcmllcy5tYXAoKHYsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ2b2NhYnVsYXJ5LW9wdGlvbiByYWRpby1pbmxpbmVcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInZvY2FidWxhcnlPcHRpb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXt2fVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Z9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt2ID09IHRoaXMuc3RhdGUudm9jYWJ1bGFyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldFZvY2FidWxhcnkuYmluZCh0aGlzKX0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgeycgJyArIHZ9XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB2b2NhYnVsYXJ5T3B0aW9ucy5wdXNoKFxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInZvY2FidWxhcnktb3B0aW9uIHJhZGlvLWlubGluZVwiIGtleT17dm9jYWJ1bGFyeU9wdGlvbnMubGVuZ3RofT5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInZvY2FidWxhcnlPcHRpb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiY3VzdG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwiY3VzdG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUudm9jYWJ1bGFyeSA9PT0gJ2N1c3RvbSd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRWb2NhYnVsYXJ5LmJpbmQodGhpcyl9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsnICd9Q3VzdG9tIChubyBleHRlcm5hbCBsb29rdXApXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17J2Zvcm1fX2NsYXNzaWZ5J30+XG4gICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzaWZpY2F0aW9uTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+QWRkIGNsYXNzaWZpY2F0aW9uczwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1sZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Vm9jYWJ1bGFyeTombmJzcDs8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZvY2FidWxhcnlPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEF1dG9zdWdnZXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMuY29uZmlnLnR5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucz17dGhpcy5zdGF0ZS5zdWdnZXN0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN1Z2dlc3Rpb25zRmV0Y2hSZXF1ZXN0ZWQ9e3RoaXMub25TdWdnZXN0aW9uc0ZldGNoUmVxdWVzdGVkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdWdnZXN0aW9uc0NsZWFyUmVxdWVzdGVkPXt0aGlzLm9uU3VnZ2VzdGlvbnNDbGVhclJlcXVlc3RlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN1Z2dlc3Rpb25WYWx1ZT17dGhpcy5nZXRTdWdnZXN0aW9uVmFsdWUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJTdWdnZXN0aW9uPXt0aGlzLnJlbmRlclN1Z2dlc3Rpb24uYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXtpbnB1dFByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuYWRkQ2xhc3NpZmljYXRpb24uYmluZCh0aGlzKX0+QWRkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENsYXNzaWZ5aW5nRm9ybTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTs7Ozs7Ozs7OztBQVVBOzs7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQU5BO0FBUUE7QUFYQTtBQVlBO0FBRUE7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFNQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVdBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUFBO0FBQUE7QUFNQTs7OztBQWxRQTtBQUNBO0FBcVFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/ClassifyingForm.jsx\n");

/***/ }),

/***/ "./src/components/annotation/FreetextForm.jsx":
/*!****************************************************!*\
  !*** ./src/components/annotation/FreetextForm.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/*\nGoal:\n    -\n\nInput:\n    - list of free text bodies (props.data)\n        - annotation ID\n        - the free text statement (string value)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a free text statement) --> should be changed to Flux?\n\nOutput/emits:\n    - 'on change' (whenever adding/removing a free text statement)\n        - data:\n            - event type ('add', 'delete')\n            - the item that was added/deleted (ID + value)\n            - the list of statements\n*/\n\n\nvar FreetextForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FreetextForm, _React$Component);\n\n  function FreetextForm(props) {\n    var _this;\n\n    _classCallCheck(this, FreetextForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FreetextForm).call(this, props));\n    _this.state = {\n      data: _this.props.data ? _this.props.data : []\n    };\n    return _this;\n  }\n\n  _createClass(FreetextForm, [{\n    key: \"addStatement\",\n    value: function addStatement(e) {\n      e.preventDefault();\n      var cs = this.state.data;\n\n      if (cs) {\n        var annotation = {\n          value: this.refs.statement.value,\n          purpose: this.props.config.purpose,\n          type: this.props.config.type,\n          format: this.props.config.format\n        };\n        cs.push(annotation);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n        this.refs.statement.value = '';\n      }\n    }\n  }, {\n    key: \"removeStatement\",\n    value: function removeStatement(index) {\n      var cs = this.state.data;\n\n      if (cs) {\n        cs.splice(index, 1);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput(this.props.config.type, this.state.data);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var statementList = null;\n      var elementKey = \"form__\" + this.props.config.purpose;\n      var placeholder = \"Add \" + this.props.config.type;\n      var statements = this.state.data.map(function (statement, index) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: 'com__' + index,\n          className: \"list-group-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this2.removeStatement.bind(_this2, index)\n        }, \"x\"), \"\\xA0\", statement.value);\n      }, this);\n\n      if (statements.length > 0) {\n        statementList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Added statements\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group\"\n        }, statements));\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: elementKey\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, statementList)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, this.props.config.type), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        ref: \"statement\",\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: placeholder\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.addStatement.bind(this)\n      }, \"Add\"))))));\n    }\n  }]);\n\n  return FreetextForm;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FreetextForm);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0ZyZWV0ZXh0Rm9ybS5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0ZyZWV0ZXh0Rm9ybS5qc3g/NTllMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuR29hbDpcbiAgICAtXG5cbklucHV0OlxuICAgIC0gbGlzdCBvZiBmcmVlIHRleHQgYm9kaWVzIChwcm9wcy5kYXRhKVxuICAgICAgICAtIGFubm90YXRpb24gSURcbiAgICAgICAgLSB0aGUgZnJlZSB0ZXh0IHN0YXRlbWVudCAoc3RyaW5nIHZhbHVlKVxuICAgIC0gYSBhbm5vdGF0aW9uIGNvbmZpZyAocHJvcHMuY29uZmlnKVxuICAgIC0gb25PdXRwdXQgKHdoYXQgdG8gZG8gYWZ0ZXIgYWRkaW5nL3JlbW92aW5nIGEgZnJlZSB0ZXh0IHN0YXRlbWVudCkgLS0+IHNob3VsZCBiZSBjaGFuZ2VkIHRvIEZsdXg/XG5cbk91dHB1dC9lbWl0czpcbiAgICAtICdvbiBjaGFuZ2UnICh3aGVuZXZlciBhZGRpbmcvcmVtb3ZpbmcgYSBmcmVlIHRleHQgc3RhdGVtZW50KVxuICAgICAgICAtIGRhdGE6XG4gICAgICAgICAgICAtIGV2ZW50IHR5cGUgKCdhZGQnLCAnZGVsZXRlJylcbiAgICAgICAgICAgIC0gdGhlIGl0ZW0gdGhhdCB3YXMgYWRkZWQvZGVsZXRlZCAoSUQgKyB2YWx1ZSlcbiAgICAgICAgICAgIC0gdGhlIGxpc3Qgb2Ygc3RhdGVtZW50c1xuKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuY2xhc3MgRnJlZXRleHRGb3JtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRhdGE6IHRoaXMucHJvcHMuZGF0YSA/IHRoaXMucHJvcHMuZGF0YSA6IFtdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRTdGF0ZW1lbnQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBjcyA9IHRoaXMuc3RhdGUuZGF0YTtcbiAgICAgICAgaWYoY3MpIHtcbiAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlIDogdGhpcy5yZWZzLnN0YXRlbWVudC52YWx1ZSxcbiAgICAgICAgICAgICAgICBwdXJwb3NlIDogdGhpcy5wcm9wcy5jb25maWcucHVycG9zZSxcbiAgICAgICAgICAgICAgICB0eXBlIDogdGhpcy5wcm9wcy5jb25maWcudHlwZSxcbiAgICAgICAgICAgICAgICBmb3JtYXQgOiB0aGlzLnByb3BzLmNvbmZpZy5mb3JtYXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNzLnB1c2goYW5ub3RhdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhIDogY3N9LCB0aGlzLm9uT3V0cHV0LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWZzLnN0YXRlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVtb3ZlU3RhdGVtZW50KGluZGV4KSB7XG4gICAgICAgIHZhciBjcyA9IHRoaXMuc3RhdGUuZGF0YTtcbiAgICAgICAgaWYoY3MpIHtcbiAgICAgICAgICAgIGNzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhIDogY3N9LCB0aGlzLm9uT3V0cHV0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25PdXRwdXQoKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMub25PdXRwdXQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25PdXRwdXQodGhpcy5wcm9wcy5jb25maWcudHlwZSwgdGhpcy5zdGF0ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHN0YXRlbWVudExpc3QgPSBudWxsO1xuICAgICAgICBsZXQgZWxlbWVudEtleSA9IFwiZm9ybV9fXCIgKyB0aGlzLnByb3BzLmNvbmZpZy5wdXJwb3NlO1xuICAgICAgICBsZXQgcGxhY2Vob2xkZXIgPSBcIkFkZCBcIiArIHRoaXMucHJvcHMuY29uZmlnLnR5cGU7XG4gICAgICAgIGNvbnN0IHN0YXRlbWVudHMgPSB0aGlzLnN0YXRlLmRhdGEubWFwKChzdGF0ZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsaSBrZXk9eydjb21fXycgKyBpbmRleH0gY2xhc3NOYW1lPVwibGlzdC1ncm91cC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLWxpZ2h0XCIgb25DbGljaz17dGhpcy5yZW1vdmVTdGF0ZW1lbnQuYmluZCh0aGlzLCBpbmRleCl9Png8L2k+XG4gICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICB7c3RhdGVtZW50LnZhbHVlfVxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApXG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICBpZihzdGF0ZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHN0YXRlbWVudExpc3QgPSAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGg0PkFkZGVkIHN0YXRlbWVudHM8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRlbWVudHN9XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e2VsZW1lbnRLZXl9PlxuICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzdGF0ZW1lbnRMaXN0fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND57dGhpcy5wcm9wcy5jb25maWcudHlwZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInN0YXRlbWVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eyBwbGFjZWhvbGRlciB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17dGhpcy5hZGRTdGF0ZW1lbnQuYmluZCh0aGlzKX0+QWRkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZyZWV0ZXh0Rm9ybTtcblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFBQTtBQUFBO0FBT0E7Ozs7QUExRkE7QUFDQTtBQTRGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/annotation/FreetextForm.jsx\n");

/***/ }),

/***/ "./src/components/annotation/LinkingForm.jsx":
/*!***************************************************!*\
  !*** ./src/components/annotation/LinkingForm.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/*\nInput:\n    - list of links (props.data)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a link) --> should be changed to Flux?\n\nOutput/emits:\n    - a list of links\n*/\n\n\nvar LinkingForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LinkingForm, _React$Component);\n\n  function LinkingForm(props) {\n    var _this;\n\n    _classCallCheck(this, LinkingForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LinkingForm).call(this, props));\n    var api = _this.props.config.apis ? _this.props.config.apis[0].name : null;\n    _this.state = {\n      data: _this.props.data ? _this.props.data : [],\n      api: api,\n      results: []\n    };\n    return _this;\n  }\n  /* ------------------- CRUD / loading of links ------------------- */\n\n\n  _createClass(LinkingForm, [{\n    key: \"setAPI\",\n    value: function setAPI(event) {\n      this.setState({\n        api: event.target.value\n      });\n    } //TODO make sure that at least one common property is present in the linkData (when hooking up different APIs)\n\n  }, {\n    key: \"addLink\",\n    value: function addLink(linkData) {\n      var annotations = this.state.data;\n\n      if (annotations && linkData) {\n        var annotation = {\n          purpose: \"linking\",\n          type: \"Linking\",\n          value: linkData\n        };\n        annotations.push(annottion);\n        this.setState({\n          data: annotations\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"removeLink\",\n    value: function removeLink(index) {\n      var annotations = this.state.data;\n\n      if (annotations) {\n        annotations.splice(index, 1);\n        this.setState({\n          data: annotations\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput('links', this.state.data);\n      }\n    }\n  }, {\n    key: \"search\",\n    value: function search(event) {\n      event.preventDefault();\n      var url = '/link/' + this.state.api + '/search?q=' + this.refs.search.value;\n      fetch(url, {\n        method: \"GET\",\n        cache: 'no-cache',\n        mode: 'cors'\n      }).then(function (response) {\n        this.onSearch(response.json());\n      }.bind(this)).catch(function (err) {\n        console.error(url, err.toString());\n      });\n    }\n  }, {\n    key: \"onSearch\",\n    value: function onSearch(data) {\n      this.setState({\n        results: data\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var linkList = null;\n      var links = null;\n\n      if (this.state.data) {\n        links = this.state.data.map(function (link, index) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n            key: 'com__' + index,\n            className: \"list-group-item\"\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n            className: \"badge badge-light\",\n            onClick: _this2.removeLink.bind(_this2, index)\n          }), \"\\xA0\", link.label);\n        }, this);\n\n        if (links.length > 0) {\n          linkList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Added links\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n            className: \"list-group\"\n          }, links));\n        }\n      } //generate the options from the config and add a default one\n\n\n      var apiOptions = this.props.config.apis.map(function (api, index) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n          className: \"radio-inline\",\n          key: index\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n          type: \"radio\",\n          name: \"apiOptions\",\n          id: api.name,\n          value: api.name,\n          checked: api.name == _this2.state.api,\n          onChange: _this2.setAPI.bind(_this2)\n        }), api.name);\n      }, this);\n      var results = this.state.results.map(function (res, index) {\n        var poster = '';\n\n        if (res.poster) {\n          poster = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", {\n            src: res.poster,\n            style: {\n              maxWidth: '100px'\n            }\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", {\n          key: 'result__' + index,\n          onDoubleClick: _this2.addLink.bind(_this2, res)\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, poster), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n          className: \"media-heading\"\n        }, res.label ? res.label : res.title)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, res.description));\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: 'form__link'\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, linkList)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Add links\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"text-left\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"API:\\xA0\"), apiOptions), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"text\",\n        ref: \"search\",\n        className: \"form-control\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.search.bind(this)\n      }, \"Search\")), this.state.results.length > 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Gevonden resultaten \", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"small\", null, \"Dubbelklik een gevonden resultaat om deze toe te voegen\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"well\",\n        style: {\n          height: '400px',\n          overflow: 'auto'\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"table\", {\n        className: \"table table-bordered\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, results)))) : null)));\n    }\n  }]);\n\n  return LinkingForm;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LinkingForm);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL0xpbmtpbmdGb3JtLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2Fubm90YXRpb24vTGlua2luZ0Zvcm0uanN4PzFhYTciXSwic291cmNlc0NvbnRlbnQiOlsiLypcbklucHV0OlxuICAgIC0gbGlzdCBvZiBsaW5rcyAocHJvcHMuZGF0YSlcbiAgICAtIGEgYW5ub3RhdGlvbiBjb25maWcgKHByb3BzLmNvbmZpZylcbiAgICAtIG9uT3V0cHV0ICh3aGF0IHRvIGRvIGFmdGVyIGFkZGluZy9yZW1vdmluZyBhIGxpbmspIC0tPiBzaG91bGQgYmUgY2hhbmdlZCB0byBGbHV4P1xuXG5PdXRwdXQvZW1pdHM6XG4gICAgLSBhIGxpc3Qgb2YgbGlua3NcbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNsYXNzIExpbmtpbmdGb3JtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdmFyIGFwaSA9IHRoaXMucHJvcHMuY29uZmlnLmFwaXMgPyB0aGlzLnByb3BzLmNvbmZpZy5hcGlzWzBdLm5hbWUgOiBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5kYXRhID8gdGhpcy5wcm9wcy5kYXRhIDogW10sXG4gICAgICAgICAgICBhcGkgOiBhcGksXG4gICAgICAgICAgICByZXN1bHRzIDogW11cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0gQ1JVRCAvIGxvYWRpbmcgb2YgbGlua3MgLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgc2V0QVBJKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2FwaSA6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIC8vVE9ETyBtYWtlIHN1cmUgdGhhdCBhdCBsZWFzdCBvbmUgY29tbW9uIHByb3BlcnR5IGlzIHByZXNlbnQgaW4gdGhlIGxpbmtEYXRhICh3aGVuIGhvb2tpbmcgdXAgZGlmZmVyZW50IEFQSXMpXG4gICAgYWRkTGluayhsaW5rRGF0YSkge1xuICAgICAgICB2YXIgYW5ub3RhdGlvbnMgPSB0aGlzLnN0YXRlLmRhdGE7XG4gICAgICAgIGlmKGFubm90YXRpb25zICYmIGxpbmtEYXRhKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBwdXJwb3NlIDogXCJsaW5raW5nXCIsXG4gICAgICAgICAgICAgICAgdHlwZSA6IFwiTGlua2luZ1wiLFxuICAgICAgICAgICAgICAgIHZhbHVlIDogbGlua0RhdGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFubm90YXRpb25zLnB1c2goYW5ub3R0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2RhdGEgOiBhbm5vdGF0aW9uc30sIHRoaXMub25PdXRwdXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVMaW5rKGluZGV4KSB7XG4gICAgICAgIHZhciBhbm5vdGF0aW9ucyA9IHRoaXMuc3RhdGUuZGF0YTtcbiAgICAgICAgaWYoYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICAgIGFubm90YXRpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhIDogYW5ub3RhdGlvbnN9LCB0aGlzLm9uT3V0cHV0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25PdXRwdXQoKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMub25PdXRwdXQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25PdXRwdXQoJ2xpbmtzJywgdGhpcy5zdGF0ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlYXJjaChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdXJsID0gJy9saW5rLycrdGhpcy5zdGF0ZS5hcGkrJy9zZWFyY2g/cT0nICsgdGhpcy5yZWZzLnNlYXJjaC52YWx1ZTtcbiAgICAgICAgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLm9uU2VhcmNoKHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHVybCwgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblNlYXJjaChkYXRhKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Jlc3VsdHMgOiBkYXRhfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgbGlua0xpc3QgPSBudWxsO1xuICAgICAgICBsZXQgbGlua3MgPSBudWxsO1xuICAgICAgICBpZih0aGlzLnN0YXRlLmRhdGEpIHtcbiAgICAgICAgICAgIGxpbmtzID0gdGhpcy5zdGF0ZS5kYXRhLm1hcCgobGluaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8bGkga2V5PXsnY29tX18nICsgaW5kZXh9IGNsYXNzTmFtZT1cImxpc3QtZ3JvdXAtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiYmFkZ2UgYmFkZ2UtbGlnaHRcIiBvbkNsaWNrPXt0aGlzLnJlbW92ZUxpbmsuYmluZCh0aGlzLCBpbmRleCl9PjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAge2xpbmsubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICBpZihsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGlua0xpc3QgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+QWRkZWQgbGlua3M8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cImxpc3QtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGlua3N9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2dlbmVyYXRlIHRoZSBvcHRpb25zIGZyb20gdGhlIGNvbmZpZyBhbmQgYWRkIGEgZGVmYXVsdCBvbmVcbiAgICAgICAgY29uc3QgYXBpT3B0aW9ucyA9IHRoaXMucHJvcHMuY29uZmlnLmFwaXMubWFwKChhcGksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJyYWRpby1pbmxpbmVcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFwaU9wdGlvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2FwaS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2FwaS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17YXBpLm5hbWUgPT0gdGhpcy5zdGF0ZS5hcGl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRBUEkuYmluZCh0aGlzKX0vPlxuICAgICAgICAgICAgICAgICAgICAgICAge2FwaS5uYW1lfVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICApO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5zdGF0ZS5yZXN1bHRzLm1hcCgocmVzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IHBvc3RlciA9ICcnO1xuICAgICAgICAgICAgaWYocmVzLnBvc3Rlcikge1xuICAgICAgICAgICAgICAgIHBvc3RlciA9ICg8aW1nIHNyYz17cmVzLnBvc3Rlcn0gc3R5bGU9e3ttYXhXaWR0aDonMTAwcHgnfX0vPik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICAgICAgPHRyIGtleT17J3Jlc3VsdF9fJyArIGluZGV4fSBvbkRvdWJsZUNsaWNrPXt0aGlzLmFkZExpbmsuYmluZCh0aGlzLCByZXMpfT5cbiAgICAgICAgICAgICAgICAgICAgPHRkPntwb3N0ZXJ9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPjxsYWJlbCBjbGFzc05hbWU9XCJtZWRpYS1oZWFkaW5nXCI+e3Jlcy5sYWJlbCA/IHJlcy5sYWJlbCA6IHJlcy50aXRsZX08L2xhYmVsPjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57cmVzLmRlc2NyaXB0aW9ufTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSwgdGhpcylcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9eydmb3JtX19saW5rJ30+XG4gICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2xpbmtMaXN0fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5BZGQgbGlua3M8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkFQSTombmJzcDs8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FwaU9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiByZWY9XCJzZWFyY2hcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuc2VhcmNoLmJpbmQodGhpcyl9PlNlYXJjaDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5yZXN1bHRzLmxlbmd0aCA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5HZXZvbmRlbiByZXN1bHRhdGVuIDxzbWFsbD5EdWJiZWxrbGlrIGVlbiBnZXZvbmRlbiByZXN1bHRhYXQgb20gZGV6ZSB0b2UgdGUgdm9lZ2VuPC9zbWFsbD48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnNDAwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgdGFibGUtYm9yZGVyZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj46IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IExpbmtpbmdGb3JtO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBOzs7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFJQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUZBO0FBTUE7QUFBQTtBQVdBOzs7O0FBcEtBO0FBQ0E7QUF1S0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/annotation/LinkingForm.jsx\n");

/***/ }),

/***/ "./src/components/annotation/SelectedList.jsx":
/*!****************************************************!*\
  !*** ./src/components/annotation/SelectedList.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SelectedList; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateTarget.jsx */ \"./src/components/annotation/CandidateTarget.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\nvar SelectedList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SelectedList, _React$Component);\n\n  function SelectedList(props) {\n    var _this;\n\n    _classCallCheck(this, SelectedList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SelectedList).call(this, props));\n    _this.removeTarget = _this.removeTarget.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: []\n    };\n    return _this;\n  }\n\n  _createClass(SelectedList, [{\n    key: \"removeTarget\",\n    value: function removeTarget(candidate) {\n      this.props.removeFromSelected(candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var selectedList = this;\n      var selectedTargets = this.props.candidates.map(function (candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: selectedList.removeTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"selectedList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group candidate-scroll-list\"\n      }, selectedTargets));\n    }\n  }]);\n\n  return SelectedList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL1NlbGVjdGVkTGlzdC5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL1NlbGVjdGVkTGlzdC5qc3g/YTQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENhbmRpZGF0ZVRhcmdldCBmcm9tICcuL0NhbmRpZGF0ZVRhcmdldC5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RlZExpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5yZW1vdmVUYXJnZXQgPSB0aGlzLnJlbW92ZVRhcmdldC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge3NlbGVjdGVkOiBbXX07XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldChjYW5kaWRhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5yZW1vdmVGcm9tU2VsZWN0ZWQoY2FuZGlkYXRlKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWRMaXN0ID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFyZ2V0cyA9IHRoaXMucHJvcHMuY2FuZGlkYXRlcy5tYXAoZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxDYW5kaWRhdGVUYXJnZXRcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17c2VsZWN0ZWRMaXN0LnJlbW92ZVRhcmdldH1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtjYW5kaWRhdGUuc291cmNlfVxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGU9e2NhbmRpZGF0ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdGVkTGlzdFwiPlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWdyb3VwIGNhbmRpZGF0ZS1zY3JvbGwtbGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRUYXJnZXRzfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cbn1cblxuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUlBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUtBOzs7O0FBM0JBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/SelectedList.jsx\n");

/***/ }),

/***/ "./src/components/annotation/TargetCreator.jsx":
/*!*****************************************************!*\
  !*** ./src/components/annotation/TargetCreator.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TargetCreator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateList.jsx */ \"./src/components/annotation/CandidateList.jsx\");\n/* harmony import */ var _SelectedList_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SelectedList.jsx */ \"./src/components/annotation/SelectedList.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\nvar TargetCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TargetCreator, _React$Component);\n\n  function TargetCreator(props) {\n    var _this;\n\n    _classCallCheck(this, TargetCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TargetCreator).call(this, props));\n    _this.addToSelected = _this.addToSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeFromSelected = _this.removeFromSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: _this.props.selectedTargets,\n      annotations: [],\n      activeType: \"resource\",\n      candidateTypes: [\"resource\", \"external\", \"annotation\"]\n    };\n    return _this;\n  }\n\n  _createClass(TargetCreator, [{\n    key: \"addToSelected\",\n    value: function addToSelected(candidate) {\n      var selected = this.state.selected;\n\n      if (selected.indexOf(candidate) === -1) {\n        selected.push(candidate);\n        this.setState({\n          selected: selected\n        });\n        this.props.setTargets(selected);\n      }\n    }\n  }, {\n    key: \"removeFromSelected\",\n    value: function removeFromSelected(candidate) {\n      var selected = this.state.selected;\n      var index = selected.indexOf(candidate);\n\n      if (index !== -1) {\n        selected.splice(index, 1);\n        this.setState({\n          selected: selected\n        });\n        this.props.setTargets(selected);\n      }\n    }\n  }, {\n    key: \"addMotivations\",\n    value: function addMotivations() {\n      this.props.addMotivations();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //generate the tabs from the configured modes\n      var component = this;\n      var tabs = this.state.candidateTypes.map(function (candidateType) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: candidateType + '__tab_option',\n          className: \"nav-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + candidateType,\n          className: component.state.activeType === candidateType ? 'nav-link active' : 'nav-link'\n        }, candidateType));\n      }, this);\n      var tabContents = this.state.candidateTypes.map(function (candidateType) {\n        var candidates = _this2.props.candidates[candidateType];\n        var tabActive = _this2.state.activeType === candidateType ? 'tab-pane active' : 'tab-pane';\n        var className = \"candidate-target-list \" + tabActive;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: candidateType + '__tab_content',\n          id: candidateType,\n          className: className\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          candidates: candidates,\n          addToSelected: _this2.addToSelected.bind(_this2),\n          candidateType: candidateType\n        }));\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Available Targets\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"Click on a target to select it.\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, tabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, tabContents)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Selected Targets\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"Click on a selected target to deselect it.\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SelectedList_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        candidates: this.state.selected,\n        removeFromSelected: this.removeFromSelected.bind(this)\n      }))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null));\n    }\n  }]);\n\n  return TargetCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9hbm5vdGF0aW9uL1RhcmdldENyZWF0b3IuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9UYXJnZXRDcmVhdG9yLmpzeD82OWYyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FuZGlkYXRlTGlzdCBmcm9tICcuL0NhbmRpZGF0ZUxpc3QuanN4JztcbmltcG9ydCBTZWxlY3RlZExpc3QgZnJvbSAnLi9TZWxlY3RlZExpc3QuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFyZ2V0Q3JlYXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLmFkZFRvU2VsZWN0ZWQgPSB0aGlzLmFkZFRvU2VsZWN0ZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tU2VsZWN0ZWQgPSB0aGlzLnJlbW92ZUZyb21TZWxlY3RlZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRoaXMucHJvcHMuc2VsZWN0ZWRUYXJnZXRzLFxuICAgICAgICAgICAgYW5ub3RhdGlvbnM6IFtdLFxuICAgICAgICAgICAgYWN0aXZlVHlwZTogXCJyZXNvdXJjZVwiLFxuICAgICAgICAgICAgY2FuZGlkYXRlVHlwZXM6IFtcInJlc291cmNlXCIsIFwiZXh0ZXJuYWxcIiwgXCJhbm5vdGF0aW9uXCJdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRUb1NlbGVjdGVkKGNhbmRpZGF0ZSkge1xuICAgICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkO1xuICAgICAgICBpZiAoc2VsZWN0ZWQuaW5kZXhPZihjYW5kaWRhdGUpID09PSAtMSkge1xuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWQ6IHNlbGVjdGVkfSk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnNldFRhcmdldHMoc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUZyb21TZWxlY3RlZChjYW5kaWRhdGUpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5zdGF0ZS5zZWxlY3RlZDtcbiAgICAgICAgdmFyIGluZGV4ID0gc2VsZWN0ZWQuaW5kZXhPZihjYW5kaWRhdGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBzZWxlY3RlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWQ6IHNlbGVjdGVkfSk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnNldFRhcmdldHMoc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkTW90aXZhdGlvbnMoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYWRkTW90aXZhdGlvbnMoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIC8vZ2VuZXJhdGUgdGhlIHRhYnMgZnJvbSB0aGUgY29uZmlndXJlZCBtb2Rlc1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcztcbiAgICAgICAgY29uc3QgdGFicyA9IHRoaXMuc3RhdGUuY2FuZGlkYXRlVHlwZXMubWFwKChjYW5kaWRhdGVUeXBlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2NhbmRpZGF0ZVR5cGUgKyAnX190YWJfb3B0aW9uJ31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibmF2LWl0ZW1cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGEgZGF0YS10b2dnbGU9XCJ0YWJcIiBocmVmPXsnIycgKyBjYW5kaWRhdGVUeXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjb21wb25lbnQuc3RhdGUuYWN0aXZlVHlwZSA9PT0gY2FuZGlkYXRlVHlwZSA/ICduYXYtbGluayBhY3RpdmUnIDogJ25hdi1saW5rJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2FuZGlkYXRlVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICB9LCB0aGlzKVxuXG4gICAgICAgIHZhciB0YWJDb250ZW50cyA9IHRoaXMuc3RhdGUuY2FuZGlkYXRlVHlwZXMubWFwKChjYW5kaWRhdGVUeXBlKSA9PiB7XG4gICAgICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IHRoaXMucHJvcHMuY2FuZGlkYXRlc1tjYW5kaWRhdGVUeXBlXTtcbiAgICAgICAgICAgIGxldCB0YWJBY3RpdmUgPSB0aGlzLnN0YXRlLmFjdGl2ZVR5cGUgPT09IGNhbmRpZGF0ZVR5cGUgPyAndGFiLXBhbmUgYWN0aXZlJyA6ICd0YWItcGFuZSc7XG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gXCJjYW5kaWRhdGUtdGFyZ2V0LWxpc3QgXCIgKyB0YWJBY3RpdmU7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtjYW5kaWRhdGVUeXBlICsgJ19fdGFiX2NvbnRlbnQnfVxuICAgICAgICAgICAgICAgICAgICBpZD17Y2FuZGlkYXRlVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENhbmRpZGF0ZUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzPXtjYW5kaWRhdGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRvU2VsZWN0ZWQ9e3RoaXMuYWRkVG9TZWxlY3RlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZVR5cGU9e2NhbmRpZGF0ZVR5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyLWZsdWlkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+QXZhaWxhYmxlIFRhcmdldHM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkNsaWNrIG9uIGEgdGFyZ2V0IHRvIHNlbGVjdCBpdC48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJuYXYgbmF2LXRhYnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGFic31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RhYkNvbnRlbnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5TZWxlY3RlZCBUYXJnZXRzPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5DbGljayBvbiBhIHNlbGVjdGVkIHRhcmdldCB0byBkZXNlbGVjdCBpdC48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RlZExpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzPXt0aGlzLnN0YXRlLnNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb21TZWxlY3RlZD17dGhpcy5yZW1vdmVGcm9tU2VsZWN0ZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUpBO0FBVUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFHQTtBQUFBO0FBSUE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQVVBOzs7O0FBcEdBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/annotation/TargetCreator.jsx\n");

/***/ }),

/***/ "./src/components/collection/Collection.jsx":
/*!**************************************************!*\
  !*** ./src/components/collection/Collection.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Collection; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Collection =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Collection, _React$Component);\n\n  function Collection(props) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Collection).call(this, props));\n  }\n\n  _createClass(Collection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"canEdit\",\n    value: function canEdit() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.collection.creator ? true : false;\n    }\n  }, {\n    key: \"canCopy\",\n    value: function canCopy() {\n      return this.props.currentUser ? true : false;\n      var allowed = true; // TODO: implement permission check (what should permission check be?)\n\n      return allowed;\n    }\n  }, {\n    key: \"editCollection\",\n    value: function editCollection() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].editCollection(this.props.collection, \"label\");\n    }\n  }, {\n    key: \"editContent\",\n    value: function editContent() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].editCollection(this.props.collection, \"content\");\n    }\n  }, {\n    key: \"copyCollection\",\n    value: function copyCollection() {\n      var confirm = window.confirm(\"Are you sure you want to copy this collection?\");\n\n      if (confirm) {\n        _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].copy(this.props.collection); // TODO: implement copying of collection\n      }\n    }\n  }, {\n    key: \"deleteCollection\",\n    value: function deleteCollection() {\n      var confirm = window.confirm(\"Are you sure you want to delete this collection?\");\n\n      if (confirm) {\n        _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].delete(this.props.collection);\n      }\n    }\n  }, {\n    key: \"isDefault\",\n    value: function isDefault() {\n      return this.props.defaultCollection === this.props.collection.id;\n    }\n  }, {\n    key: \"toggleDefaultCollection\",\n    value: function toggleDefaultCollection() {\n      var newDefault = this.isDefault() ? null : this.props.collection.id;\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setDefault(newDefault);\n    }\n  }, {\n    key: \"computeClass\",\n    value: function computeClass() {\n      var className = 'list-group-item';\n      if (this.isDefault()) className += ' active';\n      return className;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var component = this;\n      var collection = this.props.collection;\n      var timestamp = new Date(collection.created).toLocaleString();\n      var editLabels = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-info\",\n        onClick: this.editCollection.bind(this)\n      }, \"edit label\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-warning\",\n        onClick: this.editContent.bind(this)\n      }, \"edit content\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-danger\",\n        onClick: this.deleteCollection.bind(this)\n      }, \"delete\"));\n      var copyLabel = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-success\",\n        onClick: this.toggleDefaultCollection.bind(this)\n      }, \"toggle default\");\n      var options = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, component.canEdit() ? editLabels : \"\", \" \", component.canCopy() ? copyLabel : \"\");\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        className: component.computeClass(),\n        title: collection.id\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"Collection\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"abbr\", null, timestamp, \"\\xA0 (created by: \", collection.creator, \")\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"strong\", null, collection.label), \"\\xA0\\xA0\\xA0\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"(\", collection.total, \")\"))), options);\n    }\n  }]);\n\n  return Collection;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb24uanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvY29sbGVjdGlvbi9Db2xsZWN0aW9uLmpzeD83MjA3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ29sbGVjdGlvbkFjdGlvbnMgZnJvbSAnLi4vLi4vZmx1eC9Db2xsZWN0aW9uQWN0aW9ucy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB9XG5cbiAgICBjYW5FZGl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyZW50VXNlciAmJiB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXJuYW1lID09PSB0aGlzLnByb3BzLmNvbGxlY3Rpb24uY3JlYXRvciA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG4gICAgY2FuQ29weSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY3VycmVudFVzZXIgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHZhciBhbGxvd2VkID0gdHJ1ZTtcbiAgICAgICAgLy8gVE9ETzogaW1wbGVtZW50IHBlcm1pc3Npb24gY2hlY2sgKHdoYXQgc2hvdWxkIHBlcm1pc3Npb24gY2hlY2sgYmU/KVxuICAgICAgICByZXR1cm4gYWxsb3dlZDtcbiAgICB9XG5cbiAgICBlZGl0Q29sbGVjdGlvbigpIHtcbiAgICAgICAgQ29sbGVjdGlvbkFjdGlvbnMuZWRpdENvbGxlY3Rpb24odGhpcy5wcm9wcy5jb2xsZWN0aW9uLCBcImxhYmVsXCIpO1xuICAgIH1cblxuICAgIGVkaXRDb250ZW50KCkge1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5lZGl0Q29sbGVjdGlvbih0aGlzLnByb3BzLmNvbGxlY3Rpb24sIFwiY29udGVudFwiKTtcbiAgICB9XG5cbiAgICBjb3B5Q29sbGVjdGlvbigpIHtcbiAgICAgICAgbGV0IGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb3B5IHRoaXMgY29sbGVjdGlvbj9cIik7XG4gICAgICAgIGlmIChjb25maXJtKSB7XG4gICAgICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5jb3B5KHRoaXMucHJvcHMuY29sbGVjdGlvbik7XG4gICAgICAgICAgICAvLyBUT0RPOiBpbXBsZW1lbnQgY29weWluZyBvZiBjb2xsZWN0aW9uXG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlQ29sbGVjdGlvbigpIHtcbiAgICAgICAgbGV0IGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBjb2xsZWN0aW9uP1wiKTtcbiAgICAgICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgICAgICAgIENvbGxlY3Rpb25BY3Rpb25zLmRlbGV0ZSh0aGlzLnByb3BzLmNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWZhdWx0Q29sbGVjdGlvbiA9PT0gdGhpcy5wcm9wcy5jb2xsZWN0aW9uLmlkO1xuICAgIH1cblxuICAgIHRvZ2dsZURlZmF1bHRDb2xsZWN0aW9uKCkge1xuICAgICAgICBsZXQgbmV3RGVmYXVsdCA9IHRoaXMuaXNEZWZhdWx0KCkgPyBudWxsIDogdGhpcy5wcm9wcy5jb2xsZWN0aW9uLmlkO1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5zZXREZWZhdWx0KG5ld0RlZmF1bHQpO1xuICAgIH1cblxuICAgIGNvbXB1dGVDbGFzcygpIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwLWl0ZW0nO1xuICAgICAgICBpZih0aGlzLmlzRGVmYXVsdCgpKVxuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgYWN0aXZlJztcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzO1xuICAgICAgICBsZXQgY29sbGVjdGlvbiA9IHRoaXMucHJvcHMuY29sbGVjdGlvbjtcbiAgICAgICAgbGV0IHRpbWVzdGFtcCA9IChuZXcgRGF0ZShjb2xsZWN0aW9uLmNyZWF0ZWQpKS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICB2YXIgZWRpdExhYmVscyA9IChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLWluZm9cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRDb2xsZWN0aW9uLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICBlZGl0IGxhYmVsXG4gICAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXdhcm5pbmdcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRDb250ZW50LmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICBlZGl0IGNvbnRlbnRcbiAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiYmFkZ2UgYmFkZ2UtZGFuZ2VyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5kZWxldGVDb2xsZWN0aW9uLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICBkZWxldGVcbiAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIClcbiAgICAgICAgdmFyIGNvcHlMYWJlbCA9IChcbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRGVmYXVsdENvbGxlY3Rpb24uYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgdG9nZ2xlIGRlZmF1bHRcbiAgICAgICAgICAgIDwvaT5cbiAgICAgICAgKVxuICAgICAgICB2YXIgb3B0aW9ucyA9IChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAge2NvbXBvbmVudC5jYW5FZGl0KCkgPyBlZGl0TGFiZWxzIDogXCJcIn0ge2NvbXBvbmVudC5jYW5Db3B5KCkgPyBjb3B5TGFiZWwgOiBcIlwifVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y29tcG9uZW50LmNvbXB1dGVDbGFzcygpfVxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb2xsZWN0aW9uLmlkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiQ29sbGVjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8YWJicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aW1lc3RhbXB9Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAoY3JlYXRlZCBieToge2NvbGxlY3Rpb24uY3JlYXRvcn0pXG4gICAgICAgICAgICAgICAgICAgIDwvYWJicj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+e2NvbGxlY3Rpb24ubGFiZWx9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPih7Y29sbGVjdGlvbi50b3RhbH0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7b3B0aW9uc31cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIClcbiAgICB9XG5cbn1cblxuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBTUE7QUFFQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBY0E7Ozs7QUE3R0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/collection/Collection.jsx\n");

/***/ }),

/***/ "./src/components/collection/CollectionContentEditor.jsx":
/*!***************************************************************!*\
  !*** ./src/components/collection/CollectionContentEditor.jsx ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionLabelEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/CollectionActions */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar CollectionLabelEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionLabelEditor, _React$Component);\n\n  function CollectionLabelEditor(props) {\n    _classCallCheck(this, CollectionLabelEditor);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CollectionLabelEditor).call(this, props));\n  }\n\n  _createClass(CollectionLabelEditor, [{\n    key: \"addToCollection\",\n    value: function addToCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addAnnotation(this.props.collection.id, annotation);\n    }\n  }, {\n    key: \"removeFromCollection\",\n    value: function removeFromCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeAnnotation(this.props.collection.id, annotation.id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"collection-content-editor row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-1\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-5\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Select annotations to remove\"), this.props.removeCandidates), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-5\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Select annotations to add\"), this.props.addCandidates), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-1\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-default\",\n        onClick: this.removeFromCollection.bind(this)\n      }, \"Remove\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-default\",\n        onClick: this.addToCollection.bind(this)\n      }, \"Add\"))));\n    }\n  }]);\n\n  return CollectionLabelEditor;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25Db250ZW50RWRpdG9yLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2NvbGxlY3Rpb24vQ29sbGVjdGlvbkNvbnRlbnRFZGl0b3IuanN4P2Y1NDgiXSwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDb2xsZWN0aW9uQWN0aW9ucyBmcm9tICcuLi8uLi9mbHV4L0NvbGxlY3Rpb25BY3Rpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGVjdGlvbkxhYmVsRWRpdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgYWRkVG9Db2xsZWN0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgQ29sbGVjdGlvbkFjdGlvbnMuYWRkQW5ub3RhdGlvbih0aGlzLnByb3BzLmNvbGxlY3Rpb24uaWQsIGFubm90YXRpb24pO1xuICAgIH1cblxuICAgIHJlbW92ZUZyb21Db2xsZWN0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgQ29sbGVjdGlvbkFjdGlvbnMucmVtb3ZlQW5ub3RhdGlvbih0aGlzLnByb3BzLmNvbGxlY3Rpb24uaWQsIGFubm90YXRpb24uaWQpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbGxlY3Rpb24tY29udGVudC1lZGl0b3Igcm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND5TZWxlY3QgYW5ub3RhdGlvbnMgdG8gcmVtb3ZlPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnJlbW92ZUNhbmRpZGF0ZXN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+U2VsZWN0IGFubm90YXRpb25zIHRvIGFkZDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5hZGRDYW5kaWRhdGVzfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlbW92ZUZyb21Db2xsZWN0aW9uLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYWRkVG9Db2xsZWN0aW9uLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuICAgIH1cbn1cblxuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFJQTtBQUFBO0FBSUE7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBT0E7QUFBQTtBQUVBO0FBQ0E7QUFGQTtBQVdBOzs7O0FBcERBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/collection/CollectionContentEditor.jsx\n");

/***/ }),

/***/ "./src/components/collection/CollectionCreator.jsx":
/*!*********************************************************!*\
  !*** ./src/components/collection/CollectionCreator.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionCreator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../annotation/Annotation.jsx */ \"./src/components/annotation/Annotation.jsx\");\n/* harmony import */ var _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/CollectionStore */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/CollectionActions */ \"./src/flux/CollectionActions.js\");\n/* harmony import */ var _CollectionLabelEditor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CollectionLabelEditor */ \"./src/components/collection/CollectionLabelEditor.jsx\");\n/* harmony import */ var _CollectionContentEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CollectionContentEditor */ \"./src/components/collection/CollectionContentEditor.jsx\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_8__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\n\n\n\n\n\nvar CollectionCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionCreator, _React$Component);\n\n  function CollectionCreator(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionCreator).call(this, props));\n    _this.handleLabelChange = _this.handleLabelChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      annotations: [],\n      collectionLabel: \"\",\n      page: [],\n      showModal: false,\n      toAdd: [],\n      toRemove: [],\n      view: \"label\"\n    };\n    _this.collectionLabel = \"\";\n    return _this;\n  }\n\n  _createClass(CollectionCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('edit-collection', this.editCollection.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('updated-collection', this.fetchPage.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('loaded-collection', this.setCollection.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('loaded-page', this.setPage.bind(this));\n    }\n  }, {\n    key: \"setCollection\",\n    value: function setCollection(collection) {\n      this.setState({\n        collection: collection\n      });\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"setPage\",\n    value: function setPage(page) {\n      this.setState({\n        page: page\n      });\n    }\n  }, {\n    key: \"fetchPage\",\n    value: function fetchPage(collection) {\n      console.log(\"fetching collection page\");\n      console.log(collection);\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollectionPage(collection.last);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        collectionLabel: event.target.value\n      });\n    }\n  }, {\n    key: \"makeCollection\",\n    value: function makeCollection() {\n      var collection = {\n        creator: this.props.currentUser.username\n      };\n      this.editCollection(collection);\n    }\n  }, {\n    key: \"editCollection\",\n    value: function editCollection(collection, view) {\n      if (!view) {\n        view = \"label\";\n      } //console.log(\"editCollection - collection:\", collection);\n\n\n      var page = [];\n      if (collection.label !== undefined) this.collectionLabel = collection.label; //this.setState({collectionLabel: collection.label});\n\n      if (collection.last !== undefined && collection.last !== null) {\n        //page = collection.last;\n        console.log(\"getting collection page\");\n        _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollectionPage(collection.last);\n      }\n\n      this.setState({\n        collection: collection,\n        page: page,\n        view: view,\n        showModal: true\n      });\n    }\n  }, {\n    key: \"hideCollectionForm\",\n    value: function hideCollectionForm() {\n      this.setState({\n        showModal: false\n      });\n    }\n  }, {\n    key: \"saveCollection\",\n    value: function saveCollection() {\n      jquery__WEBPACK_IMPORTED_MODULE_8___default()('#collection__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      var collection = this.state.collection;\n      collection.label = this.collectionLabel; //console.log(\"saveCollection - collection:\", collection);\n\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].save(collection);\n      this.collectionLabel = \"\";\n      this.setState({\n        showModal: false,\n        collectionLabel: \"\",\n        collection: null,\n        page: [],\n        annotations: []\n      });\n    }\n  }, {\n    key: \"addToCollection\",\n    value: function addToCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].addAnnotation(this.state.collection.id, annotation);\n    }\n  }, {\n    key: \"removeFromCollection\",\n    value: function removeFromCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].removeAnnotation(this.state.collection.id, annotation.id);\n    }\n  }, {\n    key: \"handleLabelChange\",\n    value: function handleLabelChange(label) {\n      this.collectionLabel = label;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var addCandidates = [];\n      var removeCandidates = []; //let pageItems = (this.state.page && this.state.page.items !== undefined) ? this.state.page.items : [];\n\n      var pageItems = this.state.page; //console.log(pageItems);\n\n      var pageIds = pageItems.map(function (annotation) {\n        return annotation.id;\n      }); //let pageIds = this.state.page;\n\n      addCandidates = this.state.annotations.filter(function (annotation) {\n        return pageIds.includes(annotation.id) === false;\n      }).map(function (annotation) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          onClick: function onClick() {\n            component.addToCollection(annotation);\n          },\n          key: annotation.id\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          annotation: annotation,\n          currentUser: null\n        }));\n      });\n      removeCandidates = pageItems.map(function (annotation) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          onClick: function onClick() {\n            component.removeFromCollection(annotation);\n          },\n          key: annotation.id\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          annotation: annotation,\n          currentUser: null\n        }));\n      });\n      var editor = null;\n      var editViews = [\"label\", \"content\"];\n      var editorTabs = editViews.map(function (editView) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: editView + '__tab_option',\n          className: \"nav-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          key: editView + \"-editor-tab\",\n          className: _this2.state.view === editView ? 'nav-link active' : 'nav-link',\n          \"data-toggle\": \"tab\",\n          href: '#' + editView\n        }, editView));\n      });\n      var editorTabContents = editViews.map(function (editView) {\n        //console.log(\"render - state.view:\", this.state.view);\n        //console.log(\"render - editView:\", editView);\n        if (editView === \"label\") {\n          editor = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CollectionLabelEditor__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            onChange: _this2.handleLabelChange,\n            collectionLabel: _this2.collectionLabel\n          });\n        } else if (editView === \"content\") {\n          editor = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CollectionContentEditor__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n            collection: _this2.state.collection,\n            addCandidates: addCandidates,\n            removeCandidates: removeCandidates\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: editView + '__tab_content',\n          id: editView,\n          className: _this2.state.view === editView ? 'tab-pane active' : 'tab-pane'\n        }, editor);\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"CollectionCreator\",\n        key: \"collection-creator\"\n      }, this.props.currentUser ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.makeCollection.bind(this)\n      }, \"Make collection\") : null, this.state.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        key: \"collection-flex-modal\",\n        elementId: \"collection__modal\",\n        handleHideModal: this.hideCollectionForm.bind(this),\n        confirmLabel: \"Save\",\n        confirmAction: this.saveCollection.bind(this),\n        title: 'Provide a label for your collection'\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, editorTabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, editorTabContents))) : null);\n    }\n  }]);\n\n  return CollectionCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25DcmVhdG9yLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2NvbGxlY3Rpb24vQ29sbGVjdGlvbkNyZWF0b3IuanN4PzgwNTgiXSwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGbGV4TW9kYWwgZnJvbSAnLi4vRmxleE1vZGFsJztcbmltcG9ydCBBbm5vdGF0aW9uIGZyb20gJy4uL2Fubm90YXRpb24vQW5ub3RhdGlvbi5qc3gnO1xuaW1wb3J0IEFwcENvbGxlY3Rpb25TdG9yZSBmcm9tICcuLi8uLi9mbHV4L0NvbGxlY3Rpb25TdG9yZSc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4uLy4uL2ZsdXgvQW5ub3RhdGlvblN0b3JlJztcbmltcG9ydCBDb2xsZWN0aW9uQWN0aW9ucyBmcm9tICcuLi8uLi9mbHV4L0NvbGxlY3Rpb25BY3Rpb25zJztcbmltcG9ydCBDb2xsZWN0aW9uTGFiZWxFZGl0b3IgZnJvbSAnLi9Db2xsZWN0aW9uTGFiZWxFZGl0b3InO1xuaW1wb3J0IENvbGxlY3Rpb25Db250ZW50RWRpdG9yIGZyb20gJy4vQ29sbGVjdGlvbkNvbnRlbnRFZGl0b3InO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGVjdGlvbkNyZWF0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVMYWJlbENoYW5nZSA9IHRoaXMuaGFuZGxlTGFiZWxDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGFubm90YXRpb25zOiBbXSxcbiAgICAgICAgICAgIGNvbGxlY3Rpb25MYWJlbDogXCJcIixcbiAgICAgICAgICAgIHBhZ2U6IFtdLFxuICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIHRvQWRkOiBbXSxcbiAgICAgICAgICAgIHRvUmVtb3ZlOiBbXSxcbiAgICAgICAgICAgIHZpZXc6IFwibGFiZWxcIixcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25MYWJlbCA9IFwiXCI7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5iaW5kKCdlZGl0LWNvbGxlY3Rpb24nLCB0aGlzLmVkaXRDb2xsZWN0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuYmluZCgndXBkYXRlZC1jb2xsZWN0aW9uJywgdGhpcy5mZXRjaFBhZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5iaW5kKCdsb2FkZWQtY29sbGVjdGlvbicsIHRoaXMuc2V0Q29sbGVjdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmJpbmQoJ2xvYWRlZC1hbm5vdGF0aW9ucycsIHRoaXMuc2V0QW5ub3RhdGlvbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5iaW5kKCdsb2FkZWQtcGFnZScsIHRoaXMuc2V0UGFnZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBzZXRDb2xsZWN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29sbGVjdGlvbjogY29sbGVjdGlvbn0pO1xuICAgIH1cblxuICAgIHNldEFubm90YXRpb25zKGFubm90YXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Fubm90YXRpb25zOiBhbm5vdGF0aW9uc30pO1xuICAgIH1cblxuICAgIHNldFBhZ2UocGFnZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwYWdlOiBwYWdlfSk7XG4gICAgfVxuXG4gICAgZmV0Y2hQYWdlKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmZXRjaGluZyBjb2xsZWN0aW9uIHBhZ2VcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb24pO1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5nZXRDb2xsZWN0aW9uUGFnZShjb2xsZWN0aW9uLmxhc3QpO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb2xsZWN0aW9uTGFiZWw6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIG1ha2VDb2xsZWN0aW9uKCkge1xuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNyZWF0b3I6IHRoaXMucHJvcHMuY3VycmVudFVzZXIudXNlcm5hbWVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lZGl0Q29sbGVjdGlvbihjb2xsZWN0aW9uKTtcbiAgICB9XG5cbiAgICBlZGl0Q29sbGVjdGlvbihjb2xsZWN0aW9uLCB2aWV3KSB7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgdmlldyA9IFwibGFiZWxcIjtcbiAgICAgICAgfVxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWRpdENvbGxlY3Rpb24gLSBjb2xsZWN0aW9uOlwiLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgdmFyIHBhZ2UgPSBbXTtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24ubGFiZWwgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkxhYmVsID0gY29sbGVjdGlvbi5sYWJlbDtcbiAgICAgICAgICAgIC8vdGhpcy5zZXRTdGF0ZSh7Y29sbGVjdGlvbkxhYmVsOiBjb2xsZWN0aW9uLmxhYmVsfSk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmxhc3QgIT09IHVuZGVmaW5lZCAmJiBjb2xsZWN0aW9uLmxhc3QgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vcGFnZSA9IGNvbGxlY3Rpb24ubGFzdDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0dGluZyBjb2xsZWN0aW9uIHBhZ2VcIik7XG4gICAgICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5nZXRDb2xsZWN0aW9uUGFnZShjb2xsZWN0aW9uLmxhc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbGxlY3Rpb246IGNvbGxlY3Rpb24sIHBhZ2U6IHBhZ2UsIHZpZXc6IHZpZXcsIHNob3dNb2RhbDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoaWRlQ29sbGVjdGlvbkZvcm0oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dNb2RhbDogZmFsc2V9KTtcbiAgICB9XG5cbiAgICBzYXZlQ29sbGVjdGlvbigpIHtcbiAgICAgICAgJCgnI2NvbGxlY3Rpb25fX21vZGFsJykubW9kYWwoJ2hpZGUnKTsvL1RPRE8gdWdseSwgYnV0IHdpdGhvdXQgdGhpcyB0aGUgc3RhdGljIGJhY2tkcm9wIHdvbid0IGRpc2FwcGVhciFcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnN0YXRlLmNvbGxlY3Rpb247XG4gICAgICAgIGNvbGxlY3Rpb24ubGFiZWwgPSB0aGlzLmNvbGxlY3Rpb25MYWJlbDtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInNhdmVDb2xsZWN0aW9uIC0gY29sbGVjdGlvbjpcIiwgY29sbGVjdGlvbik7XG4gICAgICAgIENvbGxlY3Rpb25BY3Rpb25zLnNhdmUoY29sbGVjdGlvbik7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkxhYmVsID0gXCJcIjtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93TW9kYWw6IGZhbHNlLFxuICAgICAgICAgICAgY29sbGVjdGlvbkxhYmVsOiBcIlwiLFxuICAgICAgICAgICAgY29sbGVjdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHBhZ2U6IFtdLFxuICAgICAgICAgICAgYW5ub3RhdGlvbnM6IFtdLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRUb0NvbGxlY3Rpb24oYW5ub3RhdGlvbikge1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5hZGRBbm5vdGF0aW9uKHRoaXMuc3RhdGUuY29sbGVjdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgfVxuXG4gICAgcmVtb3ZlRnJvbUNvbGxlY3Rpb24oYW5ub3RhdGlvbikge1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5yZW1vdmVBbm5vdGF0aW9uKHRoaXMuc3RhdGUuY29sbGVjdGlvbi5pZCwgYW5ub3RhdGlvbi5pZCk7XG4gICAgfVxuXG4gICAgaGFuZGxlTGFiZWxDaGFuZ2UobGFiZWwpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTGFiZWwgPSBsYWJlbDtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzO1xuICAgICAgICB2YXIgYWRkQ2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICB2YXIgcmVtb3ZlQ2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgICAgIC8vbGV0IHBhZ2VJdGVtcyA9ICh0aGlzLnN0YXRlLnBhZ2UgJiYgdGhpcy5zdGF0ZS5wYWdlLml0ZW1zICE9PSB1bmRlZmluZWQpID8gdGhpcy5zdGF0ZS5wYWdlLml0ZW1zIDogW107XG4gICAgICAgIGxldCBwYWdlSXRlbXMgPSB0aGlzLnN0YXRlLnBhZ2U7XG4gICAgICAgIC8vY29uc29sZS5sb2cocGFnZUl0ZW1zKTtcbiAgICAgICAgbGV0IHBhZ2VJZHMgPSBwYWdlSXRlbXMubWFwKChhbm5vdGF0aW9uKSA9PiB7cmV0dXJuIGFubm90YXRpb24uaWR9KTtcbiAgICAgICAgLy9sZXQgcGFnZUlkcyA9IHRoaXMuc3RhdGUucGFnZTtcblxuICAgICAgICBhZGRDYW5kaWRhdGVzID0gdGhpcy5zdGF0ZS5hbm5vdGF0aW9ucy5maWx0ZXIoKGFubm90YXRpb24pID0+IHtyZXR1cm4gcGFnZUlkcy5pbmNsdWRlcyhhbm5vdGF0aW9uLmlkKSA9PT0gZmFsc2U7fSkubWFwKChhbm5vdGF0aW9uKSA9PiB7XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y29tcG9uZW50LmFkZFRvQ29sbGVjdGlvbihhbm5vdGF0aW9uKX19XG4gICAgICAgICAgICAgICAgICAgIGtleT17YW5ub3RhdGlvbi5pZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxBbm5vdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uPXthbm5vdGF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e251bGx9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtb3ZlQ2FuZGlkYXRlcyA9IHBhZ2VJdGVtcy5tYXAoKGFubm90YXRpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y29tcG9uZW50LnJlbW92ZUZyb21Db2xsZWN0aW9uKGFubm90YXRpb24pfX1cbiAgICAgICAgICAgICAgICAgICAga2V5PXthbm5vdGF0aW9uLmlkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEFubm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb249e2Fubm90YXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBlZGl0b3IgPSBudWxsO1xuICAgICAgICBsZXQgZWRpdFZpZXdzID0gW1wibGFiZWxcIiwgXCJjb250ZW50XCJdO1xuXG4gICAgICAgIGNvbnN0IGVkaXRvclRhYnMgPSBlZGl0Vmlld3MubWFwKChlZGl0VmlldykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAga2V5PXtlZGl0VmlldyArICdfX3RhYl9vcHRpb24nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J25hdi1pdGVtJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17ZWRpdFZpZXcgKyBcIi1lZGl0b3ItdGFiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMuc3RhdGUudmlldyA9PT0gZWRpdFZpZXcgPyAnbmF2LWxpbmsgYWN0aXZlJyA6ICduYXYtbGluayd9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRvZ2dsZT1cInRhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPXsnIycgKyBlZGl0Vmlld31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2VkaXRWaWV3fVxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGVkaXRvclRhYkNvbnRlbnRzID0gZWRpdFZpZXdzLm1hcCgoZWRpdFZpZXcpID0+IHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJyZW5kZXIgLSBzdGF0ZS52aWV3OlwiLCB0aGlzLnN0YXRlLnZpZXcpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlbmRlciAtIGVkaXRWaWV3OlwiLCBlZGl0Vmlldyk7XG4gICAgICAgICAgICBpZiAoZWRpdFZpZXcgPT09IFwibGFiZWxcIikge1xuICAgICAgICAgICAgICAgIGVkaXRvciA9ICg8Q29sbGVjdGlvbkxhYmVsRWRpdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVMYWJlbENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25MYWJlbD17dGhpcy5jb2xsZWN0aW9uTGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWRpdFZpZXcgPT09IFwiY29udGVudFwiKSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yID0gKDxDb2xsZWN0aW9uQ29udGVudEVkaXRvclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXt0aGlzLnN0YXRlLmNvbGxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIGFkZENhbmRpZGF0ZXM9e2FkZENhbmRpZGF0ZXN9XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNhbmRpZGF0ZXM9e3JlbW92ZUNhbmRpZGF0ZXN9XG4gICAgICAgICAgICAgICAgLz4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZWRpdFZpZXcgKyAnX190YWJfY29udGVudCd9XG4gICAgICAgICAgICAgICAgICAgIGlkPXtlZGl0Vmlld31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLnZpZXcgPT09IGVkaXRWaWV3ID8gJ3RhYi1wYW5lIGFjdGl2ZScgOiAndGFiLXBhbmUnfT5cbiAgICAgICAgICAgICAgICAgICAge2VkaXRvcn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiQ29sbGVjdGlvbkNyZWF0b3JcIlxuICAgICAgICAgICAgICAgIGtleT1cImNvbGxlY3Rpb24tY3JlYXRvclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY3VycmVudFVzZXIgP1xuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tbGlnaHRcIiBvbkNsaWNrPXt0aGlzLm1ha2VDb2xsZWN0aW9uLmJpbmQodGhpcyl9Pk1ha2UgY29sbGVjdGlvbjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd01vZGFsID9cbiAgICAgICAgICAgICAgICAgICAgPEZsZXhNb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwiY29sbGVjdGlvbi1mbGV4LW1vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZD1cImNvbGxlY3Rpb25fX21vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUhpZGVNb2RhbD17dGhpcy5oaWRlQ29sbGVjdGlvbkZvcm0uYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1MYWJlbD1cIlNhdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUFjdGlvbj17dGhpcy5zYXZlQ29sbGVjdGlvbi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eydQcm92aWRlIGEgbGFiZWwgZm9yIHlvdXIgY29sbGVjdGlvbid9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm5hdiBuYXYtdGFic1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZWRpdG9yVGFic31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFiLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VkaXRvclRhYkNvbnRlbnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRmxleE1vZGFsPjogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxuXG59XG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQVpBO0FBYUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFNQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFBQTtBQUdBO0FBQUE7QUFRQTs7OztBQXZOQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/collection/CollectionCreator.jsx\n");

/***/ }),

/***/ "./src/components/collection/CollectionLabelEditor.jsx":
/*!*************************************************************!*\
  !*** ./src/components/collection/CollectionLabelEditor.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionLabelEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\nvar CollectionLabelEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionLabelEditor, _React$Component);\n\n  function CollectionLabelEditor(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionLabelEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionLabelEditor).call(this, props));\n    _this.state = {\n      collectionLabel: _this.props.collectionLabel\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CollectionLabelEditor, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        collectionLabel: event.target.value\n      });\n      this.props.onChange(event.target.value);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"collection-label-editor\",\n        key: \"collection-label-editor\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Collection label: \"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        key: \"collection-label-input\",\n        ref: \"label\",\n        type: \"text\",\n        value: this.state.collectionLabel,\n        onChange: this.handleChange.bind(this)\n      }));\n    }\n  }]);\n\n  return CollectionLabelEditor;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25MYWJlbEVkaXRvci5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25MYWJlbEVkaXRvci5qc3g/YWRhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsZWN0aW9uTGFiZWxFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25MYWJlbDogdGhpcy5wcm9wcy5jb2xsZWN0aW9uTGFiZWxcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbGxlY3Rpb25MYWJlbDogZXZlbnQudGFyZ2V0LnZhbHVlfSk7XG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbGxlY3Rpb24tbGFiZWwtZWRpdG9yXCJcbiAgICAgICAgICAgICAgICBrZXk9XCJjb2xsZWN0aW9uLWxhYmVsLWVkaXRvclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGxhYmVsPkNvbGxlY3Rpb24gbGFiZWw6IDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGtleT1cImNvbGxlY3Rpb24tbGFiZWwtaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICByZWY9XCJsYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuY29sbGVjdGlvbkxhYmVsfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBU0E7Ozs7QUE5QkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/collection/CollectionLabelEditor.jsx\n");

/***/ }),

/***/ "./src/components/collection/CollectionList.jsx":
/*!******************************************************!*\
  !*** ./src/components/collection/CollectionList.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionViewer; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Collection_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Collection.jsx */ \"./src/components/collection/Collection.jsx\");\n/* harmony import */ var _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/CollectionStore */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar CollectionViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionViewer, _React$Component);\n\n  function CollectionViewer(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionViewer).call(this, props));\n    _this.state = {\n      collections: [],\n      default: null\n    };\n    return _this;\n  }\n\n  _createClass(CollectionViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('loaded-collections', this.listCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('saved-collection', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('updated-collection', this.getCollections.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('saved-annotation', this.addAnnotation.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('deleted-annotation', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('deleted-collection', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('default-collection', this.setDefaultCollection.bind(this));\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCollections();\n    }\n  }, {\n    key: \"setDefaultCollection\",\n    value: function setDefaultCollection(collectionId) {\n      this.setState({\n        default: collectionId\n      });\n    }\n  }, {\n    key: \"addAnnotation\",\n    value: function addAnnotation(annotation) {\n      if (this.state.default) _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].addAnnotation(this.state.default, annotation);\n    }\n  }, {\n    key: \"getCollections\",\n    value: function getCollections() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCollections();\n    }\n  }, {\n    key: \"listCollections\",\n    value: function listCollections(collections) {\n      this.setState({\n        collections: collections\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var collections = component.state.collections.map(function (collection, index) {\n        var key = \"collection-\" + index;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Collection_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          collection: collection,\n          currentUser: component.props.currentUser,\n          key: key,\n          defaultCollection: _this2.state.default\n        });\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"CollectionList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Saved collections\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group annotation-scroll-list\"\n      }, collections));\n    }\n  }]);\n\n  return CollectionViewer;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25MaXN0LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9jb21wb25lbnRzL2NvbGxlY3Rpb24vQ29sbGVjdGlvbkxpc3QuanN4PzJiYjQiXSwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qc3gnO1xuaW1wb3J0IEFwcENvbGxlY3Rpb25TdG9yZSBmcm9tICcuLy4uLy4uL2ZsdXgvQ29sbGVjdGlvblN0b3JlJztcbmltcG9ydCBBcHBBbm5vdGF0aW9uU3RvcmUgZnJvbSAnLi8uLi8uLi9mbHV4L0Fubm90YXRpb25TdG9yZSc7XG5pbXBvcnQgQ29sbGVjdGlvbkFjdGlvbnMgZnJvbSAnLi4vLi4vZmx1eC9Db2xsZWN0aW9uQWN0aW9ucy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb25WaWV3ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zOiBbXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuYmluZCgnbG9hZGVkLWNvbGxlY3Rpb25zJywgdGhpcy5saXN0Q29sbGVjdGlvbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5iaW5kKCdzYXZlZC1jb2xsZWN0aW9uJywgdGhpcy5nZXRDb2xsZWN0aW9ucy5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQ29sbGVjdGlvblN0b3JlLmJpbmQoJ3VwZGF0ZWQtY29sbGVjdGlvbicsIHRoaXMuZ2V0Q29sbGVjdGlvbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5iaW5kKCdzYXZlZC1hbm5vdGF0aW9uJywgdGhpcy5hZGRBbm5vdGF0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuYmluZCgnZGVsZXRlZC1hbm5vdGF0aW9uJywgdGhpcy5nZXRDb2xsZWN0aW9ucy5iaW5kKHRoaXMpKTtcbiAgICAgICAgQXBwQ29sbGVjdGlvblN0b3JlLmJpbmQoJ2RlbGV0ZWQtY29sbGVjdGlvbicsIHRoaXMuZ2V0Q29sbGVjdGlvbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5iaW5kKCdkZWZhdWx0LWNvbGxlY3Rpb24nLCB0aGlzLnNldERlZmF1bHRDb2xsZWN0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICBDb2xsZWN0aW9uQWN0aW9ucy5nZXRDb2xsZWN0aW9ucygpO1xuICAgIH1cblxuICAgIHNldERlZmF1bHRDb2xsZWN0aW9uKGNvbGxlY3Rpb25JZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtkZWZhdWx0OiBjb2xsZWN0aW9uSWR9KTtcbiAgICB9XG5cbiAgICBhZGRBbm5vdGF0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGVmYXVsdClcbiAgICAgICAgICAgIENvbGxlY3Rpb25BY3Rpb25zLmFkZEFubm90YXRpb24odGhpcy5zdGF0ZS5kZWZhdWx0LCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBnZXRDb2xsZWN0aW9ucygpIHtcbiAgICAgICAgQ29sbGVjdGlvbkFjdGlvbnMuZ2V0Q29sbGVjdGlvbnMoKTtcbiAgICB9XG5cbiAgICBsaXN0Q29sbGVjdGlvbnMoY29sbGVjdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcbiAgICAgICAgbGV0IGNvbGxlY3Rpb25zID0gY29tcG9uZW50LnN0YXRlLmNvbGxlY3Rpb25zLm1hcCgoY29sbGVjdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBrZXkgPSBcImNvbGxlY3Rpb24tXCIgKyBpbmRleDtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPENvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbj17Y29sbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e2NvbXBvbmVudC5wcm9wcy5jdXJyZW50VXNlcn1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDb2xsZWN0aW9uPXt0aGlzLnN0YXRlLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiQ29sbGVjdGlvbkxpc3RcIj5cbiAgICAgICAgICAgICAgICA8aDM+U2F2ZWQgY29sbGVjdGlvbnM8L2gzPlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWdyb3VwIGFubm90YXRpb24tc2Nyb2xsLWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAge2NvbGxlY3Rpb25zfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cblxufVxuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU1BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBS0E7Ozs7QUExREE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/collection/CollectionList.jsx\n");

/***/ }),

/***/ "./src/components/collection/CollectionViewer.jsx":
/*!********************************************************!*\
  !*** ./src/components/collection/CollectionViewer.jsx ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionViewer; });\n/* harmony import */ var _CollectionCreator_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CollectionCreator.jsx */ \"./src/components/collection/CollectionCreator.jsx\");\n/* harmony import */ var _CollectionList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CollectionList.jsx */ \"./src/components/collection/CollectionList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar CollectionViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionViewer, _React$Component);\n\n  function CollectionViewer(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionViewer).call(this, props));\n    _this.state = {\n      collections: []\n    };\n    return _this;\n  }\n\n  _createClass(CollectionViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"collectionViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_CollectionCreator_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_CollectionList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return CollectionViewer;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NvbGxlY3Rpb25WaWV3ZXIuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvY29sbGVjdGlvbi9Db2xsZWN0aW9uVmlld2VyLmpzeD9kZjI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBhbm5vdGF0ZS1yZGZhLmpzIGFsbG93cyB1c2VyIHRvIHNlbGVjdCBSREZBLWxhYmVsZWQgdGV4dCBmcmFnbWVudHNcbiAqIGluIFJERmEgZW5yaWNoZWQgSFRNTCBkb2N1bWVudHMuXG4gKlxuICovXG5cbi8vIFRPIERPOiBkZWFsIHdpdGggZWxlbWVudHMgdGhhdCBoYXZlIG11bHRpcGxlIHR5cGVzXG5cbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgQ29sbGVjdGlvbkNyZWF0b3IgZnJvbSAnLi9Db2xsZWN0aW9uQ3JlYXRvci5qc3gnO1xuaW1wb3J0IENvbGxlY3Rpb25MaXN0IGZyb20gJy4vQ29sbGVjdGlvbkxpc3QuanN4JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwQW5ub3RhdGlvblN0b3JlIGZyb20gJy4vLi4vLi4vZmx1eC9Bbm5vdGF0aW9uU3RvcmUnO1xuaW1wb3J0IEFubm90YXRpb25BY3Rpb25zIGZyb20gJy4uLy4uL2ZsdXgvQW5ub3RhdGlvbkFjdGlvbnMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsZWN0aW9uVmlld2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uczogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xsZWN0aW9uVmlld2VyXCI+XG4gICAgICAgICAgICA8Q29sbGVjdGlvbkNyZWF0b3JcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17dGhpcy5wcm9wcy5jdXJyZW50VXNlcn1cbiAgICAgICAgICAgICAgICBjb25maWc9e3RoaXMucHJvcHMuY29uZmlnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxDb2xsZWN0aW9uTGlzdFxuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyPXt0aGlzLnByb3BzLmN1cnJlbnRVc2VyfVxuICAgICAgICAgICAgICAgIGNvbmZpZz17dGhpcy5wcm9wcy5jb25maWd9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBTUE7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFLQTtBQUNBOzs7QUFBQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFNQTs7OztBQXRCQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/collection/CollectionViewer.jsx\n");

/***/ }),

/***/ "./src/components/resource/Resource.jsx":
/*!**********************************************!*\
  !*** ./src/components/resource/Resource.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Resource; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar Resource =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Resource, _React$Component);\n\n  function Resource(props) {\n    var _this;\n\n    _classCallCheck(this, Resource);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Resource).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Resource, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"onMouseOverHandler\",\n    value: function onMouseOverHandler() {\n      if (this.props.data.domNode) {\n        this.props.data.domNode.style.border = \"1px solid red\";\n      } //console.log(this.props.data);\n\n    }\n  }, {\n    key: \"onMouseOutHandler\",\n    value: function onMouseOutHandler() {\n      if (this.props.data.domNode) {\n        this.props.data.domNode.style.border = \"\";\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this; //console.log(\"Resource - render props.data:\", this.props.data);\n      //console.log(Date());\n\n      var labels = this.props;\n      var typeLabels = this.props.data.rdfTypeLabel.map(function (label) {\n        if (!_this2.props.data.rdfTypeLabel) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n            key: _this2.props.data.resource\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"rdfa-label-\" + label\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-info\"\n        }, label), \"\\xA0\");\n      });\n      var resource = this.props.data.resource ? this.props.data.resource : this.props.data.rdfaResource;\n      var parentResource = this.props.data.parentResource;\n      var parent = parentResource ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Parent: \\xA0 \", parentResource) : \"\";\n      var rdfaProperty = this.props.data.rdfaProperty ? this.props.data.rdfaProperty.split(\"#\")[1] : null;\n\n      if (this.props.data.relation) {\n        rdfaProperty = this.props.data.relation.split(\"#\")[1];\n      }\n\n      var relation = rdfaProperty ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Relation: \\xA0 \", rdfaProperty) : \"\";\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"resource list-group-item\",\n        onMouseOver: component.onMouseOverHandler.bind(this),\n        onMouseOut: component.onMouseOutHandler.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Type: \\xA0 \", typeLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Identifier: \", resource), parent, relation);\n    }\n  }]);\n\n  return Resource;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9yZXNvdXJjZS9SZXNvdXJjZS5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9yZXNvdXJjZS9SZXNvdXJjZS5qc3g/ZTIyMiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBcHBBbm5vdGF0aW9uU3RvcmUgZnJvbSAnLi8uLi8uLi9mbHV4L0Fubm90YXRpb25TdG9yZSc7XG5pbXBvcnQgQW5ub3RhdGlvbkFjdGlvbnMgZnJvbSAnLi8uLi8uLi9mbHV4L0Fubm90YXRpb25BY3Rpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVzb3VyY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB9XG5cbiAgICBvbk1vdXNlT3ZlckhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRhdGEuZG9tTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kYXRhLmRvbU5vZGUuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgcmVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmRhdGEpO1xuICAgIH1cblxuICAgIG9uTW91c2VPdXRIYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5kYXRhLmRvbU5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGF0YS5kb21Ob2RlLnN0eWxlLmJvcmRlciA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiUmVzb3VyY2UgLSByZW5kZXIgcHJvcHMuZGF0YTpcIiwgdGhpcy5wcm9wcy5kYXRhKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhEYXRlKCkpO1xuICAgICAgICBsZXQgbGFiZWxzID0gdGhpcy5wcm9wc1xuICAgICAgICBsZXQgdHlwZUxhYmVscyA9IHRoaXMucHJvcHMuZGF0YS5yZGZUeXBlTGFiZWwubWFwKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3BzLmRhdGEucmRmVHlwZUxhYmVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICg8c3BhbiBrZXk9e3RoaXMucHJvcHMuZGF0YS5yZXNvdXJjZX0+PC9zcGFuPilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAga2V5PXtcInJkZmEtbGFiZWwtXCIgKyBsYWJlbH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiYWRnZSBiYWRnZS1pbmZvXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2xhYmVsfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCByZXNvdXJjZSA9ICh0aGlzLnByb3BzLmRhdGEucmVzb3VyY2UpID8gdGhpcy5wcm9wcy5kYXRhLnJlc291cmNlIDogdGhpcy5wcm9wcy5kYXRhLnJkZmFSZXNvdXJjZTtcbiAgICAgICAgbGV0IHBhcmVudFJlc291cmNlID0gdGhpcy5wcm9wcy5kYXRhLnBhcmVudFJlc291cmNlO1xuICAgICAgICBsZXQgcGFyZW50ID0gcGFyZW50UmVzb3VyY2UgPyAoPGRpdj5QYXJlbnQ6ICZuYnNwOyB7cGFyZW50UmVzb3VyY2V9PC9kaXY+KSA6IFwiXCI7XG4gICAgICAgIHZhciByZGZhUHJvcGVydHkgPSB0aGlzLnByb3BzLmRhdGEucmRmYVByb3BlcnR5ID8gdGhpcy5wcm9wcy5kYXRhLnJkZmFQcm9wZXJ0eS5zcGxpdChcIiNcIilbMV0gOiBudWxsO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5kYXRhLnJlbGF0aW9uKSB7XG4gICAgICAgICAgICByZGZhUHJvcGVydHkgPSB0aGlzLnByb3BzLmRhdGEucmVsYXRpb24uc3BsaXQoXCIjXCIpWzFdO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWxhdGlvbiA9IHJkZmFQcm9wZXJ0eSA/ICg8ZGl2PlJlbGF0aW9uOiAmbmJzcDsge3JkZmFQcm9wZXJ0eX08L2Rpdj4pIDogXCJcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlc291cmNlIGxpc3QtZ3JvdXAtaXRlbVwiXG4gICAgICAgICAgICAgICAgb25Nb3VzZU92ZXI9e2NvbXBvbmVudC5vbk1vdXNlT3ZlckhhbmRsZXIuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBvbk1vdXNlT3V0PXtjb21wb25lbnQub25Nb3VzZU91dEhhbmRsZXIuYmluZCh0aGlzKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIFR5cGU6ICZuYnNwOyB7dHlwZUxhYmVsc31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIElkZW50aWZpZXI6IHtyZXNvdXJjZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7cGFyZW50fVxuICAgICAgICAgICAgICAgIHtyZWxhdGlvbn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBQUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFEQTtBQUlBO0FBREE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQWVBOzs7O0FBckVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/resource/Resource.jsx\n");

/***/ }),

/***/ "./src/components/resource/ResourceList.jsx":
/*!**************************************************!*\
  !*** ./src/components/resource/ResourceList.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _Resource_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Resource.jsx */ \"./src/components/resource/Resource.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar ResourceList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResourceList, _React$Component);\n\n  function ResourceList(props) {\n    var _this;\n\n    _classCallCheck(this, ResourceList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceList).call(this, props));\n    _this.state = {\n      resourceIds: [],\n      externalIds: [],\n      view: \"resources\"\n    };\n    return _this;\n  }\n\n  _createClass(ResourceList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('loaded-resources', this.listResources.bind(this));\n    }\n  }, {\n    key: \"changeView\",\n    value: function changeView(e) {\n      this.setState({\n        view: e.target.name\n      });\n    } //listResources(topResources, resourceMaps) {\n\n  }, {\n    key: \"listResources\",\n    value: function listResources(topResources) {\n      //console.log(\"topResources:\", topResources);\n      //console.log(\"resourceMaps:\", resourceMaps);\n      var resourceIds = Object.keys(_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex);\n      var externalIds = Object.keys(_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].externalResourceIndex).filter(function (resourceId) {\n        return !_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex.hasOwnProperty(resourceId);\n      }); //console.log(\"resourceIds:\", resourceIds);\n      //console.log(\"externalIds:\", externalIds);\n\n      this.setState({\n        resourceIds: resourceIds,\n        externalIds: externalIds\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //console.log(AnnotationStore.resourceIndex);\n      var component = this;\n      var resourceItems = null;\n      var externalItems = null; //console.log(this.state.resourceIds);\n\n      resourceItems = this.state.resourceIds.map(function (resourceId) {\n        //console.log(\"mapping resource item:\", resourceId);\n        var resource = _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex[resourceId]; //console.log(\"mapping resource:\", resource);\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Resource_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          data: resource,\n          key: resourceId\n        });\n      }); //console.log(\"resourceItems:\", resourceItems);\n\n      externalItems = this.state.externalIds.map(function (resourceId) {\n        var resource = _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].externalResourceIndex[resourceId];\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Resource_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          data: resource,\n          key: resourceId\n        });\n      }); //console.log(\"externalItems:\", externalItems);\n\n      var itemTypes = [\"resources\", \"external\"];\n      var viewerTabContents = itemTypes.map(function (itemType) {\n        var itemList;\n        if (itemType === \"resources\") itemList = resourceItems;\n        if (itemType === \"external\") itemList = externalItems;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: itemType + '__tab_content',\n          id: itemType,\n          className: _this2.state.view === itemType ? 'tab-pane active' : 'tab-pane'\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group annotation-scroll-list\"\n        }, itemList));\n      });\n      var viewerTabs = itemTypes.map(function (itemType) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: itemType + '__tab_option',\n          className: \"nav-item viewer-tab \"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          onClick: _this2.changeView.bind(_this2),\n          name: itemType,\n          \"data-toggle\": \"tab\",\n          href: '#' + itemType,\n          className: component.state.view === itemType ? 'nav-link active' : 'nav-link'\n        }, itemType));\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"resourceList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Annotatable Resources\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs nav-fill viewer-tabs\"\n      }, viewerTabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, viewerTabContents));\n    }\n  }]);\n\n  return ResourceList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ResourceList);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9yZXNvdXJjZS9SZXNvdXJjZUxpc3QuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2NvbXBvbmVudHMvcmVzb3VyY2UvUmVzb3VyY2VMaXN0LmpzeD9hOWM1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFwcEFubm90YXRpb25TdG9yZSBmcm9tICcuLy4uLy4uL2ZsdXgvQW5ub3RhdGlvblN0b3JlJztcbmltcG9ydCBBbm5vdGF0aW9uU3RvcmUgZnJvbSAnLi8uLi8uLi9mbHV4L0Fubm90YXRpb25TdG9yZSc7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSAnLi9SZXNvdXJjZS5qc3gnO1xuXG5jbGFzcyBSZXNvdXJjZUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHJlc291cmNlSWRzOiBbXSxcbiAgICAgICAgICAgIGV4dGVybmFsSWRzOiBbXSxcbiAgICAgICAgICAgIHZpZXc6IFwicmVzb3VyY2VzXCIsXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5iaW5kKCdsb2FkZWQtcmVzb3VyY2VzJywgdGhpcy5saXN0UmVzb3VyY2VzLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGNoYW5nZVZpZXcoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt2aWV3OiBlLnRhcmdldC5uYW1lfSk7XG4gICAgfVxuXG4gICAgLy9saXN0UmVzb3VyY2VzKHRvcFJlc291cmNlcywgcmVzb3VyY2VNYXBzKSB7XG4gICAgbGlzdFJlc291cmNlcyh0b3BSZXNvdXJjZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInRvcFJlc291cmNlczpcIiwgdG9wUmVzb3VyY2VzKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlc291cmNlTWFwczpcIiwgcmVzb3VyY2VNYXBzKTtcbiAgICAgICAgbGV0IHJlc291cmNlSWRzID0gT2JqZWN0LmtleXMoQW5ub3RhdGlvblN0b3JlLnJlc291cmNlSW5kZXgpO1xuICAgICAgICBsZXQgZXh0ZXJuYWxJZHMgPSBPYmplY3Qua2V5cyhBbm5vdGF0aW9uU3RvcmUuZXh0ZXJuYWxSZXNvdXJjZUluZGV4KS5maWx0ZXIoKHJlc291cmNlSWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhQW5ub3RhdGlvblN0b3JlLnJlc291cmNlSW5kZXguaGFzT3duUHJvcGVydHkocmVzb3VyY2VJZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJyZXNvdXJjZUlkczpcIiwgcmVzb3VyY2VJZHMpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZXh0ZXJuYWxJZHM6XCIsIGV4dGVybmFsSWRzKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICByZXNvdXJjZUlkczogcmVzb3VyY2VJZHMsXG4gICAgICAgICAgICBleHRlcm5hbElkczogZXh0ZXJuYWxJZHNcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKEFubm90YXRpb25TdG9yZS5yZXNvdXJjZUluZGV4KTtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXM7XG4gICAgICAgIGxldCByZXNvdXJjZUl0ZW1zID0gbnVsbDtcbiAgICAgICAgbGV0IGV4dGVybmFsSXRlbXMgPSBudWxsO1xuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RhdGUucmVzb3VyY2VJZHMpO1xuICAgICAgICByZXNvdXJjZUl0ZW1zID0gdGhpcy5zdGF0ZS5yZXNvdXJjZUlkcy5tYXAoKHJlc291cmNlSWQpID0+IHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJtYXBwaW5nIHJlc291cmNlIGl0ZW06XCIsIHJlc291cmNlSWQpO1xuICAgICAgICAgICAgbGV0IHJlc291cmNlID0gQW5ub3RhdGlvblN0b3JlLnJlc291cmNlSW5kZXhbcmVzb3VyY2VJZF07XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibWFwcGluZyByZXNvdXJjZTpcIiwgcmVzb3VyY2UpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UmVzb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgZGF0YT17cmVzb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgIGtleT17cmVzb3VyY2VJZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJyZXNvdXJjZUl0ZW1zOlwiLCByZXNvdXJjZUl0ZW1zKTtcblxuICAgICAgICBleHRlcm5hbEl0ZW1zID0gdGhpcy5zdGF0ZS5leHRlcm5hbElkcy5tYXAoKHJlc291cmNlSWQpID0+IHtcbiAgICAgICAgICAgIGxldCByZXNvdXJjZSA9IEFubm90YXRpb25TdG9yZS5leHRlcm5hbFJlc291cmNlSW5kZXhbcmVzb3VyY2VJZF07XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxSZXNvdXJjZVxuICAgICAgICAgICAgICAgICAgICBkYXRhPXtyZXNvdXJjZX1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtyZXNvdXJjZUlkfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImV4dGVybmFsSXRlbXM6XCIsIGV4dGVybmFsSXRlbXMpO1xuXG4gICAgICAgIGxldCBpdGVtVHlwZXMgPSBbXCJyZXNvdXJjZXNcIiwgXCJleHRlcm5hbFwiXTtcbiAgICAgICAgbGV0IHZpZXdlclRhYkNvbnRlbnRzID0gaXRlbVR5cGVzLm1hcCgoaXRlbVR5cGUpID0+IHtcbiAgICAgICAgICAgIHZhciBpdGVtTGlzdDtcbiAgICAgICAgICAgIGlmIChpdGVtVHlwZSA9PT0gXCJyZXNvdXJjZXNcIilcbiAgICAgICAgICAgICAgICBpdGVtTGlzdCA9IHJlc291cmNlSXRlbXM7XG4gICAgICAgICAgICBpZiAoaXRlbVR5cGUgPT09IFwiZXh0ZXJuYWxcIilcbiAgICAgICAgICAgICAgICBpdGVtTGlzdCA9IGV4dGVybmFsSXRlbXM7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtVHlwZSArICdfX3RhYl9jb250ZW50J31cbiAgICAgICAgICAgICAgICAgICAgaWQ9e2l0ZW1UeXBlfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMuc3RhdGUudmlldyA9PT0gaXRlbVR5cGUgPyAndGFiLXBhbmUgYWN0aXZlJyA6ICd0YWItcGFuZSd9PlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cCBhbm5vdGF0aW9uLXNjcm9sbC1saXN0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXRlbUxpc3R9XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpZXdlclRhYnMgPSBpdGVtVHlwZXMubWFwKChpdGVtVHlwZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtVHlwZSArICdfX3RhYl9vcHRpb24nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJuYXYtaXRlbSB2aWV3ZXItdGFiIFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLmNoYW5nZVZpZXcuYmluZCh0aGlzKX0gbmFtZT17aXRlbVR5cGV9IGRhdGEtdG9nZ2xlPVwidGFiXCIgaHJlZj17JyMnICsgaXRlbVR5cGV9IGNsYXNzTmFtZT17Y29tcG9uZW50LnN0YXRlLnZpZXcgPT09IGl0ZW1UeXBlID8gJ25hdi1saW5rIGFjdGl2ZScgOiAnbmF2LWxpbmsnfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVzb3VyY2VMaXN0XCI+XG4gICAgICAgICAgICAgICAgPGgzPkFubm90YXRhYmxlIFJlc291cmNlczwvaDM+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm5hdiBuYXYtdGFicyBuYXYtZmlsbCB2aWV3ZXItdGFic1wiPlxuICAgICAgICAgICAgICAgICAgICB7dmlld2VyVGFic31cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFiLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAge3ZpZXdlclRhYkNvbnRlbnRzfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXNvdXJjZUxpc3Q7XG5cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBT0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUlBO0FBQUE7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFHQTtBQUFBO0FBS0E7Ozs7QUEzR0E7QUFDQTtBQTZHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/resource/ResourceList.jsx\n");

/***/ }),

/***/ "./src/components/resource/ResourceViewer.jsx":
/*!****************************************************!*\
  !*** ./src/components/resource/ResourceViewer.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ResourceViewer; });\n/* harmony import */ var _ResourceList_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ResourceList.jsx */ \"./src/components/resource/ResourceList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar ResourceViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResourceViewer, _React$Component);\n\n  function ResourceViewer(props) {\n    var _this;\n\n    _classCallCheck(this, ResourceViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceViewer).call(this, props));\n    _this.state = {\n      resources: []\n    };\n    return _this;\n  }\n\n  _createClass(ResourceViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"resourceViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ResourceList_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return ResourceViewer;\n}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9yZXNvdXJjZS9SZXNvdXJjZVZpZXdlci5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvY29tcG9uZW50cy9yZXNvdXJjZS9SZXNvdXJjZVZpZXdlci5qc3g/ZGIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogYW5ub3RhdGUtcmRmYS5qcyBhbGxvd3MgdXNlciB0byBzZWxlY3QgUkRGQS1sYWJlbGVkIHRleHQgZnJhZ21lbnRzXG4gKiBpbiBSREZhIGVucmljaGVkIEhUTUwgZG9jdW1lbnRzLlxuICpcbiAqL1xuXG4vLyBUTyBETzogZGVhbCB3aXRoIGVsZW1lbnRzIHRoYXQgaGF2ZSBtdWx0aXBsZSB0eXBlc1xuXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IFJlc291cmNlTGlzdCBmcm9tICcuL1Jlc291cmNlTGlzdC5qc3gnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBcHBBbm5vdGF0aW9uU3RvcmUgZnJvbSAnLi8uLi8uLi9mbHV4L0Fubm90YXRpb25TdG9yZSc7XG5pbXBvcnQgQW5ub3RhdGlvbkFjdGlvbnMgZnJvbSAnLi4vLi4vZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc291cmNlVmlld2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICByZXNvdXJjZXM6IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVzb3VyY2VWaWV3ZXJcIj5cbiAgICAgICAgICAgIDxSZXNvdXJjZUxpc3RcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcj17dGhpcy5wcm9wcy5jdXJyZW50VXNlcn1cbiAgICAgICAgICAgICAgICBjb25maWc9e3RoaXMucHJvcHMuY29uZmlnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQU1BO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFGQTtBQU1BOzs7O0FBbEJBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/resource/ResourceViewer.jsx\n");

/***/ }),

/***/ "./src/flux/AnnotationActions.js":
/*!***************************************!*\
  !*** ./src/flux/AnnotationActions.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\n/* harmony import */ var _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/AnnotationAPI */ \"./src/api/AnnotationAPI.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _util_TimeUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/TimeUtil.js */ \"./src/util/TimeUtil.js\");\n/* harmony import */ var _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/TargetUtil.js */ \"./src/util/TargetUtil.js\");\n/* harmony import */ var _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/FRBRooUtil.js */ \"./src/util/FRBRooUtil.js\");\n\n\n\n\n\n\n\n\n\nvar restorePermission = function restorePermission() {\n  var permission = {\n    accessStatus: [\"private\", \"public\"],\n    permission: \"private\"\n  };\n\n  try {\n    if (window.localStorage && window.localStorage.hasOwnProperty(\"swac-permission\")) {\n      permission = JSON.parse(window.localStorage.getItem(\"swac-permission\"));\n    }\n  } catch (e) {// catch errors if no localStorage exists\n  }\n\n  return permission;\n};\n\nvar permission = restorePermission();\n\nvar storePermission = function storePermission(permission) {\n  if (!window.localStorage) {} else {\n    window.localStorage.setItem(\"swac-permission\", JSON.stringify(permission));\n  }\n};\n\nvar AnnotationActions = {\n  serverAvailable: false,\n  accessStatus: permission.accessStatus,\n  // for retrieving annotations from the server\n  permission: permission.permission,\n  // for submitting or updating annotations in the server\n  //accessStatus : [\"private\", \"public\"], // for retrieving annotations from the server\n  //permission : \"private\", // for submitting or updating annotations in the server\n  annotationIndex: {},\n  resourceIndex: {},\n  relationIndex: {},\n  topResources: [],\n  annotationListener: [],\n  getServerAddress: function getServerAddress() {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getServerAddress();\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setServerAddress(apiURL);\n    AnnotationActions.pollServer();\n  },\n  pollServer: function pollServer() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].checkServerAvailable(function (serverAvailable) {\n      if (serverAvailable !== AnnotationActions.serverAvailable) {\n        AnnotationActions.serverAvailable = serverAvailable;\n      }\n\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"server-status-change\",\n        serverAvailable: serverAvailable\n      }); //if (!serverAvailable) {\n      //    console.error(\"Annotation server not reachable\");\n      //}\n    });\n    setTimeout(AnnotationActions.pollServer, 60000);\n  },\n  getAccessStatus: function getAccessStatus() {\n    return AnnotationActions.accessStatus;\n  },\n  setAccessStatus: function setAccessStatus(accessStatus) {\n    AnnotationActions.accessStatus = accessStatus;\n    storePermission({\n      permission: AnnotationActions.permission,\n      accessStatus: accessStatus\n    });\n\n    if (AnnotationActions.accessStatus.length === 0) {\n      AnnotationActions.dispatchAnnotations([]); // when no access levels are selected\n    } else {\n      AnnotationActions.loadAnnotations(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources);\n    }\n  },\n  getPermission: function getPermission() {\n    return AnnotationActions.permission;\n  },\n  setPermission: function setPermission(permission) {\n    storePermission({\n      permission: permission,\n      accessStatus: AnnotationActions.accessStatus\n    });\n    AnnotationActions.permission = permission;\n  },\n  setBaseAnnotationOntology: function setBaseAnnotationOntology(url) {\n    _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].baseAnnotationOntologyURL = url;\n    _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].baseAnnotationOntologyURL = url;\n    _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBaseAnnotationOntology(url);\n  },\n  addListenerElement: function addListenerElement(element) {\n    if (!AnnotationActions.annotationListener.includes(element)) AnnotationActions.annotationListener.push(element);\n  },\n  lookupIdentifier: function lookupIdentifier(sourceId) {\n    var source = {\n      type: null,\n      data: null\n    }; // for IDs to external resources\n\n    if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex.hasOwnProperty(sourceId)) source = {\n      type: \"annotation\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex[sourceId]\n    };else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex.hasOwnProperty(sourceId)) source = {\n      type: \"resource\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex[sourceId]\n    };else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(sourceId)) source = {\n      type: \"external\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[sourceId]\n    };\n    return source;\n  },\n  lookupAnnotationsByTarget: function lookupAnnotationsByTarget(resourceId) {\n    return Object.values(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex).filter(function (annotation) {\n      var match = annotation.target.some(function (target) {\n        if (target.source && target.source === resourceId) {\n          return true;\n        } else if (target.identifier && target.identifier === resourceId) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      return match ? true : false;\n    });\n  },\n  save: function save(annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveAnnotation(annotation, AnnotationActions.permission, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"save-annotation\",\n        annotation: data\n      });\n    });\n  },\n  delete: function _delete(annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteAnnotation(annotation, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"delete-annotation\",\n        annotation: data\n      });\n    });\n  },\n  activate: function activate(annotation) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"activate-annotation\",\n      annotation: annotation\n    });\n  },\n  edit: function edit(annotation) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"edit-annotation\",\n      annotation: annotation\n    });\n  },\n  createAnnotation: function createAnnotation(annotationTargets) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"create-annotation\",\n      annotationTargets: annotationTargets\n    });\n  },\n  set: function set(annotation) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"set-annotation\",\n      annotation: annotation\n    });\n  },\n  play: function play(annotation) {\n    //is the annotation always on the same page? (no)\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"play-annotation\",\n      annotation: annotation\n    });\n  },\n  changeTarget: function changeTarget(annotationTarget) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"change-target\",\n      annotationTarget: annotationTarget\n    });\n  },\n  makeAnnotation: function makeAnnotation(annotationTargets, username) {\n    return _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].generateW3CAnnotation(annotationTargets, username);\n  },\n  loadAnnotations: function loadAnnotations(resourceIds) {\n    _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotations = []; // reset to remove old annotations\n\n    if (resourceIds === undefined) resourceIds = _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources;\n    var externalResources = AnnotationActions.getExternalResources(resourceIds);\n    var externalIds = externalResources.map(function (res) {\n      return res.parentResource;\n    }).filter(function (externalId) {\n      return typeof externalId === \"string\";\n    });\n    resourceIds = resourceIds.concat(externalIds);\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAnnotationsByTargets(resourceIds, AnnotationActions.accessStatus, function (error, annotations) {\n      if (error) {\n        throw error;\n      }\n\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex = {};\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotations = annotations;\n      annotations.forEach(function (annotation) {\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex[annotation.id] = annotation;\n      });\n      AnnotationActions.dispatchAnnotations(annotations);\n    });\n  },\n  copyAnnotation: function copyAnnotation(annotation) {\n    // remove id, creation timestamp, permissions (assume permission of current user setting)\n    delete annotation.id;\n    delete annotation.created;\n    delete annotation.premissions;\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveAnnotation(annotation, AnnotationActions.permission, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"save-annotation\",\n        annotation: data\n      });\n    });\n  },\n  dispatchAnnotations: function dispatchAnnotations(annotations) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"load-annotations\",\n      annotations: annotations\n    });\n    AnnotationActions.dispatchLoadEvent();\n  },\n  dispatchLoadEvent: function dispatchLoadEvent() {\n    // for external listeners\n    AnnotationActions.annotationListener.forEach(function (element) {\n      var event = new CustomEvent(\"load-annotations\");\n      element.dispatchEvent(event);\n    });\n  },\n  reload: function reload() {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"reload-annotations\"\n    });\n  },\n  indexResources: function indexResources() {\n    return new Promise(function (resolve, reject) {\n      _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].indexResources().then(function (resourceData) {\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex = resourceData.resourceIndex.resources;\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relationIndex = resourceData.resourceIndex.relations;\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceStore = resourceData.resourceStore;\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceMap = resourceData.representedResourceMap;\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex = resourceData.externalResourceIndex;\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceData = resourceData;\n        return resolve();\n      }, function (error) {\n        console.log(\"Error indexing resources\");\n        console.log(error);\n        return reject(error);\n      }); // ... refresh index\n    });\n  },\n  hasExternalResource: function hasExternalResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      return false;\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId);\n    }\n  },\n  hasRepresentedResource: function hasRepresentedResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceMap) {\n      return false;\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceMap.hasOwnProperty(resourceId);\n    }\n  },\n  getRepresentedResource: function getRepresentedResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      throw Error(\"externalResourceIndex does not exist\");\n    } else if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId)) {\n      throw Error(\"resourceId does not have represented resource\");\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[resourceId];\n    }\n  },\n  getExternalResources: function getExternalResources(resourceIds) {\n    if (!Array.isArray(resourceIds)) {\n      console.log(\"resourceIds:\", resourceIds);\n      throw Error(\"resourceIds should be an array\");\n    }\n\n    return resourceIds.filter(AnnotationActions.hasExternalResource).map(function (resourceId) {\n      return AnnotationActions.getExternalResource(resourceId);\n    });\n  },\n  getExternalResource: function getExternalResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      return null;\n    } else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId)) {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[resourceId];\n    } else {\n      return null;\n    }\n  },\n  loadResources: function loadResources() {\n    _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources();\n    AnnotationActions.indexResources().then(function () {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-resources\",\n        topResources: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources\n      });\n      AnnotationActions.loadAnnotations(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources);\n    });\n  },\n  getCandidates: function getCandidates(annotations, defaultTargets) {\n    return _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getCandidates(annotations, defaultTargets, _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceData);\n  },\n  registerUser: function registerUser(userDetails) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerUser(userDetails, function (error) {\n      if (error) {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"register-failed\",\n          userDetails: userDetails\n        });\n      } else {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"register-succeeded\",\n          userDetails: userDetails\n        });\n      }\n    });\n  },\n  loginUser: function loginUser(userDetails) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loginUser(userDetails, function (error) {\n      if (error) {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"login-failed\",\n          userDetails: error\n        });\n      } else {\n        AnnotationActions.loadResources();\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"login-succeeded\",\n          userDetails: userDetails\n        });\n      }\n    });\n  },\n  logoutUser: function logoutUser() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].logoutUser(function (error) {\n      if (error) {\n        //window.alert(\"Error logging out!\");\n        return null;\n      }\n\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"logout-user\",\n        userDetails: null\n      });\n    });\n  },\n  registerResources: function registerResources(maps) {\n    if (Object.keys(maps).length === 0) return null;\n    Object.keys(maps).forEach(function (resourceId, index) {\n      // check if server knows about resource\n      _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].checkResource(resourceId, function (error, data) {\n        if (data && index === Object.keys(maps).length - 1) return data;else if (data) return null; // register if server doesn't know resource\n\n        _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerResource(maps[resourceId], function (error, data) {\n          if (error) return null;\n          if (index === Object.keys(maps).length - 1) return data;\n        });\n      });\n    });\n  },\n  parseVocabularySuggestion: function parseVocabularySuggestion(suggestion, vocabulary) {\n    var entry = {\n      value: null,\n      label: {\n        className: \"badge badge-success\",\n        value: \"\"\n      },\n      scopeNote: null\n    };\n\n    if (vocabulary === \"GTAA\") {\n      var arr = suggestion.label.split('|');\n      entry.value = arr[0];\n      entry.scopeNote = arr[2] ? '(' + arr[2] + ')' : '';\n\n      switch (arr[1]) {\n        case 'Persoon':\n          entry.label = {\n            className: \"badge badge-warning\",\n            value: \"Persoon\"\n          };\n          break;\n\n        case 'Maker':\n          entry.label = {\n            className: \"badge badge-warning\",\n            value: \"Maker\"\n          };\n          break;\n\n        case 'Geografisch':\n          entry.label = {\n            className: \"badge badge-success\",\n            value: \"Locatie\"\n          };\n          break;\n\n        case 'Naam':\n          entry.label = {\n            className: \"badge badge-info\",\n            value: \"Naam\"\n          };\n          break;\n\n        case 'Onderwerp':\n          entry.label = {\n            className: \"badge badge-primary\",\n            value: \"Onderwerp\"\n          };\n          break;\n\n        case 'Genre':\n          entry.label = {\n            className: \"badge badge-default\",\n            value: \"Genre\"\n          };\n          break;\n\n        case 'B&G Onderwerp':\n          entry.label = {\n            className: \"badge badge-danger\",\n            value: \"B&G Onderwerp\"\n          };\n          break;\n\n        default:\n          entry.label = {\n            className: \"badge badge-default\",\n            value: \"Concept\"\n          };\n          break;\n      }\n    } else if (vocabulary === \"DBpedia\") {\n      var _arr = suggestion.label.split('|');\n\n      entry.value = _arr[0];\n      entry.scopeNote = _arr[2] ? '(' + _arr[2] + ')' : '';\n      entry.label = {\n        className: \"badge badge-default\",\n        value: \"Concept\"\n      };\n    } else if (vocabulary == 'UNESCO') {\n      var _arr2 = suggestion.prefLabel.split('|');\n\n      entry.value = _arr2[0];\n      entry.label.value = _arr2[1];\n\n      switch (_arr2[1]) {\n        case 'Education':\n          entry.label.className = \"badge badge-warning\";\n          break;\n\n        case 'Science':\n          entry.label.className = \"badge badge-warning\";\n          break;\n\n        case 'Social and human sciences':\n          entry.label.className = \"badge badge-success\";\n          break;\n\n        case 'Information and communication':\n          entry.label.className = \"badge badge-info\";\n          break;\n\n        case 'Politics, law and economics':\n          entry.label.className = \"badge badge-primary\";\n          break;\n\n        case 'Countries and country groupings':\n          entry.label.className = \"badge badge-default\";\n          break;\n\n        default:\n          entry.label.className = \"badge badge-warning\";\n          entry.label.value = \"Concept\";\n          break;\n      }\n    }\n\n    return entry;\n  },\n  mapTargetsToDOMElements: function mapTargetsToDOMElements(annotation) {\n    return _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].mapTargetsToDOMElements(annotation, _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceData, _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotations);\n  },\n  createBreadcrumbTrail: function createBreadcrumbTrail(resourceId) {\n    if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex.hasOwnProperty(resourceId)) {\n      return _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].createBreadcrumbTrail(resourceId, _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex);\n    } else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId)) {\n      return _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createBreadcrumbTrail(resourceId, _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex);\n    } else {\n      throw Error(\"Unknown resource!\");\n    }\n  },\n  extractBodies: function extractBodies(annotation) {\n    return _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractBodies(annotation);\n  },\n  extractTargets: function extractTargets(annotation) {\n    return _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargets(annotation);\n  },\n  extractTargetIdentifier: function extractTargetIdentifier(target) {\n    return _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargetIdentifier(target);\n  },\n  getTargetText: function getTargetText(target, source) {\n    return _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getTargetText(target, source);\n  },\n  getTargetMediaFragment: function getTargetMediaFragment(target) {\n    return _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getTargetMediaFragment(target);\n  },\n  toggleHighlight: function toggleHighlight(targetDOMElements, highlighted) {\n    return _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toggleHighlight(targetDOMElements, highlighted);\n  },\n  formatTime: function formatTime(timestamp) {\n    return _util_TimeUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].formatTime(timestamp);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationActions);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmx1eC9Bbm5vdGF0aW9uQWN0aW9ucy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9mbHV4L0Fubm90YXRpb25BY3Rpb25zLmpzP2U2YzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSBcIi4vQXBwRGlzcGF0Y2hlclwiO1xuaW1wb3J0IEFubm90YXRpb25BUEkgZnJvbSBcIi4uL2FwaS9Bbm5vdGF0aW9uQVBJXCI7XG5pbXBvcnQgQW5ub3RhdGlvblN0b3JlIGZyb20gXCIuLi9mbHV4L0Fubm90YXRpb25TdG9yZS5qc1wiO1xuaW1wb3J0IFJERmFVdGlsIGZyb20gXCIuLi91dGlsL1JERmFVdGlsLmpzXCI7XG5pbXBvcnQgQW5ub3RhdGlvblV0aWwgZnJvbSBcIi4uL3V0aWwvQW5ub3RhdGlvblV0aWwuanNcIjtcbmltcG9ydCBUaW1lVXRpbCBmcm9tIFwiLi4vdXRpbC9UaW1lVXRpbC5qc1wiO1xuaW1wb3J0IFRhcmdldFV0aWwgZnJvbSBcIi4uL3V0aWwvVGFyZ2V0VXRpbC5qc1wiO1xuaW1wb3J0IEZSQlJvb1V0aWwgZnJvbSBcIi4uL3V0aWwvRlJCUm9vVXRpbC5qc1wiO1xuXG52YXIgcmVzdG9yZVBlcm1pc3Npb24gPSAoKSA9PiB7XG4gICAgdmFyIHBlcm1pc3Npb24gPSB7YWNjZXNzU3RhdHVzOiBbXCJwcml2YXRlXCIsIFwicHVibGljXCJdLCBwZXJtaXNzaW9uOiBcInByaXZhdGVcIn07XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShcInN3YWMtcGVybWlzc2lvblwiKSkge1xuICAgICAgICAgICAgcGVybWlzc2lvbiA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3dhYy1wZXJtaXNzaW9uXCIpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gY2F0Y2ggZXJyb3JzIGlmIG5vIGxvY2FsU3RvcmFnZSBleGlzdHNcbiAgICB9XG4gICAgcmV0dXJuIHBlcm1pc3Npb247XG59XG5cbmxldCBwZXJtaXNzaW9uID0gcmVzdG9yZVBlcm1pc3Npb24oKTtcblxudmFyIHN0b3JlUGVybWlzc2lvbiA9IChwZXJtaXNzaW9uKSA9PiB7XG4gICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3dhYy1wZXJtaXNzaW9uXCIsIEpTT04uc3RyaW5naWZ5KHBlcm1pc3Npb24pKTtcbiAgICB9XG59XG5cblxuY29uc3QgQW5ub3RhdGlvbkFjdGlvbnMgPSB7XG5cbiAgICBzZXJ2ZXJBdmFpbGFibGUgOiBmYWxzZSxcbiAgICBhY2Nlc3NTdGF0dXMgOiBwZXJtaXNzaW9uLmFjY2Vzc1N0YXR1cywgLy8gZm9yIHJldHJpZXZpbmcgYW5ub3RhdGlvbnMgZnJvbSB0aGUgc2VydmVyXG4gICAgcGVybWlzc2lvbiA6IHBlcm1pc3Npb24ucGVybWlzc2lvbiwgLy8gZm9yIHN1Ym1pdHRpbmcgb3IgdXBkYXRpbmcgYW5ub3RhdGlvbnMgaW4gdGhlIHNlcnZlclxuICAgIC8vYWNjZXNzU3RhdHVzIDogW1wicHJpdmF0ZVwiLCBcInB1YmxpY1wiXSwgLy8gZm9yIHJldHJpZXZpbmcgYW5ub3RhdGlvbnMgZnJvbSB0aGUgc2VydmVyXG4gICAgLy9wZXJtaXNzaW9uIDogXCJwcml2YXRlXCIsIC8vIGZvciBzdWJtaXR0aW5nIG9yIHVwZGF0aW5nIGFubm90YXRpb25zIGluIHRoZSBzZXJ2ZXJcbiAgICBhbm5vdGF0aW9uSW5kZXggOiB7fSxcbiAgICByZXNvdXJjZUluZGV4IDoge30sXG4gICAgcmVsYXRpb25JbmRleCA6IHt9LFxuICAgIHRvcFJlc291cmNlcyA6IFtdLFxuICAgIGFubm90YXRpb25MaXN0ZW5lcjogW10sXG5cblxuICAgIGdldFNlcnZlckFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiBBbm5vdGF0aW9uQVBJLmdldFNlcnZlckFkZHJlc3MoKTtcbiAgICB9LFxuXG4gICAgc2V0U2VydmVyQWRkcmVzcyhhcGlVUkwpIHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5zZXRTZXJ2ZXJBZGRyZXNzKGFwaVVSTCk7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLnBvbGxTZXJ2ZXIoKTtcbiAgICB9LFxuXG4gICAgcG9sbFNlcnZlciA6ICgpID0+IHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5jaGVja1NlcnZlckF2YWlsYWJsZSgoc2VydmVyQXZhaWxhYmxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VydmVyQXZhaWxhYmxlICE9PSBBbm5vdGF0aW9uQWN0aW9ucy5zZXJ2ZXJBdmFpbGFibGUpIHtcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5zZXJ2ZXJBdmFpbGFibGUgPSBzZXJ2ZXJBdmFpbGFibGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwic2VydmVyLXN0YXR1cy1jaGFuZ2VcIixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJBdmFpbGFibGU6IHNlcnZlckF2YWlsYWJsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2lmICghc2VydmVyQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmVycm9yKFwiQW5ub3RhdGlvbiBzZXJ2ZXIgbm90IHJlYWNoYWJsZVwiKTtcbiAgICAgICAgICAgIC8vfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0VGltZW91dChBbm5vdGF0aW9uQWN0aW9ucy5wb2xsU2VydmVyLCA2MDAwMCk7XG4gICAgfSxcblxuICAgIGdldEFjY2Vzc1N0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25BY3Rpb25zLmFjY2Vzc1N0YXR1cztcbiAgICB9LFxuXG4gICAgc2V0QWNjZXNzU3RhdHVzKGFjY2Vzc1N0YXR1cykge1xuICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5hY2Nlc3NTdGF0dXMgPSBhY2Nlc3NTdGF0dXM7XG4gICAgICAgIHN0b3JlUGVybWlzc2lvbih7cGVybWlzc2lvbjogQW5ub3RhdGlvbkFjdGlvbnMucGVybWlzc2lvbiwgYWNjZXNzU3RhdHVzOiBhY2Nlc3NTdGF0dXN9KTtcbiAgICAgICAgaWYgKEFubm90YXRpb25BY3Rpb25zLmFjY2Vzc1N0YXR1cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIEFubm90YXRpb25BY3Rpb25zLmRpc3BhdGNoQW5ub3RhdGlvbnMoW10pOyAvLyB3aGVuIG5vIGFjY2VzcyBsZXZlbHMgYXJlIHNlbGVjdGVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5sb2FkQW5ub3RhdGlvbnMoQW5ub3RhdGlvblN0b3JlLnRvcFJlc291cmNlcyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0UGVybWlzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25BY3Rpb25zLnBlcm1pc3Npb247XG4gICAgfSxcblxuICAgIHNldFBlcm1pc3Npb24ocGVybWlzc2lvbikge1xuICAgICAgICBzdG9yZVBlcm1pc3Npb24oe3Blcm1pc3Npb246IHBlcm1pc3Npb24sIGFjY2Vzc1N0YXR1czogQW5ub3RhdGlvbkFjdGlvbnMuYWNjZXNzU3RhdHVzfSk7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLnBlcm1pc3Npb24gPSBwZXJtaXNzaW9uO1xuICAgIH0sXG5cbiAgICBzZXRCYXNlQW5ub3RhdGlvbk9udG9sb2d5KHVybCkge1xuICAgICAgICBGUkJSb29VdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwgPSB1cmw7XG4gICAgICAgIFJERmFVdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwgPSB1cmw7XG4gICAgICAgIFJERmFVdGlsLnNldEJhc2VBbm5vdGF0aW9uT250b2xvZ3kodXJsKTtcbiAgICB9LFxuXG4gICAgYWRkTGlzdGVuZXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFBbm5vdGF0aW9uQWN0aW9ucy5hbm5vdGF0aW9uTGlzdGVuZXIuaW5jbHVkZXMoZWxlbWVudCkpXG4gICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5hbm5vdGF0aW9uTGlzdGVuZXIucHVzaChlbGVtZW50KTtcbiAgICB9LFxuXG4gICAgbG9va3VwSWRlbnRpZmllcihzb3VyY2VJZCkge1xuICAgICAgICB2YXIgc291cmNlID0geyB0eXBlOiBudWxsLCBkYXRhOiBudWxsIH07IC8vIGZvciBJRHMgdG8gZXh0ZXJuYWwgcmVzb3VyY2VzXG4gICAgICAgIGlmIChBbm5vdGF0aW9uU3RvcmUuYW5ub3RhdGlvbkluZGV4Lmhhc093blByb3BlcnR5KHNvdXJjZUlkKSlcbiAgICAgICAgICAgIHNvdXJjZSA9IHsgdHlwZTogXCJhbm5vdGF0aW9uXCIsIGRhdGE6IEFubm90YXRpb25TdG9yZS5hbm5vdGF0aW9uSW5kZXhbc291cmNlSWRdIH07XG4gICAgICAgIGVsc2UgaWYgKEFubm90YXRpb25TdG9yZS5yZXNvdXJjZUluZGV4Lmhhc093blByb3BlcnR5KHNvdXJjZUlkKSlcbiAgICAgICAgICAgIHNvdXJjZSA9IHsgdHlwZTogXCJyZXNvdXJjZVwiLCBkYXRhOiBBbm5vdGF0aW9uU3RvcmUucmVzb3VyY2VJbmRleFtzb3VyY2VJZF0gfTtcbiAgICAgICAgZWxzZSBpZiAoQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleC5oYXNPd25Qcm9wZXJ0eShzb3VyY2VJZCkpXG4gICAgICAgICAgICBzb3VyY2UgPSB7IHR5cGU6IFwiZXh0ZXJuYWxcIiwgZGF0YTogQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleFtzb3VyY2VJZF0gfTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9LFxuXG4gICAgbG9va3VwQW5ub3RhdGlvbnNCeVRhcmdldChyZXNvdXJjZUlkKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKEFubm90YXRpb25TdG9yZS5hbm5vdGF0aW9uSW5kZXgpLmZpbHRlcigoYW5ub3RhdGlvbikgPT4ge1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gYW5ub3RhdGlvbi50YXJnZXQuc29tZSgodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5zb3VyY2UgJiYgdGFyZ2V0LnNvdXJjZSA9PT0gcmVzb3VyY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5pZGVudGlmaWVyICYmIHRhcmdldC5pZGVudGlmaWVyID09PSByZXNvdXJjZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNhdmUgOiBmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkuc2F2ZUFubm90YXRpb24oYW5ub3RhdGlvbiwgQW5ub3RhdGlvbkFjdGlvbnMucGVybWlzc2lvbiwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwic2F2ZS1hbm5vdGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbjogZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBkZWxldGUgOiBmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJkZWxldGUtYW5ub3RhdGlvblwiLFxuICAgICAgICAgICAgICAgIGFubm90YXRpb246IGRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgYWN0aXZhdGUgOiBmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcImFjdGl2YXRlLWFubm90YXRpb25cIixcbiAgICAgICAgICAgIGFubm90YXRpb246IGFubm90YXRpb25cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGVkaXQgOiBmdW5jdGlvbihhbm5vdGF0aW9uKSB7IC8vaXMgdGhlIGFubm90YXRpb24gYWx3YXlzIG9uIHRoZSBzYW1lIHBhZ2U/XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcImVkaXQtYW5ub3RhdGlvblwiLFxuICAgICAgICAgICAgYW5ub3RhdGlvbjogYW5ub3RhdGlvblxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY3JlYXRlQW5ub3RhdGlvbiA6IGZ1bmN0aW9uKGFubm90YXRpb25UYXJnZXRzKSB7IC8vaXMgdGhlIGFubm90YXRpb24gYWx3YXlzIG9uIHRoZSBzYW1lIHBhZ2U/XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcImNyZWF0ZS1hbm5vdGF0aW9uXCIsXG4gICAgICAgICAgICBhbm5vdGF0aW9uVGFyZ2V0czogYW5ub3RhdGlvblRhcmdldHNcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNldCA6IGZ1bmN0aW9uKGFubm90YXRpb24pIHsgLy9pcyB0aGUgYW5ub3RhdGlvbiBhbHdheXMgb24gdGhlIHNhbWUgcGFnZT9cbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBldmVudE5hbWU6IFwic2V0LWFubm90YXRpb25cIixcbiAgICAgICAgICAgIGFubm90YXRpb246IGFubm90YXRpb25cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBsYXkgOiAoYW5ub3RhdGlvbikgPT4geyAvL2lzIHRoZSBhbm5vdGF0aW9uIGFsd2F5cyBvbiB0aGUgc2FtZSBwYWdlPyAobm8pXG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcInBsYXktYW5ub3RhdGlvblwiLFxuICAgICAgICAgICAgYW5ub3RhdGlvbjogYW5ub3RhdGlvblxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY2hhbmdlVGFyZ2V0IDogKGFubm90YXRpb25UYXJnZXQpID0+IHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBldmVudE5hbWU6IFwiY2hhbmdlLXRhcmdldFwiLFxuICAgICAgICAgICAgYW5ub3RhdGlvblRhcmdldDogYW5ub3RhdGlvblRhcmdldFxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgbWFrZUFubm90YXRpb246IChhbm5vdGF0aW9uVGFyZ2V0cywgdXNlcm5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLmdlbmVyYXRlVzNDQW5ub3RhdGlvbihhbm5vdGF0aW9uVGFyZ2V0cywgdXNlcm5hbWUpO1xuICAgIH0sXG5cbiAgICBsb2FkQW5ub3RhdGlvbnM6IChyZXNvdXJjZUlkcykgPT4ge1xuICAgICAgICBBbm5vdGF0aW9uU3RvcmUuYW5ub3RhdGlvbnMgPSBbXTsgLy8gcmVzZXQgdG8gcmVtb3ZlIG9sZCBhbm5vdGF0aW9uc1xuICAgICAgICBpZiAocmVzb3VyY2VJZHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlc291cmNlSWRzID0gQW5ub3RhdGlvblN0b3JlLnRvcFJlc291cmNlcztcbiAgICAgICAgbGV0IGV4dGVybmFsUmVzb3VyY2VzID0gQW5ub3RhdGlvbkFjdGlvbnMuZ2V0RXh0ZXJuYWxSZXNvdXJjZXMocmVzb3VyY2VJZHMpO1xuICAgICAgICBsZXQgZXh0ZXJuYWxJZHMgPSBleHRlcm5hbFJlc291cmNlcy5tYXAoKHJlcykgPT4geyByZXR1cm4gcmVzLnBhcmVudFJlc291cmNlIH0pLmZpbHRlcigoZXh0ZXJuYWxJZCkgPT4geyByZXR1cm4gdHlwZW9mIGV4dGVybmFsSWQgPT09IFwic3RyaW5nXCJ9KTtcblxuICAgICAgICByZXNvdXJjZUlkcyA9IHJlc291cmNlSWRzLmNvbmNhdChleHRlcm5hbElkcyk7XG4gICAgICAgIEFubm90YXRpb25BUEkuZ2V0QW5ub3RhdGlvbnNCeVRhcmdldHMocmVzb3VyY2VJZHMsIEFubm90YXRpb25BY3Rpb25zLmFjY2Vzc1N0YXR1cywgKGVycm9yLCBhbm5vdGF0aW9ucykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5hbm5vdGF0aW9uSW5kZXggPSB7fTtcbiAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5hbm5vdGF0aW9ucyA9IGFubm90YXRpb25zO1xuICAgICAgICAgICAgYW5ub3RhdGlvbnMuZm9yRWFjaCgoYW5ub3RhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5hbm5vdGF0aW9uSW5kZXhbYW5ub3RhdGlvbi5pZF0gPSBhbm5vdGF0aW9uO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5kaXNwYXRjaEFubm90YXRpb25zKGFubm90YXRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNvcHlBbm5vdGF0aW9uOiAoYW5ub3RhdGlvbikgPT4ge1xuICAgICAgICAvLyByZW1vdmUgaWQsIGNyZWF0aW9uIHRpbWVzdGFtcCwgcGVybWlzc2lvbnMgKGFzc3VtZSBwZXJtaXNzaW9uIG9mIGN1cnJlbnQgdXNlciBzZXR0aW5nKVxuICAgICAgICBkZWxldGUgYW5ub3RhdGlvbi5pZDtcbiAgICAgICAgZGVsZXRlIGFubm90YXRpb24uY3JlYXRlZDtcbiAgICAgICAgZGVsZXRlIGFubm90YXRpb24ucHJlbWlzc2lvbnM7XG4gICAgICAgIEFubm90YXRpb25BUEkuc2F2ZUFubm90YXRpb24oYW5ub3RhdGlvbiwgQW5ub3RhdGlvbkFjdGlvbnMucGVybWlzc2lvbiwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwic2F2ZS1hbm5vdGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbjogZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEFubm90YXRpb25zKGFubm90YXRpb25zKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcImxvYWQtYW5ub3RhdGlvbnNcIixcbiAgICAgICAgICAgIGFubm90YXRpb25zOiBhbm5vdGF0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMuZGlzcGF0Y2hMb2FkRXZlbnQoKTtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hMb2FkRXZlbnQoKSB7IC8vIGZvciBleHRlcm5hbCBsaXN0ZW5lcnNcbiAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMuYW5ub3RhdGlvbkxpc3RlbmVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudChcImxvYWQtYW5ub3RhdGlvbnNcIik7XG4gICAgICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVsb2FkOiAoKSA9PiB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZXZlbnROYW1lOiBcInJlbG9hZC1hbm5vdGF0aW9uc1wiXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBpbmRleFJlc291cmNlczogKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgRlJCUm9vVXRpbC5pbmRleFJlc291cmNlcygpLnRoZW4oKHJlc291cmNlRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5yZXNvdXJjZUluZGV4ID0gcmVzb3VyY2VEYXRhLnJlc291cmNlSW5kZXgucmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5yZWxhdGlvbkluZGV4ID0gcmVzb3VyY2VEYXRhLnJlc291cmNlSW5kZXgucmVsYXRpb25zO1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25TdG9yZS5yZXNvdXJjZVN0b3JlID0gcmVzb3VyY2VEYXRhLnJlc291cmNlU3RvcmU7XG4gICAgICAgICAgICAgICAgQW5ub3RhdGlvblN0b3JlLnJlcHJlc2VudGVkUmVzb3VyY2VNYXAgPSByZXNvdXJjZURhdGEucmVwcmVzZW50ZWRSZXNvdXJjZU1hcDtcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uU3RvcmUuZXh0ZXJuYWxSZXNvdXJjZUluZGV4ID0gcmVzb3VyY2VEYXRhLmV4dGVybmFsUmVzb3VyY2VJbmRleDtcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uU3RvcmUucmVzb3VyY2VEYXRhID0gcmVzb3VyY2VEYXRhO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGluZGV4aW5nIHJlc291cmNlc1wiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTsgLy8gLi4uIHJlZnJlc2ggaW5kZXhcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGhhc0V4dGVybmFsUmVzb3VyY2UocmVzb3VyY2VJZCkge1xuICAgICAgICBpZiAoIUFubm90YXRpb25TdG9yZS5leHRlcm5hbFJlc291cmNlSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBBbm5vdGF0aW9uU3RvcmUuZXh0ZXJuYWxSZXNvdXJjZUluZGV4Lmhhc093blByb3BlcnR5KHJlc291cmNlSWQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGhhc1JlcHJlc2VudGVkUmVzb3VyY2UocmVzb3VyY2VJZCkge1xuICAgICAgICBpZiAoIUFubm90YXRpb25TdG9yZS5yZXByZXNlbnRlZFJlc291cmNlTWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gQW5ub3RhdGlvblN0b3JlLnJlcHJlc2VudGVkUmVzb3VyY2VNYXAuaGFzT3duUHJvcGVydHkocmVzb3VyY2VJZCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0UmVwcmVzZW50ZWRSZXNvdXJjZShyZXNvdXJjZUlkKSB7XG4gICAgICAgIGlmICghQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJleHRlcm5hbFJlc291cmNlSW5kZXggZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIUFubm90YXRpb25TdG9yZS5leHRlcm5hbFJlc291cmNlSW5kZXguaGFzT3duUHJvcGVydHkocmVzb3VyY2VJZCkpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicmVzb3VyY2VJZCBkb2VzIG5vdCBoYXZlIHJlcHJlc2VudGVkIHJlc291cmNlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEFubm90YXRpb25TdG9yZS5leHRlcm5hbFJlc291cmNlSW5kZXhbcmVzb3VyY2VJZF07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0RXh0ZXJuYWxSZXNvdXJjZXMocmVzb3VyY2VJZHMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc291cmNlSWRzKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXNvdXJjZUlkczpcIiwgcmVzb3VyY2VJZHMpO1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJyZXNvdXJjZUlkcyBzaG91bGQgYmUgYW4gYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc291cmNlSWRzLmZpbHRlcihBbm5vdGF0aW9uQWN0aW9ucy5oYXNFeHRlcm5hbFJlc291cmNlKS5tYXAoKHJlc291cmNlSWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBBbm5vdGF0aW9uQWN0aW9ucy5nZXRFeHRlcm5hbFJlc291cmNlKHJlc291cmNlSWQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0RXh0ZXJuYWxSZXNvdXJjZShyZXNvdXJjZUlkKSB7XG4gICAgICAgIGlmICghQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleC5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIEFubm90YXRpb25TdG9yZS5leHRlcm5hbFJlc291cmNlSW5kZXhbcmVzb3VyY2VJZF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBsb2FkUmVzb3VyY2VzOiAoKSA9PiB7XG4gICAgICAgIEFubm90YXRpb25TdG9yZS50b3BSZXNvdXJjZXMgPSBSREZhVXRpbC5nZXRUb3BSREZhUmVzb3VyY2VzKCk7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLmluZGV4UmVzb3VyY2VzKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwibG9hZGVkLXJlc291cmNlc1wiLFxuICAgICAgICAgICAgICAgIHRvcFJlc291cmNlczogQW5ub3RhdGlvblN0b3JlLnRvcFJlc291cmNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMubG9hZEFubm90YXRpb25zKEFubm90YXRpb25TdG9yZS50b3BSZXNvdXJjZXMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0Q2FuZGlkYXRlczogKGFubm90YXRpb25zLCBkZWZhdWx0VGFyZ2V0cykgPT4ge1xuICAgICAgICByZXR1cm4gVGFyZ2V0VXRpbC5nZXRDYW5kaWRhdGVzKGFubm90YXRpb25zLCBkZWZhdWx0VGFyZ2V0cywgQW5ub3RhdGlvblN0b3JlLnJlc291cmNlRGF0YSk7XG4gICAgfSxcblxuICAgIHJlZ2lzdGVyVXNlciA6IGZ1bmN0aW9uKHVzZXJEZXRhaWxzKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkucmVnaXN0ZXJVc2VyKHVzZXJEZXRhaWxzLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwicmVnaXN0ZXItZmFpbGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJEZXRhaWxzOiB1c2VyRGV0YWlsc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiBcInJlZ2lzdGVyLXN1Y2NlZWRlZFwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VyRGV0YWlsczogdXNlckRldGFpbHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGxvZ2luVXNlciA6IGZ1bmN0aW9uKHVzZXJEZXRhaWxzKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkubG9naW5Vc2VyKHVzZXJEZXRhaWxzLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwibG9naW4tZmFpbGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJEZXRhaWxzOiBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5sb2FkUmVzb3VyY2VzKCk7XG4gICAgICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJsb2dpbi1zdWNjZWVkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgdXNlckRldGFpbHM6IHVzZXJEZXRhaWxzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBsb2dvdXRVc2VyIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkubG9nb3V0VXNlcigoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vd2luZG93LmFsZXJ0KFwiRXJyb3IgbG9nZ2luZyBvdXQhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiBcImxvZ291dC11c2VyXCIsXG4gICAgICAgICAgICAgICAgdXNlckRldGFpbHM6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXJSZXNvdXJjZXMgOiBmdW5jdGlvbihtYXBzKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhtYXBzKS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgT2JqZWN0LmtleXMobWFwcykuZm9yRWFjaCgocmVzb3VyY2VJZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlcnZlciBrbm93cyBhYm91dCByZXNvdXJjZVxuICAgICAgICAgICAgQW5ub3RhdGlvbkFQSS5jaGVja1Jlc291cmNlKHJlc291cmNlSWQsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGluZGV4ID09PSBPYmplY3Qua2V5cyhtYXBzKS5sZW5ndGggLTEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGlmIHNlcnZlciBkb2Vzbid0IGtub3cgcmVzb3VyY2VcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uQVBJLnJlZ2lzdGVyUmVzb3VyY2UobWFwc1tyZXNvdXJjZUlkXSwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gT2JqZWN0LmtleXMobWFwcykubGVuZ3RoIC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhcnNlVm9jYWJ1bGFyeVN1Z2dlc3Rpb24gOiAoc3VnZ2VzdGlvbiwgdm9jYWJ1bGFyeSkgPT4ge1xuICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjb3BlTm90ZTogbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmICh2b2NhYnVsYXJ5ID09PSBcIkdUQUFcIikge1xuICAgICAgICAgICAgbGV0IGFyciA9IHN1Z2dlc3Rpb24ubGFiZWwuc3BsaXQoJ3wnKTtcbiAgICAgICAgICAgIGVudHJ5LnZhbHVlID0gYXJyWzBdO1xuICAgICAgICAgICAgZW50cnkuc2NvcGVOb3RlID0gYXJyWzJdID8gJygnICsgYXJyWzJdICsgJyknIDogJydcbiAgICAgICAgICAgIHN3aXRjaChhcnJbMV0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdQZXJzb29uJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS13YXJuaW5nXCIsIHZhbHVlOiBcIlBlcnNvb25cIn07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ01ha2VyJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS13YXJuaW5nXCIsIHZhbHVlOiBcIk1ha2VyXCJ9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdHZW9ncmFmaXNjaCcgOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5sYWJlbCA9IHtjbGFzc05hbWU6IFwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiLCB2YWx1ZTogXCJMb2NhdGllXCJ9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdOYWFtJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1pbmZvXCIsIHZhbHVlOiBcIk5hYW1cIn07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ09uZGVyd2VycCcgOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5sYWJlbCA9IHtjbGFzc05hbWU6IFwiYmFkZ2UgYmFkZ2UtcHJpbWFyeVwiLCB2YWx1ZTogXCJPbmRlcndlcnBcIn07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0dlbnJlJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kZWZhdWx0XCIsIHZhbHVlOiBcIkdlbnJlXCJ9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCJkcgT25kZXJ3ZXJwJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kYW5nZXJcIiwgdmFsdWU6IFwiQiZHIE9uZGVyd2VycFwifTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsID0ge2NsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kZWZhdWx0XCIsIHZhbHVlOiBcIkNvbmNlcHRcIn07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHZvY2FidWxhcnkgPT09IFwiREJwZWRpYVwiKSB7XG4gICAgICAgICAgICBsZXQgYXJyID0gc3VnZ2VzdGlvbi5sYWJlbC5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgZW50cnkudmFsdWUgPSBhcnJbMF07XG4gICAgICAgICAgICBlbnRyeS5zY29wZU5vdGUgPSBhcnJbMl0gPyAnKCcgKyBhcnJbMl0gKyAnKScgOiAnJ1xuICAgICAgICAgICAgZW50cnkubGFiZWwgPSB7Y2xhc3NOYW1lOiBcImJhZGdlIGJhZGdlLWRlZmF1bHRcIiwgdmFsdWU6IFwiQ29uY2VwdFwifTtcbiAgICAgICAgfSBlbHNlIGlmICh2b2NhYnVsYXJ5ID09ICdVTkVTQ08nKSB7XG4gICAgICAgICAgICBsZXQgYXJyID0gc3VnZ2VzdGlvbi5wcmVmTGFiZWwuc3BsaXQoJ3wnKTtcbiAgICAgICAgICAgIGVudHJ5LnZhbHVlID0gYXJyWzBdO1xuICAgICAgICAgICAgZW50cnkubGFiZWwudmFsdWUgPSBhcnJbMV07XG4gICAgICAgICAgICBzd2l0Y2goYXJyWzFdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnRWR1Y2F0aW9uJyA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmxhYmVsLmNsYXNzTmFtZSA9IFwiYmFkZ2UgYmFkZ2Utd2FybmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1NjaWVuY2UnIDpcbiAgICAgICAgICAgICAgICAgICAgZW50cnkubGFiZWwuY2xhc3NOYW1lID0gXCJiYWRnZSBiYWRnZS13YXJuaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnU29jaWFsIGFuZCBodW1hbiBzY2llbmNlcycgOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5sYWJlbC5jbGFzc05hbWUgPSBcImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdJbmZvcm1hdGlvbiBhbmQgY29tbXVuaWNhdGlvbicgOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5sYWJlbC5jbGFzc05hbWUgPSBcImJhZGdlIGJhZGdlLWluZm9cIlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdQb2xpdGljcywgbGF3IGFuZCBlY29ub21pY3MnIDpcbiAgICAgICAgICAgICAgICAgICAgZW50cnkubGFiZWwuY2xhc3NOYW1lID0gXCJiYWRnZSBiYWRnZS1wcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQ291bnRyaWVzIGFuZCBjb3VudHJ5IGdyb3VwaW5ncycgOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5sYWJlbC5jbGFzc05hbWUgPSBcImJhZGdlIGJhZGdlLWRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0IDpcbiAgICAgICAgICAgICAgICAgICAgZW50cnkubGFiZWwuY2xhc3NOYW1lID0gXCJiYWRnZSBiYWRnZS13YXJuaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkubGFiZWwudmFsdWUgPSBcIkNvbmNlcHRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgIH0sXG5cbiAgICBtYXBUYXJnZXRzVG9ET01FbGVtZW50czogKGFubm90YXRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIFRhcmdldFV0aWwubWFwVGFyZ2V0c1RvRE9NRWxlbWVudHMoYW5ub3RhdGlvbiwgQW5ub3RhdGlvblN0b3JlLnJlc291cmNlRGF0YSwgQW5ub3RhdGlvblN0b3JlLmFubm90YXRpb25zKTtcbiAgICB9LFxuXG4gICAgY3JlYXRlQnJlYWRjcnVtYlRyYWlsIDogKHJlc291cmNlSWQpID0+IHtcbiAgICAgICAgaWYgKEFubm90YXRpb25TdG9yZS5yZXNvdXJjZUluZGV4Lmhhc093blByb3BlcnR5KHJlc291cmNlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gUkRGYVV0aWwuY3JlYXRlQnJlYWRjcnVtYlRyYWlsKHJlc291cmNlSWQsIEFubm90YXRpb25TdG9yZS5yZXNvdXJjZUluZGV4KTtcbiAgICAgICAgfSBlbHNlIGlmIChBbm5vdGF0aW9uU3RvcmUuZXh0ZXJuYWxSZXNvdXJjZUluZGV4Lmhhc093blByb3BlcnR5KHJlc291cmNlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gRlJCUm9vVXRpbC5jcmVhdGVCcmVhZGNydW1iVHJhaWwocmVzb3VyY2VJZCwgQW5ub3RhdGlvblN0b3JlLmV4dGVybmFsUmVzb3VyY2VJbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlVua25vd24gcmVzb3VyY2UhXCIpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGV4dHJhY3RCb2RpZXMgOiAoYW5ub3RhdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gQW5ub3RhdGlvblV0aWwuZXh0cmFjdEJvZGllcyhhbm5vdGF0aW9uKTtcbiAgICB9LFxuXG4gICAgZXh0cmFjdFRhcmdldHMgOiAoYW5ub3RhdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gQW5ub3RhdGlvblV0aWwuZXh0cmFjdFRhcmdldHMoYW5ub3RhdGlvbik7XG4gICAgfSxcblxuICAgIGV4dHJhY3RUYXJnZXRJZGVudGlmaWVyIDogKHRhcmdldCkgPT4ge1xuICAgICAgICByZXR1cm4gQW5ub3RhdGlvblV0aWwuZXh0cmFjdFRhcmdldElkZW50aWZpZXIodGFyZ2V0KTtcbiAgICB9LFxuXG4gICAgZ2V0VGFyZ2V0VGV4dCA6ICh0YXJnZXQsIHNvdXJjZSkgPT4ge1xuICAgICAgICByZXR1cm4gVGFyZ2V0VXRpbC5nZXRUYXJnZXRUZXh0KHRhcmdldCwgc291cmNlKTtcbiAgICB9LFxuXG4gICAgZ2V0VGFyZ2V0TWVkaWFGcmFnbWVudCA6ICh0YXJnZXQpID0+IHtcbiAgICAgICAgcmV0dXJuIFRhcmdldFV0aWwuZ2V0VGFyZ2V0TWVkaWFGcmFnbWVudCh0YXJnZXQpO1xuICAgIH0sXG5cbiAgICB0b2dnbGVIaWdobGlnaHQgOiAodGFyZ2V0RE9NRWxlbWVudHMsIGhpZ2hsaWdodGVkKSA9PiB7XG4gICAgICAgIHJldHVybiBUYXJnZXRVdGlsLnRvZ2dsZUhpZ2hsaWdodCh0YXJnZXRET01FbGVtZW50cywgaGlnaGxpZ2h0ZWQpO1xuICAgIH0sXG5cbiAgICBmb3JtYXRUaW1lIDogKHRpbWVzdGFtcCkgPT4ge1xuICAgICAgICByZXR1cm4gVGltZVV0aWwuZm9ybWF0VGltZSh0aW1lc3RhbXApO1xuICAgIH1cblxufTtcblxuZXhwb3J0IGRlZmF1bHQgQW5ub3RhdGlvbkFjdGlvbnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFOQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF4QkE7QUEwQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQXRCQTtBQXdCQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWxlQTtBQXNlQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/flux/AnnotationActions.js\n");

/***/ }),

/***/ "./src/flux/AnnotationStore.js":
/*!*************************************!*\
  !*** ./src/flux/AnnotationStore.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! microevent */ \"./node_modules/microevent/microevent.js\");\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(microevent__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n //See: https://github.com/jeromeetienne/microevent.js\n\nvar AnnotationStore =\n/*#__PURE__*/\nfunction () {\n  function AnnotationStore() {\n    _classCallCheck(this, AnnotationStore);\n  }\n\n  _createClass(AnnotationStore, [{\n    key: \"setTargetObserverClass\",\n    value: function setTargetObserverClass() {\n      return this.clientConfiguration.targetObserverClass;\n    }\n  }, {\n    key: \"getTargetObserverClass\",\n    value: function getTargetObserverClass() {\n      return this.clientConfiguration.targetObserverClass;\n    }\n  }, {\n    key: \"loadAnnotations\",\n    value: function loadAnnotations(annotations) {\n      this.trigger(\"loaded-annotations\", annotations);\n    }\n  }, {\n    key: \"changeTarget\",\n    value: function changeTarget() {\n      this.trigger(\"changed-target\");\n    } //TODO change the name of the event 'change' --> save-annotation\n\n  }, {\n    key: \"save\",\n    value: function save(annotation) {\n      //notify all components that just listen to a single target\n      this.trigger(annotation.target.source, \"update\", annotation); //then notify all components that are interested in all annotations\n\n      this.trigger(\"load-annotations\"); // then notify components interested in the saved annotation\n\n      this.trigger(\"saved-annotation\", annotation);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(annotation) {\n      //then notify all components that are interested in all annotations\n      this.trigger(\"load-annotations\"); // then notify all components that are interested in the deleted annotation\n\n      this.trigger(\"deleted-annotation\", annotation);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate(annotation) {\n      this.trigger(\"activate-annotation\", annotation);\n    }\n  }, {\n    key: \"edit\",\n    value: function edit(annotation) {\n      this.trigger(\"edit-annotation\", annotation);\n    }\n  }, {\n    key: \"createAnnotation\",\n    value: function createAnnotation(annotationTargets) {\n      this.trigger(\"create-annotation\", annotationTargets);\n    }\n  }, {\n    key: \"set\",\n    value: function set(annotation) {\n      this.trigger(\"set-annotation\", annotation);\n    }\n  }, {\n    key: \"play\",\n    value: function play(annotation) {\n      this.trigger(\"play-annotation\", annotation);\n    }\n  }, {\n    key: \"reloadAnnotations\",\n    value: function reloadAnnotations() {\n      this.trigger(\"reload-annotations\");\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(topResources) {\n      this.trigger(\"loaded-resources\", topResources);\n    }\n  }, {\n    key: \"loadCollections\",\n    value: function loadCollections(collections) {\n      this.trigger(\"load-collections\", collections);\n    }\n  }, {\n    key: \"login\",\n    value: function login(userDetails, triggerMessage) {\n      this.trigger(triggerMessage, userDetails);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout(userDetails) {\n      this.trigger(\"logout-user\", userDetails);\n    }\n  }, {\n    key: \"changeServerStatus\",\n    value: function changeServerStatus(serverAvailable) {\n      this.trigger(\"server-status-change\", serverAvailable);\n    }\n  }]);\n\n  return AnnotationStore;\n}();\n\nvar AppAnnotationStore = new AnnotationStore(); //add support for emitting events\n\nmicroevent__WEBPACK_IMPORTED_MODULE_0___default.a.mixin(AnnotationStore);\n_AppDispatcher__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register(function (action) {\n  switch (action.eventName) {\n    case \"save-annotation\":\n      AppAnnotationStore.save(action.annotation);\n      break;\n\n    case \"delete-annotation\":\n      AppAnnotationStore.delete(action.annotation);\n      break;\n\n    case \"activate-annotation\":\n      AppAnnotationStore.activate(action.annotation, action.callback);\n      break;\n\n    case \"edit-annotation\":\n      AppAnnotationStore.edit(action.annotation, action.callback);\n      break;\n\n    case \"create-annotation\":\n      AppAnnotationStore.createAnnotation(action.annotationTargets, action.callback);\n      break;\n\n    case \"set-annotation\":\n      AppAnnotationStore.set(action.annotation, action.callback);\n      break;\n\n    case \"play-annotation\":\n      AppAnnotationStore.play(action.annotation, action.callback);\n      break;\n\n    case \"change-target\":\n      AppAnnotationStore.changeTarget(action.annotationTarget);\n      break;\n\n    case \"load-annotations\":\n      AppAnnotationStore.loadAnnotations(action.annotations, action.callback);\n      break;\n\n    case \"reload-annotations\":\n      AppAnnotationStore.reloadAnnotations();\n      break;\n\n    case \"loaded-resources\":\n      AppAnnotationStore.loadResources(action.topResources);\n      break;\n\n    case \"load-collections\":\n      AppAnnotationStore.loadCollections(action.collections, action.callback);\n      break;\n\n    case \"login-succeeded\":\n      AppAnnotationStore.login(action.userDetails, \"login-succeeded\");\n      break;\n\n    case \"login-failed\":\n      AppAnnotationStore.login(action.userDetails, \"login-failed\");\n      break;\n\n    case \"logout-user\":\n      AppAnnotationStore.logout(action.userDetails);\n      break;\n\n    case \"register-succeeded\":\n      AppAnnotationStore.login(action.userDetails, \"register-succeeded\");\n      break;\n\n    case \"register-failed\":\n      AppAnnotationStore.logout(action.userDetails, \"register-failed\");\n      break;\n\n    case \"get-server-address\":\n      AppAnnotationStore.getServerAddress();\n      break;\n\n    case \"set-server-address\":\n      AppAnnotationStore.setServerAddress(action.apiURL);\n      break;\n\n    case \"register-resources\":\n      AppAnnotationStore.registerResources(action.maps);\n      break;\n\n    case \"server-status-change\":\n      AppAnnotationStore.changeServerStatus(action.serverAvailable);\n      break;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppAnnotationStore);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmx1eC9Bbm5vdGF0aW9uU3RvcmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvZmx1eC9Bbm5vdGF0aW9uU3RvcmUuanM/YTc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWljcm9FdmVudCBmcm9tIFwibWljcm9ldmVudFwiO1xuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSBcIi4vQXBwRGlzcGF0Y2hlclwiO1xuXG4vL1NlZTogaHR0cHM6Ly9naXRodWIuY29tL2plcm9tZWV0aWVubmUvbWljcm9ldmVudC5qc1xuXG5cbmNsYXNzIEFubm90YXRpb25TdG9yZSB7XG5cblxuICAgIHNldFRhcmdldE9ic2VydmVyQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudENvbmZpZ3VyYXRpb24udGFyZ2V0T2JzZXJ2ZXJDbGFzcztcbiAgICB9XG5cbiAgICBnZXRUYXJnZXRPYnNlcnZlckNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRDb25maWd1cmF0aW9uLnRhcmdldE9ic2VydmVyQ2xhc3M7XG4gICAgfVxuXG4gICAgbG9hZEFubm90YXRpb25zKGFubm90YXRpb25zKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImxvYWRlZC1hbm5vdGF0aW9uc1wiLCBhbm5vdGF0aW9ucyk7XG4gICAgfVxuXG4gICAgY2hhbmdlVGFyZ2V0KCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkLXRhcmdldFwiKTtcbiAgICB9XG5cbiAgICAvL1RPRE8gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBldmVudCAnY2hhbmdlJyAtLT4gc2F2ZS1hbm5vdGF0aW9uXG4gICAgc2F2ZShhbm5vdGF0aW9uKSB7XG4gICAgICAgIC8vbm90aWZ5IGFsbCBjb21wb25lbnRzIHRoYXQganVzdCBsaXN0ZW4gdG8gYSBzaW5nbGUgdGFyZ2V0XG4gICAgICAgIHRoaXMudHJpZ2dlcihhbm5vdGF0aW9uLnRhcmdldC5zb3VyY2UsIFwidXBkYXRlXCIsIGFubm90YXRpb24pO1xuICAgICAgICAvL3RoZW4gbm90aWZ5IGFsbCBjb21wb25lbnRzIHRoYXQgYXJlIGludGVyZXN0ZWQgaW4gYWxsIGFubm90YXRpb25zXG4gICAgICAgIHRoaXMudHJpZ2dlcihcImxvYWQtYW5ub3RhdGlvbnNcIik7XG4gICAgICAgIC8vIHRoZW4gbm90aWZ5IGNvbXBvbmVudHMgaW50ZXJlc3RlZCBpbiB0aGUgc2F2ZWQgYW5ub3RhdGlvblxuICAgICAgICB0aGlzLnRyaWdnZXIoXCJzYXZlZC1hbm5vdGF0aW9uXCIsIGFubm90YXRpb24pO1xuICAgIH1cblxuICAgIGRlbGV0ZShhbm5vdGF0aW9uKSB7XG4gICAgICAgIC8vdGhlbiBub3RpZnkgYWxsIGNvbXBvbmVudHMgdGhhdCBhcmUgaW50ZXJlc3RlZCBpbiBhbGwgYW5ub3RhdGlvbnNcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwibG9hZC1hbm5vdGF0aW9uc1wiKTtcbiAgICAgICAgLy8gdGhlbiBub3RpZnkgYWxsIGNvbXBvbmVudHMgdGhhdCBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgZGVsZXRlZCBhbm5vdGF0aW9uXG4gICAgICAgIHRoaXMudHJpZ2dlcihcImRlbGV0ZWQtYW5ub3RhdGlvblwiLCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZShhbm5vdGF0aW9uKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImFjdGl2YXRlLWFubm90YXRpb25cIiwgYW5ub3RhdGlvbik7XG4gICAgfVxuXG4gICAgZWRpdChhbm5vdGF0aW9uKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImVkaXQtYW5ub3RhdGlvblwiLCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBjcmVhdGVBbm5vdGF0aW9uKGFubm90YXRpb25UYXJnZXRzKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImNyZWF0ZS1hbm5vdGF0aW9uXCIsIGFubm90YXRpb25UYXJnZXRzKTtcbiAgICB9XG5cbiAgICBzZXQoYW5ub3RhdGlvbikge1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJzZXQtYW5ub3RhdGlvblwiLCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBwbGF5KGFubm90YXRpb24pIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwicGxheS1hbm5vdGF0aW9uXCIsIGFubm90YXRpb24pO1xuICAgIH1cblxuICAgIHJlbG9hZEFubm90YXRpb25zKCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJyZWxvYWQtYW5ub3RhdGlvbnNcIik7XG4gICAgfVxuXG4gICAgbG9hZFJlc291cmNlcyh0b3BSZXNvdXJjZXMpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwibG9hZGVkLXJlc291cmNlc1wiLCB0b3BSZXNvdXJjZXMpO1xuICAgIH1cblxuICAgIGxvYWRDb2xsZWN0aW9ucyhjb2xsZWN0aW9ucykge1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJsb2FkLWNvbGxlY3Rpb25zXCIsIGNvbGxlY3Rpb25zKTtcbiAgICB9XG5cbiAgICBsb2dpbih1c2VyRGV0YWlscywgdHJpZ2dlck1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKHRyaWdnZXJNZXNzYWdlLCB1c2VyRGV0YWlscyk7XG4gICAgfVxuXG4gICAgbG9nb3V0KHVzZXJEZXRhaWxzKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImxvZ291dC11c2VyXCIsIHVzZXJEZXRhaWxzKTtcbiAgICB9XG5cbiAgICBjaGFuZ2VTZXJ2ZXJTdGF0dXMoc2VydmVyQXZhaWxhYmxlKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcInNlcnZlci1zdGF0dXMtY2hhbmdlXCIsIHNlcnZlckF2YWlsYWJsZSk7XG4gICAgfVxuXG59XG5cbnZhciBBcHBBbm5vdGF0aW9uU3RvcmUgPSBuZXcgQW5ub3RhdGlvblN0b3JlKCk7XG5cbi8vYWRkIHN1cHBvcnQgZm9yIGVtaXR0aW5nIGV2ZW50c1xuTWljcm9FdmVudC5taXhpbihBbm5vdGF0aW9uU3RvcmUpO1xuXG5BcHBEaXNwYXRjaGVyLnJlZ2lzdGVyKCBmdW5jdGlvbiggYWN0aW9uICkge1xuXG4gICAgc3dpdGNoKGFjdGlvbi5ldmVudE5hbWUpIHtcblxuICAgIGNhc2UgXCJzYXZlLWFubm90YXRpb25cIjpcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLnNhdmUoYWN0aW9uLmFubm90YXRpb24pO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwiZGVsZXRlLWFubm90YXRpb25cIjpcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmRlbGV0ZShhY3Rpb24uYW5ub3RhdGlvbik7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJhY3RpdmF0ZS1hbm5vdGF0aW9uXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5hY3RpdmF0ZShhY3Rpb24uYW5ub3RhdGlvbiwgYWN0aW9uLmNhbGxiYWNrKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImVkaXQtYW5ub3RhdGlvblwiOlxuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuZWRpdChhY3Rpb24uYW5ub3RhdGlvbiwgYWN0aW9uLmNhbGxiYWNrKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNyZWF0ZS1hbm5vdGF0aW9uXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5jcmVhdGVBbm5vdGF0aW9uKGFjdGlvbi5hbm5vdGF0aW9uVGFyZ2V0cywgYWN0aW9uLmNhbGxiYWNrKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInNldC1hbm5vdGF0aW9uXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5zZXQoYWN0aW9uLmFubm90YXRpb24sIGFjdGlvbi5jYWxsYmFjayk7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJwbGF5LWFubm90YXRpb25cIjpcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLnBsYXkoYWN0aW9uLmFubm90YXRpb24sIGFjdGlvbi5jYWxsYmFjayk7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjaGFuZ2UtdGFyZ2V0XCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5jaGFuZ2VUYXJnZXQoYWN0aW9uLmFubm90YXRpb25UYXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwibG9hZC1hbm5vdGF0aW9uc1wiOlxuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUubG9hZEFubm90YXRpb25zKGFjdGlvbi5hbm5vdGF0aW9ucywgYWN0aW9uLmNhbGxiYWNrKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInJlbG9hZC1hbm5vdGF0aW9uc1wiOlxuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUucmVsb2FkQW5ub3RhdGlvbnMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImxvYWRlZC1yZXNvdXJjZXNcIjpcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmxvYWRSZXNvdXJjZXMoYWN0aW9uLnRvcFJlc291cmNlcyk7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJsb2FkLWNvbGxlY3Rpb25zXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5sb2FkQ29sbGVjdGlvbnMoYWN0aW9uLmNvbGxlY3Rpb25zLCBhY3Rpb24uY2FsbGJhY2spO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwibG9naW4tc3VjY2VlZGVkXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5sb2dpbihhY3Rpb24udXNlckRldGFpbHMsIFwibG9naW4tc3VjY2VlZGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwibG9naW4tZmFpbGVkXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5sb2dpbihhY3Rpb24udXNlckRldGFpbHMsIFwibG9naW4tZmFpbGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwibG9nb3V0LXVzZXJcIjpcbiAgICAgICAgQXBwQW5ub3RhdGlvblN0b3JlLmxvZ291dChhY3Rpb24udXNlckRldGFpbHMpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwicmVnaXN0ZXItc3VjY2VlZGVkXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5sb2dpbihhY3Rpb24udXNlckRldGFpbHMsIFwicmVnaXN0ZXItc3VjY2VlZGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwicmVnaXN0ZXItZmFpbGVkXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5sb2dvdXQoYWN0aW9uLnVzZXJEZXRhaWxzLCBcInJlZ2lzdGVyLWZhaWxlZFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImdldC1zZXJ2ZXItYWRkcmVzc1wiOlxuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuZ2V0U2VydmVyQWRkcmVzcygpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwic2V0LXNlcnZlci1hZGRyZXNzXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5zZXRTZXJ2ZXJBZGRyZXNzKGFjdGlvbi5hcGlVUkwpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwicmVnaXN0ZXItcmVzb3VyY2VzXCI6XG4gICAgICAgIEFwcEFubm90YXRpb25TdG9yZS5yZWdpc3RlclJlc291cmNlcyhhY3Rpb24ubWFwcyk7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzZXJ2ZXItc3RhdHVzLWNoYW5nZVwiOlxuICAgICAgICBBcHBBbm5vdGF0aW9uU3RvcmUuY2hhbmdlU2VydmVyU3RhdHVzKGFjdGlvbi5zZXJ2ZXJBdmFpbGFibGUpO1xuICAgICAgICBicmVhaztcblxuICAgIH1cblxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFwcEFubm90YXRpb25TdG9yZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUlBOzs7Ozs7Ozs7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFoRUE7QUFvRUE7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/flux/AnnotationStore.js\n");

/***/ }),

/***/ "./src/flux/AppDispatcher.js":
/*!***********************************!*\
  !*** ./src/flux/AppDispatcher.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var flux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flux */ \"./node_modules/flux/index.js\");\n/* harmony import */ var flux__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(flux__WEBPACK_IMPORTED_MODULE_0__);\n\nvar AppDispatcher = new flux__WEBPACK_IMPORTED_MODULE_0__[\"Dispatcher\"]();\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppDispatcher);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmx1eC9BcHBEaXNwYXRjaGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL2ZsdXgvQXBwRGlzcGF0Y2hlci5qcz80Yzk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlzcGF0Y2hlcn0gZnJvbSBcImZsdXhcIjtcblxudmFyIEFwcERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuXG5leHBvcnQgZGVmYXVsdCBBcHBEaXNwYXRjaGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/flux/AppDispatcher.js\n");

/***/ }),

/***/ "./src/flux/CollectionActions.js":
/*!***************************************!*\
  !*** ./src/flux/CollectionActions.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\n/* harmony import */ var _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/AnnotationAPI */ \"./src/api/AnnotationAPI.js\");\n\n\nvar CollectionActions = {\n  getServerAddress: function getServerAddress() {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getServerAddress();\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setServerAddress(apiURL);\n  },\n  save: function save(collection) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveCollection(collection, function (error, data) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"saved-collection\",\n        collection: data\n      });\n    });\n  },\n  delete: function _delete(collection) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteCollection(collection, function (error, data) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"deleted-collection\",\n        collection: data\n      });\n    });\n  },\n  update: function update(collection) {\n    //console.log(collection);\n    // TO DO!\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"update-collection\",\n      collection: collection\n    });\n  },\n  editCollection: function editCollection(collection, view) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"edit-collection\",\n      collection: collection,\n      view: view\n    });\n  },\n  setDefault: function setDefault(collection) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"default-collection\",\n      collection: collection\n    });\n  },\n  getCollections: function getCollections() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollections(function (error, collections) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-collections\",\n        collections: collections\n      });\n    });\n  },\n  getCollection: function getCollection(collectionId) {\n    //console.log(collectionId);\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollection(collectionId, function (error, collection) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-collection\",\n        collection: collection\n      });\n    });\n  },\n  getCollectionPage: function getCollectionPage(collectionPageURL) {\n    collectionPageURL = collectionPageURL.replace(\"iris=1\", \"iris=0\");\n    console.log(collectionPageURL);\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollectionPage(collectionPageURL, function (error, page) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-page\",\n        page: page\n      });\n    });\n  },\n  addAnnotation: function addAnnotation(collectionId, annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addAnnotation(collectionId, annotation, function (error, collection) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"updated-collection\",\n        collection: collection\n      });\n    });\n  },\n  removeAnnotation: function removeAnnotation(collectionId, annotationId) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeAnnotation(collectionId, annotationId, function (error, pageId) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"updated-collection\",\n        page: pageId\n      });\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (CollectionActions);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmx1eC9Db2xsZWN0aW9uQWN0aW9ucy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9mbHV4L0NvbGxlY3Rpb25BY3Rpb25zLmpzP2FhNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSBcIi4vQXBwRGlzcGF0Y2hlclwiO1xuaW1wb3J0IEFubm90YXRpb25BUEkgZnJvbSBcIi4uL2FwaS9Bbm5vdGF0aW9uQVBJXCI7XG5cbmNvbnN0IENvbGxlY3Rpb25BY3Rpb25zID0ge1xuXG4gICAgZ2V0U2VydmVyQWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25BUEkuZ2V0U2VydmVyQWRkcmVzcygpO1xuICAgIH0sXG5cbiAgICBzZXRTZXJ2ZXJBZGRyZXNzKGFwaVVSTCkge1xuICAgICAgICByZXR1cm4gQW5ub3RhdGlvbkFQSS5zZXRTZXJ2ZXJBZGRyZXNzKGFwaVVSTCk7XG4gICAgfSxcblxuICAgIHNhdmUoY29sbGVjdGlvbikge1xuICAgICAgICBBbm5vdGF0aW9uQVBJLnNhdmVDb2xsZWN0aW9uKGNvbGxlY3Rpb24sIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwic2F2ZWQtY29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGRlbGV0ZShjb2xsZWN0aW9uKSB7XG4gICAgICAgIEFubm90YXRpb25BUEkuZGVsZXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiBcImRlbGV0ZWQtY29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZShjb2xsZWN0aW9uKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coY29sbGVjdGlvbik7XG4gICAgICAgIC8vIFRPIERPIVxuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGV2ZW50TmFtZTogXCJ1cGRhdGUtY29sbGVjdGlvblwiLFxuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZWRpdENvbGxlY3Rpb24oY29sbGVjdGlvbiwgdmlldykge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGV2ZW50TmFtZTogXCJlZGl0LWNvbGxlY3Rpb25cIixcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG4gICAgICAgICAgICB2aWV3OiB2aWV3XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzZXREZWZhdWx0KGNvbGxlY3Rpb24pIHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBldmVudE5hbWU6IFwiZGVmYXVsdC1jb2xsZWN0aW9uXCIsXG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRDb2xsZWN0aW9ucygpIHtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5nZXRDb2xsZWN0aW9ucygoZXJyb3IsIGNvbGxlY3Rpb25zKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJsb2FkZWQtY29sbGVjdGlvbnNcIixcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uczogY29sbGVjdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldENvbGxlY3Rpb24oY29sbGVjdGlvbklkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coY29sbGVjdGlvbklkKTtcbiAgICAgICAgQW5ub3RhdGlvbkFQSS5nZXRDb2xsZWN0aW9uKGNvbGxlY3Rpb25JZCwgKGVycm9yLCBjb2xsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJsb2FkZWQtY29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldENvbGxlY3Rpb25QYWdlKGNvbGxlY3Rpb25QYWdlVVJMKSB7XG4gICAgICAgIGNvbGxlY3Rpb25QYWdlVVJMID0gY29sbGVjdGlvblBhZ2VVUkwucmVwbGFjZShcImlyaXM9MVwiLCBcImlyaXM9MFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coY29sbGVjdGlvblBhZ2VVUkwpO1xuICAgICAgICBBbm5vdGF0aW9uQVBJLmdldENvbGxlY3Rpb25QYWdlKGNvbGxlY3Rpb25QYWdlVVJMLCAoZXJyb3IsIHBhZ2UpID0+IHtcblxuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwibG9hZGVkLXBhZ2VcIixcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhZGRBbm5vdGF0aW9uKGNvbGxlY3Rpb25JZCwgYW5ub3RhdGlvbikge1xuICAgICAgICBBbm5vdGF0aW9uQVBJLmFkZEFubm90YXRpb24oY29sbGVjdGlvbklkLCBhbm5vdGF0aW9uLCAoZXJyb3IsIGNvbGxlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiBcInVwZGF0ZWQtY29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlQW5ub3RhdGlvbihjb2xsZWN0aW9uSWQsIGFubm90YXRpb25JZCkge1xuICAgICAgICBBbm5vdGF0aW9uQVBJLnJlbW92ZUFubm90YXRpb24oY29sbGVjdGlvbklkLCBhbm5vdGF0aW9uSWQsIChlcnJvciwgcGFnZUlkKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJ1cGRhdGVkLWNvbGxlY3Rpb25cIixcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29sbGVjdGlvbkFjdGlvbnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQXhIQTtBQTRIQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/flux/CollectionActions.js\n");

/***/ }),

/***/ "./src/flux/CollectionStore.js":
/*!*************************************!*\
  !*** ./src/flux/CollectionStore.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! microevent */ \"./node_modules/microevent/microevent.js\");\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(microevent__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n //See: https://github.com/jeromeetienne/microevent.js\n\nvar CollectionStore =\n/*#__PURE__*/\nfunction () {\n  function CollectionStore() {\n    _classCallCheck(this, CollectionStore);\n  }\n\n  _createClass(CollectionStore, [{\n    key: \"editCollection\",\n    value: function editCollection(message, collection, view) {\n      this.trigger(message, collection, view);\n    }\n  }, {\n    key: \"defaultTrigger\",\n    value: function defaultTrigger(message, data) {\n      this.trigger(message, data);\n    }\n  }]);\n\n  return CollectionStore;\n}();\n\nvar AppCollectionStore = new CollectionStore(); //add support for emitting events\n\nmicroevent__WEBPACK_IMPORTED_MODULE_0___default.a.mixin(CollectionStore);\n_AppDispatcher__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register(function (action) {\n  switch (action.eventName) {\n    case \"loaded-collections\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collections);\n      break;\n\n    case \"loaded-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"loaded-page\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.page);\n      break;\n\n    case \"saved-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"deleted-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"updated-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"default-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"edit-collection\":\n      AppCollectionStore.editCollection(action.eventName, action.collection, action.view);\n      break;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppCollectionStore);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmx1eC9Db2xsZWN0aW9uU3RvcmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvZmx1eC9Db2xsZWN0aW9uU3RvcmUuanM/MDJiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWljcm9FdmVudCBmcm9tIFwibWljcm9ldmVudFwiO1xuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSBcIi4vQXBwRGlzcGF0Y2hlclwiO1xuXG4vL1NlZTogaHR0cHM6Ly9naXRodWIuY29tL2plcm9tZWV0aWVubmUvbWljcm9ldmVudC5qc1xuXG5cbmNsYXNzIENvbGxlY3Rpb25TdG9yZSB7XG5cbiAgICBlZGl0Q29sbGVjdGlvbihtZXNzYWdlLCBjb2xsZWN0aW9uLCB2aWV3KSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihtZXNzYWdlLCBjb2xsZWN0aW9uLCB2aWV3KTtcbiAgICB9XG5cbiAgICBkZWZhdWx0VHJpZ2dlcihtZXNzYWdlLCBkYXRhKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcihtZXNzYWdlLCBkYXRhKTtcbiAgICB9XG5cbn1cblxudmFyIEFwcENvbGxlY3Rpb25TdG9yZSA9IG5ldyBDb2xsZWN0aW9uU3RvcmUoKTtcblxuLy9hZGQgc3VwcG9ydCBmb3IgZW1pdHRpbmcgZXZlbnRzXG5NaWNyb0V2ZW50Lm1peGluKENvbGxlY3Rpb25TdG9yZSk7XG5cbkFwcERpc3BhdGNoZXIucmVnaXN0ZXIoIGZ1bmN0aW9uKCBhY3Rpb24gKSB7XG5cbiAgICBzd2l0Y2goYWN0aW9uLmV2ZW50TmFtZSkge1xuXG4gICAgY2FzZSBcImxvYWRlZC1jb2xsZWN0aW9uc1wiOlxuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuZGVmYXVsdFRyaWdnZXIoYWN0aW9uLmV2ZW50TmFtZSwgYWN0aW9uLmNvbGxlY3Rpb25zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImxvYWRlZC1jb2xsZWN0aW9uXCI6XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5kZWZhdWx0VHJpZ2dlcihhY3Rpb24uZXZlbnROYW1lLCBhY3Rpb24uY29sbGVjdGlvbik7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJsb2FkZWQtcGFnZVwiOlxuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuZGVmYXVsdFRyaWdnZXIoYWN0aW9uLmV2ZW50TmFtZSwgYWN0aW9uLnBhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwic2F2ZWQtY29sbGVjdGlvblwiOlxuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuZGVmYXVsdFRyaWdnZXIoYWN0aW9uLmV2ZW50TmFtZSwgYWN0aW9uLmNvbGxlY3Rpb24pO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwiZGVsZXRlZC1jb2xsZWN0aW9uXCI6XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5kZWZhdWx0VHJpZ2dlcihhY3Rpb24uZXZlbnROYW1lLCBhY3Rpb24uY29sbGVjdGlvbik7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJ1cGRhdGVkLWNvbGxlY3Rpb25cIjpcbiAgICAgICAgQXBwQ29sbGVjdGlvblN0b3JlLmRlZmF1bHRUcmlnZ2VyKGFjdGlvbi5ldmVudE5hbWUsIGFjdGlvbi5jb2xsZWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImRlZmF1bHQtY29sbGVjdGlvblwiOlxuICAgICAgICBBcHBDb2xsZWN0aW9uU3RvcmUuZGVmYXVsdFRyaWdnZXIoYWN0aW9uLmV2ZW50TmFtZSwgYWN0aW9uLmNvbGxlY3Rpb24pO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFwiZWRpdC1jb2xsZWN0aW9uXCI6XG4gICAgICAgIEFwcENvbGxlY3Rpb25TdG9yZS5lZGl0Q29sbGVjdGlvbihhY3Rpb24uZXZlbnROYW1lLCBhY3Rpb24uY29sbGVjdGlvbiwgYWN0aW9uLnZpZXcpO1xuICAgICAgICBicmVhaztcblxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBcHBDb2xsZWN0aW9uU3RvcmU7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBSUE7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF6QkE7QUE0QkE7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/flux/CollectionStore.js\n");

/***/ }),

/***/ "./src/rdfa-annotation-config.js":
/*!***************************************!*\
  !*** ./src/rdfa-annotation-config.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar config = {\n  \"baseAnnotationOntologyURL\": \"http://boot.huygens.knaw.nl/vgdemo/editionannotationontology.ttl\",\n  \"targetObserver\": {\n    \"targetObserverClass\": \"annotation-target-observer\",\n    \"observeMutations\": true,\n    \"observerConfig\": {\n      \"childList\": true,\n      \"attributes\": false,\n      \"subtree\": true\n    }\n  },\n  \"services\": {\n    \"AnnotationServer\": {\n      \"api\": \"http://localhost:3000/api\"\n    },\n    \"GTAA\": {\n      \"api\": \"http://openskos.beeldengeluid.nl/api/autocomplete/?q=\",\n      \"params\": {\n        \"lang\": \"nl\"\n      },\n      \"lookupParameter\": \"q\"\n    },\n    \"DBpedia\": {\n      \"api\": \"http://lookup.dbpedia.org/api/search.asmx/PrefixSearch?QueryClass=&MaxHits=10&QueryString=\"\n    },\n    \"UNESCO\": {\n      \"api\": \"http://vocabularies.unesco.org/browser/rest/v1/search?vocab=thesaurus&lang=en&labellang=en&query=\",\n      \"addWildcard\": true\n    },\n    \"Wikipedia\": {\n      \"api\": \"https://en.wikipedia.org/w/api.php?action=opensearch&limit=20&namespace=0&format=json&search=\"\n    }\n  },\n  \"annotationSupport\": {\n    \"currentQuery\": {\n      \"modes\": [\"bookmark\"]\n    },\n    \"singleItem\": {\n      \"modes\": [\"bookmark\"]\n    },\n    \"mediaObject\": {\n      \"modes\": [\"classify\", \"comment\", \"link\"]\n    },\n    \"mediaSegment\": {\n      \"modes\": [\"classify\", \"comment\", \"link\"]\n    },\n    \"annotation\": {\n      \"modes\": [\"comment\"]\n    }\n  },\n  \"annotationTasks\": {\n    \"classify\": {\n      \"vocabularies\": [\"DBpedia\", \"GTAA\"],\n      \"type\": \"classification\",\n      \"purpose\": \"classifying\",\n      \"format\": \"text/plain\"\n    },\n    \"link\": {\n      \"apis\": [{\n        \"name\": \"wikidata\"\n      }, {\n        \"name\": \"europeana\"\n      }],\n      \"type\": \"link\",\n      \"purpose\": \"linking\",\n      \"format\": \"text/plain\"\n    },\n    \"bookmark\": {\n      \"type\": \"bookmark\",\n      \"purpose\": \"bookmarking\"\n    },\n    \"comment\": {\n      \"type\": \"comment\",\n      \"purpose\": \"commenting\",\n      \"format\": \"text/plain\"\n    },\n    \"correct\": {\n      \"type\": \"correction\",\n      \"purpose\": \"correcting\",\n      \"format\": \"text/plain\"\n    },\n    \"transcribe\": {\n      \"type\": \"transcription\",\n      \"purpose\": \"transcribing\",\n      \"format\": \"text/plain\"\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmRmYS1hbm5vdGF0aW9uLWNvbmZpZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy9yZGZhLWFubm90YXRpb24tY29uZmlnLmpzPzk2YzYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29uZmlnID0ge1xuICAgIFwiYmFzZUFubm90YXRpb25PbnRvbG9neVVSTFwiOiBcImh0dHA6Ly9ib290Lmh1eWdlbnMua25hdy5ubC92Z2RlbW8vZWRpdGlvbmFubm90YXRpb25vbnRvbG9neS50dGxcIixcbiAgICBcInRhcmdldE9ic2VydmVyXCI6IHtcbiAgICAgICAgXCJ0YXJnZXRPYnNlcnZlckNsYXNzXCI6IFwiYW5ub3RhdGlvbi10YXJnZXQtb2JzZXJ2ZXJcIixcbiAgICAgICAgXCJvYnNlcnZlTXV0YXRpb25zXCI6IHRydWUsXG4gICAgICAgIFwib2JzZXJ2ZXJDb25maWdcIjoge1xuICAgICAgICAgICAgXCJjaGlsZExpc3RcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiYXR0cmlidXRlc1wiOiBmYWxzZSxcbiAgICAgICAgICAgIFwic3VidHJlZVwiOiB0cnVlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwic2VydmljZXNcIiA6IHtcbiAgICAgICAgXCJBbm5vdGF0aW9uU2VydmVyXCI6IHtcbiAgICAgICAgICAgIFwiYXBpXCI6IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiR1RBQVwiOiB7XG4gICAgICAgICAgICBcImFwaVwiOiBcImh0dHA6Ly9vcGVuc2tvcy5iZWVsZGVuZ2VsdWlkLm5sL2FwaS9hdXRvY29tcGxldGUvP3E9XCIsXG4gICAgICAgICAgICBcInBhcmFtc1wiOiB7XG4gICAgICAgICAgICAgICAgXCJsYW5nXCI6IFwibmxcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibG9va3VwUGFyYW1ldGVyXCI6IFwicVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiREJwZWRpYVwiOiB7XG4gICAgICAgICAgICBcImFwaVwiOiBcImh0dHA6Ly9sb29rdXAuZGJwZWRpYS5vcmcvYXBpL3NlYXJjaC5hc214L1ByZWZpeFNlYXJjaD9RdWVyeUNsYXNzPSZNYXhIaXRzPTEwJlF1ZXJ5U3RyaW5nPVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiVU5FU0NPXCI6IHtcbiAgICAgICAgICAgIFwiYXBpXCI6IFwiaHR0cDovL3ZvY2FidWxhcmllcy51bmVzY28ub3JnL2Jyb3dzZXIvcmVzdC92MS9zZWFyY2g/dm9jYWI9dGhlc2F1cnVzJmxhbmc9ZW4mbGFiZWxsYW5nPWVuJnF1ZXJ5PVwiLFxuICAgICAgICAgICAgXCJhZGRXaWxkY2FyZFwiOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIFwiV2lraXBlZGlhXCI6IHtcbiAgICAgICAgICAgIFwiYXBpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3cvYXBpLnBocD9hY3Rpb249b3BlbnNlYXJjaCZsaW1pdD0yMCZuYW1lc3BhY2U9MCZmb3JtYXQ9anNvbiZzZWFyY2g9XCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCJhbm5vdGF0aW9uU3VwcG9ydFwiIDoge1xuICAgICAgICBcImN1cnJlbnRRdWVyeVwiIDoge1xuICAgICAgICAgICAgXCJtb2Rlc1wiIDogW1wiYm9va21hcmtcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzaW5nbGVJdGVtXCIgOiB7XG4gICAgICAgICAgICBcIm1vZGVzXCIgOiBbXCJib29rbWFya1wiXVxuICAgICAgICB9LFxuICAgICAgICBcIm1lZGlhT2JqZWN0XCIgOiB7XG4gICAgICAgICAgICBcIm1vZGVzXCIgOiBbXCJjbGFzc2lmeVwiLCBcImNvbW1lbnRcIiwgXCJsaW5rXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwibWVkaWFTZWdtZW50XCIgOiB7XG4gICAgICAgICAgICBcIm1vZGVzXCIgOiBbXCJjbGFzc2lmeVwiLCBcImNvbW1lbnRcIiwgXCJsaW5rXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiYW5ub3RhdGlvblwiIDoge1xuICAgICAgICAgICAgXCJtb2Rlc1wiIDogW1wiY29tbWVudFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcImFubm90YXRpb25UYXNrc1wiIDoge1xuICAgICAgICBcImNsYXNzaWZ5XCIgOiB7XG4gICAgICAgICAgICBcInZvY2FidWxhcmllc1wiIDogW1xuICAgICAgICAgICAgICAgIFwiREJwZWRpYVwiLFxuICAgICAgICAgICAgICAgIFwiR1RBQVwiXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY2xhc3NpZmljYXRpb25cIixcbiAgICAgICAgICAgIFwicHVycG9zZVwiOiBcImNsYXNzaWZ5aW5nXCIsXG4gICAgICAgICAgICBcImZvcm1hdFwiOiBcInRleHQvcGxhaW5cIlxuICAgICAgICB9LFxuICAgICAgICBcImxpbmtcIiA6IHtcbiAgICAgICAgICAgIFwiYXBpc1wiIDogW1xuICAgICAgICAgICAgICAgIHtcIm5hbWVcIiA6IFwid2lraWRhdGFcIn0sXG4gICAgICAgICAgICAgICAge1wibmFtZVwiIDogXCJldXJvcGVhbmFcIn1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcInR5cGVcIjogXCJsaW5rXCIsXG4gICAgICAgICAgICBcInB1cnBvc2VcIjogXCJsaW5raW5nXCIsXG4gICAgICAgICAgICBcImZvcm1hdFwiOiBcInRleHQvcGxhaW5cIlxuICAgICAgICB9LFxuICAgICAgICBcImJvb2ttYXJrXCIgOiB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJib29rbWFya1wiLFxuICAgICAgICAgICAgXCJwdXJwb3NlXCI6IFwiYm9va21hcmtpbmdcIlxuICAgICAgICB9LFxuICAgICAgICBcImNvbW1lbnRcIiA6IHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImNvbW1lbnRcIixcbiAgICAgICAgICAgIFwicHVycG9zZVwiOiBcImNvbW1lbnRpbmdcIixcbiAgICAgICAgICAgIFwiZm9ybWF0XCI6IFwidGV4dC9wbGFpblwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiY29ycmVjdFwiIDoge1xuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY29ycmVjdGlvblwiLFxuICAgICAgICAgICAgXCJwdXJwb3NlXCI6IFwiY29ycmVjdGluZ1wiLFxuICAgICAgICAgICAgXCJmb3JtYXRcIjogXCJ0ZXh0L3BsYWluXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0cmFuc2NyaWJlXCIgOiB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0cmFuc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICBcInB1cnBvc2VcIjogXCJ0cmFuc2NyaWJpbmdcIixcbiAgICAgICAgICAgIFwiZm9ybWF0XCI6IFwidGV4dC9wbGFpblwiXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQVNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFPQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQWxCQTtBQXNCQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQWJBO0FBaUJBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWpDQTtBQWxEQTtBQTJGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/rdfa-annotation-config.js\n");

/***/ }),

/***/ "./src/swac.jsx":
/*!**********************!*\
  !*** ./src/swac.jsx ***!
  \**********************/
/*! exports provided: ScholarlyWebAnnotator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ScholarlyWebAnnotator\", function() { return ScholarlyWebAnnotator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_AnnotationClient_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/AnnotationClient.jsx */ \"./src/components/AnnotationClient.jsx\");\n/* harmony import */ var _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/TargetUtil.js */ \"./src/util/TargetUtil.js\");\n/* harmony import */ var _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\n/* harmony import */ var _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util/DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _rdfa_annotation_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./rdfa-annotation-config.js */ \"./src/rdfa-annotation-config.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _api_AnnotationAPI_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./api/AnnotationAPI.js */ \"./src/api/AnnotationAPI.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! bootstrap */ \"./node_modules/bootstrap/dist/js/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_12__);\n/*\n *\n * Creators:\n *   - Marijn Koolen (Humanities Cluster, Royal Netherlands Academy of Arts and Sciences)\n *   - Jaap Blom (Netherlands Institute for Sound and Vision)\n *\n */\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ScholarlyWebAnnotator =\n/*#__PURE__*/\nfunction () {\n  function ScholarlyWebAnnotator(configuration) {\n    _classCallCheck(this, ScholarlyWebAnnotator);\n\n    this.clientConfig = _rdfa_annotation_config_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"];\n    this.configureClient(configuration);\n  }\n\n  _createClass(ScholarlyWebAnnotator, [{\n    key: \"addAnnotationClient\",\n    value: function addAnnotationClient(element) {\n      react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_AnnotationClient_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        config: this.clientConfig\n      }), element);\n    }\n  }, {\n    key: \"overrideDefaultConfiguration\",\n    value: function overrideDefaultConfiguration(configuration) {\n      var _this = this;\n\n      Object.keys(configuration).forEach(function (property) {\n        _this.clientConfig[property] = configuration[property];\n      });\n    }\n  }, {\n    key: \"configureClient\",\n    value: function configureClient(configuration) {\n      if (configuration) this.overrideDefaultConfiguration(configuration);\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].setServerAddress(this.clientConfig.services.AnnotationServer.api);\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].setBaseAnnotationOntology(this.clientConfig.baseAnnotationOntologyURL);\n      this.configureObservers();\n      this.topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources();\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].pollServer();\n\n      if (localStorage.userDetails) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loginUser(JSON.parse(localStorage.userDetails));\n      } else {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loadResources();\n      }\n    }\n  }, {\n    key: \"configureObservers\",\n    value: function configureObservers() {\n      _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setObserverNodeClass(this.clientConfig.targetObserver.targetObserverClass);\n      this.observerNodes = _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getObserverNodes();\n      _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setObserverNodes(this.observerNodes);\n      this.setSelectionListener();\n      this.setAnnotationAttributes();\n\n      if (this.clientConfig.targetObserver.observeMutations) {\n        this.startObserver();\n      }\n    }\n  }, {\n    key: \"setAnnotationAttributes\",\n    value: function setAnnotationAttributes() {\n      for (var index = 0; index < this.observerNodes.length; index++) {\n        this.setSelectWholeElement(this.observerNodes[index]);\n        this.setUnselectable(this.observerNodes[index]);\n      }\n    }\n  }, {\n    key: \"setSelectWholeElement\",\n    value: function setSelectWholeElement(node) {\n      var selectWholeNodes = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getSelectWholeNodes(node);\n      selectWholeNodes.forEach(function (selectWholeNode) {\n        selectWholeNode.addEventListener('mouseup', _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].checkSelectionRange, false);\n      });\n    }\n  }, {\n    key: \"setUnselectable\",\n    value: function setUnselectable(node) {\n      _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].resetIgnoreNodes();\n      var ignoreNodes = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRDFaIgnoreNodes(node);\n      ignoreNodes.forEach(function (ignoreNode) {\n        ignoreNode.style.webkitUserSelect = \"none\";\n        ignoreNode.style.cursor = \"not-allowed\";\n      });\n    }\n  }, {\n    key: \"startObserver\",\n    value: function startObserver() {\n      var _this2 = this;\n\n      var observer = new MutationObserver(function (mutations) {\n        // if something in the observer nodes changes,\n        // set unselectable and whole element attributes\n        _this2.setAnnotationAttributes(_this2.observerNodes); // check if there are new resources\n\n\n        if (_this2.resourcesChanged()) _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loadResources(); // trigger reload of annotations\n      });\n\n      if (!this.clientConfig.targetObserver.observerConfig) {\n        // if observer config is missing, set default observer config\n        this.clientConfig.targetObserver.observerConfig = {\n          childList: true,\n          attributes: false,\n          subtree: true\n        };\n      }\n\n      for (var index = 0; index < this.observerNodes.length; index++) {\n        observer.observe(this.observerNodes[index], this.clientConfig.targetObserver.observerConfig);\n      }\n    }\n  }, {\n    key: \"setSelectionListener\",\n    value: function setSelectionListener() {\n      document.addEventListener(\"selectionchange\", function () {\n        _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setDOMSelection();\n      });\n    }\n  }, {\n    key: \"setAnnotationListener\",\n    value: function setAnnotationListener(element) {\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].addListenerElement(element);\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(element, selection, mimeType) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setSelection(element, selection, mimeType);\n    }\n  }, {\n    key: \"annotateSelection\",\n    value: function annotateSelection(data) {\n      try {\n        _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setSelection(data.element, data.selection, data.mimeType);\n        var candidateTargets = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCandidateRDFaTargets();\n\n        if (candidateTargets.highlighted) {\n          _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].createAnnotation([candidateTargets.highlighted]);\n        } else {\n          _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].createAnnotation(candidateTargets.wholeNodes);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, {\n    key: \"setImageSelection\",\n    value: function setImageSelection(element, coords) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setImageSelection(element, coords);\n    }\n  }, {\n    key: \"setAudioselection\",\n    value: function setAudioselection(element, interval) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setAudioSelection(element, interval);\n    }\n  }, {\n    key: \"setVideoselection\",\n    value: function setVideoselection(element, interval) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setVideoSelection(element, interval);\n    }\n  }, {\n    key: \"getAnnotations\",\n    value: function getAnnotations(resourceId) {\n      return _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].lookupAnnotationsByTarget(resourceId);\n    }\n  }, {\n    key: \"resourcesChanged\",\n    value: function resourcesChanged() {\n      var topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources();\n      if (this.listsAreEqual(topResources, this.topResources)) return false;\n      this.topResources = topResources; // update register resources list\n\n      return true;\n    }\n  }, {\n    key: \"listsAreEqual\",\n    value: function listsAreEqual(list1, list2) {\n      if (list1.every(function (id) {\n        return list2.includes(id);\n      }) && list2.every(function (id) {\n        return list1.includes(id);\n      })) return true;\n      return false;\n    }\n  }]);\n\n  return ScholarlyWebAnnotator;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3dhYy5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TY2hvbGFybHlXZWJBbm5vdGF0b3IvLi9zcmMvc3dhYy5qc3g/MjYyMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICpcbiAqIENyZWF0b3JzOlxuICogICAtIE1hcmlqbiBLb29sZW4gKEh1bWFuaXRpZXMgQ2x1c3RlciwgUm95YWwgTmV0aGVybGFuZHMgQWNhZGVteSBvZiBBcnRzIGFuZCBTY2llbmNlcylcbiAqICAgLSBKYWFwIEJsb20gKE5ldGhlcmxhbmRzIEluc3RpdHV0ZSBmb3IgU291bmQgYW5kIFZpc2lvbilcbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBBbm5vdGF0aW9uQ2xpZW50IGZyb20gJy4vY29tcG9uZW50cy9Bbm5vdGF0aW9uQ2xpZW50LmpzeCc7XG5pbXBvcnQgUkRGYVV0aWwgZnJvbSAnLi91dGlsL1JERmFVdGlsLmpzJztcbmltcG9ydCBUYXJnZXRVdGlsIGZyb20gJy4vdXRpbC9UYXJnZXRVdGlsLmpzJztcbmltcG9ydCBTZWxlY3Rpb25VdGlsIGZyb20gJy4vdXRpbC9TZWxlY3Rpb25VdGlsLmpzJztcbmltcG9ydCBET01VdGlsIGZyb20gJy4vdXRpbC9ET01VdGlsLmpzJztcbmltcG9ydCBkZWZhdWx0Q29uZmlnIGZyb20gJy4vcmRmYS1hbm5vdGF0aW9uLWNvbmZpZy5qcyc7XG5pbXBvcnQgQW5ub3RhdGlvbkFjdGlvbnMgZnJvbSAnLi9mbHV4L0Fubm90YXRpb25BY3Rpb25zLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uQWN0aW9ucyBmcm9tICcuL2ZsdXgvQ29sbGVjdGlvbkFjdGlvbnMuanMnO1xuaW1wb3J0IEFwcEFubm90YXRpb25TdG9yZSBmcm9tICcuL2ZsdXgvQW5ub3RhdGlvblN0b3JlLmpzJztcbmltcG9ydCBBbm5vdGF0aW9uQVBJIGZyb20gJy4vYXBpL0Fubm90YXRpb25BUEkuanMnO1xuaW1wb3J0ICdib290c3RyYXAnO1xuXG5leHBvcnQgY2xhc3MgU2Nob2xhcmx5V2ViQW5ub3RhdG9yIHtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSBkZWZhdWx0Q29uZmlnO1xuICAgICAgICB0aGlzLmNvbmZpZ3VyZUNsaWVudChjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICBhZGRBbm5vdGF0aW9uQ2xpZW50KGVsZW1lbnQpIHtcbiAgICAgICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICAgICAgPEFubm90YXRpb25DbGllbnRcbiAgICAgICAgICAgICAgICBjb25maWc9e3RoaXMuY2xpZW50Q29uZmlnfVxuICAgICAgICAgICAgLz4sXG4gICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgb3ZlcnJpZGVEZWZhdWx0Q29uZmlndXJhdGlvbihjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZ3VyYXRpb24pLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudENvbmZpZ1twcm9wZXJ0eV0gPSBjb25maWd1cmF0aW9uW3Byb3BlcnR5XTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uZmlndXJlQ2xpZW50KGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pXG4gICAgICAgICAgICB0aGlzLm92ZXJyaWRlRGVmYXVsdENvbmZpZ3VyYXRpb24oY29uZmlndXJhdGlvbik7XG5cbiAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMuc2V0U2VydmVyQWRkcmVzcyh0aGlzLmNsaWVudENvbmZpZy5zZXJ2aWNlcy5Bbm5vdGF0aW9uU2VydmVyLmFwaSk7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLnNldEJhc2VBbm5vdGF0aW9uT250b2xvZ3kodGhpcy5jbGllbnRDb25maWcuYmFzZUFubm90YXRpb25PbnRvbG9neVVSTCk7XG4gICAgICAgIHRoaXMuY29uZmlndXJlT2JzZXJ2ZXJzKCk7XG4gICAgICAgIHRoaXMudG9wUmVzb3VyY2VzID0gUkRGYVV0aWwuZ2V0VG9wUkRGYVJlc291cmNlcygpO1xuICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5wb2xsU2VydmVyKCk7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudXNlckRldGFpbHMpIHtcbiAgICAgICAgICAgIEFubm90YXRpb25BY3Rpb25zLmxvZ2luVXNlcihKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS51c2VyRGV0YWlscykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMubG9hZFJlc291cmNlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uZmlndXJlT2JzZXJ2ZXJzKCkge1xuICAgICAgICBET01VdGlsLnNldE9ic2VydmVyTm9kZUNsYXNzKHRoaXMuY2xpZW50Q29uZmlnLnRhcmdldE9ic2VydmVyLnRhcmdldE9ic2VydmVyQ2xhc3MpO1xuICAgICAgICB0aGlzLm9ic2VydmVyTm9kZXMgPSBET01VdGlsLmdldE9ic2VydmVyTm9kZXMoKTtcbiAgICAgICAgUkRGYVV0aWwuc2V0T2JzZXJ2ZXJOb2Rlcyh0aGlzLm9ic2VydmVyTm9kZXMpO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbkxpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMuc2V0QW5ub3RhdGlvbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50Q29uZmlnLnRhcmdldE9ic2VydmVyLm9ic2VydmVNdXRhdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRPYnNlcnZlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0QW5ub3RhdGlvbkF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLm9ic2VydmVyTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdFdob2xlRWxlbWVudCh0aGlzLm9ic2VydmVyTm9kZXNbaW5kZXhdKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VW5zZWxlY3RhYmxlKHRoaXMub2JzZXJ2ZXJOb2Rlc1tpbmRleF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0U2VsZWN0V2hvbGVFbGVtZW50KG5vZGUpIHtcbiAgICAgICAgbGV0IHNlbGVjdFdob2xlTm9kZXMgPSBSREZhVXRpbC5nZXRTZWxlY3RXaG9sZU5vZGVzKG5vZGUpO1xuICAgICAgICBzZWxlY3RXaG9sZU5vZGVzLmZvckVhY2goZnVuY3Rpb24oc2VsZWN0V2hvbGVOb2RlKSB7XG4gICAgICAgICAgICBzZWxlY3RXaG9sZU5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIFNlbGVjdGlvblV0aWwuY2hlY2tTZWxlY3Rpb25SYW5nZSwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRVbnNlbGVjdGFibGUobm9kZSkge1xuICAgICAgICBSREZhVXRpbC5yZXNldElnbm9yZU5vZGVzKCk7XG4gICAgICAgIGxldCBpZ25vcmVOb2RlcyA9IFJERmFVdGlsLmdldFJERmFJZ25vcmVOb2Rlcyhub2RlKTtcbiAgICAgICAgaWdub3JlTm9kZXMuZm9yRWFjaChmdW5jdGlvbihpZ25vcmVOb2RlKSB7XG4gICAgICAgICAgICBpZ25vcmVOb2RlLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGlnbm9yZU5vZGUuc3R5bGUuY3Vyc29yID0gXCJub3QtYWxsb3dlZFwiO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFydE9ic2VydmVyKCkge1xuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICAvLyBpZiBzb21ldGhpbmcgaW4gdGhlIG9ic2VydmVyIG5vZGVzIGNoYW5nZXMsXG4gICAgICAgICAgICAvLyBzZXQgdW5zZWxlY3RhYmxlIGFuZCB3aG9sZSBlbGVtZW50IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIHRoaXMuc2V0QW5ub3RhdGlvbkF0dHJpYnV0ZXModGhpcy5vYnNlcnZlck5vZGVzKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBuZXcgcmVzb3VyY2VzXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvdXJjZXNDaGFuZ2VkKCkpXG4gICAgICAgICAgICAgICAgQW5ub3RhdGlvbkFjdGlvbnMubG9hZFJlc291cmNlcygpOyAvLyB0cmlnZ2VyIHJlbG9hZCBvZiBhbm5vdGF0aW9uc1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXRoaXMuY2xpZW50Q29uZmlnLnRhcmdldE9ic2VydmVyLm9ic2VydmVyQ29uZmlnKSB7XG4gICAgICAgICAgICAvLyBpZiBvYnNlcnZlciBjb25maWcgaXMgbWlzc2luZywgc2V0IGRlZmF1bHQgb2JzZXJ2ZXIgY29uZmlnXG4gICAgICAgICAgICB0aGlzLmNsaWVudENvbmZpZy50YXJnZXRPYnNlcnZlci5vYnNlcnZlckNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiBmYWxzZSwgc3VidHJlZTogdHJ1ZSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub2JzZXJ2ZXJOb2Rlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5vYnNlcnZlck5vZGVzW2luZGV4XSwgdGhpcy5jbGllbnRDb25maWcudGFyZ2V0T2JzZXJ2ZXIub2JzZXJ2ZXJDb25maWcpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBzZXRTZWxlY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuc2V0RE9NU2VsZWN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEFubm90YXRpb25MaXN0ZW5lcihlbGVtZW50KSB7XG4gICAgICAgIEFubm90YXRpb25BY3Rpb25zLmFkZExpc3RlbmVyRWxlbWVudChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBzZXRTZWxlY3Rpb24oZWxlbWVudCwgc2VsZWN0aW9uLCBtaW1lVHlwZSkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFNlbGVjdGlvbihlbGVtZW50LCBzZWxlY3Rpb24sIG1pbWVUeXBlKTtcbiAgICB9XG5cbiAgICBhbm5vdGF0ZVNlbGVjdGlvbihkYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFNlbGVjdGlvbihkYXRhLmVsZW1lbnQsIGRhdGEuc2VsZWN0aW9uLCBkYXRhLm1pbWVUeXBlKTtcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGVUYXJnZXRzID0gVGFyZ2V0VXRpbC5nZXRDYW5kaWRhdGVSREZhVGFyZ2V0cygpO1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZVRhcmdldHMuaGlnaGxpZ2h0ZWQpIHtcbiAgICAgICAgICAgICAgICBBbm5vdGF0aW9uQWN0aW9ucy5jcmVhdGVBbm5vdGF0aW9uKFtjYW5kaWRhdGVUYXJnZXRzLmhpZ2hsaWdodGVkXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25BY3Rpb25zLmNyZWF0ZUFubm90YXRpb24oY2FuZGlkYXRlVGFyZ2V0cy53aG9sZU5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SW1hZ2VTZWxlY3Rpb24oZWxlbWVudCwgY29vcmRzKSB7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuc2V0SW1hZ2VTZWxlY3Rpb24oZWxlbWVudCwgY29vcmRzKTtcbiAgICB9XG5cbiAgICBzZXRBdWRpb3NlbGVjdGlvbihlbGVtZW50LCBpbnRlcnZhbCkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldEF1ZGlvU2VsZWN0aW9uKGVsZW1lbnQsIGludGVydmFsKTtcbiAgICB9XG5cbiAgICBzZXRWaWRlb3NlbGVjdGlvbihlbGVtZW50LCBpbnRlcnZhbCkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFZpZGVvU2VsZWN0aW9uKGVsZW1lbnQsIGludGVydmFsKTtcbiAgICB9XG5cbiAgICBnZXRBbm5vdGF0aW9ucyhyZXNvdXJjZUlkKSB7XG4gICAgICAgIHJldHVybiBBbm5vdGF0aW9uQWN0aW9ucy5sb29rdXBBbm5vdGF0aW9uc0J5VGFyZ2V0KHJlc291cmNlSWQpO1xuICAgIH1cblxuICAgIHJlc291cmNlc0NoYW5nZWQoKSB7XG4gICAgICAgIGxldCB0b3BSZXNvdXJjZXMgPSBSREZhVXRpbC5nZXRUb3BSREZhUmVzb3VyY2VzKCk7XG4gICAgICAgIGlmICh0aGlzLmxpc3RzQXJlRXF1YWwodG9wUmVzb3VyY2VzLCB0aGlzLnRvcFJlc291cmNlcykpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMudG9wUmVzb3VyY2VzID0gdG9wUmVzb3VyY2VzOyAvLyB1cGRhdGUgcmVnaXN0ZXIgcmVzb3VyY2VzIGxpc3RcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGlzdHNBcmVFcXVhbChsaXN0MSwgbGlzdDIpIHtcbiAgICAgICAgaWYgKGxpc3QxLmV2ZXJ5KGlkID0+IGxpc3QyLmluY2x1ZGVzKGlkKSkgJiZcbiAgICAgICAgICAgICAgICBsaXN0Mi5ldmVyeShpZCA9PiBsaXN0MS5pbmNsdWRlcyhpZCkpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbn1cblxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7O0FBUUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFRQTtBQUVBO0FBREE7QUFLQTtBQWRBO0FBQUE7QUFBQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFBQTtBQUFBO0FBdUJBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcENBO0FBQUE7QUFBQTtBQXVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQUFBO0FBQUE7QUFrREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXREQTtBQUFBO0FBQUE7QUF5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdEQTtBQUFBO0FBQUE7QUFnRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0RUE7QUFBQTtBQUFBO0FBd0VBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQTNGQTtBQUFBO0FBQUE7QUE4RkE7QUFDQTtBQUNBO0FBQ0E7QUFqR0E7QUFBQTtBQUFBO0FBb0dBO0FBQ0E7QUFyR0E7QUFBQTtBQUFBO0FBd0dBO0FBQ0E7QUF6R0E7QUFBQTtBQUFBO0FBNEdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBeEhBO0FBQUE7QUFBQTtBQTJIQTtBQUNBO0FBNUhBO0FBQUE7QUFBQTtBQStIQTtBQUNBO0FBaElBO0FBQUE7QUFBQTtBQW1JQTtBQUNBO0FBcElBO0FBQUE7QUFBQTtBQXVJQTtBQUNBO0FBeElBO0FBQUE7QUFBQTtBQTJJQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFoSkE7QUFBQTtBQUFBO0FBbUpBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBdkpBO0FBQ0E7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/swac.jsx\n");

/***/ }),

/***/ "./src/util/AnnotationUtil.js":
/*!************************************!*\
  !*** ./src/util/AnnotationUtil.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n//aims to implement https://www.w3.org/TR/annotation-model\n\nvar AnnotationUtil = {\n  /*************************************************************************************\n   ************************************* W3C BUSINESS LOGIC HERE ********************\n  *************************************************************************************/\n  //called from components that want to create a new annotation with a proper target\n  generateW3CAnnotation: function generateW3CAnnotation(annotationTargets, creator) {\n    if (!AnnotationUtil.hasTargets(annotationTargets)) throw new Error(\"Annotation requires a non-empty array of annotation targets.\");\n    if (creator === undefined) throw new Error(\"Annotation requires a creator object.\");\n    var targetList = annotationTargets.map(function (annotationTarget) {\n      return AnnotationUtil.makeAnnotationTarget(annotationTarget);\n    });\n    return {\n      \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n      type: \"Annotation\",\n      motivation: null,\n      creator: creator,\n      //TODO map to W3C\n      target: targetList\n    };\n  },\n  hasTargets: function hasTargets(targets) {\n    if (targets === undefined) return false;\n    if (!Array.isArray(targets)) return false;\n    if (targets.length === 0) return false;\n    return true;\n  },\n  makeAnnotationTarget: function makeAnnotationTarget(target) {\n    if (target.source === undefined) throw Error(\"annotation target requires a source\");\n    var selector = null;\n    var targetType = AnnotationUtil.determineTargetType(target);\n\n    if (target.params !== undefined) {\n      selector = AnnotationUtil.makeSelector(target.params, targetType);\n    }\n\n    return {\n      source: target.source,\n      selector: selector,\n      scope: window.location.href,\n      type: targetType\n    };\n  },\n  determineTargetType: function determineTargetType(target) {\n    if (target.type === \"annotation\") return \"Annotation\";\n    if (target.mimeType === undefined) throw Error(\"annotation target requires a mimetype\");\n\n    if (target.mimeType.startsWith(\"video\")) {\n      return \"Video\";\n    } else if (target.mimeType.startsWith(\"audio\")) {\n      return \"Audio\";\n    } else if (target.mimeType.startsWith(\"image\")) {\n      return \"Image\";\n    } else if (target.mimeType.startsWith(\"text\")) {\n      return \"Text\";\n    } else {\n      return null;\n    }\n  },\n\n  /*************************************************************************************\n   ************************************* W3C Subresource HELPERS ***************\n  *************************************************************************************/\n  makeNestedPIDSelector: function makeNestedPIDSelector(breadcrumbTrail) {\n    if (!AnnotationUtil.hasSubresources(breadcrumbTrail)) {\n      throw new Error(\"makeNestedPIDSelector requires a breadcrumb trail\");\n    }\n\n    var nestedPIDList = breadcrumbTrail.map(function (breadcrumb) {\n      return {\n        id: breadcrumb.id,\n        property: breadcrumb.property,\n        type: breadcrumb.type\n      };\n    });\n    return {\n      \"@context\": \"https://annotation.clariah.nl/ns/swao.jsonld\",\n      type: \"NestedPIDSelector\",\n      value: nestedPIDList\n    };\n  },\n  makeSubresourceSelector: function makeSubresourceSelector(breadcrumbTrail) {\n    if (!AnnotationUtil.hasSubresources(breadcrumbTrail)) {\n      throw new Error(\"makeSubresourceSelector requires a breadcrumb trail\");\n    }\n\n    return {\n      \"@context\": \"https://annotation.clariah.nl/ns/swao.jsonld\",\n      type: \"SubresourceSelector\",\n      value: AnnotationUtil.makeSubresourceBranch(breadcrumbTrail)\n    };\n  },\n  makeSubresourceBranch: function makeSubresourceBranch(breadcrumbTrail) {\n    var top = breadcrumbTrail.shift();\n    var branch = {\n      id: top.id,\n      type: top.type\n    };\n    if (top.property) branch.property = top.property;\n    if (breadcrumbTrail.length) branch.subresource = AnnotationUtil.makeSubresourceBranch(breadcrumbTrail);\n    return branch;\n  },\n  hasSubresources: function hasSubresources(breadcrumbTrail) {\n    if (breadcrumbTrail === undefined) return false;\n    if (!Array.isArray(breadcrumbTrail)) return false;\n    if (breadcrumbTrail.length === 0) return false;\n    return breadcrumbTrail.every(function (breadcrumb) {\n      if (_typeof(breadcrumb) !== \"object\") return false;\n      var requiredProperties = [\"id\", \"type\", \"property\"];\n      return requiredProperties.every(function (property) {\n        return Object.keys(breadcrumb).includes(property);\n      });\n    });\n  },\n\n  /*************************************************************************************\n   ************************************* W3C MEDIA FRAGMENTS HELPERS ***************\n  *************************************************************************************/\n  makeSelector: function makeSelector(params, targetType) {\n    if (params.breadcrumbs !== undefined) {\n      var selector = AnnotationUtil.makeNestedPIDSelector(params.breadcrumbs);\n      if (targetType) selector.refinedBy = AnnotationUtil.makeMimeSelector(params, targetType);\n      return selector;\n    } else {\n      return AnnotationUtil.makeMimeSelector(params, targetType);\n    }\n  },\n  makeMimeSelector: function makeMimeSelector(params, targetType) {\n    if (targetType === \"Text\") {\n      return AnnotationUtil.makeTextSelector(params);\n    } else if ([\"Audio\", \"Image\", \"Video\"].includes(targetType)) {\n      return AnnotationUtil.makeMediaFragmentSelector(params);\n    } else {\n      return null;\n    }\n  },\n  makeMediaFragmentSelector: function makeMediaFragmentSelector(params) {\n    if (params === undefined) return null;\n\n    if (params.interval !== undefined) {\n      _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].checkInterval(params.interval);\n      return {\n        type: \"FragmentSelector\",\n        conformsTo: \"http://www.w3.org/TR/media-frags/\",\n        value: \"#t=\" + params.interval.start + \",\" + params.interval.end,\n        interval: params.interval\n      };\n    } else if (params.rect !== undefined) {\n      _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].checkRectangle(params.rect);\n      return {\n        type: \"FragmentSelector\",\n        conformsTo: \"http://www.w3.org/TR/media-frags/\",\n        value: \"#xywh=\" + params.rect.x + \",\" + params.rect.y + \",\" + params.rect.w + \",\" + params.rect.h,\n        rect: params.rect\n      };\n    } else {\n      return null;\n    }\n  },\n  makeTextSelector: function makeTextSelector(params) {\n    if (params === undefined || !params.position && !params.quote) return null;\n    var textPositionSelector = AnnotationUtil.makeTextPositionSelector(params.position);\n    var textQuoteSelector = AnnotationUtil.makeTextQuoteSelector(params.quote);\n\n    if (textPositionSelector && textQuoteSelector) {\n      return [textPositionSelector, textQuoteSelector];\n    } else if (textPositionSelector) {\n      return textPositionSelector;\n    } else if (textQuoteSelector) {\n      return textQuoteSelector;\n    }\n\n    return null;\n  },\n  makeTextQuoteSelector: function makeTextQuoteSelector(quote) {\n    if (quote === undefined) return null;\n    if (quote.exact === undefined) throw new Error(\"text quote parameters should contain property exact\");\n    if (quote.suffix === undefined) throw new Error(\"text quote parameters should contain property suffix\");\n    if (quote.prefix === undefined) throw new Error(\"text quote parameters should contain property prefix\");\n\n    if (quote.prefix !== undefined && quote.suffix !== undefined && quote.exact !== undefined) {\n      return {\n        \"type\": \"TextQuoteSelector\",\n        \"prefix\": quote.prefix,\n        \"suffix\": quote.suffix,\n        \"exact\": quote.exact\n      };\n    }\n\n    return null;\n  },\n  makeTextPositionSelector: function makeTextPositionSelector(position) {\n    if (!position) return null;\n    if (position.start === undefined) throw new Error(\"text position parameters should contain property start\");\n    if (position.end === undefined) throw new Error(\"text position parameters should contain property end\");\n\n    if (position.start !== undefined && position.end !== undefined) {\n      return {\n        \"type\": \"TextPositionSelector\",\n        \"start\": position.start,\n        \"end\": position.end\n      };\n    }\n\n    return null;\n  },\n  extractTemporalFragmentFromURI: function extractTemporalFragmentFromURI(uri) {\n    var i = uri.indexOf(\"#t=\");\n\n    if (i != -1) {\n      return uri.substring(i + 3).split(\",\");\n    }\n\n    return null;\n  },\n  extractSpatialFragmentFromURI: function extractSpatialFragmentFromURI(uri) {\n    var i = uri.indexOf(\"#xywh=\");\n\n    if (i != -1) {\n      var arr = uri.substring(i + 6).split(\",\");\n      return {\n        \"x\": arr[0],\n        \"y\": arr[1],\n        \"w\": arr[2],\n        \"h\": arr[3]\n      };\n    }\n\n    return null;\n  },\n  extractBodies: function extractBodies(annotation) {\n    return Array.isArray(annotation.body) ? annotation.body : [annotation.body];\n  },\n  extractTargets: function extractTargets(annotation) {\n    return Array.isArray(annotation.target) ? annotation.target : [annotation.target];\n  },\n  extractTargetIdentifier: function extractTargetIdentifier(annotationTarget) {\n    if (typeof annotationTarget === \"string\") return annotationTarget;\n    if (annotationTarget.id) return annotationTarget.id;\n    if (annotationTarget.source) // the target is a selection in a source\n      return annotationTarget.source;\n    return null;\n  },\n  extractTargetIdentifiers: function extractTargetIdentifiers(annotation) {\n    return AnnotationUtil.extractTargets(annotation).map(function (target) {\n      return AnnotationUtil.extractTargetIdentifier(target);\n    });\n  },\n\n  /*************************************************************************************\n   ************************************* UUID FUNCTIONS ****************************\n  *************************************************************************************/\n  guid: function guid() {\n    return AnnotationUtil.s4() + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + AnnotationUtil.s4() + AnnotationUtil.s4();\n  },\n  s4: function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9Bbm5vdGF0aW9uVXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy91dGlsL0Fubm90YXRpb25VdGlsLmpzPzIzYWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy9haW1zIHRvIGltcGxlbWVudCBodHRwczovL3d3dy53My5vcmcvVFIvYW5ub3RhdGlvbi1tb2RlbFxuXG5pbXBvcnQgU2VsZWN0aW9uVXRpbCBmcm9tIFwiLi9TZWxlY3Rpb25VdGlsLmpzXCI7XG5cbmNvbnN0IEFubm90YXRpb25VdGlsID0ge1xuXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFczQyBCVVNJTkVTUyBMT0dJQyBIRVJFICoqKioqKioqKioqKioqKioqKioqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8vY2FsbGVkIGZyb20gY29tcG9uZW50cyB0aGF0IHdhbnQgdG8gY3JlYXRlIGEgbmV3IGFubm90YXRpb24gd2l0aCBhIHByb3BlciB0YXJnZXRcbiAgICBnZW5lcmF0ZVczQ0Fubm90YXRpb24gOiBmdW5jdGlvbihhbm5vdGF0aW9uVGFyZ2V0cywgY3JlYXRvcikge1xuICAgICAgICBpZiAoIUFubm90YXRpb25VdGlsLmhhc1RhcmdldHMoYW5ub3RhdGlvblRhcmdldHMpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW5ub3RhdGlvbiByZXF1aXJlcyBhIG5vbi1lbXB0eSBhcnJheSBvZiBhbm5vdGF0aW9uIHRhcmdldHMuXCIpO1xuICAgICAgICBpZiAoY3JlYXRvciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW5ub3RhdGlvbiByZXF1aXJlcyBhIGNyZWF0b3Igb2JqZWN0LlwiKTtcbiAgICAgICAgbGV0IHRhcmdldExpc3QgPSBhbm5vdGF0aW9uVGFyZ2V0cy5tYXAoZnVuY3Rpb24oYW5ub3RhdGlvblRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLm1ha2VBbm5vdGF0aW9uVGFyZ2V0KGFubm90YXRpb25UYXJnZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiQGNvbnRleHRcIjogXCJodHRwOi8vd3d3LnczLm9yZy9ucy9hbm5vLmpzb25sZFwiLFxuICAgICAgICAgICAgdHlwZTogXCJBbm5vdGF0aW9uXCIsXG4gICAgICAgICAgICBtb3RpdmF0aW9uOiBudWxsLFxuICAgICAgICAgICAgY3JlYXRvciA6IGNyZWF0b3IsIC8vVE9ETyBtYXAgdG8gVzNDXG4gICAgICAgICAgICB0YXJnZXQgOiB0YXJnZXRMaXN0LFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBoYXNUYXJnZXRzIDogKHRhcmdldHMpID0+IHtcbiAgICAgICAgaWYgKHRhcmdldHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRhcmdldHMpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBtYWtlQW5ub3RhdGlvblRhcmdldCA6ICh0YXJnZXQpID0+IHtcbiAgICAgICAgaWYgKHRhcmdldC5zb3VyY2UgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiYW5ub3RhdGlvbiB0YXJnZXQgcmVxdWlyZXMgYSBzb3VyY2VcIik7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IG51bGw7XG4gICAgICAgIGxldCB0YXJnZXRUeXBlID0gQW5ub3RhdGlvblV0aWwuZGV0ZXJtaW5lVGFyZ2V0VHlwZSh0YXJnZXQpO1xuICAgICAgICBpZiAodGFyZ2V0LnBhcmFtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxlY3RvciA9IEFubm90YXRpb25VdGlsLm1ha2VTZWxlY3Rvcih0YXJnZXQucGFyYW1zLCB0YXJnZXRUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc291cmNlOiB0YXJnZXQuc291cmNlLFxuICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLFxuICAgICAgICAgICAgc2NvcGU6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgdHlwZTogdGFyZ2V0VHlwZVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBkZXRlcm1pbmVUYXJnZXRUeXBlIDogKHRhcmdldCkgPT4ge1xuICAgICAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiYW5ub3RhdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIFwiQW5ub3RhdGlvblwiO1xuICAgICAgICBpZiAodGFyZ2V0Lm1pbWVUeXBlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImFubm90YXRpb24gdGFyZ2V0IHJlcXVpcmVzIGEgbWltZXR5cGVcIik7XG4gICAgICAgIGlmKHRhcmdldC5taW1lVHlwZS5zdGFydHNXaXRoKFwidmlkZW9cIikpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlZpZGVvXCI7XG4gICAgICAgIH0gZWxzZSBpZih0YXJnZXQubWltZVR5cGUuc3RhcnRzV2l0aChcImF1ZGlvXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJBdWRpb1wiO1xuICAgICAgICB9IGVsc2UgaWYodGFyZ2V0Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoXCJpbWFnZVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiSW1hZ2VcIjtcbiAgICAgICAgfSBlbHNlIGlmKHRhcmdldC5taW1lVHlwZS5zdGFydHNXaXRoKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiVGV4dFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBXM0MgU3VicmVzb3VyY2UgSEVMUEVSUyAqKioqKioqKioqKioqKipcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgbWFrZU5lc3RlZFBJRFNlbGVjdG9yIDogZnVuY3Rpb24oYnJlYWRjcnVtYlRyYWlsKSB7XG4gICAgICAgIGlmICghQW5ub3RhdGlvblV0aWwuaGFzU3VicmVzb3VyY2VzKGJyZWFkY3J1bWJUcmFpbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1ha2VOZXN0ZWRQSURTZWxlY3RvciByZXF1aXJlcyBhIGJyZWFkY3J1bWIgdHJhaWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5lc3RlZFBJRExpc3QgPSBicmVhZGNydW1iVHJhaWwubWFwKChicmVhZGNydW1iKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBicmVhZGNydW1iLmlkLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBicmVhZGNydW1iLnByb3BlcnR5LFxuICAgICAgICAgICAgICAgIHR5cGU6IGJyZWFkY3J1bWIudHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkBjb250ZXh0XCI6IFwiaHR0cHM6Ly9hbm5vdGF0aW9uLmNsYXJpYWgubmwvbnMvc3dhby5qc29ubGRcIixcbiAgICAgICAgICAgIHR5cGU6IFwiTmVzdGVkUElEU2VsZWN0b3JcIixcbiAgICAgICAgICAgIHZhbHVlOiBuZXN0ZWRQSURMaXN0XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIG1ha2VTdWJyZXNvdXJjZVNlbGVjdG9yIDogZnVuY3Rpb24oYnJlYWRjcnVtYlRyYWlsKSB7XG4gICAgICAgIGlmICghQW5ub3RhdGlvblV0aWwuaGFzU3VicmVzb3VyY2VzKGJyZWFkY3J1bWJUcmFpbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1ha2VTdWJyZXNvdXJjZVNlbGVjdG9yIHJlcXVpcmVzIGEgYnJlYWRjcnVtYiB0cmFpbFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJAY29udGV4dFwiOiBcImh0dHBzOi8vYW5ub3RhdGlvbi5jbGFyaWFoLm5sL25zL3N3YW8uanNvbmxkXCIsXG4gICAgICAgICAgICB0eXBlOiBcIlN1YnJlc291cmNlU2VsZWN0b3JcIixcbiAgICAgICAgICAgIHZhbHVlOiBBbm5vdGF0aW9uVXRpbC5tYWtlU3VicmVzb3VyY2VCcmFuY2goYnJlYWRjcnVtYlRyYWlsKVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBtYWtlU3VicmVzb3VyY2VCcmFuY2ggOiAoYnJlYWRjcnVtYlRyYWlsKSA9PiB7XG4gICAgICAgIGxldCB0b3AgPSBicmVhZGNydW1iVHJhaWwuc2hpZnQoKTtcbiAgICAgICAgdmFyIGJyYW5jaCA9IHtcbiAgICAgICAgICAgIGlkOiB0b3AuaWQsXG4gICAgICAgICAgICB0eXBlOiB0b3AudHlwZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRvcC5wcm9wZXJ0eSlcbiAgICAgICAgICAgIGJyYW5jaC5wcm9wZXJ0eSA9IHRvcC5wcm9wZXJ0eTtcbiAgICAgICAgaWYgKGJyZWFkY3J1bWJUcmFpbC5sZW5ndGgpXG4gICAgICAgICAgICBicmFuY2guc3VicmVzb3VyY2UgPSBBbm5vdGF0aW9uVXRpbC5tYWtlU3VicmVzb3VyY2VCcmFuY2goYnJlYWRjcnVtYlRyYWlsKTtcbiAgICAgICAgcmV0dXJuIGJyYW5jaDtcbiAgICB9LFxuXG4gICAgaGFzU3VicmVzb3VyY2VzIDogKGJyZWFkY3J1bWJUcmFpbCkgPT4ge1xuICAgICAgICBpZiAoYnJlYWRjcnVtYlRyYWlsID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShicmVhZGNydW1iVHJhaWwpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYnJlYWRjcnVtYlRyYWlsLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGJyZWFkY3J1bWJUcmFpbC5ldmVyeSgoYnJlYWRjcnVtYikgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZihicmVhZGNydW1iKSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZXQgcmVxdWlyZWRQcm9wZXJ0aWVzID0gW1wiaWRcIiwgXCJ0eXBlXCIsIFwicHJvcGVydHlcIl07XG4gICAgICAgICAgICByZXR1cm4gcmVxdWlyZWRQcm9wZXJ0aWVzLmV2ZXJ5KChwcm9wZXJ0eSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGJyZWFkY3J1bWIpLmluY2x1ZGVzKHByb3BlcnR5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBXM0MgTUVESUEgRlJBR01FTlRTIEhFTFBFUlMgKioqKioqKioqKioqKioqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIG1ha2VTZWxlY3RvciA6IGZ1bmN0aW9uKHBhcmFtcywgdGFyZ2V0VHlwZSkge1xuICAgICAgICBpZiAocGFyYW1zLmJyZWFkY3J1bWJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IEFubm90YXRpb25VdGlsLm1ha2VOZXN0ZWRQSURTZWxlY3RvcihwYXJhbXMuYnJlYWRjcnVtYnMpO1xuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUpXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IucmVmaW5lZEJ5ID0gQW5ub3RhdGlvblV0aWwubWFrZU1pbWVTZWxlY3RvcihwYXJhbXMsIHRhcmdldFR5cGUpO1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLm1ha2VNaW1lU2VsZWN0b3IocGFyYW1zLCB0YXJnZXRUeXBlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBtYWtlTWltZVNlbGVjdG9yIDogZnVuY3Rpb24ocGFyYW1zLCB0YXJnZXRUeXBlKSB7XG4gICAgICAgIGlmICh0YXJnZXRUeXBlID09PSBcIlRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLm1ha2VUZXh0U2VsZWN0b3IocGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIGlmIChbXCJBdWRpb1wiLCBcIkltYWdlXCIsIFwiVmlkZW9cIl0uaW5jbHVkZXModGFyZ2V0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBBbm5vdGF0aW9uVXRpbC5tYWtlTWVkaWFGcmFnbWVudFNlbGVjdG9yKHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBtYWtlTWVkaWFGcmFnbWVudFNlbGVjdG9yIDogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAocGFyYW1zLmludGVydmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tJbnRlcnZhbChwYXJhbXMuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkZyYWdtZW50U2VsZWN0b3JcIixcbiAgICAgICAgICAgICAgICBjb25mb3Jtc1RvOiBcImh0dHA6Ly93d3cudzMub3JnL1RSL21lZGlhLWZyYWdzL1wiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIiN0PVwiICsgcGFyYW1zLmludGVydmFsLnN0YXJ0ICsgXCIsXCIgKyBwYXJhbXMuaW50ZXJ2YWwuZW5kLFxuICAgICAgICAgICAgICAgIGludGVydmFsOiBwYXJhbXMuaW50ZXJ2YWxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucmVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLmNoZWNrUmVjdGFuZ2xlKHBhcmFtcy5yZWN0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJGcmFnbWVudFNlbGVjdG9yXCIsXG4gICAgICAgICAgICAgICAgY29uZm9ybXNUbzogXCJodHRwOi8vd3d3LnczLm9yZy9UUi9tZWRpYS1mcmFncy9cIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCIjeHl3aD1cIiArIHBhcmFtcy5yZWN0LnggKyBcIixcIiArIHBhcmFtcy5yZWN0LnkgKyBcIixcIiArIHBhcmFtcy5yZWN0LncgKyBcIixcIiArIHBhcmFtcy5yZWN0LmgsXG4gICAgICAgICAgICAgICAgcmVjdDogcGFyYW1zLnJlY3RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cblxuXG4gICAgbWFrZVRleHRTZWxlY3RvciA6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQgfHwgKCFwYXJhbXMucG9zaXRpb24gJiYgIXBhcmFtcy5xdW90ZSkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHRleHRQb3NpdGlvblNlbGVjdG9yID0gQW5ub3RhdGlvblV0aWwubWFrZVRleHRQb3NpdGlvblNlbGVjdG9yKHBhcmFtcy5wb3NpdGlvbik7XG4gICAgICAgIGxldCB0ZXh0UXVvdGVTZWxlY3RvciA9IEFubm90YXRpb25VdGlsLm1ha2VUZXh0UXVvdGVTZWxlY3RvcihwYXJhbXMucXVvdGUpO1xuICAgICAgICBpZiAodGV4dFBvc2l0aW9uU2VsZWN0b3IgJiYgdGV4dFF1b3RlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGV4dFBvc2l0aW9uU2VsZWN0b3IsIHRleHRRdW90ZVNlbGVjdG9yXTtcbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0UG9zaXRpb25TZWxlY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRleHRQb3NpdGlvblNlbGVjdG9yO1xuICAgICAgICB9IGVsc2UgaWYgKHRleHRRdW90ZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dFF1b3RlU2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIG1ha2VUZXh0UXVvdGVTZWxlY3RvciA6IGZ1bmN0aW9uKHF1b3RlKSB7XG4gICAgICAgIGlmIChxdW90ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChxdW90ZS5leGFjdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGV4dCBxdW90ZSBwYXJhbWV0ZXJzIHNob3VsZCBjb250YWluIHByb3BlcnR5IGV4YWN0XCIpO1xuICAgICAgICBpZiAocXVvdGUuc3VmZml4ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0ZXh0IHF1b3RlIHBhcmFtZXRlcnMgc2hvdWxkIGNvbnRhaW4gcHJvcGVydHkgc3VmZml4XCIpO1xuICAgICAgICBpZiAocXVvdGUucHJlZml4ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0ZXh0IHF1b3RlIHBhcmFtZXRlcnMgc2hvdWxkIGNvbnRhaW4gcHJvcGVydHkgcHJlZml4XCIpO1xuICAgICAgICBpZihxdW90ZS5wcmVmaXggIT09IHVuZGVmaW5lZCAmJiBxdW90ZS5zdWZmaXggIT09IHVuZGVmaW5lZCAmJiBxdW90ZS5leGFjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRRdW90ZVNlbGVjdG9yXCIsXG4gICAgICAgICAgICAgICAgXCJwcmVmaXhcIjogcXVvdGUucHJlZml4LFxuICAgICAgICAgICAgICAgIFwic3VmZml4XCI6IHF1b3RlLnN1ZmZpeCxcbiAgICAgICAgICAgICAgICBcImV4YWN0XCI6IHF1b3RlLmV4YWN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICBtYWtlVGV4dFBvc2l0aW9uU2VsZWN0b3IgOiBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAoIXBvc2l0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChwb3NpdGlvbi5zdGFydCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGV4dCBwb3NpdGlvbiBwYXJhbWV0ZXJzIHNob3VsZCBjb250YWluIHByb3BlcnR5IHN0YXJ0XCIpO1xuICAgICAgICBpZiAocG9zaXRpb24uZW5kID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0ZXh0IHBvc2l0aW9uIHBhcmFtZXRlcnMgc2hvdWxkIGNvbnRhaW4gcHJvcGVydHkgZW5kXCIpO1xuICAgICAgICBpZihwb3NpdGlvbi5zdGFydCAhPT0gdW5kZWZpbmVkICYmIHBvc2l0aW9uLmVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRQb3NpdGlvblNlbGVjdG9yXCIsXG4gICAgICAgICAgICAgICAgXCJzdGFydFwiOiBwb3NpdGlvbi5zdGFydCxcbiAgICAgICAgICAgICAgICBcImVuZFwiOiBwb3NpdGlvbi5lbmQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cblxuICAgIGV4dHJhY3RUZW1wb3JhbEZyYWdtZW50RnJvbVVSSSA6IGZ1bmN0aW9uKHVyaSkge1xuICAgICAgICBsZXQgaSA9IHVyaS5pbmRleE9mKFwiI3Q9XCIpO1xuICAgICAgICBpZihpICE9IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJpLnN1YnN0cmluZyhpICsgMykuc3BsaXQoXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICBleHRyYWN0U3BhdGlhbEZyYWdtZW50RnJvbVVSSSA6IGZ1bmN0aW9uKHVyaSkge1xuICAgICAgICBsZXQgaSA9IHVyaS5pbmRleE9mKFwiI3h5d2g9XCIpO1xuICAgICAgICBpZihpICE9IC0xKSB7XG4gICAgICAgICAgICBsZXQgYXJyID0gdXJpLnN1YnN0cmluZyhpICsgNikuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBcInhcIiA6IGFyclswXSxcbiAgICAgICAgICAgICAgICBcInlcIiA6IGFyclsxXSxcbiAgICAgICAgICAgICAgICBcIndcIiA6IGFyclsyXSxcbiAgICAgICAgICAgICAgICBcImhcIiA6IGFyclszXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgZXh0cmFjdEJvZGllcyA6IGZ1bmN0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYW5ub3RhdGlvbi5ib2R5KSA/IGFubm90YXRpb24uYm9keSA6IFthbm5vdGF0aW9uLmJvZHldO1xuICAgIH0sXG5cbiAgICBleHRyYWN0VGFyZ2V0cyA6IGZ1bmN0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYW5ub3RhdGlvbi50YXJnZXQpID8gYW5ub3RhdGlvbi50YXJnZXQgOiBbYW5ub3RhdGlvbi50YXJnZXRdO1xuICAgIH0sXG5cbiAgICBleHRyYWN0VGFyZ2V0SWRlbnRpZmllciA6IGZ1bmN0aW9uKGFubm90YXRpb25UYXJnZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZihhbm5vdGF0aW9uVGFyZ2V0KSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uVGFyZ2V0O1xuICAgICAgICBpZiAoYW5ub3RhdGlvblRhcmdldC5pZClcbiAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uVGFyZ2V0LmlkO1xuICAgICAgICBpZiAoYW5ub3RhdGlvblRhcmdldC5zb3VyY2UpIC8vIHRoZSB0YXJnZXQgaXMgYSBzZWxlY3Rpb24gaW4gYSBzb3VyY2VcbiAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uVGFyZ2V0LnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIGV4dHJhY3RUYXJnZXRJZGVudGlmaWVycyA6IGZ1bmN0aW9uKGFubm90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLmV4dHJhY3RUYXJnZXRzKGFubm90YXRpb24pLm1hcChmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBBbm5vdGF0aW9uVXRpbC5leHRyYWN0VGFyZ2V0SWRlbnRpZmllcih0YXJnZXQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBVVUlEIEZVTkNUSU9OUyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIGd1aWQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEFubm90YXRpb25VdGlsLnM0KCkgKyBBbm5vdGF0aW9uVXRpbC5zNCgpICsgXCItXCIgKyBBbm5vdGF0aW9uVXRpbC5zNCgpICsgXCItXCIgK1xuICAgICAgICBBbm5vdGF0aW9uVXRpbC5zNCgpICsgXCItXCIgKyBBbm5vdGF0aW9uVXRpbC5zNCgpICsgXCItXCIgKyBBbm5vdGF0aW9uVXRpbC5zNCgpICtcbiAgICAgICAgQW5ub3RhdGlvblV0aWwuczQoKSArIEFubm90YXRpb25VdGlsLnM0KCk7XG4gICAgfSxcblxuICAgIHM0IDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxufTtcblxuZXhwb3J0IGRlZmF1bHQgQW5ub3RhdGlvblV0aWw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUVBO0FBRUE7QUFHQTs7O0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUxBO0FBT0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFJQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUF4U0E7QUE0U0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/AnnotationUtil.js\n");

/***/ }),

/***/ "./src/util/DOMUtil.js":
/*!*****************************!*\
  !*** ./src/util/DOMUtil.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StringUtil.js */ \"./src/util/StringUtil.js\");\n\n\n\nvar DOMUtil = {\n  setObserverNodeClass: function setObserverNodeClass(observerNodeClass) {\n    this.observerNodeClass = observerNodeClass;\n  },\n  getObserverNodes: function getObserverNodes() {\n    return document.getElementsByClassName(this.observerNodeClass);\n  },\n\n  /*\n  *****************************************\n  * functions to trim whitespace usage in *\n  * text elements to align the HTML DOM   *\n  * with the browser view layer           *\n  *****************************************\n  */\n  getDisplayType: function getDisplayType(node) {\n    var cStyle = node.currentStyle || window.getComputedStyle(node, \"\");\n    return cStyle.display;\n  },\n  getTextNodeDisplayOffset: function getTextNodeDisplayOffset(textNode) {\n    var displayText = textNode.textContent;\n    var parentDisplayType = DOMUtil.getDisplayType(textNode.parentNode);\n\n    if (parentDisplayType === \"inline\") {\n      // if parent is inline element,\n      // multiple leading whitespace characters are collapsed to a single whitespace\n      if (displayText.length === 0 || !displayText.match(/^\\s+/)) {\n        return 0;\n      }\n\n      var leadingSpaces = displayText.match(/^\\s+/)[0];\n\n      if (leadingSpaces.length > 1) {\n        return leadingSpaces.length - 1;\n      } else {\n        return leadingSpaces.length;\n      }\n      /*\n      return 0;\n      */\n\n    } else {\n      if (textNode === textNode.parentNode.firstChild) {\n        displayText = displayText.trimLeft();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseLeftWhitespace(displayText);\n      }\n\n      return textNode.textContent.length - displayText.length;\n    }\n  },\n  getTextNodeDisplayText: function getTextNodeDisplayText(textNode) {\n    var displayText = textNode.textContent;\n    var parentDisplayType = DOMUtil.getDisplayType(textNode.parentNode);\n\n    if (parentDisplayType === \"block\") {\n      if (textNode === textNode.parentNode.firstChild) {\n        displayText = displayText.trimLeft();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseLeftWhitespace(displayText);\n      }\n\n      if (textNode === textNode.parentNode.lastChild) {\n        displayText = displayText.trimRight();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseRightWhitespace(displayText);\n      }\n    } else {\n      displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseWhitespace(displayText);\n    }\n\n    return displayText;\n  },\n\n  /*\n  ***********************************\n  * DOM element selection functions *\n  ***********************************\n  */\n  getPreviousTextNode: function getPreviousTextNode(textNode) {\n    //var previousTextNode = null;\n    var parentNode = textNode.parentNode;\n    var parentTextNodes = DOMUtil.getTextNodes(parentNode);\n\n    while (parentNode !== document && parentTextNodes.indexOf(textNode) === 0) {\n      parentNode = parentNode.parentNode;\n      parentTextNodes = DOMUtil.getTextNodes(parentNode);\n    }\n\n    if (parentTextNodes.indexOf(textNode) === 0) return null;\n    return parentTextNodes[parentTextNodes.indexOf(textNode) - 1];\n  },\n  // return all text nodes contained within a node\n  getTextNodes: function getTextNodes(node) {\n    return DOMUtil.getDescendants(node).filter(function (node) {\n      return node.nodeType === window.Node.TEXT_NODE;\n    });\n  },\n  // return all text nodes in a list of nodes\n  filterTextNodes: function filterTextNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType === window.Node.TEXT_NODE;\n    });\n  },\n  // return all ELEMENT_NODE nodes in a list of nodes\n  getElementNodes: function getElementNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType === window.Node.ELEMENT_NODE;\n    });\n  },\n  // return all non-text nodes in a list of nodes\n  getNonTextNodes: function getNonTextNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType !== window.Node.TEXT_NODE;\n    });\n  },\n  // return all ancestor nodes of a node\n  getAncestors: function getAncestors(node) {\n    var parentNode = node.parentNode;\n    var ancestors = [];\n\n    if (parentNode && parentNode.nodeType !== window.Node.DOCUMENT_NODE) {\n      ancestors = DOMUtil.getAncestors(parentNode);\n      ancestors.push(parentNode);\n    }\n\n    return ancestors;\n  },\n  // return all descendant nodes of a node\n  // using depth-first traversal\n  getDescendants: function getDescendants(node) {\n    var descendants = [];\n\n    if (!node.hasChildNodes()) {\n      return descendants;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      // only consider element and text nodes, i.e. types 1 and 3\n      if (childNode.nodeType <= 3) {\n        descendants.push(childNode);\n        descendants = descendants.concat(DOMUtil.getDescendants(childNode));\n      }\n    });\n    return descendants;\n  },\n  // select all larger elements (excluding document)\n  findCommonAncestors: function findCommonAncestors(startNode, endNode) {\n    var startAncestors = DOMUtil.getAncestors(startNode);\n    startAncestors.push(startNode);\n    var currNode = endNode; // find lowest common ancestor\n\n    while (!startAncestors.includes(currNode)) {\n      currNode = currNode.parentNode;\n    } // return elements from lowest common ancestor upwards\n\n\n    return startAncestors.slice(0, startAncestors.indexOf(currNode) + 1);\n  },\n  determineNodeMimeType: function determineNodeMimeType(node) {\n    var mimetype = null; // 1. ignore non-element, non-text nodes\n\n    if (node.nodeType !== 3 && node.nodeType !== 1) return null; // 2. check if node has children\n\n    if (!node.hasChildren()) {\n      // options:\n      switch (node.nodeName) {\n        case \"#text\":\n          mimetype = \"text\";\n          break;\n\n        case \"CANVAS\":\n          mimetype = \"image\";\n          break;\n\n        case \"IMG\":\n          mimetype = \"image\";\n          break;\n\n        case \"VIDEO\":\n          mimetype = \"video\";\n          break;\n\n        default:\n          mimetype = \"text\";\n          break;\n      }\n\n      return {\n        node: node,\n        mimetype: mimetype\n      };\n    } else {\n      var childMimeTypes = node.forEach(function (childNode) {\n        return DOMUtil.determineNodeMimeType(childNode);\n      });\n      mimetype = childMimeTypes[0];\n      var singleType = childMimeTypes.every(function (childMimeType) {\n        childMimeType === mimetype;\n      });\n\n      if (singleType) {\n        return mimetype;\n      } else {\n        return \"mixed\";\n      }\n    } // 2a. if has children, determine mimetype of children\n    // 2\n\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (DOMUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9ET01VdGlsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL3V0aWwvRE9NVXRpbC5qcz9mZDIyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBTdHJpbmdVdGlsIGZyb20gXCIuL1N0cmluZ1V0aWwuanNcIjtcblxuY29uc3QgRE9NVXRpbCA9IHtcblxuICAgIHNldE9ic2VydmVyTm9kZUNsYXNzKG9ic2VydmVyTm9kZUNsYXNzKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJOb2RlQ2xhc3MgPSBvYnNlcnZlck5vZGVDbGFzcztcbiAgICB9LFxuXG4gICAgZ2V0T2JzZXJ2ZXJOb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodGhpcy5vYnNlcnZlck5vZGVDbGFzcyk7XG4gICAgfSxcblxuICAgIC8qXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9ucyB0byB0cmltIHdoaXRlc3BhY2UgdXNhZ2UgaW4gKlxuICAgICogdGV4dCBlbGVtZW50cyB0byBhbGlnbiB0aGUgSFRNTCBET00gICAqXG4gICAgKiB3aXRoIHRoZSBicm93c2VyIHZpZXcgbGF5ZXIgICAgICAgICAgICpcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICovXG5cbiAgICBnZXREaXNwbGF5VHlwZSA6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBjU3R5bGUgPSBub2RlLmN1cnJlbnRTdHlsZSB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGNTdHlsZS5kaXNwbGF5O1xuICAgIH0sXG5cbiAgICBnZXRUZXh0Tm9kZURpc3BsYXlPZmZzZXQgOiBmdW5jdGlvbiAodGV4dE5vZGUpIHtcbiAgICAgICAgdmFyIGRpc3BsYXlUZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQ7XG4gICAgICAgIGxldCBwYXJlbnREaXNwbGF5VHlwZSA9IERPTVV0aWwuZ2V0RGlzcGxheVR5cGUodGV4dE5vZGUucGFyZW50Tm9kZSk7XG4gICAgICAgIGlmIChwYXJlbnREaXNwbGF5VHlwZSA9PT0gXCJpbmxpbmVcIikge1xuICAgICAgICAgICAgLy8gaWYgcGFyZW50IGlzIGlubGluZSBlbGVtZW50LFxuICAgICAgICAgICAgLy8gbXVsdGlwbGUgbGVhZGluZyB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgYXJlIGNvbGxhcHNlZCB0byBhIHNpbmdsZSB3aGl0ZXNwYWNlXG4gICAgICAgICAgICBpZiAoZGlzcGxheVRleHQubGVuZ3RoID09PSAwIHx8ICFkaXNwbGF5VGV4dC5tYXRjaCgvXlxccysvKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxlYWRpbmdTcGFjZXMgPSBkaXNwbGF5VGV4dC5tYXRjaCgvXlxccysvKVswXTtcbiAgICAgICAgICAgIGlmIChsZWFkaW5nU3BhY2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVhZGluZ1NwYWNlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVhZGluZ1NwYWNlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAqL1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRleHROb2RlID09PSB0ZXh0Tm9kZS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA9IGRpc3BsYXlUZXh0LnRyaW1MZWZ0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0ID0gU3RyaW5nVXRpbC5jb2xsYXBzZUxlZnRXaGl0ZXNwYWNlKGRpc3BsYXlUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZXh0Tm9kZS50ZXh0Q29udGVudC5sZW5ndGggLSBkaXNwbGF5VGV4dC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0VGV4dE5vZGVEaXNwbGF5VGV4dCA6IGZ1bmN0aW9uICh0ZXh0Tm9kZSkge1xuICAgICAgICB2YXIgZGlzcGxheVRleHQgPSB0ZXh0Tm9kZS50ZXh0Q29udGVudDtcbiAgICAgICAgbGV0IHBhcmVudERpc3BsYXlUeXBlID0gRE9NVXRpbC5nZXREaXNwbGF5VHlwZSh0ZXh0Tm9kZS5wYXJlbnROb2RlKTtcbiAgICAgICAgaWYgKHBhcmVudERpc3BsYXlUeXBlID09PSBcImJsb2NrXCIpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0Tm9kZSA9PT0gdGV4dE5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC50cmltTGVmdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA9IFN0cmluZ1V0aWwuY29sbGFwc2VMZWZ0V2hpdGVzcGFjZShkaXNwbGF5VGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4dE5vZGUgPT09IHRleHROb2RlLnBhcmVudE5vZGUubGFzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC50cmltUmlnaHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBTdHJpbmdVdGlsLmNvbGxhcHNlUmlnaHRXaGl0ZXNwYWNlKGRpc3BsYXlUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BsYXlUZXh0ID0gU3RyaW5nVXRpbC5jb2xsYXBzZVdoaXRlc3BhY2UoZGlzcGxheVRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXNwbGF5VGV4dDtcbiAgICB9LFxuXG4gICAgLypcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICogRE9NIGVsZW1lbnQgc2VsZWN0aW9uIGZ1bmN0aW9ucyAqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqL1xuXG4gICAgZ2V0UHJldmlvdXNUZXh0Tm9kZSA6ICh0ZXh0Tm9kZSkgPT4ge1xuICAgICAgICAvL3ZhciBwcmV2aW91c1RleHROb2RlID0gbnVsbDtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSB0ZXh0Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgcGFyZW50VGV4dE5vZGVzID0gRE9NVXRpbC5nZXRUZXh0Tm9kZXMocGFyZW50Tm9kZSk7XG4gICAgICAgIHdoaWxlIChwYXJlbnROb2RlICE9PSBkb2N1bWVudCAmJiBwYXJlbnRUZXh0Tm9kZXMuaW5kZXhPZih0ZXh0Tm9kZSkgPT09IDApIHtcbiAgICAgICAgICAgIHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBwYXJlbnRUZXh0Tm9kZXMgPSBET01VdGlsLmdldFRleHROb2RlcyhwYXJlbnROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50VGV4dE5vZGVzLmluZGV4T2YodGV4dE5vZGUpID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBwYXJlbnRUZXh0Tm9kZXNbcGFyZW50VGV4dE5vZGVzLmluZGV4T2YodGV4dE5vZGUpLTFdO1xuICAgIH0sXG5cbiAgICAvLyByZXR1cm4gYWxsIHRleHQgbm9kZXMgY29udGFpbmVkIHdpdGhpbiBhIG5vZGVcbiAgICBnZXRUZXh0Tm9kZXMgOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBET01VdGlsLmdldERlc2NlbmRhbnRzKG5vZGUpLmZpbHRlcihmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuVEVYVF9OT0RFO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gcmV0dXJuIGFsbCB0ZXh0IG5vZGVzIGluIGEgbGlzdCBvZiBub2Rlc1xuICAgIGZpbHRlclRleHROb2RlcyA6IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IHdpbmRvdy5Ob2RlLlRFWFRfTk9ERTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIHJldHVybiBhbGwgRUxFTUVOVF9OT0RFIG5vZGVzIGluIGEgbGlzdCBvZiBub2Rlc1xuICAgIGdldEVsZW1lbnROb2RlcyA6IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IHdpbmRvdy5Ob2RlLkVMRU1FTlRfTk9ERTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIHJldHVybiBhbGwgbm9uLXRleHQgbm9kZXMgaW4gYSBsaXN0IG9mIG5vZGVzXG4gICAgZ2V0Tm9uVGV4dE5vZGVzIDogZnVuY3Rpb24obm9kZXMpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSAhPT0gd2luZG93Lk5vZGUuVEVYVF9OT0RFO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gcmV0dXJuIGFsbCBhbmNlc3RvciBub2RlcyBvZiBhIG5vZGVcbiAgICBnZXRBbmNlc3RvcnMgOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgYW5jZXN0b3JzID0gW107XG4gICAgICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUubm9kZVR5cGUgIT09IHdpbmRvdy5Ob2RlLkRPQ1VNRU5UX05PREUpIHtcbiAgICAgICAgICAgIGFuY2VzdG9ycyA9IERPTVV0aWwuZ2V0QW5jZXN0b3JzKHBhcmVudE5vZGUpO1xuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2gocGFyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ycztcbiAgICB9LFxuXG4gICAgLy8gcmV0dXJuIGFsbCBkZXNjZW5kYW50IG5vZGVzIG9mIGEgbm9kZVxuICAgIC8vIHVzaW5nIGRlcHRoLWZpcnN0IHRyYXZlcnNhbFxuICAgIGdldERlc2NlbmRhbnRzIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgZGVzY2VuZGFudHMgPSBbXTtcbiAgICAgICAgaWYgKCFub2RlLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NlbmRhbnRzO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgLy8gb25seSBjb25zaWRlciBlbGVtZW50IGFuZCB0ZXh0IG5vZGVzLCBpLmUuIHR5cGVzIDEgYW5kIDNcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGUubm9kZVR5cGUgPD0gMykge1xuICAgICAgICAgICAgICAgIGRlc2NlbmRhbnRzLnB1c2goY2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICBkZXNjZW5kYW50cyA9IGRlc2NlbmRhbnRzLmNvbmNhdChET01VdGlsLmdldERlc2NlbmRhbnRzKGNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc2NlbmRhbnRzO1xuICAgIH0sXG5cbiAgICAvLyBzZWxlY3QgYWxsIGxhcmdlciBlbGVtZW50cyAoZXhjbHVkaW5nIGRvY3VtZW50KVxuICAgIGZpbmRDb21tb25BbmNlc3RvcnMgOiBmdW5jdGlvbihzdGFydE5vZGUsIGVuZE5vZGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0QW5jZXN0b3JzID0gRE9NVXRpbC5nZXRBbmNlc3RvcnMoc3RhcnROb2RlKTtcbiAgICAgICAgc3RhcnRBbmNlc3RvcnMucHVzaChzdGFydE5vZGUpO1xuICAgICAgICB2YXIgY3Vyck5vZGUgPSBlbmROb2RlO1xuICAgICAgICAvLyBmaW5kIGxvd2VzdCBjb21tb24gYW5jZXN0b3JcbiAgICAgICAgd2hpbGUgKCEoc3RhcnRBbmNlc3RvcnMuaW5jbHVkZXMoY3Vyck5vZGUpKSkge1xuICAgICAgICAgICAgY3Vyck5vZGUgPSBjdXJyTm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiBlbGVtZW50cyBmcm9tIGxvd2VzdCBjb21tb24gYW5jZXN0b3IgdXB3YXJkc1xuICAgICAgICByZXR1cm4gc3RhcnRBbmNlc3RvcnMuc2xpY2UoMCwgc3RhcnRBbmNlc3RvcnMuaW5kZXhPZihjdXJyTm9kZSkrMSk7XG4gICAgfSxcblxuICAgIGRldGVybWluZU5vZGVNaW1lVHlwZSA6IChub2RlKSA9PiB7XG4gICAgICAgIHZhciBtaW1ldHlwZSA9IG51bGw7XG4gICAgICAgIC8vIDEuIGlnbm9yZSBub24tZWxlbWVudCwgbm9uLXRleHQgbm9kZXNcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDMgJiYgbm9kZS5ub2RlVHlwZSAhPT0gMSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAvLyAyLiBjaGVjayBpZiBub2RlIGhhcyBjaGlsZHJlblxuICAgICAgICBpZiAoIW5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgLy8gb3B0aW9uczpcbiAgICAgICAgICAgIHN3aXRjaChub2RlLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgIGNhc2UgXCIjdGV4dFwiOlxuICAgICAgICAgICAgICAgIG1pbWV0eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ0FOVkFTXCI6XG4gICAgICAgICAgICAgICAgbWltZXR5cGUgPSBcImltYWdlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiSU1HXCI6XG4gICAgICAgICAgICAgICAgbWltZXR5cGUgPSBcImltYWdlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVklERU9cIjpcbiAgICAgICAgICAgICAgICBtaW1ldHlwZSA9IFwidmlkZW9cIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbWltZXR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7bm9kZTogbm9kZSwgbWltZXR5cGU6IG1pbWV0eXBlfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjaGlsZE1pbWVUeXBlcyA9IG5vZGUuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERPTVV0aWwuZGV0ZXJtaW5lTm9kZU1pbWVUeXBlKGNoaWxkTm9kZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1pbWV0eXBlID0gY2hpbGRNaW1lVHlwZXNbMF07XG4gICAgICAgICAgICBsZXQgc2luZ2xlVHlwZSA9IGNoaWxkTWltZVR5cGVzLmV2ZXJ5KChjaGlsZE1pbWVUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hpbGRNaW1lVHlwZSA9PT0gbWltZXR5cGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChzaW5nbGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbWV0eXBlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtaXhlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDJhLiBpZiBoYXMgY2hpbGRyZW4sIGRldGVybWluZSBtaW1ldHlwZSBvZiBjaGlsZHJlblxuICAgICAgICAvLyAyXG4gICAgfVxuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBET01VdGlsO1xuXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWhCQTtBQUNBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBMU1BO0FBOE1BIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util/DOMUtil.js\n");

/***/ }),

/***/ "./src/util/FRBRooUtil.js":
/*!********************************!*\
  !*** ./src/util/FRBRooUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rdflib/lib/parse */ \"./node_modules/rdflib/lib/parse.js\");\n/* harmony import */ var rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rdflib/lib/namespace */ \"./node_modules/rdflib/lib/namespace.js\");\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rdflib/lib/data-factory */ \"./node_modules/rdflib/lib/data-factory.js\");\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rdflib */ \"./node_modules/rdflib/lib/index.js\");\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rdflib__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./VocabularyUtil.js */ \"./src/util/VocabularyUtil.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\n\n\n\nvar FRBRooUtil = {\n  store: null,\n  RDF: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"),\n  RDFS: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2000/01/rdf-schema#\"),\n  importPredicate: \"http://www.w3.org/2002/07/owl#imports\",\n  baseAnnotationOntologyURL: null,\n  newStore: function newStore() {\n    return rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph();\n  },\n  getAlternateLinkRefs: function getAlternateLinkRefs() {\n    var alternateLinks = FRBRooUtil.getAlternateLinks();\n    return alternateLinks.map(function (link) {\n      return {\n        url: link.href,\n        mimeType: link.type\n      };\n    });\n  },\n  getAlternateLinks: function getAlternateLinks() {\n    var linkElements = document.getElementsByTagName(\"link\");\n    return Array.from(linkElements).filter(FRBRooUtil.isAlternateLink);\n  },\n  isAlternateLink: function isAlternateLink(node) {\n    if (node.tagName !== \"LINK\") {\n      return false;\n    } else if (!node.getAttribute(\"rel\") || node.getAttribute(\"rel\") !== \"alternate\") {\n      return false;\n    } else if (!node.getAttribute(\"href\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  storeExternalResources: function storeExternalResources(store, frbrooRelationsString, baseURI, mimeType) {\n    if (!store) {\n      throw Error(\"Invalid store given\");\n    }\n\n    try {\n      rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(frbrooRelationsString, store, baseURI, mimeType);\n    } catch (error) {\n      console.log(error);\n      throw error;\n    }\n  },\n  findExternalObjectRelations: function findExternalObjectRelations(resourceStore, resource, relationType) {\n    var objectNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    return resourceStore.triples.statementsMatching(undefined, relationNode, objectNode);\n  },\n  findExternalSubjectRelations: function findExternalSubjectRelations(resourceStore, resource, relationType) {\n    var subjectNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    return resourceStore.triples.statementsMatching(subjectNode, relationNode, undefined);\n  },\n  findExternalResources: function findExternalResources(resourceStore, resources, relationType) {\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    try {\n      var resourceList = ensureList(resources);\n      var relations = [];\n      resourceList.forEach(function (resource) {\n        var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n        var subjectRelations = resourceStore.triples.statementsMatching(node, relationNode, undefined);\n        var objectRelations = resourceStore.triples.statementsMatching(undefined, relationNode, node);\n        relations = relations.concat(subjectRelations, objectRelations);\n      });\n      return relations;\n    } catch (error) {\n      console.log(error);\n      return null;\n    }\n  },\n  gatherResourceProperties: function gatherResourceProperties(store, resource) {\n    var properties = {\n      rdfaResource: resource\n    };\n    var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var subjectRelations = store.statementsMatching(node, undefined, undefined);\n    var objectRelations = store.statementsMatching(undefined, undefined, node);\n    subjectRelations.forEach(function (relation) {\n      if (relation.predicate.value === FRBRooUtil.RDF('type').value) {\n        FRBRooUtil.addRDFTypeProperty(properties, relation.object.value);\n      }\n    });\n\n    if (subjectRelations.length + objectRelations.length === 0) {\n      return null;\n    } else {\n      return properties;\n    }\n  },\n  getRDFTypeLabels: function getRDFTypeLabels(typeList) {\n    if (!Array.isArray(typeList)) {\n      return null;\n    }\n\n    return typeList.map(function (rdfType) {\n      var index = rdfType.indexOf(\"#\");\n      return rdfType.substr(index);\n    });\n  },\n  getRDFType: function getRDFType(resourceStore, resource) {\n    var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var triples = resourceStore.triples.statementsMatching(node, FRBRooUtil.RDF('type'), undefined);\n\n    if (triples.length > 0) {\n      return triples.map(function (triple) {\n        return triple.object.value;\n      });\n    }\n\n    return null;\n  },\n  addRDFTypeProperty: function addRDFTypeProperty(properties, rdfType) {\n    if (!rdfType) {\n      return true;\n    } else if (properties.hasOwnProperty(\"rdfType\") === false) {\n      properties.rdfType = rdfType;\n      return true;\n    } else if (typeof properties.rdfType === \"string\") {\n      properties.rdfType = [properties.rdfType, rdfType];\n    } else if (Array.isArray(properties.rdfType)) {\n      properties.rdfType.push(rdfType);\n    } else {\n      throw Error(\"properties.rdfType should be string or array\");\n    }\n  },\n  indexResources: function indexResources() {\n    return new Promise(function (resolve, reject) {\n      var resourceData = {};\n      _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].indexRDFa().then(function (resourceIndex) {\n        resourceData.resourceIndex = resourceIndex;\n        var resources = Object.keys(resourceIndex.resources);\n        FRBRooUtil.loadVocabularies().then(FRBRooUtil.loadExternalResources).then(function (resourceStore) {\n          resourceData.resourceStore = resourceStore;\n          resourceData.representedResourceMap = FRBRooUtil.mapRepresentedResources(resourceStore, resources);\n          resourceData.externalResourceIndex = FRBRooUtil.indexExternalResources(resourceStore, resources);\n          return resolve(resourceData);\n        }, function (error) {\n          reject(error);\n        });\n      });\n    });\n  },\n  indexExternalResources: function indexExternalResources(resourceStore, resources) {\n    var externalResourceIndex = {};\n\n    if (!resourceStore.triples) {\n      return externalResourceIndex;\n    }\n\n    resources.forEach(function (resource) {\n      var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n      if (relation) {\n        externalResourceIndex[resource] = relation;\n        var rdfType = FRBRooUtil.getRDFType(resourceStore, resource);\n        externalResourceIndex[resource].type = \"external\";\n        externalResourceIndex[resource].rdfType = rdfType;\n        externalResourceIndex[resource].rdfTypeLabel = FRBRooUtil.getRDFTypeLabels(rdfType);\n\n        if (!externalResourceIndex.hasOwnProperty(relation.parentResource)) {\n          FRBRooUtil.indexExternalParentResource(resourceStore, externalResourceIndex, relation.parentResource);\n        }\n      }\n    });\n    return externalResourceIndex;\n  },\n  indexExternalParentResource: function indexExternalParentResource(resourceStore, index, resource) {\n    if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"parentResource does not exist: \" + resource);\n    }\n\n    var resourceInfo = {\n      resource: resource,\n      type: \"external\"\n    };\n    resourceInfo.rdfType = FRBRooUtil.getRDFType(resourceStore, resource);\n    resourceInfo.rdfTypeLabel = FRBRooUtil.getRDFTypeLabels(resourceInfo.rdfType);\n    index[resource];\n    var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (relation) {\n      resourceInfo.parentResource = relation.parentResource;\n      resourceInfo.relation = relation.relation;\n\n      if (!index.hasOwnProperty(relation.parentResource)) {\n        FRBRooUtil.indexExternalParentResource(resourceStore, index, relation.parentResource);\n      }\n    }\n\n    index[resource] = resourceInfo;\n  },\n  mapRepresentedResources: function mapRepresentedResources(resourceStore, resources) {\n    if (!resources || !Array.isArray(resources)) {\n      throw Error(\"resources should be an array of resource IDs\");\n    }\n\n    var representedResourceIndex = {};\n\n    if (!resourceStore.triples) {\n      return representedResourceIndex;\n    }\n\n    resources.forEach(function (resource) {\n      FRBRooUtil.mapRepresentedObjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapRepresentedSubjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapFragmentObjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapFragmentSubjectResources(resourceStore, resource, representedResourceIndex);\n    });\n    return representedResourceIndex;\n  },\n  mapFragmentObjectResources: function mapFragmentObjectResources(resourceStore, resource, representedResourceIndex) {\n    var hasFragmentIn = FRBRooUtil.baseAnnotationOntologyURL + \"#hasFragmentIn\";\n    var hasFragmentOf = FRBRooUtil.baseAnnotationOntologyURL + \"#hasFragmentOf\";\n    var objectRelations = FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasFragmentIn);\n    var objectRelations = objectRelations.concat(FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasFragmentOf));\n\n    if (objectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, objectRelations[0]);\n    }\n  },\n  mapFragmentSubjectResources: function mapFragmentSubjectResources(resourceStore, resource, representedResourceIndex) {\n    var isFragmentIn = FRBRooUtil.baseAnnotationOntologyURL + \"#isFragmentIn\";\n    var isFragmentOf = FRBRooUtil.baseAnnotationOntologyURL + \"#isFragmentOf\";\n    var subjectRelations = FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isFragmentIn);\n    var subjectRelations = subjectRelations.concat(FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isFragmentOf));\n\n    if (subjectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, subjectRelations[0]);\n    }\n  },\n  mapRepresentedObjectResources: function mapRepresentedObjectResources(resourceStore, resource, representedResourceIndex) {\n    var hasRepresentation = FRBRooUtil.baseAnnotationOntologyURL + \"#hasRepresentation\";\n    var objectRelations = FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasRepresentation);\n\n    if (objectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, objectRelations[0]);\n    }\n  },\n  mapRepresentedSubjectResources: function mapRepresentedSubjectResources(resourceStore, resource, representedResourceIndex) {\n    var isRepresentationOf = FRBRooUtil.baseAnnotationOntologyURL + \"#isRepresentationOf\";\n    var subjectRelations = FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isRepresentationOf);\n\n    if (subjectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, subjectRelations[0]);\n    }\n  },\n  addIndexEntry: function addIndexEntry(index, resource, relation) {\n    if (typeof resource !== \"string\") {\n      throw Error(\"resource must be a string\");\n    } else if (!FRBRooUtil.isRDFTriple(relation)) {\n      throw Error(\"relation must be RDF triple\");\n    }\n\n    var entry = null;\n\n    if (relation.subject.value === resource) {\n      entry = {\n        resource: resource,\n        relation: relation.predicate.value,\n        parentResource: relation.object.value\n      };\n    } else if (relation.object.value === resource) {\n      entry = {\n        resource: resource,\n        relation: relation.predicate.value,\n        parentResource: relation.subject.value\n      };\n    } else {\n      throw Error(\"relation must contain resource as subject or object\");\n    }\n\n    index[resource] = entry;\n    return true;\n  },\n  isRDFTriple: function isRDFTriple(triple) {\n    if (!triple || _typeof(triple) !== \"object\") {\n      return false;\n    } else if (!triple.hasOwnProperty(\"subject\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else if (!triple.hasOwnProperty(\"predicate\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else if (!triple.hasOwnProperty(\"object\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  loadExternalResources: function loadExternalResources(vocabularyStore) {\n    return new Promise(function (resolve, reject) {\n      var externalStore = {\n        doIndexing: false,\n        triples: null,\n        relations: null\n      };\n      var externalResourcesRefs = FRBRooUtil.getAlternateLinkRefs();\n\n      if (!FRBRooUtil.hasExternalResources()) {\n        return resolve(externalStore);\n      }\n\n      externalStore.relations = FRBRooUtil.getRelations(vocabularyStore); //let externalResourcesRefs = FRBRooUtil.getAlternateLinkRefs();\n\n      externalStore.triples = FRBRooUtil.newStore();\n      externalResourcesRefs.forEach(function (ref) {\n        externalStore.doIndexing = true;\n        FRBRooUtil.readExternalResources(ref.url).then(function (externalRelations) {\n          externalStore.externalRelations = externalRelations;\n\n          try {\n            FRBRooUtil.storeExternalResources(externalStore.triples, externalRelations, ref.url, ref.mimeType);\n          } catch (error) {\n            console.log(\"Error storing external resources:\", externalRelations);\n            return reject(error);\n          }\n\n          return resolve(externalStore);\n        }, function (error) {\n          console.log(\"Error reading external resources for URL\", ref);\n          console.log(error);\n          return reject(error);\n        });\n      });\n    });\n  },\n  hasExternalResources: function hasExternalResources() {\n    var externalResourcesRefs = FRBRooUtil.getAlternateLinkRefs();\n    return externalResourcesRefs.length > 0;\n  },\n  checkExternalResources: function checkExternalResources() {\n    return new Promise(function (resolve, reject) {\n      var externalResourcesRefs = FRBRooUtil.getAlternateLinkRefs();\n      var data = {\n        doIndexing: false,\n        externalStore: null\n      };\n\n      if (externalResourcesRefs.length === 0) {\n        return resolve(data);\n      }\n\n      data.externalStore = FRBRooUtil.newStore();\n      externalResourcesRefs.forEach(function (ref) {\n        data.doIndexing = true;\n        FRBRooUtil.readExternalResources(ref.url).then(function (externalRelations) {\n          try {\n            FRBRooUtil.storeExternalResources(data.externalStore, externalRelations, ref.url, ref.mimeType);\n          } catch (error) {\n            console.log(\"Error storing external resources:\", externalRelations);\n            return reject(error);\n          }\n\n          return resolve(data);\n        }, function (error) {\n          console.log(\"Error reading external resources for URL\", ref);\n          console.log(error);\n          return reject(error);\n        });\n      });\n    });\n  },\n  readExternalResources: function readExternalResources(url) {\n    return new Promise(function (resolve, reject) {\n      var status = null;\n      fetch(url, {\n        method: \"GET\"\n      }).then(function (response) {\n        if (!response.ok) {\n          var error = new Error('HTTP error, status = ' + response.status);\n          reject(error);\n        }\n\n        return response.text();\n      }).then(function (relationsData) {\n        return resolve(relationsData);\n      }).catch(function (error) {\n        console.log(\"Error reading specified vocabulary:\", url);\n        console.log(error);\n        return reject(error);\n      });\n    });\n  },\n  readVocabularies: function readVocabularies(vocabularyURLs) {\n    return new Promise(function (resolve, reject) {\n      var vocabularies = [];\n\n      if (vocabularyURLs.length === 0) {\n        return resolve(vocabularies);\n      }\n\n      var lastURL = vocabularyURLs[vocabularyURLs.length - 1];\n      vocabularyURLs.forEach(function (vocabularyURL) {\n        FRBRooUtil.readVocabulary(vocabularyURL).then(function (vocabulary) {\n          vocabularies.push(vocabulary);\n\n          if (vocabularyURL === lastURL) {\n            return resolve(vocabularies);\n          }\n        }, function (error) {\n          return reject(error);\n        });\n      });\n    });\n  },\n  readVocabulary: function readVocabulary(vocabularyURL) {\n    if (vocabularyURL.endsWith(\"#\")) {\n      vocabularyURL = vocabularyURL.substring(0, vocabularyURL.length - 1);\n    }\n\n    var vocab = {\n      url: vocabularyURL,\n      data: null\n    };\n    return new Promise(function (resolve, reject) {\n      FRBRooUtil.readExternalResources(vocabularyURL).then(function (data) {\n        vocab.data = data;\n        return resolve(vocab);\n      }, function (error) {\n        return reject(error);\n      });\n    });\n  },\n  makeVocabularyStore: function makeVocabularyStore(vocabularies) {\n    if (!Array.isArray(vocabularies)) {\n      throw Error(\"cannot make store if no vocabulary data is given\");\n    }\n\n    var store = {\n      vocabularies: [],\n      triples: rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph()\n    };\n    vocabularies.forEach(function (vocabulary) {\n      if (!FRBRooUtil.isValidVocabulary(vocabulary)) {\n        throw Error(\"Invalid vocabulary data! vocabulary should have properties 'url' and 'data'\");\n      }\n\n      store.vocabularies.push(vocabulary.url);\n      rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(vocabulary.data, store.triples, vocabulary.url, undefined);\n    });\n    return store;\n  },\n  isValidVocabulary: function isValidVocabulary(vocabulary) {\n    if (!vocabulary || _typeof(vocabulary) !== \"object\") {\n      return false;\n    } else if (!vocabulary.hasOwnProperty(\"url\")) {\n      return false;\n    } else if (!vocabulary.hasOwnProperty(\"data\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  isValidVocabularyStore: function isValidVocabularyStore(vocabularyStore) {\n    if (!vocabularyStore || _typeof(vocabularyStore) !== \"object\") {\n      return false;\n    } else if (!vocabularyStore.hasOwnProperty(\"vocabularies\")) {\n      return false;\n    } else if (!vocabularyStore.hasOwnProperty(\"triples\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  getHierarchicalRelations: function getHierarchicalRelations(vocabularyStore) {\n    var relations = {\n      includes: [],\n      isIncludedIn: []\n    };\n    var includesProperty = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getLabelClass(vocabularyStore.triples, 'includes');\n\n    if (!includesProperty) {\n      throw Error(\"Cannot read base includes property\");\n    }\n\n    var includesSubProperties = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getDescendantProperties(vocabularyStore.triples, includesProperty);\n    relations.includes.push(includesProperty);\n    relations.includes = relations.includes.concat(includesSubProperties);\n    relations.includes.forEach(function (includeProperty) {\n      var inverse = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInverseOfRelation(vocabularyStore.triples, includeProperty);\n\n      if (inverse) {\n        relations.isIncludedIn.push(inverse);\n      }\n    });\n    return relations;\n  },\n  getRepresentationRelations: function getRepresentationRelations(vocabularyStore) {\n    var relations = {\n      hasRepresentation: [],\n      isRepresentationOf: []\n    };\n    var hasRepresentationProperty = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getLabelClass(vocabularyStore.triples, 'hasRepresentation');\n    var hasRepresentationSubProperties = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getDescendantProperties(vocabularyStore.triples, hasRepresentationProperty);\n    relations.hasRepresentation.push(hasRepresentationProperty);\n    relations.hasRepresentation = relations.hasRepresentation.concat(hasRepresentationSubProperties);\n    relations.isRepresentationOf = relations.hasRepresentation.map(function (includeProperty) {\n      return _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInverseOfRelation(vocabularyStore.triples, includeProperty);\n    });\n    return relations;\n  },\n  getRelations: function getRelations(vocabularyStore) {\n    var relations = {};\n    var hierarchicalRelations = FRBRooUtil.getHierarchicalRelations(vocabularyStore);\n    var representationRelations = FRBRooUtil.getRepresentationRelations(vocabularyStore);\n    relations.includes = hierarchicalRelations.includes;\n    relations.isIncludedIn = hierarchicalRelations.isIncludedIn;\n    relations.hasRepresentation = representationRelations.hasRepresentation;\n    relations.isRepresentationOf = representationRelations.isRepresentationOf;\n    return relations;\n  },\n  getImports: function getImports(vocabularyStore) {\n    if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n      throw Error(\"Invalid vocabularyStore given\");\n    }\n\n    if (!FRBRooUtil.baseAnnotationOntologyURL) {\n      console.log(\"No baseAnnotationOntologyURL set!\");\n    }\n\n    var imports = [];\n    vocabularyStore.vocabularies.forEach(function (vocabularyURL) {\n      var vocabularyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(vocabularyURL);\n      var importNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(FRBRooUtil.importPredicate);\n      var triples = vocabularyStore.triples.each(vocabularyNode, importNode, undefined);\n\n      if (vocabularyURL === FRBRooUtil.baseAnnotationOntologyURL) {\n        // don't import beyond the base annotation ontology\n        return;\n      }\n\n      triples.forEach(function (triple) {\n        if (!vocabularyStore.vocabularies.includes(triple.value)) {\n          imports.push(triple.value);\n        }\n      });\n    });\n    return imports;\n  },\n  updateVocabularyStore: function updateVocabularyStore(vocabularyStore, vocabularies) {\n    if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n      throw Error(\"Invalid vocabularyStore given\");\n    } else if (!vocabularies || !Array.isArray(vocabularies)) {\n      throw Error(\"vocabularies must be an Array of vocabulary objects\");\n    } else {\n      vocabularies.forEach(function (vocabulary) {\n        if (!FRBRooUtil.isValidVocabulary(vocabulary)) {\n          throw Error(\"Invalid vocabulary data! vocabulary should have properties 'url' and 'data'\");\n        }\n      });\n    }\n\n    vocabularies.forEach(function (vocabulary) {\n      vocabularyStore.vocabularies.push(vocabulary.url);\n      rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(vocabulary.data, vocabularyStore.triples, vocabulary.url, undefined);\n    });\n  },\n  importAndUpdate: function importAndUpdate(vocabularyStore) {\n    return new Promise(function (resolve, reject) {\n      if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n        throw Error(\"Invalid vocabularyStore given\");\n      }\n\n      var imports = FRBRooUtil.getImports(vocabularyStore);\n\n      if (imports.length > 0) {\n        FRBRooUtil.readVocabularies(imports).then(function (vocabularies) {\n          FRBRooUtil.updateVocabularyStore(vocabularyStore, vocabularies);\n          FRBRooUtil.importAndUpdate(vocabularyStore).then(function (done) {\n            return resolve(done);\n          }, function (error) {\n            return reject(error);\n          });\n        }, function (error) {\n          return reject(error);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n  },\n  loadVocabularies: function loadVocabularies() {\n    return new Promise(function (resolve, reject) {\n      var vocabData = [];\n      var vocabularyURLs = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].listVocabularyURLs(document);\n\n      if (vocabularyURLs.length === 0) {\n        var vocabularyStore = FRBRooUtil.makeVocabularyStore([]);\n        return resolve(vocabularyStore);\n      }\n\n      FRBRooUtil.readVocabularies(vocabularyURLs).then(function (vocabularies) {\n        var vocabularyStore = FRBRooUtil.makeVocabularyStore(vocabularies); // iterate: 1) get imports, 2) update store\n\n        FRBRooUtil.importAndUpdate(vocabularyStore).then(function (updatesDone) {\n          return resolve(vocabularyStore);\n        }, function (error) {\n          return reject(error);\n        });\n      }, function (error) {\n        return reject(error);\n      });\n    });\n  },\n  determineResourceHierarchy: function determineResourceHierarchy(resourceStore, resource) {\n    if (!resourceStore) {\n      throw Error(\"Invalid resourceStore\");\n    } else if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"Unknown resource\");\n    }\n\n    var parentRelation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (parentRelation) {\n      return parentRelation;\n    } else {\n      return {\n        resource: resource\n      };\n    }\n  },\n  resourceGetParentRelation: function resourceGetParentRelation(resourceStore, resource) {\n    // assumption is that in external resources store, each resource has a single parent.\n    var relation = null;\n    relation = FRBRooUtil.resourceGetParentSubjectRelation(resourceStore, resource);\n\n    if (relation) {\n      return relation;\n    }\n\n    relation = FRBRooUtil.resourceGetParentObjectRelation(resourceStore, resource);\n    return relation;\n  },\n  resourceHasParent: function resourceHasParent(resourceStore, resource) {\n    if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"Unknown resource\");\n    }\n\n    var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (relation) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  resourceGetParentSubjectRelation: function resourceGetParentSubjectRelation(resourceStore, resource) {\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var parentRelation = null;\n    resourceStore.relations.includes.some(function (relation) {\n      var relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relation);\n      var subject = resourceStore.triples.any(undefined, relationNode, resourceNode);\n\n      if (subject) {\n        parentRelation = {\n          resource: resource,\n          parentResource: subject.value,\n          relation: relation\n        };\n      }\n    });\n    return parentRelation;\n  },\n  resourceGetParentObjectRelation: function resourceGetParentObjectRelation(resourceStore, resource) {\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var parentRelation = null;\n    resourceStore.relations.isIncludedIn.some(function (relation) {\n      var relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relation);\n      var object = resourceStore.triples.any(resourceNode, relationNode, undefined);\n\n      if (object) {\n        parentRelation = {\n          resource: resource,\n          parentResource: object.value,\n          relation: relation\n        };\n      }\n    });\n    return parentRelation;\n  },\n  isKnownResource: function isKnownResource(resourceStore, resource) {\n    if (!resourceStore) {\n      throw Error(\"Invalid resourceStore\");\n    } else if (!resource) {\n      throw Error(\"Invalid resource\");\n    }\n\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var triple = resourceStore.triples.any(resourceNode, undefined, undefined);\n\n    if (!triple) {\n      triple = resourceStore.triples.any(undefined, undefined, resourceNode);\n    }\n\n    return triple !== undefined;\n  },\n  addBreadcrumb: function addBreadcrumb(labelTrail, source) {\n    labelTrail.unshift({\n      id: source.data.rdfaResource,\n      property: source.data.rdfaProperty,\n      type: source.data.rdfTypeLabel\n    });\n  },\n  createBreadcrumbTrail: function createBreadcrumbTrail(resourceId, externalResourceIndex) {\n    var rootFound = false;\n    var labelTrail = [];\n\n    while (!rootFound) {\n      if (!externalResourceIndex.hasOwnProperty(resourceId)) {\n        throw Error(\"Invalid resource\");\n      }\n\n      var data = externalResourceIndex[resourceId];\n      var breadcrumb = {};\n      breadcrumb.type = data.rdfType;\n      breadcrumb.id = resourceId;\n      breadcrumb.property = data.relation;\n      labelTrail.unshift(breadcrumb);\n\n      if (resourceId !== undefined && data.hasOwnProperty(\"parentResource\")) {\n        resourceId = data.parentResource;\n      } else {\n        rootFound = true;\n      }\n    }\n\n    return labelTrail;\n  }\n};\n\nvar ensureList = function ensureList(resources) {\n  if (typeof resources === \"string\" || resources instanceof String) {\n    return [resources];\n  } else if (Array.isArray(resources)) {\n    return resources;\n  } else {\n    throw Error(\"resources should be string or list of strings\");\n  }\n};\n\nvar invalidVocabularyStore = function invalidVocabularyStore(vocabularyStore) {\n  throw Error(\"Invalid vocabularyStore given\");\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FRBRooUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9GUkJSb29VdGlsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL3V0aWwvRlJCUm9vVXRpbC5qcz9iNDA3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBwYXJzZSBmcm9tIFwicmRmbGliL2xpYi9wYXJzZVwiO1xuaW1wb3J0IE5hbWVzcGFjZSBmcm9tIFwicmRmbGliL2xpYi9uYW1lc3BhY2VcIjtcbmltcG9ydCBEYXRhRmFjdG9yeSBmcm9tIFwicmRmbGliL2xpYi9kYXRhLWZhY3RvcnlcIjtcbmltcG9ydCByZGYgZnJvbSBcInJkZmxpYlwiO1xuaW1wb3J0IFJERmFVdGlsIGZyb20gXCIuL1JERmFVdGlsLmpzXCI7XG5pbXBvcnQgVm9jYWJ1bGFyeVV0aWwgZnJvbSBcIi4vVm9jYWJ1bGFyeVV0aWwuanNcIjtcblxuY29uc3QgRlJCUm9vVXRpbCA9IHtcblxuICAgIHN0b3JlIDogbnVsbCxcbiAgICBSREYgOiBOYW1lc3BhY2UoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjXCIpLFxuICAgIFJERlMgOiBOYW1lc3BhY2UoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzAxL3JkZi1zY2hlbWEjXCIpLFxuXG4gICAgaW1wb3J0UHJlZGljYXRlIDogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCNpbXBvcnRzXCIsXG4gICAgYmFzZUFubm90YXRpb25PbnRvbG9neVVSTCA6IG51bGwsXG5cbiAgICBuZXdTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIERhdGFGYWN0b3J5LmdyYXBoKCk7XG4gICAgfSxcblxuICAgIGdldEFsdGVybmF0ZUxpbmtSZWZzKCkge1xuICAgICAgICBsZXQgYWx0ZXJuYXRlTGlua3MgPSBGUkJSb29VdGlsLmdldEFsdGVybmF0ZUxpbmtzKCk7XG4gICAgICAgIHJldHVybiBhbHRlcm5hdGVMaW5rcy5tYXAoKGxpbmspID0+IHsgcmV0dXJuIHt1cmw6IGxpbmsuaHJlZiwgbWltZVR5cGU6IGxpbmsudHlwZSB9fSk7XG4gICAgfSxcblxuICAgIGdldEFsdGVybmF0ZUxpbmtzKCkge1xuICAgICAgICBsZXQgbGlua0VsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShsaW5rRWxlbWVudHMpLmZpbHRlcihGUkJSb29VdGlsLmlzQWx0ZXJuYXRlTGluayk7XG4gICAgfSxcblxuICAgIGlzQWx0ZXJuYXRlTGluayhub2RlKSB7XG4gICAgICAgIGlmIChub2RlLnRhZ05hbWUgIT09IFwiTElOS1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIW5vZGUuZ2V0QXR0cmlidXRlKFwicmVsXCIpIHx8IG5vZGUuZ2V0QXR0cmlidXRlKFwicmVsXCIpICE9PSBcImFsdGVybmF0ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIW5vZGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcmVFeHRlcm5hbFJlc291cmNlcyhzdG9yZSwgZnJicm9vUmVsYXRpb25zU3RyaW5nLCBiYXNlVVJJLCBtaW1lVHlwZSkge1xuICAgICAgICBpZiAoIXN0b3JlKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgc3RvcmUgZ2l2ZW5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBhcnNlKGZyYnJvb1JlbGF0aW9uc1N0cmluZywgc3RvcmUsIGJhc2VVUkksIG1pbWVUeXBlKTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZmluZEV4dGVybmFsT2JqZWN0UmVsYXRpb25zKHJlc291cmNlU3RvcmUsIHJlc291cmNlLCByZWxhdGlvblR5cGUpIHtcbiAgICAgICAgbGV0IG9iamVjdE5vZGUgPSByZGYuc3ltKHJlc291cmNlKTtcbiAgICAgICAgdmFyIHJlbGF0aW9uTm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlbGF0aW9uVHlwZSkge1xuICAgICAgICAgICAgcmVsYXRpb25Ob2RlID0gcmRmLnN5bShyZWxhdGlvblR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvdXJjZVN0b3JlLnRyaXBsZXMuc3RhdGVtZW50c01hdGNoaW5nKHVuZGVmaW5lZCwgcmVsYXRpb25Ob2RlLCBvYmplY3ROb2RlKTtcbiAgICB9LFxuXG4gICAgZmluZEV4dGVybmFsU3ViamVjdFJlbGF0aW9ucyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgcmVsYXRpb25UeXBlKSB7XG4gICAgICAgIGxldCBzdWJqZWN0Tm9kZSA9IHJkZi5zeW0ocmVzb3VyY2UpO1xuICAgICAgICB2YXIgcmVsYXRpb25Ob2RlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAocmVsYXRpb25UeXBlKSB7XG4gICAgICAgICAgICByZWxhdGlvbk5vZGUgPSByZGYuc3ltKHJlbGF0aW9uVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc291cmNlU3RvcmUudHJpcGxlcy5zdGF0ZW1lbnRzTWF0Y2hpbmcoc3ViamVjdE5vZGUsIHJlbGF0aW9uTm9kZSwgdW5kZWZpbmVkKTtcbiAgICB9LFxuXG4gICAgZmluZEV4dGVybmFsUmVzb3VyY2VzKHJlc291cmNlU3RvcmUsIHJlc291cmNlcywgcmVsYXRpb25UeXBlKSB7XG4gICAgICAgIHZhciByZWxhdGlvbk5vZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChyZWxhdGlvblR5cGUpIHtcbiAgICAgICAgICAgIHJlbGF0aW9uTm9kZSA9IHJkZi5zeW0ocmVsYXRpb25UeXBlKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHJlc291cmNlTGlzdCA9IGVuc3VyZUxpc3QocmVzb3VyY2VzKTtcbiAgICAgICAgICAgIHZhciByZWxhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIHJlc291cmNlTGlzdC5mb3JFYWNoKChyZXNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBub2RlID0gcmRmLnN5bShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmplY3RSZWxhdGlvbnMgPSByZXNvdXJjZVN0b3JlLnRyaXBsZXMuc3RhdGVtZW50c01hdGNoaW5nKG5vZGUsIHJlbGF0aW9uTm9kZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0UmVsYXRpb25zID0gcmVzb3VyY2VTdG9yZS50cmlwbGVzLnN0YXRlbWVudHNNYXRjaGluZyh1bmRlZmluZWQsIHJlbGF0aW9uTm9kZSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgcmVsYXRpb25zID0gcmVsYXRpb25zLmNvbmNhdChzdWJqZWN0UmVsYXRpb25zLCBvYmplY3RSZWxhdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVsYXRpb25zO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2F0aGVyUmVzb3VyY2VQcm9wZXJ0aWVzKHN0b3JlLCByZXNvdXJjZSkge1xuICAgICAgICBsZXQgcHJvcGVydGllcyA9IHtyZGZhUmVzb3VyY2U6IHJlc291cmNlfTtcbiAgICAgICAgbGV0IG5vZGUgPSByZGYuc3ltKHJlc291cmNlKTtcbiAgICAgICAgdmFyIHN1YmplY3RSZWxhdGlvbnMgPSBzdG9yZS5zdGF0ZW1lbnRzTWF0Y2hpbmcobm9kZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICB2YXIgb2JqZWN0UmVsYXRpb25zID0gc3RvcmUuc3RhdGVtZW50c01hdGNoaW5nKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBub2RlKTtcbiAgICAgICAgc3ViamVjdFJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKHJlbGF0aW9uLnByZWRpY2F0ZS52YWx1ZSA9PT0gRlJCUm9vVXRpbC5SREYoJ3R5cGUnKS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIEZSQlJvb1V0aWwuYWRkUkRGVHlwZVByb3BlcnR5KHByb3BlcnRpZXMsIHJlbGF0aW9uLm9iamVjdC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGlmIChzdWJqZWN0UmVsYXRpb25zLmxlbmd0aCArIG9iamVjdFJlbGF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0UkRGVHlwZUxhYmVscyh0eXBlTGlzdCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodHlwZUxpc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZUxpc3QubWFwKChyZGZUeXBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSByZGZUeXBlLmluZGV4T2YoXCIjXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJkZlR5cGUuc3Vic3RyKGluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldFJERlR5cGUocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UpIHtcbiAgICAgICAgbGV0IG5vZGUgPSByZGYuc3ltKHJlc291cmNlKTtcbiAgICAgICAgdmFyIHRyaXBsZXMgPSByZXNvdXJjZVN0b3JlLnRyaXBsZXMuc3RhdGVtZW50c01hdGNoaW5nKG5vZGUsIEZSQlJvb1V0aWwuUkRGKCd0eXBlJyksIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0cmlwbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cmlwbGVzLm1hcCgodHJpcGxlKSA9PiB7IHJldHVybiB0cmlwbGUub2JqZWN0LnZhbHVlOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgYWRkUkRGVHlwZVByb3BlcnR5KHByb3BlcnRpZXMsIHJkZlR5cGUpIHtcbiAgICAgICAgaWYgKCFyZGZUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KFwicmRmVHlwZVwiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXMucmRmVHlwZSA9IHJkZlR5cGU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvcGVydGllcy5yZGZUeXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnJkZlR5cGUgPSBbcHJvcGVydGllcy5yZGZUeXBlLCByZGZUeXBlXTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHByb3BlcnRpZXMucmRmVHlwZSkpe1xuICAgICAgICAgICAgcHJvcGVydGllcy5yZGZUeXBlLnB1c2gocmRmVHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInByb3BlcnRpZXMucmRmVHlwZSBzaG91bGQgYmUgc3RyaW5nIG9yIGFycmF5XCIpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGluZGV4UmVzb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc291cmNlRGF0YSA9IHt9XG4gICAgICAgICAgICBSREZhVXRpbC5pbmRleFJERmEoKS50aGVuKChyZXNvdXJjZUluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VEYXRhLnJlc291cmNlSW5kZXggPSByZXNvdXJjZUluZGV4O1xuICAgICAgICAgICAgICAgIGxldCByZXNvdXJjZXMgPSBPYmplY3Qua2V5cyhyZXNvdXJjZUluZGV4LnJlc291cmNlcyk7XG4gICAgICAgICAgICAgICAgRlJCUm9vVXRpbC5sb2FkVm9jYWJ1bGFyaWVzKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oRlJCUm9vVXRpbC5sb2FkRXh0ZXJuYWxSZXNvdXJjZXMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNvdXJjZVN0b3JlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZURhdGEucmVzb3VyY2VTdG9yZSA9IHJlc291cmNlU3RvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZURhdGEucmVwcmVzZW50ZWRSZXNvdXJjZU1hcCA9IEZSQlJvb1V0aWwubWFwUmVwcmVzZW50ZWRSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlRGF0YS5leHRlcm5hbFJlc291cmNlSW5kZXggPSBGUkJSb29VdGlsLmluZGV4RXh0ZXJuYWxSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc291cmNlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGluZGV4RXh0ZXJuYWxSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2VzKSB7XG4gICAgICAgIGxldCBleHRlcm5hbFJlc291cmNlSW5kZXggPSB7fTtcbiAgICAgICAgaWYgKCFyZXNvdXJjZVN0b3JlLnRyaXBsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFJlc291cmNlSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb3VyY2VzLmZvckVhY2goKHJlc291cmNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVsYXRpb24gPSBGUkJSb29VdGlsLnJlc291cmNlR2V0UGFyZW50UmVsYXRpb24ocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UpO1xuICAgICAgICAgICAgaWYgKHJlbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZUluZGV4W3Jlc291cmNlXSA9IHJlbGF0aW9uO1xuICAgICAgICAgICAgICAgIGxldCByZGZUeXBlID0gRlJCUm9vVXRpbC5nZXRSREZUeXBlKHJlc291cmNlU3RvcmUsIHJlc291cmNlKTtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFJlc291cmNlSW5kZXhbcmVzb3VyY2VdLnR5cGUgPSBcImV4dGVybmFsXCI7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZUluZGV4W3Jlc291cmNlXS5yZGZUeXBlID0gcmRmVHlwZTtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFJlc291cmNlSW5kZXhbcmVzb3VyY2VdLnJkZlR5cGVMYWJlbCA9IEZSQlJvb1V0aWwuZ2V0UkRGVHlwZUxhYmVscyhyZGZUeXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWV4dGVybmFsUmVzb3VyY2VJbmRleC5oYXNPd25Qcm9wZXJ0eShyZWxhdGlvbi5wYXJlbnRSZXNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgRlJCUm9vVXRpbC5pbmRleEV4dGVybmFsUGFyZW50UmVzb3VyY2UocmVzb3VyY2VTdG9yZSwgZXh0ZXJuYWxSZXNvdXJjZUluZGV4LCByZWxhdGlvbi5wYXJlbnRSZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGV4dGVybmFsUmVzb3VyY2VJbmRleDtcbiAgICB9LFxuXG4gICAgaW5kZXhFeHRlcm5hbFBhcmVudFJlc291cmNlKHJlc291cmNlU3RvcmUsIGluZGV4LCByZXNvdXJjZSkge1xuICAgICAgICBpZiAoIUZSQlJvb1V0aWwuaXNLbm93blJlc291cmNlKHJlc291cmNlU3RvcmUsIHJlc291cmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IgKFwicGFyZW50UmVzb3VyY2UgZG9lcyBub3QgZXhpc3Q6IFwiICsgcmVzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXNvdXJjZUluZm8gPSB7cmVzb3VyY2U6IHJlc291cmNlLCB0eXBlOiBcImV4dGVybmFsXCJ9O1xuICAgICAgICByZXNvdXJjZUluZm8ucmRmVHlwZSA9IEZSQlJvb1V0aWwuZ2V0UkRGVHlwZShyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSk7XG4gICAgICAgIHJlc291cmNlSW5mby5yZGZUeXBlTGFiZWwgPSBGUkJSb29VdGlsLmdldFJERlR5cGVMYWJlbHMocmVzb3VyY2VJbmZvLnJkZlR5cGUpO1xuICAgICAgICBpbmRleFtyZXNvdXJjZV1cbiAgICAgICAgbGV0IHJlbGF0aW9uID0gRlJCUm9vVXRpbC5yZXNvdXJjZUdldFBhcmVudFJlbGF0aW9uKHJlc291cmNlU3RvcmUsIHJlc291cmNlKTtcbiAgICAgICAgaWYgKHJlbGF0aW9uKSB7XG4gICAgICAgICAgICByZXNvdXJjZUluZm8ucGFyZW50UmVzb3VyY2UgPSByZWxhdGlvbi5wYXJlbnRSZXNvdXJjZTtcbiAgICAgICAgICAgIHJlc291cmNlSW5mby5yZWxhdGlvbiA9IHJlbGF0aW9uLnJlbGF0aW9uO1xuICAgICAgICAgICAgaWYgKCFpbmRleC5oYXNPd25Qcm9wZXJ0eShyZWxhdGlvbi5wYXJlbnRSZXNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICBGUkJSb29VdGlsLmluZGV4RXh0ZXJuYWxQYXJlbnRSZXNvdXJjZShyZXNvdXJjZVN0b3JlLCBpbmRleCwgcmVsYXRpb24ucGFyZW50UmVzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGluZGV4W3Jlc291cmNlXSA9IHJlc291cmNlSW5mbztcbiAgICB9LFxuXG4gICAgbWFwUmVwcmVzZW50ZWRSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2VzKSB7XG4gICAgICAgIGlmICghcmVzb3VyY2VzIHx8ICFBcnJheS5pc0FycmF5KHJlc291cmNlcykpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicmVzb3VyY2VzIHNob3VsZCBiZSBhbiBhcnJheSBvZiByZXNvdXJjZSBJRHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleCA9IHt9O1xuICAgICAgICBpZiAoIXJlc291cmNlU3RvcmUudHJpcGxlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXNvdXJjZXMuZm9yRWFjaCgocmVzb3VyY2UpID0+IHtcbiAgICAgICAgICAgIEZSQlJvb1V0aWwubWFwUmVwcmVzZW50ZWRPYmplY3RSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleCk7XG4gICAgICAgICAgICBGUkJSb29VdGlsLm1hcFJlcHJlc2VudGVkU3ViamVjdFJlc291cmNlcyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgcmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4KTtcbiAgICAgICAgICAgIEZSQlJvb1V0aWwubWFwRnJhZ21lbnRPYmplY3RSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleCk7XG4gICAgICAgICAgICBGUkJSb29VdGlsLm1hcEZyYWdtZW50U3ViamVjdFJlc291cmNlcyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgcmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXByZXNlbnRlZFJlc291cmNlSW5kZXg7XG4gICAgfSxcblxuICAgIG1hcEZyYWdtZW50T2JqZWN0UmVzb3VyY2VzKHJlc291cmNlU3RvcmUsIHJlc291cmNlLCByZXByZXNlbnRlZFJlc291cmNlSW5kZXgpIHtcbiAgICAgICAgbGV0IGhhc0ZyYWdtZW50SW4gPSBGUkJSb29VdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwgKyBcIiNoYXNGcmFnbWVudEluXCI7XG4gICAgICAgIGxldCBoYXNGcmFnbWVudE9mID0gRlJCUm9vVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMICsgXCIjaGFzRnJhZ21lbnRPZlwiO1xuICAgICAgICB2YXIgb2JqZWN0UmVsYXRpb25zID0gRlJCUm9vVXRpbC5maW5kRXh0ZXJuYWxPYmplY3RSZWxhdGlvbnMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIGhhc0ZyYWdtZW50SW4pO1xuICAgICAgICB2YXIgb2JqZWN0UmVsYXRpb25zID0gb2JqZWN0UmVsYXRpb25zLmNvbmNhdChGUkJSb29VdGlsLmZpbmRFeHRlcm5hbE9iamVjdFJlbGF0aW9ucyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgaGFzRnJhZ21lbnRPZikpO1xuICAgICAgICBpZiAob2JqZWN0UmVsYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIEZSQlJvb1V0aWwuYWRkSW5kZXhFbnRyeShyZXByZXNlbnRlZFJlc291cmNlSW5kZXgsIHJlc291cmNlLCBvYmplY3RSZWxhdGlvbnNbMF0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1hcEZyYWdtZW50U3ViamVjdFJlc291cmNlcyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgcmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4KSB7XG4gICAgICAgIGxldCBpc0ZyYWdtZW50SW4gPSBGUkJSb29VdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwgKyBcIiNpc0ZyYWdtZW50SW5cIjtcbiAgICAgICAgbGV0IGlzRnJhZ21lbnRPZiA9IEZSQlJvb1V0aWwuYmFzZUFubm90YXRpb25PbnRvbG9neVVSTCArIFwiI2lzRnJhZ21lbnRPZlwiO1xuICAgICAgICB2YXIgc3ViamVjdFJlbGF0aW9ucyA9IEZSQlJvb1V0aWwuZmluZEV4dGVybmFsU3ViamVjdFJlbGF0aW9ucyhyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSwgaXNGcmFnbWVudEluKTtcbiAgICAgICAgdmFyIHN1YmplY3RSZWxhdGlvbnMgPSBzdWJqZWN0UmVsYXRpb25zLmNvbmNhdChGUkJSb29VdGlsLmZpbmRFeHRlcm5hbFN1YmplY3RSZWxhdGlvbnMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIGlzRnJhZ21lbnRPZikpO1xuICAgICAgICBpZiAoc3ViamVjdFJlbGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBGUkJSb29VdGlsLmFkZEluZGV4RW50cnkocmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4LCByZXNvdXJjZSwgc3ViamVjdFJlbGF0aW9uc1swXSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWFwUmVwcmVzZW50ZWRPYmplY3RSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleCkge1xuICAgICAgICBsZXQgaGFzUmVwcmVzZW50YXRpb24gPSBGUkJSb29VdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwgKyBcIiNoYXNSZXByZXNlbnRhdGlvblwiO1xuICAgICAgICBsZXQgb2JqZWN0UmVsYXRpb25zID0gRlJCUm9vVXRpbC5maW5kRXh0ZXJuYWxPYmplY3RSZWxhdGlvbnMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIGhhc1JlcHJlc2VudGF0aW9uKTtcbiAgICAgICAgaWYgKG9iamVjdFJlbGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBGUkJSb29VdGlsLmFkZEluZGV4RW50cnkocmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4LCByZXNvdXJjZSwgb2JqZWN0UmVsYXRpb25zWzBdKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBtYXBSZXByZXNlbnRlZFN1YmplY3RSZXNvdXJjZXMocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UsIHJlcHJlc2VudGVkUmVzb3VyY2VJbmRleCkge1xuICAgICAgICBsZXQgaXNSZXByZXNlbnRhdGlvbk9mID0gRlJCUm9vVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMICsgXCIjaXNSZXByZXNlbnRhdGlvbk9mXCI7XG4gICAgICAgIGxldCBzdWJqZWN0UmVsYXRpb25zID0gRlJCUm9vVXRpbC5maW5kRXh0ZXJuYWxTdWJqZWN0UmVsYXRpb25zKHJlc291cmNlU3RvcmUsIHJlc291cmNlLCBpc1JlcHJlc2VudGF0aW9uT2YpO1xuICAgICAgICBpZiAoc3ViamVjdFJlbGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBGUkJSb29VdGlsLmFkZEluZGV4RW50cnkocmVwcmVzZW50ZWRSZXNvdXJjZUluZGV4LCByZXNvdXJjZSwgc3ViamVjdFJlbGF0aW9uc1swXSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWRkSW5kZXhFbnRyeShpbmRleCwgcmVzb3VyY2UsIHJlbGF0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicmVzb3VyY2UgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgfSBlbHNlIGlmICghRlJCUm9vVXRpbC5pc1JERlRyaXBsZShyZWxhdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicmVsYXRpb24gbXVzdCBiZSBSREYgdHJpcGxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVudHJ5ID0gbnVsbDtcbiAgICAgICAgaWYgKHJlbGF0aW9uLnN1YmplY3QudmFsdWUgPT09IHJlc291cmNlKSB7XG4gICAgICAgICAgICBlbnRyeSA9IHtyZXNvdXJjZTogcmVzb3VyY2UsIHJlbGF0aW9uOiByZWxhdGlvbi5wcmVkaWNhdGUudmFsdWUsIHBhcmVudFJlc291cmNlOiByZWxhdGlvbi5vYmplY3QudmFsdWV9O1xuICAgICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uLm9iamVjdC52YWx1ZSA9PT0gcmVzb3VyY2UpIHtcbiAgICAgICAgICAgIGVudHJ5ID0ge3Jlc291cmNlOiByZXNvdXJjZSwgcmVsYXRpb246IHJlbGF0aW9uLnByZWRpY2F0ZS52YWx1ZSwgcGFyZW50UmVzb3VyY2U6IHJlbGF0aW9uLnN1YmplY3QudmFsdWV9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJyZWxhdGlvbiBtdXN0IGNvbnRhaW4gcmVzb3VyY2UgYXMgc3ViamVjdCBvciBvYmplY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXhbcmVzb3VyY2VdID0gZW50cnk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBpc1JERlRyaXBsZSh0cmlwbGUpIHtcbiAgICAgICAgaWYgKCF0cmlwbGUgfHwgdHlwZW9mIHRyaXBsZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF0cmlwbGUuaGFzT3duUHJvcGVydHkoXCJzdWJqZWN0XCIpIHx8ICF0cmlwbGUuc3ViamVjdC5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRyaXBsZS5oYXNPd25Qcm9wZXJ0eShcInByZWRpY2F0ZVwiKSB8fCAhdHJpcGxlLnN1YmplY3QuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF0cmlwbGUuaGFzT3duUHJvcGVydHkoXCJvYmplY3RcIikgfHwgIXRyaXBsZS5zdWJqZWN0Lmhhc093blByb3BlcnR5KFwidmFsdWVcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGxvYWRFeHRlcm5hbFJlc291cmNlcyh2b2NhYnVsYXJ5U3RvcmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZhciBleHRlcm5hbFN0b3JlID0ge2RvSW5kZXhpbmc6IGZhbHNlLCB0cmlwbGVzOiBudWxsLCByZWxhdGlvbnM6IG51bGx9O1xuICAgICAgICAgICAgbGV0IGV4dGVybmFsUmVzb3VyY2VzUmVmcyA9IEZSQlJvb1V0aWwuZ2V0QWx0ZXJuYXRlTGlua1JlZnMoKTtcbiAgICAgICAgICAgIGlmICghRlJCUm9vVXRpbC5oYXNFeHRlcm5hbFJlc291cmNlcygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZXh0ZXJuYWxTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHRlcm5hbFN0b3JlLnJlbGF0aW9ucyA9IEZSQlJvb1V0aWwuZ2V0UmVsYXRpb25zKHZvY2FidWxhcnlTdG9yZSk7XG4gICAgICAgICAgICAvL2xldCBleHRlcm5hbFJlc291cmNlc1JlZnMgPSBGUkJSb29VdGlsLmdldEFsdGVybmF0ZUxpbmtSZWZzKCk7XG4gICAgICAgICAgICBleHRlcm5hbFN0b3JlLnRyaXBsZXMgPSBGUkJSb29VdGlsLm5ld1N0b3JlKCk7XG4gICAgICAgICAgICBleHRlcm5hbFJlc291cmNlc1JlZnMuZm9yRWFjaCgocmVmKSA9PiB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxTdG9yZS5kb0luZGV4aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBGUkJSb29VdGlsLnJlYWRFeHRlcm5hbFJlc291cmNlcyhyZWYudXJsKS50aGVuKChleHRlcm5hbFJlbGF0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBleHRlcm5hbFN0b3JlLmV4dGVybmFsUmVsYXRpb25zID0gZXh0ZXJuYWxSZWxhdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBGUkJSb29VdGlsLnN0b3JlRXh0ZXJuYWxSZXNvdXJjZXMoZXh0ZXJuYWxTdG9yZS50cmlwbGVzLCBleHRlcm5hbFJlbGF0aW9ucywgcmVmLnVybCwgcmVmLm1pbWVUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBzdG9yaW5nIGV4dGVybmFsIHJlc291cmNlczpcIiwgZXh0ZXJuYWxSZWxhdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZXh0ZXJuYWxTdG9yZSk7XG4gICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgcmVhZGluZyBleHRlcm5hbCByZXNvdXJjZXMgZm9yIFVSTFwiLCByZWYpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGhhc0V4dGVybmFsUmVzb3VyY2VzKCkge1xuICAgICAgICBsZXQgZXh0ZXJuYWxSZXNvdXJjZXNSZWZzID0gRlJCUm9vVXRpbC5nZXRBbHRlcm5hdGVMaW5rUmVmcygpO1xuICAgICAgICByZXR1cm4gKGV4dGVybmFsUmVzb3VyY2VzUmVmcy5sZW5ndGggPiAwKTtcbiAgICB9LFxuXG4gICAgY2hlY2tFeHRlcm5hbFJlc291cmNlcygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCBleHRlcm5hbFJlc291cmNlc1JlZnMgPSBGUkJSb29VdGlsLmdldEFsdGVybmF0ZUxpbmtSZWZzKCk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtkb0luZGV4aW5nOiBmYWxzZSwgZXh0ZXJuYWxTdG9yZTogbnVsbH07XG4gICAgICAgICAgICBpZiAoZXh0ZXJuYWxSZXNvdXJjZXNSZWZzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5leHRlcm5hbFN0b3JlID0gRlJCUm9vVXRpbC5uZXdTdG9yZSgpO1xuICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZXNSZWZzLmZvckVhY2goKHJlZikgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEuZG9JbmRleGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgRlJCUm9vVXRpbC5yZWFkRXh0ZXJuYWxSZXNvdXJjZXMocmVmLnVybCkudGhlbigoZXh0ZXJuYWxSZWxhdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZSQlJvb1V0aWwuc3RvcmVFeHRlcm5hbFJlc291cmNlcyhkYXRhLmV4dGVybmFsU3RvcmUsIGV4dGVybmFsUmVsYXRpb25zLCByZWYudXJsLCByZWYubWltZVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIHN0b3JpbmcgZXh0ZXJuYWwgcmVzb3VyY2VzOlwiLCBleHRlcm5hbFJlbGF0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIGV4dGVybmFsIHJlc291cmNlcyBmb3IgVVJMXCIsIHJlZik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVhZEV4dGVybmFsUmVzb3VyY2VzKHVybCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdmFyIHN0YXR1cyA9IG51bGw7XG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCJcbiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoJ0hUVFAgZXJyb3IsIHN0YXR1cyA9ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgfSkudGhlbigocmVsYXRpb25zRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlbGF0aW9uc0RhdGEpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIHNwZWNpZmllZCB2b2NhYnVsYXJ5OlwiLCB1cmwpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVhZFZvY2FidWxhcmllcyh2b2NhYnVsYXJ5VVJMcykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHZvY2FidWxhcmllcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHZvY2FidWxhcnlVUkxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZvY2FidWxhcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGFzdFVSTCA9IHZvY2FidWxhcnlVUkxzW3ZvY2FidWxhcnlVUkxzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdm9jYWJ1bGFyeVVSTHMuZm9yRWFjaCgodm9jYWJ1bGFyeVVSTCkgPT4ge1xuICAgICAgICAgICAgICAgIEZSQlJvb1V0aWwucmVhZFZvY2FidWxhcnkodm9jYWJ1bGFyeVVSTCkudGhlbigodm9jYWJ1bGFyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2b2NhYnVsYXJpZXMucHVzaCh2b2NhYnVsYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvY2FidWxhcnlVUkwgPT09IGxhc3RVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZvY2FidWxhcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlYWRWb2NhYnVsYXJ5KHZvY2FidWxhcnlVUkwpIHtcbiAgICAgICAgaWYgKHZvY2FidWxhcnlVUkwuZW5kc1dpdGgoXCIjXCIpKSB7XG4gICAgICAgICAgICB2b2NhYnVsYXJ5VVJMID0gdm9jYWJ1bGFyeVVSTC5zdWJzdHJpbmcoMCwgdm9jYWJ1bGFyeVVSTC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdm9jYWIgPSB7XG4gICAgICAgICAgICB1cmw6IHZvY2FidWxhcnlVUkwsXG4gICAgICAgICAgICBkYXRhOiBudWxsXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIEZSQlJvb1V0aWwucmVhZEV4dGVybmFsUmVzb3VyY2VzKHZvY2FidWxhcnlVUkwpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB2b2NhYi5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2b2NhYik7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgbWFrZVZvY2FidWxhcnlTdG9yZSh2b2NhYnVsYXJpZXMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZvY2FidWxhcmllcykpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiY2Fubm90IG1ha2Ugc3RvcmUgaWYgbm8gdm9jYWJ1bGFyeSBkYXRhIGlzIGdpdmVuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdG9yZSA9IHt2b2NhYnVsYXJpZXM6IFtdLCB0cmlwbGVzOiBEYXRhRmFjdG9yeS5ncmFwaCgpfTtcbiAgICAgICAgdm9jYWJ1bGFyaWVzLmZvckVhY2goKHZvY2FidWxhcnkpID0+IHtcbiAgICAgICAgICAgIGlmICghRlJCUm9vVXRpbC5pc1ZhbGlkVm9jYWJ1bGFyeSh2b2NhYnVsYXJ5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCB2b2NhYnVsYXJ5IGRhdGEhIHZvY2FidWxhcnkgc2hvdWxkIGhhdmUgcHJvcGVydGllcyAndXJsJyBhbmQgJ2RhdGEnXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmUudm9jYWJ1bGFyaWVzLnB1c2godm9jYWJ1bGFyeS51cmwpO1xuICAgICAgICAgICAgcGFyc2Uodm9jYWJ1bGFyeS5kYXRhLCBzdG9yZS50cmlwbGVzLCB2b2NhYnVsYXJ5LnVybCwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH0sXG5cbiAgICBpc1ZhbGlkVm9jYWJ1bGFyeSh2b2NhYnVsYXJ5KSB7XG4gICAgICAgIGlmICghdm9jYWJ1bGFyeSB8fCB0eXBlb2Ygdm9jYWJ1bGFyeSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF2b2NhYnVsYXJ5Lmhhc093blByb3BlcnR5KFwidXJsXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIXZvY2FidWxhcnkuaGFzT3duUHJvcGVydHkoXCJkYXRhXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpc1ZhbGlkVm9jYWJ1bGFyeVN0b3JlKHZvY2FidWxhcnlTdG9yZSkge1xuICAgICAgICBpZiAoIXZvY2FidWxhcnlTdG9yZSB8fCB0eXBlb2Ygdm9jYWJ1bGFyeVN0b3JlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIXZvY2FidWxhcnlTdG9yZS5oYXNPd25Qcm9wZXJ0eShcInZvY2FidWxhcmllc1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF2b2NhYnVsYXJ5U3RvcmUuaGFzT3duUHJvcGVydHkoXCJ0cmlwbGVzXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRIaWVyYXJjaGljYWxSZWxhdGlvbnModm9jYWJ1bGFyeVN0b3JlKSB7XG4gICAgICAgIGxldCByZWxhdGlvbnMgPSB7aW5jbHVkZXM6IFtdLCBpc0luY2x1ZGVkSW46IFtdfTtcbiAgICAgICAgbGV0IGluY2x1ZGVzUHJvcGVydHkgPSBWb2NhYnVsYXJ5VXRpbC5nZXRMYWJlbENsYXNzKHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLCAnaW5jbHVkZXMnKTtcbiAgICAgICAgaWYgKCFpbmNsdWRlc1Byb3BlcnR5KSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCByZWFkIGJhc2UgaW5jbHVkZXMgcHJvcGVydHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluY2x1ZGVzU3ViUHJvcGVydGllcyA9IFZvY2FidWxhcnlVdGlsLmdldERlc2NlbmRhbnRQcm9wZXJ0aWVzKHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLCBpbmNsdWRlc1Byb3BlcnR5KTtcbiAgICAgICAgcmVsYXRpb25zLmluY2x1ZGVzLnB1c2goaW5jbHVkZXNQcm9wZXJ0eSk7XG4gICAgICAgIHJlbGF0aW9ucy5pbmNsdWRlcyA9IHJlbGF0aW9ucy5pbmNsdWRlcy5jb25jYXQoaW5jbHVkZXNTdWJQcm9wZXJ0aWVzKTtcbiAgICAgICAgcmVsYXRpb25zLmluY2x1ZGVzLmZvckVhY2goKGluY2x1ZGVQcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgbGV0IGludmVyc2UgPSBWb2NhYnVsYXJ5VXRpbC5nZXRJbnZlcnNlT2ZSZWxhdGlvbih2b2NhYnVsYXJ5U3RvcmUudHJpcGxlcywgaW5jbHVkZVByb3BlcnR5KTtcbiAgICAgICAgICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRpb25zLmlzSW5jbHVkZWRJbi5wdXNoKGludmVyc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlbGF0aW9ucztcbiAgICB9LFxuXG4gICAgZ2V0UmVwcmVzZW50YXRpb25SZWxhdGlvbnModm9jYWJ1bGFyeVN0b3JlKSB7XG4gICAgICAgIGxldCByZWxhdGlvbnMgPSB7aGFzUmVwcmVzZW50YXRpb246IFtdLCBpc1JlcHJlc2VudGF0aW9uT2Y6IFtdfTtcbiAgICAgICAgbGV0IGhhc1JlcHJlc2VudGF0aW9uUHJvcGVydHkgPSBWb2NhYnVsYXJ5VXRpbC5nZXRMYWJlbENsYXNzKHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLCAnaGFzUmVwcmVzZW50YXRpb24nKTtcbiAgICAgICAgbGV0IGhhc1JlcHJlc2VudGF0aW9uU3ViUHJvcGVydGllcyA9IFZvY2FidWxhcnlVdGlsLmdldERlc2NlbmRhbnRQcm9wZXJ0aWVzKHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLCBoYXNSZXByZXNlbnRhdGlvblByb3BlcnR5KTtcbiAgICAgICAgcmVsYXRpb25zLmhhc1JlcHJlc2VudGF0aW9uLnB1c2goaGFzUmVwcmVzZW50YXRpb25Qcm9wZXJ0eSk7XG4gICAgICAgIHJlbGF0aW9ucy5oYXNSZXByZXNlbnRhdGlvbiA9IHJlbGF0aW9ucy5oYXNSZXByZXNlbnRhdGlvbi5jb25jYXQoaGFzUmVwcmVzZW50YXRpb25TdWJQcm9wZXJ0aWVzKTtcbiAgICAgICAgcmVsYXRpb25zLmlzUmVwcmVzZW50YXRpb25PZiA9IHJlbGF0aW9ucy5oYXNSZXByZXNlbnRhdGlvbi5tYXAoKGluY2x1ZGVQcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFZvY2FidWxhcnlVdGlsLmdldEludmVyc2VPZlJlbGF0aW9uKHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLCBpbmNsdWRlUHJvcGVydHkpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcmVsYXRpb25zO1xuICAgIH0sXG5cbiAgICBnZXRSZWxhdGlvbnModm9jYWJ1bGFyeVN0b3JlKSB7XG4gICAgICAgIGxldCByZWxhdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IGhpZXJhcmNoaWNhbFJlbGF0aW9ucyA9IEZSQlJvb1V0aWwuZ2V0SGllcmFyY2hpY2FsUmVsYXRpb25zKHZvY2FidWxhcnlTdG9yZSk7XG4gICAgICAgIGxldCByZXByZXNlbnRhdGlvblJlbGF0aW9ucyA9IEZSQlJvb1V0aWwuZ2V0UmVwcmVzZW50YXRpb25SZWxhdGlvbnModm9jYWJ1bGFyeVN0b3JlKTtcbiAgICAgICAgcmVsYXRpb25zLmluY2x1ZGVzID0gaGllcmFyY2hpY2FsUmVsYXRpb25zLmluY2x1ZGVzO1xuICAgICAgICByZWxhdGlvbnMuaXNJbmNsdWRlZEluID0gaGllcmFyY2hpY2FsUmVsYXRpb25zLmlzSW5jbHVkZWRJbjtcbiAgICAgICAgcmVsYXRpb25zLmhhc1JlcHJlc2VudGF0aW9uID0gcmVwcmVzZW50YXRpb25SZWxhdGlvbnMuaGFzUmVwcmVzZW50YXRpb247XG4gICAgICAgIHJlbGF0aW9ucy5pc1JlcHJlc2VudGF0aW9uT2YgPSByZXByZXNlbnRhdGlvblJlbGF0aW9ucy5pc1JlcHJlc2VudGF0aW9uT2Y7XG4gICAgICAgIHJldHVybiByZWxhdGlvbnM7XG4gICAgfSxcblxuICAgIGdldEltcG9ydHModm9jYWJ1bGFyeVN0b3JlKSB7XG4gICAgICAgIGlmICghRlJCUm9vVXRpbC5pc1ZhbGlkVm9jYWJ1bGFyeVN0b3JlKHZvY2FidWxhcnlTdG9yZSkpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCB2b2NhYnVsYXJ5U3RvcmUgZ2l2ZW5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFGUkJSb29VdGlsLmJhc2VBbm5vdGF0aW9uT250b2xvZ3lVUkwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gYmFzZUFubm90YXRpb25PbnRvbG9neVVSTCBzZXQhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbXBvcnRzID0gW107XG4gICAgICAgIHZvY2FidWxhcnlTdG9yZS52b2NhYnVsYXJpZXMuZm9yRWFjaCgodm9jYWJ1bGFyeVVSTCkgPT4ge1xuICAgICAgICAgICAgbGV0IHZvY2FidWxhcnlOb2RlID0gcmRmLnN5bSh2b2NhYnVsYXJ5VVJMKTtcbiAgICAgICAgICAgIGxldCBpbXBvcnROb2RlID0gcmRmLnN5bShGUkJSb29VdGlsLmltcG9ydFByZWRpY2F0ZSk7XG4gICAgICAgICAgICBsZXQgdHJpcGxlcyA9IHZvY2FidWxhcnlTdG9yZS50cmlwbGVzLmVhY2godm9jYWJ1bGFyeU5vZGUsIGltcG9ydE5vZGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAodm9jYWJ1bGFyeVVSTCA9PT0gRlJCUm9vVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMKSB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgaW1wb3J0IGJleW9uZCB0aGUgYmFzZSBhbm5vdGF0aW9uIG9udG9sb2d5XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJpcGxlcy5mb3JFYWNoKCh0cmlwbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZvY2FidWxhcnlTdG9yZS52b2NhYnVsYXJpZXMuaW5jbHVkZXModHJpcGxlLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpbXBvcnRzLnB1c2godHJpcGxlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGltcG9ydHM7XG4gICAgfSxcblxuICAgIHVwZGF0ZVZvY2FidWxhcnlTdG9yZSh2b2NhYnVsYXJ5U3RvcmUsIHZvY2FidWxhcmllcykge1xuICAgICAgICBpZiAoIUZSQlJvb1V0aWwuaXNWYWxpZFZvY2FidWxhcnlTdG9yZSh2b2NhYnVsYXJ5U3RvcmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgdm9jYWJ1bGFyeVN0b3JlIGdpdmVuXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCF2b2NhYnVsYXJpZXMgfHwgIUFycmF5LmlzQXJyYXkodm9jYWJ1bGFyaWVzKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJ2b2NhYnVsYXJpZXMgbXVzdCBiZSBhbiBBcnJheSBvZiB2b2NhYnVsYXJ5IG9iamVjdHNcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2b2NhYnVsYXJpZXMuZm9yRWFjaCgodm9jYWJ1bGFyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghRlJCUm9vVXRpbC5pc1ZhbGlkVm9jYWJ1bGFyeSh2b2NhYnVsYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgdm9jYWJ1bGFyeSBkYXRhISB2b2NhYnVsYXJ5IHNob3VsZCBoYXZlIHByb3BlcnRpZXMgJ3VybCcgYW5kICdkYXRhJ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2b2NhYnVsYXJpZXMuZm9yRWFjaCgodm9jYWJ1bGFyeSkgPT4ge1xuICAgICAgICAgICAgdm9jYWJ1bGFyeVN0b3JlLnZvY2FidWxhcmllcy5wdXNoKHZvY2FidWxhcnkudXJsKTtcbiAgICAgICAgICAgIHBhcnNlKHZvY2FidWxhcnkuZGF0YSwgdm9jYWJ1bGFyeVN0b3JlLnRyaXBsZXMsIHZvY2FidWxhcnkudXJsLCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW1wb3J0QW5kVXBkYXRlKHZvY2FidWxhcnlTdG9yZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFGUkJSb29VdGlsLmlzVmFsaWRWb2NhYnVsYXJ5U3RvcmUodm9jYWJ1bGFyeVN0b3JlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCB2b2NhYnVsYXJ5U3RvcmUgZ2l2ZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaW1wb3J0cyA9IEZSQlJvb1V0aWwuZ2V0SW1wb3J0cyh2b2NhYnVsYXJ5U3RvcmUpO1xuICAgICAgICAgICAgaWYgKGltcG9ydHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIEZSQlJvb1V0aWwucmVhZFZvY2FidWxhcmllcyhpbXBvcnRzKS50aGVuKCh2b2NhYnVsYXJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgRlJCUm9vVXRpbC51cGRhdGVWb2NhYnVsYXJ5U3RvcmUodm9jYWJ1bGFyeVN0b3JlLCB2b2NhYnVsYXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBGUkJSb29VdGlsLmltcG9ydEFuZFVwZGF0ZSh2b2NhYnVsYXJ5U3RvcmUpLnRoZW4oKGRvbmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRvbmUpO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgbG9hZFZvY2FidWxhcmllcygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCB2b2NhYkRhdGEgPSBbXTtcbiAgICAgICAgICAgIGxldCB2b2NhYnVsYXJ5VVJMcyA9IFJERmFVdGlsLmxpc3RWb2NhYnVsYXJ5VVJMcyhkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAodm9jYWJ1bGFyeVVSTHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZvY2FidWxhcnlTdG9yZSA9IEZSQlJvb1V0aWwubWFrZVZvY2FidWxhcnlTdG9yZShbXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodm9jYWJ1bGFyeVN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEZSQlJvb1V0aWwucmVhZFZvY2FidWxhcmllcyh2b2NhYnVsYXJ5VVJMcykudGhlbigodm9jYWJ1bGFyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHZvY2FidWxhcnlTdG9yZSA9IEZSQlJvb1V0aWwubWFrZVZvY2FidWxhcnlTdG9yZSh2b2NhYnVsYXJpZXMpO1xuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGU6IDEpIGdldCBpbXBvcnRzLCAyKSB1cGRhdGUgc3RvcmVcbiAgICAgICAgICAgICAgICBGUkJSb29VdGlsLmltcG9ydEFuZFVwZGF0ZSh2b2NhYnVsYXJ5U3RvcmUpLnRoZW4oKHVwZGF0ZXNEb25lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZvY2FidWxhcnlTdG9yZSk7XG4gICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgZGV0ZXJtaW5lUmVzb3VyY2VIaWVyYXJjaHkocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UpIHtcbiAgICAgICAgaWYgKCFyZXNvdXJjZVN0b3JlKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgcmVzb3VyY2VTdG9yZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmICghRlJCUm9vVXRpbC5pc0tub3duUmVzb3VyY2UocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlVua25vd24gcmVzb3VyY2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudFJlbGF0aW9uID0gRlJCUm9vVXRpbC5yZXNvdXJjZUdldFBhcmVudFJlbGF0aW9uKHJlc291cmNlU3RvcmUsIHJlc291cmNlKTtcbiAgICAgICAgaWYgKHBhcmVudFJlbGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50UmVsYXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge3Jlc291cmNlOiByZXNvdXJjZX07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVzb3VyY2VHZXRQYXJlbnRSZWxhdGlvbihyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSkge1xuICAgICAgICAvLyBhc3N1bXB0aW9uIGlzIHRoYXQgaW4gZXh0ZXJuYWwgcmVzb3VyY2VzIHN0b3JlLCBlYWNoIHJlc291cmNlIGhhcyBhIHNpbmdsZSBwYXJlbnQuXG4gICAgICAgIHZhciByZWxhdGlvbiA9IG51bGw7XG4gICAgICAgIHJlbGF0aW9uID0gRlJCUm9vVXRpbC5yZXNvdXJjZUdldFBhcmVudFN1YmplY3RSZWxhdGlvbihyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSk7XG4gICAgICAgIGlmIChyZWxhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlbGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJlbGF0aW9uID0gRlJCUm9vVXRpbC5yZXNvdXJjZUdldFBhcmVudE9iamVjdFJlbGF0aW9uKHJlc291cmNlU3RvcmUsIHJlc291cmNlKTtcbiAgICAgICAgcmV0dXJuIHJlbGF0aW9uO1xuICAgIH0sXG5cbiAgICByZXNvdXJjZUhhc1BhcmVudChyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSkge1xuICAgICAgICBpZiAoIUZSQlJvb1V0aWwuaXNLbm93blJlc291cmNlKHJlc291cmNlU3RvcmUsIHJlc291cmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJVbmtub3duIHJlc291cmNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWxhdGlvbiA9IEZSQlJvb1V0aWwucmVzb3VyY2VHZXRQYXJlbnRSZWxhdGlvbihyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSlcbiAgICAgICAgaWYgKHJlbGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZXNvdXJjZUdldFBhcmVudFN1YmplY3RSZWxhdGlvbihyZXNvdXJjZVN0b3JlLCByZXNvdXJjZSkge1xuICAgICAgICBsZXQgcmVzb3VyY2VOb2RlID0gcmRmLnN5bShyZXNvdXJjZSk7XG4gICAgICAgIGxldCBwYXJlbnRSZWxhdGlvbiA9IG51bGw7XG4gICAgICAgIHJlc291cmNlU3RvcmUucmVsYXRpb25zLmluY2x1ZGVzLnNvbWUoKHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVsYXRpb25Ob2RlID0gcmRmLnN5bShyZWxhdGlvbik7XG4gICAgICAgICAgICBsZXQgc3ViamVjdCA9IHJlc291cmNlU3RvcmUudHJpcGxlcy5hbnkodW5kZWZpbmVkLCByZWxhdGlvbk5vZGUsIHJlc291cmNlTm9kZSk7XG4gICAgICAgICAgICBpZiAoc3ViamVjdCkge1xuICAgICAgICAgICAgICAgIHBhcmVudFJlbGF0aW9uID0ge3Jlc291cmNlOiByZXNvdXJjZSwgcGFyZW50UmVzb3VyY2U6IHN1YmplY3QudmFsdWUsIHJlbGF0aW9uOiByZWxhdGlvbn07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGFyZW50UmVsYXRpb247XG4gICAgfSxcblxuICAgIHJlc291cmNlR2V0UGFyZW50T2JqZWN0UmVsYXRpb24ocmVzb3VyY2VTdG9yZSwgcmVzb3VyY2UpIHtcbiAgICAgICAgbGV0IHJlc291cmNlTm9kZSA9IHJkZi5zeW0ocmVzb3VyY2UpO1xuICAgICAgICBsZXQgcGFyZW50UmVsYXRpb24gPSBudWxsO1xuICAgICAgICByZXNvdXJjZVN0b3JlLnJlbGF0aW9ucy5pc0luY2x1ZGVkSW4uc29tZSgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgIGxldCByZWxhdGlvbk5vZGUgPSByZGYuc3ltKHJlbGF0aW9uKTtcbiAgICAgICAgICAgIGxldCBvYmplY3QgPSByZXNvdXJjZVN0b3JlLnRyaXBsZXMuYW55KHJlc291cmNlTm9kZSwgcmVsYXRpb25Ob2RlLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgaWYgKG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHBhcmVudFJlbGF0aW9uID0ge3Jlc291cmNlOiByZXNvdXJjZSwgcGFyZW50UmVzb3VyY2U6IG9iamVjdC52YWx1ZSwgcmVsYXRpb246IHJlbGF0aW9ufTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXJlbnRSZWxhdGlvbjtcbiAgICB9LFxuXG4gICAgaXNLbm93blJlc291cmNlKHJlc291cmNlU3RvcmUsIHJlc291cmNlKSB7XG4gICAgICAgIGlmICghcmVzb3VyY2VTdG9yZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHJlc291cmNlU3RvcmVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlc291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgcmVzb3VyY2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc291cmNlTm9kZSA9IHJkZi5zeW0ocmVzb3VyY2UpO1xuICAgICAgICB2YXIgdHJpcGxlID0gcmVzb3VyY2VTdG9yZS50cmlwbGVzLmFueShyZXNvdXJjZU5vZGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCF0cmlwbGUpIHtcbiAgICAgICAgICAgIHRyaXBsZSA9IHJlc291cmNlU3RvcmUudHJpcGxlcy5hbnkodW5kZWZpbmVkLCB1bmRlZmluZWQsIHJlc291cmNlTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyaXBsZSAhPT0gdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBhZGRCcmVhZGNydW1iKGxhYmVsVHJhaWwsIHNvdXJjZSkge1xuICAgICAgICBsYWJlbFRyYWlsLnVuc2hpZnQoe1xuICAgICAgICAgICAgaWQ6IHNvdXJjZS5kYXRhLnJkZmFSZXNvdXJjZSxcbiAgICAgICAgICAgIHByb3BlcnR5OiBzb3VyY2UuZGF0YS5yZGZhUHJvcGVydHksXG4gICAgICAgICAgICB0eXBlOiBzb3VyY2UuZGF0YS5yZGZUeXBlTGFiZWxcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZUJyZWFkY3J1bWJUcmFpbChyZXNvdXJjZUlkLCBleHRlcm5hbFJlc291cmNlSW5kZXgpIHtcbiAgICAgICAgdmFyIHJvb3RGb3VuZCA9IGZhbHNlO1xuICAgICAgICB2YXIgbGFiZWxUcmFpbCA9IFtdO1xuICAgICAgICB3aGlsZSAoIXJvb3RGb3VuZCkge1xuICAgICAgICAgICAgaWYgKCFleHRlcm5hbFJlc291cmNlSW5kZXguaGFzT3duUHJvcGVydHkocmVzb3VyY2VJZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgcmVzb3VyY2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZGF0YSA9IGV4dGVybmFsUmVzb3VyY2VJbmRleFtyZXNvdXJjZUlkXTtcbiAgICAgICAgICAgIHZhciBicmVhZGNydW1iID0ge307XG4gICAgICAgICAgICBicmVhZGNydW1iLnR5cGUgPSBkYXRhLnJkZlR5cGU7XG4gICAgICAgICAgICBicmVhZGNydW1iLmlkID0gcmVzb3VyY2VJZDtcbiAgICAgICAgICAgIGJyZWFkY3J1bWIucHJvcGVydHkgPSBkYXRhLnJlbGF0aW9uO1xuICAgICAgICAgICAgbGFiZWxUcmFpbC51bnNoaWZ0KGJyZWFkY3J1bWIpO1xuICAgICAgICAgICAgaWYgKHJlc291cmNlSWQgIT09IHVuZGVmaW5lZCAmJiBkYXRhLmhhc093blByb3BlcnR5KFwicGFyZW50UmVzb3VyY2VcIikpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZUlkID0gZGF0YS5wYXJlbnRSZXNvdXJjZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9vdEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFiZWxUcmFpbDtcbiAgICB9LFxuXG5cbn1cblxudmFyIGVuc3VyZUxpc3QgPSAocmVzb3VyY2VzKSA9PiB7XG4gICAgaWYgKHR5cGVvZihyZXNvdXJjZXMpID09PSBcInN0cmluZ1wiIHx8IHJlc291cmNlcyBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICByZXR1cm4gW3Jlc291cmNlc107XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc291cmNlcykpIHtcbiAgICAgICAgcmV0dXJuIHJlc291cmNlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBFcnJvcihcInJlc291cmNlcyBzaG91bGQgYmUgc3RyaW5nIG9yIGxpc3Qgb2Ygc3RyaW5nc1wiKTtcbiAgICB9XG59XG5cbnZhciBpbnZhbGlkVm9jYWJ1bGFyeVN0b3JlID0gKHZvY2FidWxhcnlTdG9yZSkgPT4ge1xuICAgIHRocm93IEVycm9yKFwiSW52YWxpZCB2b2NhYnVsYXJ5U3RvcmUgZ2l2ZW5cIik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZSQlJvb1V0aWw7XG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBdHFCQTtBQUNBO0FBMHFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/FRBRooUtil.js\n");

/***/ }),

/***/ "./src/util/RDFaUtil.js":
/*!******************************!*\
  !*** ./src/util/RDFaUtil.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _StringUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StringUtil.js */ \"./src/util/StringUtil.js\");\n\n\n\n // RDFa property names\n//let RDFaAttrs = [\"about\", \"content\", \"datatype\", \"href\", \"property\", \"rel\", \"resource\", \"rev\", \"src\", \"typeof\", \"vocab\"];\n\nvar RDFaAttrs = [\"about\", \"prefix\", \"property\", \"resource\", \"typeof\", \"vocab\"];\nvar RDFaUtil = {\n  /*\n  **************************\n  * Configuration functions *\n  **************************\n  */\n  rdfaIndex: null,\n  setBaseAnnotationOntology: function setBaseAnnotationOntology(url) {\n    RDFaUtil.baseAnnotationOntologyURL = url;\n  },\n  checkBaseAnnotationOntologySet: function checkBaseAnnotationOntologySet() {\n    if (RDFaUtil.baseAnnotationOntologyURL) {\n      return true;\n    } else {\n      throw Error(\"RDFAUtil - baseAnnotationOntologyURL not set\");\n    }\n  },\n  setObserverNodes: function setObserverNodes(observerNodes) {\n    this.observerNodes = Array.from(observerNodes);\n  },\n  resetIgnoreNodes: function resetIgnoreNodes() {\n    RDFaUtil.checkBaseAnnotationOntologySet();\n    var prefixIndex = {};\n    var vocab = null;\n    RDFaUtil.setIgnoreNodes(document, vocab, prefixIndex);\n    return false;\n  },\n  setIgnoreNodes: function setIgnoreNodes(node, vocab, prefixIndex) {\n    RDFaUtil.checkBaseAnnotationOntologySet();\n    RDFaUtil.indexPrefixes(node, prefixIndex);\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n\n    if (attrs.hasOwnProperty(\"vocab\")) {\n      vocab = attrs.vocab;\n    }\n\n    RDFaUtil.setIgnoreNode(node, vocab, prefixIndex);\n\n    if (node.hasChildNodes()) {\n      node.childNodes.forEach(function (childNode) {\n        RDFaUtil.setIgnoreNodes(childNode, vocab, prefixIndex);\n      });\n    }\n  },\n  setIgnoreNode: function setIgnoreNode(node, vocab, prefixIndex) {\n    RDFaUtil.checkBaseAnnotationOntologySet();\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n\n    if (attrs.hasOwnProperty(\"typeof\")) {\n      var rdfType = RDFaUtil.expandRDFaTerm(attrs.typeof, vocab, prefixIndex);\n      node.rdfaIgnorable = RDFaUtil.isIgnoreClass(rdfType) ? true : false;\n    }\n  },\n  isIgnoreClass: function isIgnoreClass(url) {\n    RDFaUtil.checkBaseAnnotationOntologySet();\n    return url === RDFaUtil.baseAnnotationOntologyURL + \"#IgnorableElement\";\n  },\n  isIgnoreNode: function isIgnoreNode(node) {\n    RDFaUtil.checkBaseAnnotationOntologySet();\n    return node.rdfaIgnorable;\n  },\n\n  /*\n  **************************\n  * RDFa related functions *\n  **************************\n  */\n  // Return RDFa attributes of an element.\n  getRDFaAttributes: function getRDFaAttributes(node) {\n    var nodeRDFaAttrs = {};\n\n    if (node.nodeType === window.Node.ELEMENT_NODE) {\n      RDFaAttrs.forEach(function (attr) {\n        if (node.hasAttribute(attr)) {\n          nodeRDFaAttrs[attr] = node.getAttribute(attr);\n        }\n      });\n    }\n\n    return nodeRDFaAttrs;\n  },\n  isRDFaIgnoreNode: function isRDFaIgnoreNode(node) {\n    return node.hasOwnProperty(\"rdfaIgnorable\") && node.rdfaIgnorable;\n  },\n  isSelectWholeNode: function isSelectWholeNode(node) {\n    var nodeRDFaAttrs = RDFaUtil.getRDFaAttributes(node);\n    return nodeRDFaAttrs.property === \"selectWholeElement\" ? true : false;\n  },\n  hasRDFaAttributes: function hasRDFaAttributes(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return Object.keys(attrs).length > 0 && !RDFaUtil.isRDFaIgnoreNode(node) ? true : false;\n  },\n  hasRDFaType: function hasRDFaType(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"typeof\");\n  },\n  hasRDFaPrefix: function hasRDFaPrefix(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"prefix\");\n  },\n  hasRDFaResource: function hasRDFaResource(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"resource\") || attrs.hasOwnProperty(\"about\") ? true : false;\n  },\n  getRDFaPrefix: function getRDFaPrefix(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    var prefix = [];\n\n    if (!attrs.hasOwnProperty(\"prefix\")) {\n      return null;\n    } else {\n      var parts = attrs[\"prefix\"].split(\" \");\n\n      if (parts.length % 2 !== 0) {\n        return null;\n      } else {\n        for (var i = 0; i < parts.length; i = i + 2) {\n          var vocPrefix = parts[i].substring(0, parts[i].length - 1);\n          var vocURL = parts[i + 1];\n          prefix.push({\n            vocabularyPrefix: vocPrefix,\n            vocabularyURL: vocURL\n          });\n        }\n\n        return prefix;\n      }\n    }\n  },\n  getRDFaIgnoreNodes: function getRDFaIgnoreNodes(node) {\n    return _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDescendants(node).filter(RDFaUtil.isRDFaIgnoreNode);\n  },\n  getSelectWholeNodes: function getSelectWholeNodes(node) {\n    return _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDescendants(node).filter(RDFaUtil.isSelectWholeNode);\n  },\n  filterIgnoreNodes: function filterIgnoreNodes(nodes) {\n    return nodes.filter(function (node) {\n      return RDFaUtil.isRDFaIgnoreNode(node) === false;\n    });\n  },\n  getNotIgnoreDescendants: function getNotIgnoreDescendants(node) {\n    var descendants = [];\n    node.childNodes.forEach(function (childNode) {\n      if (!RDFaUtil.isRDFaIgnoreNode(childNode)) {\n        descendants.push(childNode);\n        descendants = descendants.concat(RDFaUtil.getNotIgnoreDescendants(childNode));\n      }\n    });\n    return descendants;\n  },\n  selectRDFaNodes: function selectRDFaNodes(nodes) {\n    return nodes.filter(RDFaUtil.hasRDFaResource);\n  },\n  getRDFaTextNodes: function getRDFaTextNodes(node) {\n    var textNodes = [];\n    if (RDFaUtil.isRDFaIgnoreNode(node)) return textNodes;\n    node.childNodes.forEach(function (childNode) {\n      if (childNode.nodeType === window.Node.TEXT_NODE) textNodes.push(childNode);else textNodes = textNodes.concat(RDFaUtil.getRDFaTextNodes(childNode));\n    });\n    return textNodes;\n  },\n  getRDFaTextNodesExtended: function getRDFaTextNodesExtended(node, ignoreFlag) {\n    if (ignoreFlag === undefined) ignoreFlag = false;\n    var textNodes = [];\n    if (RDFaUtil.isRDFaIgnoreNode(node)) ignoreFlag = true;\n    node.childNodes.forEach(function (childNode) {\n      if (childNode.nodeType === window.Node.TEXT_NODE) textNodes.push({\n        node: childNode,\n        ignore: ignoreFlag\n      });else textNodes = textNodes.concat(RDFaUtil.getRDFaTextNodesExtended(childNode, ignoreFlag));\n    });\n    return textNodes;\n  },\n  getRDFaTextContent: function getRDFaTextContent(node) {\n    var textContent = \"\";\n    if (RDFaUtil.isRDFaIgnoreNode(node) || node.nodeType === window.Node.COMMENT_NODE) return \"\";\n    node.childNodes.forEach(function (childNode) {\n      var childTextContent = \"\";\n\n      if (RDFaUtil.isIgnoreNode(childNode)) {// skip ignore nodes\n      }\n\n      if (childNode.nodeType === window.Node.TEXT_NODE) {\n        // deal with surrounding whitespace of child nodes\n        // based on browser behaviour\n        childTextContent = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextNodeDisplayText(childNode);\n      } else if (childNode.nodeType === window.Node.ELEMENT_NODE) {\n        childTextContent = RDFaUtil.getRDFaTextContent(childNode);\n      }\n\n      textContent += childTextContent;\n    });\n    return textContent;\n  },\n  getRDFaResource: function getRDFaResource(node) {\n    return node.hasAttribute(\"resource\") ? node.getAttribute(\"resource\") : node.getAttribute(\"about\");\n  },\n  getTopRDFaNodes: function getTopRDFaNodes(node) {\n    var topRDFaNodes = []; // if node itself has RDFa properties it is the top RDFa node\n\n    if (RDFaUtil.hasRDFaResource(node)) {\n      topRDFaNodes.push(node);\n      return topRDFaNodes;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      topRDFaNodes = topRDFaNodes.concat(RDFaUtil.getTopRDFaNodes(childNode));\n    });\n    return topRDFaNodes;\n  },\n  getTopRDFaResources: function getTopRDFaResources() {\n    var topResources = [];\n    RDFaUtil.observerNodes.forEach(function (node) {\n      var topRDFaNodes = RDFaUtil.getTopRDFaNodes(node);\n      topRDFaNodes.forEach(function (topRDFaNode) {\n        var attrs = RDFaUtil.getRDFaAttributes(topRDFaNode);\n        topResources.push(attrs.resource || attrs.about);\n      });\n    });\n    return topResources;\n  },\n  addBreadcrumb: function addBreadcrumb(labelTrail, resource) {\n    labelTrail.unshift({\n      id: resource.rdfaResource,\n      node: resource.domNode,\n      property: resource.rdfaProperty,\n      type: resource.rdfTypeLabel\n    });\n  },\n  createBreadcrumbTrail: function createBreadcrumbTrail(resourceId, resourceIndex) {\n    var rootFound = false;\n    var breadcrumb = {};\n    var labelTrail = [];\n    breadcrumb[resourceId] = {\n      id: resourceId\n    };\n\n    while (!rootFound) {\n      var resource = RDFaUtil.lookupResource(resourceId, resourceIndex); //let source = AnnotationActions.lookupIdentifier(resourceId);\n\n      breadcrumb[resource.rdfaResource].type = resource.rdfTypeLabel;\n      RDFaUtil.addBreadcrumb(labelTrail, resource);\n\n      if (resource !== undefined && resource.parentResource) {\n        var val = {\n          id: resource.parentResource\n        };\n        val[resource.rdfaProperty] = breadcrumb[resource.rdfaResource];\n        breadcrumb[resource.parentResource] = val;\n        delete breadcrumb[resource.rdfaResource];\n        resourceId = resource.parentResource;\n      } else {\n        rootFound = true;\n      }\n    }\n\n    return labelTrail;\n  },\n  updateStack: function updateStack(stack, node) {\n    var top = stack[stack.length - 1];\n    var position = top.compareDocumentPosition(node);\n\n    while (!(position & window.Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n      stack.pop();\n      top = stack[stack.length - 1];\n      position = top.compareDocumentPosition(node);\n    }\n  },\n\n  /*\n   **************************\n   * RDFa resource relation *\n   * and index functions    *\n   **************************\n   */\n  labelHasPrefix: function labelHasPrefix(label) {\n    return label.indexOf(\":\") !== -1;\n  },\n  labelParsePrefix: function labelParsePrefix(label, prefixIndex) {\n    var prefix = label.substring(0, label.indexOf(\":\"));\n    var term = label.substring(label.indexOf(\":\") + 1);\n\n    if (prefixIndex.hasOwnProperty(prefix)) {\n      return {\n        url: prefixIndex[prefix] + term,\n        vocabulary: prefixIndex[prefix],\n        term: term\n      };\n    } else {\n      return null;\n    }\n  },\n  getTypeURLs: function getTypeURLs(rdfTypeLabels, vocabulary, prefixIndex) {\n    if (!rdfTypeLabels) {\n      return null;\n    }\n\n    return rdfTypeLabels.map(function (label) {\n      if (RDFaUtil.labelHasPrefix(label)) {\n        var labelInfo = RDFaUtil.labelParsePrefix(label, prefixIndex);\n        var typeURL = labelInfo.url;\n        return typeURL;\n      } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(label)) {\n        return label;\n      } else if (vocabulary && label) {\n        return vocabulary + label;\n      } else if (vocabulary) {\n        var message = \"Unknown RDF type, not a valid label: \" + label;\n        return null;\n      } else {\n        var _message = \"Unknown RDF type, not a valid URL: \" + vocabulary;\n\n        return null;\n      }\n    });\n  },\n  getRDFaTypeLabels: function getRDFaTypeLabels(node) {\n    if (RDFaUtil.hasRDFaType(node)) {\n      return node.getAttribute(\"typeof\").split(\" \");\n    } else {\n      return null;\n    }\n  },\n  expandRDFaTerm: function expandRDFaTerm(rdfaTerm, vocabulary, prefixIndex) {\n    if (!rdfaTerm) {\n      return null;\n    } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(rdfaTerm)) {\n      return rdfaTerm;\n    } else if (RDFaUtil.labelHasPrefix(rdfaTerm)) {\n      var labelInfo = RDFaUtil.labelParsePrefix(rdfaTerm, prefixIndex);\n\n      if (labelInfo) {\n        return labelInfo.url;\n      } else {\n        return null;\n      }\n    } else if (vocabulary && rdfaTerm) {\n      // assume rdfaTerm is defined by vocabulary\n      return vocabulary + rdfaTerm;\n    } else {\n      var message = \"ERROR - Unknown property: \" + rdfaTerm;\n      return null;\n    }\n  },\n  expandProperty: function expandProperty(propertyLabel, vocabulary, prefixIndex) {\n    if (!propertyLabel) {\n      return null;\n    } else if (RDFaUtil.labelHasPrefix(propertyLabel)) {\n      var labelInfo = RDFaUtil.labelParsePrefix(propertyLabel, prefixIndex);\n      return labelInfo.url;\n    } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(propertyLabel)) {\n      return propertyLabel;\n    } else if (vocabulary && propertyLabel) {\n      // assume propertyLabel is defined by vocabulary\n      return vocabulary + propertyLabel;\n    } else {\n      var message = \"ERROR - Unknown property: \" + propertyLabel;\n      return null;\n    }\n  },\n  makeIndexEntry: function makeIndexEntry(node, vocabulary, prefixIndex) {\n    var rdfTypeLabels;\n    var typeURLs;\n    var vocabularies = [];\n    rdfTypeLabels = RDFaUtil.getRDFaTypeLabels(node);\n    typeURLs = RDFaUtil.getTypeURLs(rdfTypeLabels, vocabulary, prefixIndex);\n    return {\n      rdfaResource: RDFaUtil.getRDFaResource(node),\n      rdfaVocabulary: vocabulary,\n      domNode: node,\n      rdfTypeLabel: rdfTypeLabels,\n      rdfTypeURL: typeURLs,\n      rdfaProperty: RDFaUtil.expandProperty(node.getAttribute(\"property\"), vocabulary, prefixIndex),\n      text: RDFaUtil.getRDFaTextContent(node),\n      location: \"internal\"\n    };\n  },\n  hasVocabulary: function hasVocabulary(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"vocab\");\n  },\n  getVocabulary: function getVocabulary(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.vocab;\n  },\n  listVocabularyURLs: function listVocabularyURLs(node) {\n    var vocabularyURLs = [];\n\n    if (node.hasChildNodes) {\n      for (var i = 0; i < node.childNodes.length; i++) {\n        var childNode = node.childNodes[i];\n        var deeperVocabs = RDFaUtil.listVocabularyURLs(childNode);\n        vocabularyURLs = vocabularyURLs.concat(deeperVocabs);\n      }\n    }\n\n    if (RDFaUtil.hasVocabulary(node)) {\n      var vocabulary = RDFaUtil.getVocabulary(node);\n\n      if (!vocabularyURLs.includes(vocabulary)) {\n        vocabularyURLs.push(vocabulary);\n      }\n    }\n\n    return vocabularyURLs;\n  },\n  lookupResource: function lookupResource(resourceId, resourceIndex) {\n    if (!resourceIndex) {\n      throw Error(\"No RDFa resources indexed. Run RDFaUtil.indexRDFa to access RDFa resources.\");\n    }\n\n    if (resourceIndex.resources.hasOwnProperty(resourceId)) {\n      return resourceIndex.resources[resourceId];\n    } else {\n      return null;\n    }\n  },\n  indexRDFa: function indexRDFa() {\n    return new Promise(function (resolve, reject) {\n      var index = {\n        resources: {},\n        relations: {}\n      };\n      RDFaUtil.observerNodes.forEach(function (observerNode) {\n        var prefixIndex = {};\n        var vocabulary = null;\n        RDFaUtil.indexRDFaResources(index, observerNode, null, vocabulary, prefixIndex);\n      });\n      RDFaUtil.rdfaIndex = index;\n      return resolve(index);\n    });\n  },\n  indexRDFaResources: function indexRDFaResources(index, node, parentResource, vocabulary, prefixIndex) {\n    if (RDFaUtil.hasVocabulary(node)) {\n      // update vocabulary if specified\n      vocabulary = RDFaUtil.getVocabulary(node);\n    }\n\n    if (RDFaUtil.hasRDFaResource(node)) {\n      RDFaUtil.indexPrefixes(node, prefixIndex);\n      var indexEntry = RDFaUtil.makeIndexEntry(node, vocabulary, prefixIndex);\n\n      if (parentResource) {\n        indexEntry.parentResource = parentResource;\n      }\n\n      if (!index.resources.hasOwnProperty(indexEntry.rdfaResource)) {\n        // only index resource at highest level.\n        // lower levels mentions specify only relations\n        index.resources[indexEntry.rdfaResource] = indexEntry;\n      }\n\n      RDFaUtil.indexRDFaRelations(index.relations, indexEntry); // only update parent resource if this node is an RDFa resource\n\n      parentResource = indexEntry.rdfaResource;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      RDFaUtil.indexRDFaResources(index, childNode, parentResource, vocabulary, prefixIndex);\n    });\n  },\n  indexRDFaRelations: function indexRDFaRelations(relationIndex, resourceIndexEntry) {\n    RDFaUtil.indexParentRelation(relationIndex, resourceIndexEntry);\n    RDFaUtil.indexTypeRelation(relationIndex, resourceIndexEntry);\n  },\n  indexTypeRelation: function indexTypeRelation(relationIndex, resourceIndexEntry) {\n    if (!resourceIndexEntry.rdfTypeLabel) {\n      return false;\n    } else {\n      resourceIndexEntry.rdfTypeURL.forEach(function (rdfType) {\n        var relation = {\n          subject: resourceIndexEntry.rdfaResource,\n          predicate: \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\",\n          object: rdfType\n        };\n        relationIndex[relation.subject].push(relation);\n      });\n    }\n  },\n  indexParentRelation: function indexParentRelation(relationIndex, resourceIndexEntry) {\n    var relation = {\n      subject: resourceIndexEntry.parentResource,\n      predicate: resourceIndexEntry.rdfaProperty,\n      object: resourceIndexEntry.rdfaResource\n    };\n\n    if (!relationIndex.hasOwnProperty(relation.subject)) {\n      relationIndex[relation.subject] = [];\n    }\n\n    if (!relationIndex.hasOwnProperty(relation.object)) {\n      relationIndex[relation.object] = [];\n    }\n\n    relationIndex[relation.subject].push(relation);\n    relationIndex[relation.object].push(relation);\n  },\n  indexPrefixes: function indexPrefixes(rdfaResourceNode, prefixIndex) {\n    if (RDFaUtil.hasRDFaPrefix(rdfaResourceNode)) {\n      RDFaUtil.getRDFaPrefix(rdfaResourceNode).forEach(function (prefix) {\n        prefixIndex[prefix.vocabularyPrefix] = prefix.vocabularyURL;\n      });\n    }\n  },\n  buildResourcesMaps: function buildResourcesMaps() {\n    var maps = {};\n    RDFaUtil.observerNodes.forEach(function (observerNode) {\n      RDFaUtil.getTopRDFaNodes(observerNode).forEach(function (rdfaResourceNode) {\n        var map = RDFaUtil.buildResourceMap(rdfaResourceNode);\n        map.source = {\n          location: window.location.href,\n          origin: window.location.origin,\n          pathname: window.location.pathname\n        };\n        maps[map.id] = map;\n      });\n    });\n    return maps;\n  },\n  buildResourceMap: function buildResourceMap(rdfaResourceNode) {\n    var resourceMap = RDFaUtil.makeRDFaAttributeMap(rdfaResourceNode);\n    RDFaUtil.getRDFaSubresources(rdfaResourceNode).forEach(function (subresourceNode) {\n      var subresourceMap = RDFaUtil.buildResourceMap(subresourceNode);\n      var property = subresourceMap.property;\n      if (!Object.keys(resourceMap).includes(property)) resourceMap[property] = [];\n      resourceMap[property].push(subresourceMap);\n    });\n    return resourceMap;\n  },\n  makeRDFaAttributeMap: function makeRDFaAttributeMap(rdfaResourceNode) {\n    var attrs = RDFaUtil.getRDFaAttributes(rdfaResourceNode);\n    var map = {};\n    Object.keys(attrs).forEach(function (name) {\n      if (name === \"typeof\") {\n        map[\"type\"] = attrs[name];\n        if (attrs[name].indexOf(\" \") >= 0) map[\"type\"] = attrs[name].split(\" \");\n      } else if (name === \"resource\" || name === \"about\") map[\"id\"] = attrs[name];else if (name === \"vocab\" && attrs[name].includes(\"#\")) map[name] = attrs[name].replace(/#$/, \"\");else map[name] = attrs[name];\n    });\n    return map;\n  },\n  getRDFaSubresources: function getRDFaSubresources(node) {\n    var subresourceNodes = [];\n    if (!node.childNodes) return subresourceNodes;\n    node.childNodes.forEach(function (childNode) {\n      if (childNode.nodeType !== window.Node.ELEMENT_NODE) return null;\n      if (RDFaUtil.hasRDFaResource(childNode)) subresourceNodes.push(childNode);else {\n        var subsubresourceNodes = RDFaUtil.getRDFaSubresources(childNode);\n        subresourceNodes = subresourceNodes.concat(subsubresourceNodes);\n      }\n    });\n    return subresourceNodes;\n  },\n  findResourceRelations: function findResourceRelations(resources, resourceIndex) {\n    var hasParent = {};\n    resources.forEach(function (resource) {\n      var parent = resourceIndex[resource].parentResource;\n\n      while (parent) {\n        hasParent[resource] = parent;\n        resource = parent;\n        parent = resourceIndex[resource].parentResource;\n      }\n    });\n    var relations = [];\n\n    for (var resource in hasParent) {\n      relations.push({\n        body: resource,\n        target: hasParent[resource]\n      });\n    }\n\n    return relations;\n  },\n  filterExistingRelationAnnotations: function filterExistingRelationAnnotations(relations, annotations) {\n    return relations.filter(function (relation) {\n      return RDFaUtil.relationAnnotationExists(relation, annotations) === false;\n    });\n  },\n  relationAnnotationExists: function relationAnnotationExists(relation, annotations) {\n    return annotations.some(function (annotation) {\n      if (annotation.target.source !== relation.target) {\n        return false;\n      }\n\n      if (annotation.body.source !== relation.body) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (RDFaUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9SREZhVXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy91dGlsL1JERmFVdGlsLmpzP2VmZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IERPTVV0aWwgZnJvbSBcIi4vRE9NVXRpbC5qc1wiO1xuaW1wb3J0IFN0cmluZ1V0aWwgZnJvbSBcIi4vU3RyaW5nVXRpbC5qc1wiO1xuXG5cbi8vIFJERmEgcHJvcGVydHkgbmFtZXNcbi8vbGV0IFJERmFBdHRycyA9IFtcImFib3V0XCIsIFwiY29udGVudFwiLCBcImRhdGF0eXBlXCIsIFwiaHJlZlwiLCBcInByb3BlcnR5XCIsIFwicmVsXCIsIFwicmVzb3VyY2VcIiwgXCJyZXZcIiwgXCJzcmNcIiwgXCJ0eXBlb2ZcIiwgXCJ2b2NhYlwiXTtcbmxldCBSREZhQXR0cnMgPSBbXCJhYm91dFwiLCBcInByZWZpeFwiLCBcInByb3BlcnR5XCIsIFwicmVzb3VyY2VcIiwgXCJ0eXBlb2ZcIiwgXCJ2b2NhYlwiXTtcblxuY29uc3QgUkRGYVV0aWwgPSB7XG5cbiAgICAvKlxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKiBDb25maWd1cmF0aW9uIGZ1bmN0aW9ucyAqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqL1xuXG4gICByZGZhSW5kZXg6IG51bGwsXG5cbiAgICBzZXRCYXNlQW5ub3RhdGlvbk9udG9sb2d5KHVybCkge1xuICAgICAgICBSREZhVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMID0gdXJsO1xuICAgIH0sXG5cbiAgICBjaGVja0Jhc2VBbm5vdGF0aW9uT250b2xvZ3lTZXQoKSB7XG4gICAgICAgIGlmIChSREZhVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiUkRGQVV0aWwgLSBiYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMIG5vdCBzZXRcIik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0T2JzZXJ2ZXJOb2RlcyhvYnNlcnZlck5vZGVzKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJOb2RlcyA9IEFycmF5LmZyb20ob2JzZXJ2ZXJOb2Rlcyk7XG4gICAgfSxcblxuICAgIHJlc2V0SWdub3JlTm9kZXMoKSB7XG4gICAgICAgIFJERmFVdGlsLmNoZWNrQmFzZUFubm90YXRpb25PbnRvbG9neVNldCgpO1xuICAgICAgICB2YXIgcHJlZml4SW5kZXggPSB7fTtcbiAgICAgICAgdmFyIHZvY2FiID0gbnVsbDtcbiAgICAgICAgUkRGYVV0aWwuc2V0SWdub3JlTm9kZXMoZG9jdW1lbnQsIHZvY2FiLCBwcmVmaXhJbmRleCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgc2V0SWdub3JlTm9kZXMobm9kZSwgdm9jYWIsIHByZWZpeEluZGV4KSB7XG4gICAgICAgIFJERmFVdGlsLmNoZWNrQmFzZUFubm90YXRpb25PbnRvbG9neVNldCgpO1xuICAgICAgICBSREZhVXRpbC5pbmRleFByZWZpeGVzKG5vZGUsIHByZWZpeEluZGV4KTtcbiAgICAgICAgbGV0IGF0dHJzID0gUkRGYVV0aWwuZ2V0UkRGYUF0dHJpYnV0ZXMobm9kZSk7XG4gICAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShcInZvY2FiXCIpKSB7XG4gICAgICAgICAgICB2b2NhYiA9IGF0dHJzLnZvY2FiO1xuICAgICAgICB9XG4gICAgICAgIFJERmFVdGlsLnNldElnbm9yZU5vZGUobm9kZSwgdm9jYWIsIHByZWZpeEluZGV4KTtcbiAgICAgICAgaWYgKG5vZGUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgUkRGYVV0aWwuc2V0SWdub3JlTm9kZXMoY2hpbGROb2RlLCB2b2NhYiwgcHJlZml4SW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0SWdub3JlTm9kZShub2RlLCB2b2NhYiwgcHJlZml4SW5kZXgpIHtcbiAgICAgICAgUkRGYVV0aWwuY2hlY2tCYXNlQW5ub3RhdGlvbk9udG9sb2d5U2V0KCk7XG4gICAgICAgIGxldCBhdHRycyA9IFJERmFVdGlsLmdldFJERmFBdHRyaWJ1dGVzKG5vZGUpO1xuICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoXCJ0eXBlb2ZcIikpIHtcbiAgICAgICAgICAgIGxldCByZGZUeXBlID0gUkRGYVV0aWwuZXhwYW5kUkRGYVRlcm0oYXR0cnMudHlwZW9mLCB2b2NhYiwgcHJlZml4SW5kZXgpO1xuICAgICAgICAgICAgbm9kZS5yZGZhSWdub3JhYmxlID0gKFJERmFVdGlsLmlzSWdub3JlQ2xhc3MocmRmVHlwZSkpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGlzSWdub3JlQ2xhc3ModXJsKSB7XG4gICAgICAgIFJERmFVdGlsLmNoZWNrQmFzZUFubm90YXRpb25PbnRvbG9neVNldCgpO1xuICAgICAgICByZXR1cm4gdXJsID09PSBSREZhVXRpbC5iYXNlQW5ub3RhdGlvbk9udG9sb2d5VVJMICsgXCIjSWdub3JhYmxlRWxlbWVudFwiO1xuICAgIH0sXG5cbiAgICBpc0lnbm9yZU5vZGUobm9kZSkge1xuICAgICAgICBSREZhVXRpbC5jaGVja0Jhc2VBbm5vdGF0aW9uT250b2xvZ3lTZXQoKTtcbiAgICAgICAgcmV0dXJuIG5vZGUucmRmYUlnbm9yYWJsZTtcbiAgICB9LFxuXG4gICAgLypcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICogUkRGYSByZWxhdGVkIGZ1bmN0aW9ucyAqXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqL1xuXG4gICAgLy8gUmV0dXJuIFJERmEgYXR0cmlidXRlcyBvZiBhbiBlbGVtZW50LlxuICAgIGdldFJERmFBdHRyaWJ1dGVzIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgbm9kZVJERmFBdHRycyA9IHt9O1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICBSREZhQXR0cnMuZm9yRWFjaChmdW5jdGlvbihhdHRyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVSREZhQXR0cnNbYXR0cl0gPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZVJERmFBdHRycztcbiAgICB9LFxuXG4gICAgaXNSREZhSWdub3JlTm9kZSA6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIChub2RlLmhhc093blByb3BlcnR5KFwicmRmYUlnbm9yYWJsZVwiKSAmJiBub2RlLnJkZmFJZ25vcmFibGUpO1xuICAgIH0sXG5cbiAgICBpc1NlbGVjdFdob2xlTm9kZSA6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbGV0IG5vZGVSREZhQXR0cnMgPSBSREZhVXRpbC5nZXRSREZhQXR0cmlidXRlcyhub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGVSREZhQXR0cnMucHJvcGVydHkgPT09IFwic2VsZWN0V2hvbGVFbGVtZW50XCIgPyB0cnVlIDogZmFsc2U7XG4gICAgfSxcblxuICAgIGhhc1JERmFBdHRyaWJ1dGVzIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBsZXQgYXR0cnMgPSBSREZhVXRpbC5nZXRSREZhQXR0cmlidXRlcyhub2RlKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGF0dHJzKS5sZW5ndGggPiAwICYmICghUkRGYVV0aWwuaXNSREZhSWdub3JlTm9kZShub2RlKSkgPyB0cnVlIDogZmFsc2U7XG4gICAgfSxcblxuICAgIGhhc1JERmFUeXBlIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBsZXQgYXR0cnMgPSBSREZhVXRpbC5nZXRSREZhQXR0cmlidXRlcyhub2RlKTtcbiAgICAgICAgcmV0dXJuIGF0dHJzLmhhc093blByb3BlcnR5KFwidHlwZW9mXCIpO1xuICAgIH0sXG5cbiAgICBoYXNSREZhUHJlZml4IDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBsZXQgYXR0cnMgPSBSREZhVXRpbC5nZXRSREZhQXR0cmlidXRlcyhub2RlKTtcbiAgICAgICAgcmV0dXJuIGF0dHJzLmhhc093blByb3BlcnR5KFwicHJlZml4XCIpO1xuICAgIH0sXG5cbiAgICBoYXNSREZhUmVzb3VyY2UgOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGxldCBhdHRycyA9IFJERmFVdGlsLmdldFJERmFBdHRyaWJ1dGVzKG5vZGUpO1xuICAgICAgICByZXR1cm4gYXR0cnMuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVwiKSB8fCBhdHRycy5oYXNPd25Qcm9wZXJ0eShcImFib3V0XCIpID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG5cbiAgICBnZXRSREZhUHJlZml4IDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBsZXQgYXR0cnMgPSBSREZhVXRpbC5nZXRSREZhQXR0cmlidXRlcyhub2RlKTtcbiAgICAgICAgdmFyIHByZWZpeCA9IFtdO1xuICAgICAgICBpZiAoIWF0dHJzLmhhc093blByb3BlcnR5KFwicHJlZml4XCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwYXJ0cyA9IGF0dHJzW1wicHJlZml4XCJdLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpID0gaSsyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2b2NQcmVmaXggPSBwYXJ0c1tpXS5zdWJzdHJpbmcoMCxwYXJ0c1tpXS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZvY1VSTCA9IHBhcnRzW2krMV07XG4gICAgICAgICAgICAgICAgICAgIHByZWZpeC5wdXNoKHt2b2NhYnVsYXJ5UHJlZml4OiB2b2NQcmVmaXgsIHZvY2FidWxhcnlVUkw6IHZvY1VSTH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldFJERmFJZ25vcmVOb2RlcyA6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIERPTVV0aWwuZ2V0RGVzY2VuZGFudHMobm9kZSkuZmlsdGVyKFJERmFVdGlsLmlzUkRGYUlnbm9yZU5vZGUpO1xuICAgIH0sXG5cbiAgICBnZXRTZWxlY3RXaG9sZU5vZGVzIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICByZXR1cm4gRE9NVXRpbC5nZXREZXNjZW5kYW50cyhub2RlKS5maWx0ZXIoUkRGYVV0aWwuaXNTZWxlY3RXaG9sZU5vZGUpO1xuICAgIH0sXG5cbiAgICBmaWx0ZXJJZ25vcmVOb2RlcyA6IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoZnVuY3Rpb24obm9kZSkgeyByZXR1cm4gUkRGYVV0aWwuaXNSREZhSWdub3JlTm9kZShub2RlKSA9PT0gZmFsc2U7IH0pO1xuICAgIH0sXG5cbiAgICBnZXROb3RJZ25vcmVEZXNjZW5kYW50cyA6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbGV0IGRlc2NlbmRhbnRzID0gW107XG4gICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghUkRGYVV0aWwuaXNSREZhSWdub3JlTm9kZShjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgZGVzY2VuZGFudHMucHVzaChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIGRlc2NlbmRhbnRzID0gZGVzY2VuZGFudHMuY29uY2F0KFJERmFVdGlsLmdldE5vdElnbm9yZURlc2NlbmRhbnRzKGNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc2NlbmRhbnRzO1xuICAgIH0sXG5cbiAgICBzZWxlY3RSREZhTm9kZXMgOiBmdW5jdGlvbihub2Rlcykge1xuICAgICAgICByZXR1cm4gbm9kZXMuZmlsdGVyKFJERmFVdGlsLmhhc1JERmFSZXNvdXJjZSk7XG4gICAgfSxcblxuICAgIGdldFJERmFUZXh0Tm9kZXMgOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciB0ZXh0Tm9kZXMgPSBbXTtcbiAgICAgICAgaWYgKFJERmFVdGlsLmlzUkRGYUlnbm9yZU5vZGUobm9kZSkpXG4gICAgICAgICAgICByZXR1cm4gdGV4dE5vZGVzO1xuICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlID09PSB3aW5kb3cuTm9kZS5URVhUX05PREUpXG4gICAgICAgICAgICAgICAgdGV4dE5vZGVzLnB1c2goY2hpbGROb2RlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZXMgPSB0ZXh0Tm9kZXMuY29uY2F0KFJERmFVdGlsLmdldFJERmFUZXh0Tm9kZXMoY2hpbGROb2RlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGV4dE5vZGVzO1xuICAgIH0sXG5cbiAgICBnZXRSREZhVGV4dE5vZGVzRXh0ZW5kZWQgOiBmdW5jdGlvbihub2RlLCBpZ25vcmVGbGFnKSB7XG4gICAgICAgIGlmIChpZ25vcmVGbGFnID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBpZ25vcmVGbGFnID0gZmFsc2U7XG4gICAgICAgIHZhciB0ZXh0Tm9kZXMgPSBbXTtcbiAgICAgICAgaWYgKFJERmFVdGlsLmlzUkRGYUlnbm9yZU5vZGUobm9kZSkpXG4gICAgICAgICAgICBpZ25vcmVGbGFnID0gdHJ1ZTtcbiAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuVEVYVF9OT0RFKVxuICAgICAgICAgICAgICAgIHRleHROb2Rlcy5wdXNoKHtub2RlOiBjaGlsZE5vZGUsIGlnbm9yZTogaWdub3JlRmxhZ30pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRleHROb2RlcyA9IHRleHROb2Rlcy5jb25jYXQoUkRGYVV0aWwuZ2V0UkRGYVRleHROb2Rlc0V4dGVuZGVkKGNoaWxkTm9kZSwgaWdub3JlRmxhZykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRleHROb2RlcztcbiAgICB9LFxuXG4gICAgZ2V0UkRGYVRleHRDb250ZW50IDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgdGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBpZiAoUkRGYVV0aWwuaXNSREZhSWdub3JlTm9kZShub2RlKSB8fCBub2RlLm5vZGVUeXBlID09PSB3aW5kb3cuTm9kZS5DT01NRU5UX05PREUpXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgdmFyIGNoaWxkVGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKFJERmFVdGlsLmlzSWdub3JlTm9kZShjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBpZ25vcmUgbm9kZXNcbiAgICAgICAgICAgIH0gaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuVEVYVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVhbCB3aXRoIHN1cnJvdW5kaW5nIHdoaXRlc3BhY2Ugb2YgY2hpbGQgbm9kZXNcbiAgICAgICAgICAgICAgICAvLyBiYXNlZCBvbiBicm93c2VyIGJlaGF2aW91clxuICAgICAgICAgICAgICAgIGNoaWxkVGV4dENvbnRlbnQgPSBET01VdGlsLmdldFRleHROb2RlRGlzcGxheVRleHQoY2hpbGROb2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGROb2RlLm5vZGVUeXBlID09PSB3aW5kb3cuTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgICBjaGlsZFRleHRDb250ZW50ID0gUkRGYVV0aWwuZ2V0UkRGYVRleHRDb250ZW50KGNoaWxkTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0Q29udGVudCArPSBjaGlsZFRleHRDb250ZW50O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRleHRDb250ZW50O1xuICAgIH0sXG5cbiAgICBnZXRSREZhUmVzb3VyY2UgOiAobm9kZSkgPT4ge1xuICAgICAgICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUoXCJyZXNvdXJjZVwiKSA/IG5vZGUuZ2V0QXR0cmlidXRlKFwicmVzb3VyY2VcIikgOiBub2RlLmdldEF0dHJpYnV0ZShcImFib3V0XCIpO1xuICAgIH0sXG5cblxuICAgIGdldFRvcFJERmFOb2RlcyA6IChub2RlKSA9PiB7XG4gICAgICAgIHZhciB0b3BSREZhTm9kZXMgPSBbXTtcbiAgICAgICAgLy8gaWYgbm9kZSBpdHNlbGYgaGFzIFJERmEgcHJvcGVydGllcyBpdCBpcyB0aGUgdG9wIFJERmEgbm9kZVxuICAgICAgICBpZiAoUkRGYVV0aWwuaGFzUkRGYVJlc291cmNlKG5vZGUpKSB7XG4gICAgICAgICAgICB0b3BSREZhTm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0b3BSREZhTm9kZXM7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgdG9wUkRGYU5vZGVzID0gdG9wUkRGYU5vZGVzLmNvbmNhdChSREZhVXRpbC5nZXRUb3BSREZhTm9kZXMoY2hpbGROb2RlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG9wUkRGYU5vZGVzO1xuICAgIH0sXG5cbiAgICBnZXRUb3BSREZhUmVzb3VyY2VzIDogKCkgPT4ge1xuICAgICAgICB2YXIgdG9wUmVzb3VyY2VzID0gW107XG4gICAgICAgIFJERmFVdGlsLm9ic2VydmVyTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHRvcFJERmFOb2RlcyA9IFJERmFVdGlsLmdldFRvcFJERmFOb2Rlcyhub2RlKTtcbiAgICAgICAgICAgIHRvcFJERmFOb2Rlcy5mb3JFYWNoKCh0b3BSREZhTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhdHRycyA9IFJERmFVdGlsLmdldFJERmFBdHRyaWJ1dGVzKHRvcFJERmFOb2RlKTtcbiAgICAgICAgICAgICAgICB0b3BSZXNvdXJjZXMucHVzaChhdHRycy5yZXNvdXJjZSB8fCBhdHRycy5hYm91dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0b3BSZXNvdXJjZXM7XG4gICAgfSxcblxuICAgIGFkZEJyZWFkY3J1bWIobGFiZWxUcmFpbCwgcmVzb3VyY2UpIHtcbiAgICAgICAgbGFiZWxUcmFpbC51bnNoaWZ0KHtcbiAgICAgICAgICAgIGlkOiByZXNvdXJjZS5yZGZhUmVzb3VyY2UsXG4gICAgICAgICAgICBub2RlOiByZXNvdXJjZS5kb21Ob2RlLFxuICAgICAgICAgICAgcHJvcGVydHk6IHJlc291cmNlLnJkZmFQcm9wZXJ0eSxcbiAgICAgICAgICAgIHR5cGU6IHJlc291cmNlLnJkZlR5cGVMYWJlbFxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY3JlYXRlQnJlYWRjcnVtYlRyYWlsKHJlc291cmNlSWQsIHJlc291cmNlSW5kZXgpIHtcbiAgICAgICAgdmFyIHJvb3RGb3VuZCA9IGZhbHNlO1xuICAgICAgICB2YXIgYnJlYWRjcnVtYiA9IHt9O1xuICAgICAgICB2YXIgbGFiZWxUcmFpbCA9IFtdO1xuICAgICAgICBicmVhZGNydW1iW3Jlc291cmNlSWRdID0ge2lkOiByZXNvdXJjZUlkfTtcbiAgICAgICAgd2hpbGUgKCFyb290Rm91bmQpIHtcbiAgICAgICAgICAgIGxldCByZXNvdXJjZSA9IFJERmFVdGlsLmxvb2t1cFJlc291cmNlKHJlc291cmNlSWQsIHJlc291cmNlSW5kZXgpO1xuICAgICAgICAgICAgLy9sZXQgc291cmNlID0gQW5ub3RhdGlvbkFjdGlvbnMubG9va3VwSWRlbnRpZmllcihyZXNvdXJjZUlkKTtcbiAgICAgICAgICAgIGJyZWFkY3J1bWJbcmVzb3VyY2UucmRmYVJlc291cmNlXS50eXBlID0gcmVzb3VyY2UucmRmVHlwZUxhYmVsO1xuICAgICAgICAgICAgUkRGYVV0aWwuYWRkQnJlYWRjcnVtYihsYWJlbFRyYWlsLCByZXNvdXJjZSk7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiByZXNvdXJjZS5wYXJlbnRSZXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB7aWQ6IHJlc291cmNlLnBhcmVudFJlc291cmNlfTtcbiAgICAgICAgICAgICAgICB2YWxbcmVzb3VyY2UucmRmYVByb3BlcnR5XSA9IGJyZWFkY3J1bWJbcmVzb3VyY2UucmRmYVJlc291cmNlXTtcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iW3Jlc291cmNlLnBhcmVudFJlc291cmNlXSA9IHZhbDtcbiAgICAgICAgICAgICAgICBkZWxldGUgYnJlYWRjcnVtYltyZXNvdXJjZS5yZGZhUmVzb3VyY2VdO1xuICAgICAgICAgICAgICAgIHJlc291cmNlSWQgPSByZXNvdXJjZS5wYXJlbnRSZXNvdXJjZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9vdEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFiZWxUcmFpbDtcbiAgICB9LFxuXG4gICAgdXBkYXRlU3RhY2sgOiBmdW5jdGlvbihzdGFjaywgbm9kZSkge1xuICAgICAgICB2YXIgdG9wID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHRvcC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihub2RlKTtcbiAgICAgICAgd2hpbGUgKCEocG9zaXRpb24gJiB3aW5kb3cuTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9DT05UQUlORURfQlkpKSB7XG4gICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHRvcCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgcG9zaXRpb24gPSB0b3AuY29tcGFyZURvY3VtZW50UG9zaXRpb24obm9kZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLypcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBSREZhIHJlc291cmNlIHJlbGF0aW9uICpcbiAgICAgKiBhbmQgaW5kZXggZnVuY3Rpb25zICAgICpcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKi9cblxuICAgIGxhYmVsSGFzUHJlZml4KGxhYmVsKSB7XG4gICAgICAgIHJldHVybiAobGFiZWwuaW5kZXhPZihcIjpcIikgIT09IC0xKTtcbiAgICB9LFxuXG4gICAgbGFiZWxQYXJzZVByZWZpeChsYWJlbCwgcHJlZml4SW5kZXgpIHtcbiAgICAgICAgbGV0IHByZWZpeCA9IGxhYmVsLnN1YnN0cmluZygwLCBsYWJlbC5pbmRleE9mKFwiOlwiKSk7XG4gICAgICAgIGxldCB0ZXJtID0gbGFiZWwuc3Vic3RyaW5nKGxhYmVsLmluZGV4T2YoXCI6XCIpICsgMSk7XG4gICAgICAgIGlmIChwcmVmaXhJbmRleC5oYXNPd25Qcm9wZXJ0eShwcmVmaXgpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogcHJlZml4SW5kZXhbcHJlZml4XSArIHRlcm0sXG4gICAgICAgICAgICAgICAgdm9jYWJ1bGFyeTogcHJlZml4SW5kZXhbcHJlZml4XSxcbiAgICAgICAgICAgICAgICB0ZXJtOiB0ZXJtXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRUeXBlVVJMcyhyZGZUeXBlTGFiZWxzLCB2b2NhYnVsYXJ5LCBwcmVmaXhJbmRleCkge1xuICAgICAgICBpZiAoIXJkZlR5cGVMYWJlbHMpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZGZUeXBlTGFiZWxzLm1hcCgobGFiZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChSREZhVXRpbC5sYWJlbEhhc1ByZWZpeChsYWJlbCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFiZWxJbmZvID0gUkRGYVV0aWwubGFiZWxQYXJzZVByZWZpeChsYWJlbCwgcHJlZml4SW5kZXgpO1xuICAgICAgICAgICAgICAgIGxldCB0eXBlVVJMID0gbGFiZWxJbmZvLnVybDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZVVSTDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoU3RyaW5nVXRpbC5pc1VSTChsYWJlbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZvY2FidWxhcnkgJiYgbGFiZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9jYWJ1bGFyeSArIGxhYmVsO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2b2NhYnVsYXJ5KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIlVua25vd24gUkRGIHR5cGUsIG5vdCBhIHZhbGlkIGxhYmVsOiBcIiArIGxhYmVsO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IFwiVW5rbm93biBSREYgdHlwZSwgbm90IGEgdmFsaWQgVVJMOiBcIiArIHZvY2FidWxhcnk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRSREZhVHlwZUxhYmVscyhub2RlKSB7XG4gICAgICAgIGlmIChSREZhVXRpbC5oYXNSREZhVHlwZShub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKFwidHlwZW9mXCIpLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZFJERmFUZXJtKHJkZmFUZXJtLCB2b2NhYnVsYXJ5LCBwcmVmaXhJbmRleCkge1xuICAgICAgICBpZiAoIXJkZmFUZXJtKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChTdHJpbmdVdGlsLmlzVVJMKHJkZmFUZXJtKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJkZmFUZXJtO1xuICAgICAgICB9IGVsc2UgaWYgKFJERmFVdGlsLmxhYmVsSGFzUHJlZml4KHJkZmFUZXJtKSkge1xuICAgICAgICAgICAgbGV0IGxhYmVsSW5mbyA9IFJERmFVdGlsLmxhYmVsUGFyc2VQcmVmaXgocmRmYVRlcm0sIHByZWZpeEluZGV4KTtcbiAgICAgICAgICAgIGlmIChsYWJlbEluZm8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWxJbmZvLnVybDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodm9jYWJ1bGFyeSAmJiByZGZhVGVybSkge1xuICAgICAgICAgICAgLy8gYXNzdW1lIHJkZmFUZXJtIGlzIGRlZmluZWQgYnkgdm9jYWJ1bGFyeVxuICAgICAgICAgICAgcmV0dXJuIHZvY2FidWxhcnkgKyByZGZhVGVybTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gXCJFUlJPUiAtIFVua25vd24gcHJvcGVydHk6IFwiICsgcmRmYVRlcm07XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmRQcm9wZXJ0eShwcm9wZXJ0eUxhYmVsLCB2b2NhYnVsYXJ5LCBwcmVmaXhJbmRleCkge1xuICAgICAgICBpZiAoIXByb3BlcnR5TGFiZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKFJERmFVdGlsLmxhYmVsSGFzUHJlZml4KHByb3BlcnR5TGFiZWwpKSB7XG4gICAgICAgICAgICBsZXQgbGFiZWxJbmZvID0gUkRGYVV0aWwubGFiZWxQYXJzZVByZWZpeChwcm9wZXJ0eUxhYmVsLCBwcmVmaXhJbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbGFiZWxJbmZvLnVybDtcbiAgICAgICAgfSBlbHNlIGlmIChTdHJpbmdVdGlsLmlzVVJMKHByb3BlcnR5TGFiZWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlMYWJlbDtcbiAgICAgICAgfSBlbHNlIGlmICh2b2NhYnVsYXJ5ICYmIHByb3BlcnR5TGFiZWwpIHtcbiAgICAgICAgICAgIC8vIGFzc3VtZSBwcm9wZXJ0eUxhYmVsIGlzIGRlZmluZWQgYnkgdm9jYWJ1bGFyeVxuICAgICAgICAgICAgcmV0dXJuIHZvY2FidWxhcnkgKyBwcm9wZXJ0eUxhYmVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIkVSUk9SIC0gVW5rbm93biBwcm9wZXJ0eTogXCIgKyBwcm9wZXJ0eUxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWFrZUluZGV4RW50cnkobm9kZSwgdm9jYWJ1bGFyeSwgcHJlZml4SW5kZXgpIHtcbiAgICAgICAgdmFyIHJkZlR5cGVMYWJlbHMgO1xuICAgICAgICB2YXIgdHlwZVVSTHM7XG4gICAgICAgIGxldCB2b2NhYnVsYXJpZXMgPSBbXTtcbiAgICAgICAgcmRmVHlwZUxhYmVscyA9IFJERmFVdGlsLmdldFJERmFUeXBlTGFiZWxzKG5vZGUpO1xuICAgICAgICB0eXBlVVJMcyA9IFJERmFVdGlsLmdldFR5cGVVUkxzKHJkZlR5cGVMYWJlbHMsIHZvY2FidWxhcnksIHByZWZpeEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJkZmFSZXNvdXJjZTogUkRGYVV0aWwuZ2V0UkRGYVJlc291cmNlKG5vZGUpLFxuICAgICAgICAgICAgcmRmYVZvY2FidWxhcnk6IHZvY2FidWxhcnksXG4gICAgICAgICAgICBkb21Ob2RlOiBub2RlLFxuICAgICAgICAgICAgcmRmVHlwZUxhYmVsOiByZGZUeXBlTGFiZWxzLFxuICAgICAgICAgICAgcmRmVHlwZVVSTDogdHlwZVVSTHMsXG4gICAgICAgICAgICByZGZhUHJvcGVydHk6IFJERmFVdGlsLmV4cGFuZFByb3BlcnR5KG5vZGUuZ2V0QXR0cmlidXRlKFwicHJvcGVydHlcIiksIHZvY2FidWxhcnksIHByZWZpeEluZGV4KSxcbiAgICAgICAgICAgIHRleHQ6IFJERmFVdGlsLmdldFJERmFUZXh0Q29udGVudChub2RlKSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBcImludGVybmFsXCJcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgaGFzVm9jYWJ1bGFyeSA6IChub2RlKSA9PiB7XG4gICAgICAgIGxldCBhdHRycyA9IFJERmFVdGlsLmdldFJERmFBdHRyaWJ1dGVzKG5vZGUpO1xuICAgICAgICByZXR1cm4gYXR0cnMuaGFzT3duUHJvcGVydHkoXCJ2b2NhYlwiKTtcbiAgICB9LFxuXG4gICAgZ2V0Vm9jYWJ1bGFyeSA6IChub2RlKSA9PiB7XG4gICAgICAgIGxldCBhdHRycyA9IFJERmFVdGlsLmdldFJERmFBdHRyaWJ1dGVzKG5vZGUpO1xuICAgICAgICByZXR1cm4gYXR0cnMudm9jYWI7XG4gICAgfSxcblxuICAgIGxpc3RWb2NhYnVsYXJ5VVJMcyA6IChub2RlKSA9PiB7XG4gICAgICAgIGxldCB2b2NhYnVsYXJ5VVJMcyA9IFtdO1xuICAgICAgICBpZiAobm9kZS5oYXNDaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZE5vZGUgPSBub2RlLmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICAgICAgbGV0IGRlZXBlclZvY2FicyA9IFJERmFVdGlsLmxpc3RWb2NhYnVsYXJ5VVJMcyhjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIHZvY2FidWxhcnlVUkxzID0gdm9jYWJ1bGFyeVVSTHMuY29uY2F0KGRlZXBlclZvY2Ficyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJERmFVdGlsLmhhc1ZvY2FidWxhcnkobm9kZSkpIHtcbiAgICAgICAgICAgIGxldCB2b2NhYnVsYXJ5ID0gUkRGYVV0aWwuZ2V0Vm9jYWJ1bGFyeShub2RlKTtcbiAgICAgICAgICAgIGlmICghdm9jYWJ1bGFyeVVSTHMuaW5jbHVkZXModm9jYWJ1bGFyeSkpIHtcbiAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5VVJMcy5wdXNoKHZvY2FidWxhcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2NhYnVsYXJ5VVJMcztcbiAgICB9LFxuXG4gICAgbG9va3VwUmVzb3VyY2UgOiAocmVzb3VyY2VJZCwgcmVzb3VyY2VJbmRleCkgPT4ge1xuICAgICAgICBpZiAoIXJlc291cmNlSW5kZXgpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTm8gUkRGYSByZXNvdXJjZXMgaW5kZXhlZC4gUnVuIFJERmFVdGlsLmluZGV4UkRGYSB0byBhY2Nlc3MgUkRGYSByZXNvdXJjZXMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvdXJjZUluZGV4LnJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlSW5kZXgucmVzb3VyY2VzW3Jlc291cmNlSWRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5kZXhSREZhIDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0ge1xuICAgICAgICAgICAgICAgIHJlc291cmNlczoge30sXG4gICAgICAgICAgICAgICAgcmVsYXRpb25zOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFJERmFVdGlsLm9ic2VydmVyTm9kZXMuZm9yRWFjaCgob2JzZXJ2ZXJOb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeEluZGV4ID0ge307XG4gICAgICAgICAgICAgICAgdmFyIHZvY2FidWxhcnkgPSBudWxsO1xuICAgICAgICAgICAgICAgIFJERmFVdGlsLmluZGV4UkRGYVJlc291cmNlcyhpbmRleCwgb2JzZXJ2ZXJOb2RlLCBudWxsLCB2b2NhYnVsYXJ5LCBwcmVmaXhJbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFJERmFVdGlsLnJkZmFJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW5kZXhSREZhUmVzb3VyY2VzKGluZGV4LCBub2RlLCBwYXJlbnRSZXNvdXJjZSwgdm9jYWJ1bGFyeSwgcHJlZml4SW5kZXgpIHtcbiAgICAgICAgaWYgKFJERmFVdGlsLmhhc1ZvY2FidWxhcnkobm9kZSkpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB2b2NhYnVsYXJ5IGlmIHNwZWNpZmllZFxuICAgICAgICAgICAgdm9jYWJ1bGFyeSA9IFJERmFVdGlsLmdldFZvY2FidWxhcnkobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJERmFVdGlsLmhhc1JERmFSZXNvdXJjZShub2RlKSkge1xuICAgICAgICAgICAgUkRGYVV0aWwuaW5kZXhQcmVmaXhlcyhub2RlLCBwcmVmaXhJbmRleCk7XG4gICAgICAgICAgICB2YXIgaW5kZXhFbnRyeSA9IFJERmFVdGlsLm1ha2VJbmRleEVudHJ5KG5vZGUsIHZvY2FidWxhcnksIHByZWZpeEluZGV4KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRSZXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGluZGV4RW50cnkucGFyZW50UmVzb3VyY2UgPSBwYXJlbnRSZXNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW5kZXgucmVzb3VyY2VzLmhhc093blByb3BlcnR5KGluZGV4RW50cnkucmRmYVJlc291cmNlKSkge1xuICAgICAgICAgICAgICAgIC8vIG9ubHkgaW5kZXggcmVzb3VyY2UgYXQgaGlnaGVzdCBsZXZlbC5cbiAgICAgICAgICAgICAgICAvLyBsb3dlciBsZXZlbHMgbWVudGlvbnMgc3BlY2lmeSBvbmx5IHJlbGF0aW9uc1xuICAgICAgICAgICAgICAgIGluZGV4LnJlc291cmNlc1tpbmRleEVudHJ5LnJkZmFSZXNvdXJjZV0gPSBpbmRleEVudHJ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUkRGYVV0aWwuaW5kZXhSREZhUmVsYXRpb25zKGluZGV4LnJlbGF0aW9ucywgaW5kZXhFbnRyeSk7XG4gICAgICAgICAgICAvLyBvbmx5IHVwZGF0ZSBwYXJlbnQgcmVzb3VyY2UgaWYgdGhpcyBub2RlIGlzIGFuIFJERmEgcmVzb3VyY2VcbiAgICAgICAgICAgIHBhcmVudFJlc291cmNlID0gaW5kZXhFbnRyeS5yZGZhUmVzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgUkRGYVV0aWwuaW5kZXhSREZhUmVzb3VyY2VzKGluZGV4LCBjaGlsZE5vZGUsIHBhcmVudFJlc291cmNlLCB2b2NhYnVsYXJ5LCBwcmVmaXhJbmRleCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBpbmRleFJERmFSZWxhdGlvbnMocmVsYXRpb25JbmRleCwgcmVzb3VyY2VJbmRleEVudHJ5KSB7XG4gICAgICAgIFJERmFVdGlsLmluZGV4UGFyZW50UmVsYXRpb24ocmVsYXRpb25JbmRleCwgcmVzb3VyY2VJbmRleEVudHJ5KTtcbiAgICAgICAgUkRGYVV0aWwuaW5kZXhUeXBlUmVsYXRpb24ocmVsYXRpb25JbmRleCwgcmVzb3VyY2VJbmRleEVudHJ5KTtcbiAgICB9LFxuXG4gICAgaW5kZXhUeXBlUmVsYXRpb24ocmVsYXRpb25JbmRleCwgcmVzb3VyY2VJbmRleEVudHJ5KSB7XG4gICAgICAgIGlmICghcmVzb3VyY2VJbmRleEVudHJ5LnJkZlR5cGVMYWJlbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb3VyY2VJbmRleEVudHJ5LnJkZlR5cGVVUkwuZm9yRWFjaCgocmRmVHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZWxhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogcmVzb3VyY2VJbmRleEVudHJ5LnJkZmFSZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyN0eXBlXCIsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdDogcmRmVHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWxhdGlvbkluZGV4W3JlbGF0aW9uLnN1YmplY3RdLnB1c2gocmVsYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5kZXhQYXJlbnRSZWxhdGlvbihyZWxhdGlvbkluZGV4LCByZXNvdXJjZUluZGV4RW50cnkpIHtcbiAgICAgICAgbGV0IHJlbGF0aW9uID0ge1xuICAgICAgICAgICAgc3ViamVjdDogcmVzb3VyY2VJbmRleEVudHJ5LnBhcmVudFJlc291cmNlLFxuICAgICAgICAgICAgcHJlZGljYXRlOiByZXNvdXJjZUluZGV4RW50cnkucmRmYVByb3BlcnR5LFxuICAgICAgICAgICAgb2JqZWN0OiByZXNvdXJjZUluZGV4RW50cnkucmRmYVJlc291cmNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWxhdGlvbkluZGV4Lmhhc093blByb3BlcnR5KHJlbGF0aW9uLnN1YmplY3QpKSB7XG4gICAgICAgICAgICByZWxhdGlvbkluZGV4W3JlbGF0aW9uLnN1YmplY3RdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWxhdGlvbkluZGV4Lmhhc093blByb3BlcnR5KHJlbGF0aW9uLm9iamVjdCkpIHtcbiAgICAgICAgICAgIHJlbGF0aW9uSW5kZXhbcmVsYXRpb24ub2JqZWN0XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJlbGF0aW9uSW5kZXhbcmVsYXRpb24uc3ViamVjdF0ucHVzaChyZWxhdGlvbik7XG4gICAgICAgIHJlbGF0aW9uSW5kZXhbcmVsYXRpb24ub2JqZWN0XS5wdXNoKHJlbGF0aW9uKTtcbiAgICB9LFxuXG4gICAgaW5kZXhQcmVmaXhlcyhyZGZhUmVzb3VyY2VOb2RlLCBwcmVmaXhJbmRleCkge1xuICAgICAgICBpZiAoUkRGYVV0aWwuaGFzUkRGYVByZWZpeChyZGZhUmVzb3VyY2VOb2RlKSkge1xuICAgICAgICAgICAgUkRGYVV0aWwuZ2V0UkRGYVByZWZpeChyZGZhUmVzb3VyY2VOb2RlKS5mb3JFYWNoKChwcmVmaXgpID0+IHtcbiAgICAgICAgICAgICAgICBwcmVmaXhJbmRleFtwcmVmaXgudm9jYWJ1bGFyeVByZWZpeF0gPSBwcmVmaXgudm9jYWJ1bGFyeVVSTDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGJ1aWxkUmVzb3VyY2VzTWFwcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWFwcyA9IHt9O1xuICAgICAgICBSREZhVXRpbC5vYnNlcnZlck5vZGVzLmZvckVhY2goKG9ic2VydmVyTm9kZSkgPT4ge1xuICAgICAgICAgICAgUkRGYVV0aWwuZ2V0VG9wUkRGYU5vZGVzKG9ic2VydmVyTm9kZSkuZm9yRWFjaCgocmRmYVJlc291cmNlTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBtYXAgPSBSREZhVXRpbC5idWlsZFJlc291cmNlTWFwKHJkZmFSZXNvdXJjZU5vZGUpO1xuICAgICAgICAgICAgICAgIG1hcC5zb3VyY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtYXBzW21hcC5pZF0gPSBtYXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXBzO1xuICAgIH0sXG5cbiAgICBidWlsZFJlc291cmNlTWFwIDogZnVuY3Rpb24ocmRmYVJlc291cmNlTm9kZSkge1xuICAgICAgICB2YXIgcmVzb3VyY2VNYXAgPSBSREZhVXRpbC5tYWtlUkRGYUF0dHJpYnV0ZU1hcChyZGZhUmVzb3VyY2VOb2RlKTtcbiAgICAgICAgUkRGYVV0aWwuZ2V0UkRGYVN1YnJlc291cmNlcyhyZGZhUmVzb3VyY2VOb2RlKS5mb3JFYWNoKChzdWJyZXNvdXJjZU5vZGUpID0+IHtcbiAgICAgICAgICAgIHZhciBzdWJyZXNvdXJjZU1hcCA9IFJERmFVdGlsLmJ1aWxkUmVzb3VyY2VNYXAoc3VicmVzb3VyY2VOb2RlKTtcbiAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IHN1YnJlc291cmNlTWFwLnByb3BlcnR5O1xuICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhyZXNvdXJjZU1hcCkuaW5jbHVkZXMocHJvcGVydHkpKVxuICAgICAgICAgICAgICAgIHJlc291cmNlTWFwW3Byb3BlcnR5XSA9IFtdO1xuICAgICAgICAgICAgcmVzb3VyY2VNYXBbcHJvcGVydHldLnB1c2goc3VicmVzb3VyY2VNYXApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc291cmNlTWFwO1xuICAgIH0sXG5cbiAgICBtYWtlUkRGYUF0dHJpYnV0ZU1hcCA6IGZ1bmN0aW9uKHJkZmFSZXNvdXJjZU5vZGUpIHtcbiAgICAgICAgbGV0IGF0dHJzID0gUkRGYVV0aWwuZ2V0UkRGYUF0dHJpYnV0ZXMocmRmYVJlc291cmNlTm9kZSk7XG4gICAgICAgIHZhciBtYXAgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBcInR5cGVvZlwiKSB7XG4gICAgICAgICAgICAgICAgbWFwW1widHlwZVwiXSA9IGF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChhdHRyc1tuYW1lXS5pbmRleE9mKFwiIFwiKSA+PSAwKVxuICAgICAgICAgICAgICAgICAgICBtYXBbXCJ0eXBlXCJdID0gYXR0cnNbbmFtZV0uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmFtZSA9PT0gXCJyZXNvdXJjZVwiIHx8IG5hbWUgPT09IFwiYWJvdXRcIilcbiAgICAgICAgICAgICAgICBtYXBbXCJpZFwiXSA9IGF0dHJzW25hbWVdO1xuICAgICAgICAgICAgZWxzZSBpZiAobmFtZSA9PT0gXCJ2b2NhYlwiICYmIGF0dHJzW25hbWVdLmluY2x1ZGVzKFwiI1wiKSlcbiAgICAgICAgICAgICAgICBtYXBbbmFtZV0gPSBhdHRyc1tuYW1lXS5yZXBsYWNlKC8jJC8sXCJcIik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWFwW25hbWVdID0gYXR0cnNbbmFtZV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWFwO1xuICAgIH0sXG5cbiAgICBnZXRSREZhU3VicmVzb3VyY2VzIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgc3VicmVzb3VyY2VOb2RlcyA9IFtdO1xuICAgICAgICBpZiAoIW5vZGUuY2hpbGROb2RlcylcbiAgICAgICAgICAgIHJldHVybiBzdWJyZXNvdXJjZU5vZGVzO1xuICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlICE9PSB3aW5kb3cuTm9kZS5FTEVNRU5UX05PREUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAoUkRGYVV0aWwuaGFzUkRGYVJlc291cmNlKGNoaWxkTm9kZSkpXG4gICAgICAgICAgICAgICAgc3VicmVzb3VyY2VOb2Rlcy5wdXNoKGNoaWxkTm9kZSk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3Vic3VicmVzb3VyY2VOb2RlcyA9IFJERmFVdGlsLmdldFJERmFTdWJyZXNvdXJjZXMoY2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICBzdWJyZXNvdXJjZU5vZGVzID0gc3VicmVzb3VyY2VOb2Rlcy5jb25jYXQoc3Vic3VicmVzb3VyY2VOb2Rlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3VicmVzb3VyY2VOb2RlcztcbiAgICB9LFxuXG4gICAgZmluZFJlc291cmNlUmVsYXRpb25zIDogZnVuY3Rpb24ocmVzb3VyY2VzLCByZXNvdXJjZUluZGV4KSB7XG4gICAgICAgIHZhciBoYXNQYXJlbnQgPSB7fTtcbiAgICAgICAgcmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24ocmVzb3VyY2UpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSByZXNvdXJjZUluZGV4W3Jlc291cmNlXS5wYXJlbnRSZXNvdXJjZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNQYXJlbnRbcmVzb3VyY2VdID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIHJlc291cmNlID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IHJlc291cmNlSW5kZXhbcmVzb3VyY2VdLnBhcmVudFJlc291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJlbGF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciByZXNvdXJjZSBpbiBoYXNQYXJlbnQpIHtcbiAgICAgICAgICAgIHJlbGF0aW9ucy5wdXNoKHtib2R5OiByZXNvdXJjZSwgdGFyZ2V0OiBoYXNQYXJlbnRbcmVzb3VyY2VdfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlbGF0aW9ucztcbiAgICB9LFxuXG4gICAgZmlsdGVyRXhpc3RpbmdSZWxhdGlvbkFubm90YXRpb25zKHJlbGF0aW9ucywgYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHJlbGF0aW9ucy5maWx0ZXIoKHJlbGF0aW9uKSA9PlxuICAgICAgICAgICAgUkRGYVV0aWwucmVsYXRpb25Bbm5vdGF0aW9uRXhpc3RzKHJlbGF0aW9uLCBhbm5vdGF0aW9ucykgPT09IGZhbHNlXG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIHJlbGF0aW9uQW5ub3RhdGlvbkV4aXN0cyA6IGZ1bmN0aW9uKHJlbGF0aW9uLCBhbm5vdGF0aW9ucykge1xuICAgICAgICByZXR1cm4gYW5ub3RhdGlvbnMuc29tZShmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi50YXJnZXQuc291cmNlICE9PSByZWxhdGlvbi50YXJnZXQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbm5vdGF0aW9uLmJvZHkuc291cmNlICE9PSByZWxhdGlvbi5ib2R5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cblxufTtcblxuZXhwb3J0IGRlZmF1bHQgUkRGYVV0aWw7XG5cbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFFQTtBQUVBOzs7OztBQU1BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBeG1CQTtBQTZtQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/RDFaUtil.js\n");

/***/ }),

/***/ "./src/util/SelectionUtil.js":
/*!***********************************!*\
  !*** ./src/util/SelectionUtil.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/*\n * Taken from http://jsfiddle.net/8mdX4/1211/\n * See stackoverflow discussion: http://stackoverflow.com/questions/6240139/highlight-text-range-using-javascript\n * Originally created by Tim Down\n * Contributors:\n *   - Marijn Koolen\n *\n * It's difficult to get selected text without any ignorable element content:\n * - innerText interface computes how element content is displayed:\n *   https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText\n * - but innerText is not an interface for #text nodes, and not available in JSDOM for testing\n *    - https://github.com/jsdom/jsdom/issues/1245\n * - http://perfectionkills.com/the-poor-misunderstood-innerText/\n * - innerText available in:\n *    - PhantomJS: https://github.com/ariya/phantomjs\n *    - rangy: https://github.com/timdown/rangy/blob/master/src/modules/rangy-textrange.js\n * Attempt similar to what's needed:\n *   - https://stackoverflow.com/questions/34223326/get-selected-text-except-for-un-selectable-elements\n *\n */\n\n\n\n\nvar SelectionUtil = {\n  currentSelection: null,\n  makeEditableAndHighlight: function makeEditableAndHighlight(colour) {\n    var sel = window.getSelection();\n\n    if (sel.rangeCount && sel.getRangeAt) {\n      var range = sel.getRangeAt(0);\n    }\n\n    document.designMode = \"on\";\n\n    if (range) {\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // Use HiliteColor since some browsers apply BackColor to the whole block\n\n\n    if (!document.execCommand(\"HiliteColor\", false, colour)) {\n      document.execCommand(\"BackColor\", false, colour);\n    }\n\n    document.designMode = \"off\";\n  },\n  addHighlight: function addHighlight(colour) {\n    var range, sel;\n\n    if (window.getSelection) {\n      // IE9 and non-IE\n      try {\n        if (!document.execCommand(\"BackColor\", false, colour)) {\n          SelectionUtil.makeEditableAndHighlight(colour);\n        }\n      } catch (ex) {\n        SelectionUtil.makeEditableAndHighlight(colour);\n      }\n\n      sel = window.getSelection();\n    } else if (document.selection && document.selection.createRange) {\n      // IE <= 8 case\n      range = document.selection.createRange();\n      range.execCommand(\"BackColor\", false, colour);\n    }\n\n    sel.removeAllRanges();\n  },\n  removeHighlight: function removeHighlight() {\n    document.designMode = \"on\";\n    document.execCommand(\"removeFormat\", false, null);\n    document.designMode = \"off\";\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  },\n  selectAndHighlightRange: function selectAndHighlightRange(node, start, end) {\n    SelectionUtil.setRDFaSelectionRange(node, start, end);\n    SelectionUtil.addHighlight(\"yellow\");\n  },\n  selectAndRemoveRange: function selectAndRemoveRange(node, start, end) {\n    SelectionUtil.setRDFaSelectionRange(node, start, end);\n    SelectionUtil.removeHighlight();\n  },\n  setRDFaSelectionRange: function setRDFaSelectionRange(el, start, end) {\n    if (document.createRange && window.getSelection) {\n      var range = document.createRange();\n      range.selectNodeContents(el);\n      var textNodes = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRDFaTextNodes(el);\n      var foundStart = false;\n      var charCount = 0,\n          endCharCount;\n\n      for (var i = 0; i < textNodes.length; i++) {\n        var textNode = textNodes[i]; // offset of display text w.r.t underlying text content (e.g. removed leading whitespace)\n\n        var displayOffset = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayOffset(textNode);\n        var displayText = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayText(textNode);\n        endCharCount = charCount + displayText.length;\n\n        if (!foundStart && start >= charCount && (start < endCharCount || start === endCharCount && i <= textNodes.length)) {\n          range.setStart(textNode, start - charCount + displayOffset);\n          foundStart = true;\n        }\n\n        if (foundStart && end === -1) {\n          var lastTextNode = textNodes[textNodes.length - 1];\n          range.setEnd(lastTextNode, lastTextNode.length);\n          break;\n        } else if (foundStart && end !== -1 && end <= endCharCount) {\n          range.setEnd(textNode, end - charCount + displayOffset);\n          break;\n        }\n\n        charCount = endCharCount;\n      }\n\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else if (document.selection && document.body.createTextRange) {\n      var textRange = document.body.createTextRange();\n      textRange.moveToElementText(el);\n      textRange.collapse(true);\n      textRange.moveEnd(\"character\", end);\n      textRange.moveStart(\"character\", start);\n      textRange.select();\n    }\n  },\n  checkDOMElement: function checkDOMElement(element) {\n    if (element === undefined) throw Error(\"argument 'element' is required.\");\n    if (!(element instanceof Element) || !document.contains(element)) throw Error(\"element must be a DOM element.\");\n    return true;\n  },\n  checkRectangle: function checkRectangle(rect) {\n    if (rect === undefined) throw Error(\"argument 'rect' is required.\");\n    if (!(rect instanceof Object)) throw Error(\"rect should be an object with properties: x, y, w, h.\");\n    var keys = Object.keys(rect);\n    [\"x\", \"y\", \"w\", \"h\"].forEach(function (prop) {\n      if (!keys.includes(prop)) throw Error(\"rect is missing required property \" + prop + \".\");\n      if (!Number.isInteger(rect[prop])) throw Error(\"rect property \" + prop + \" is not an integer.\");\n    });\n    return true;\n  },\n  checkInterval: function checkInterval(interval) {\n    if (interval === undefined) throw Error(\"argument 'interval' is required.\");\n    if (!(interval instanceof Object)) throw Error(\"interval should be an object with properties: start, end.\");\n    var keys = Object.keys(interval);\n    [\"start\", \"end\"].forEach(function (prop) {\n      if (!keys.includes(prop)) throw Error(\"interval is missing required property \" + prop + \".\");\n      if (Number.isNaN(interval[prop])) throw Error(\"interval property \" + prop + \" is not a number.\"); //if (!Number.isInteger(interval[prop]))\n      //    interval[prop] = parseInt(interval[prop]);\n    });\n    return true;\n  },\n  setSelection: function setSelection(element, selection, mimeType) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      mimeType: mimeType\n    };\n\n    if (!selection) {\n      return true;\n    } else if (mimeType.startsWith(\"video\") || mimeType.startsWith(\"audio\")) {\n      SelectionUtil.checkInterval(selection);\n      SelectionUtil.currentSelection.interval = selection;\n    } else if (mimeType.startsWith(\"image\")) {\n      SelectionUtil.checkRectangle(selection);\n      SelectionUtil.currentSelection.rect = selection;\n    }\n  },\n  setImageSelection: function setImageSelection(element, rect) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkRectangle(rect);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      rect: rect,\n      mimeType: \"image\"\n    };\n  },\n  setAudioSelection: function setAudioSelection(element, interval) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkInterval(interval);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      interval: interval,\n      mimeType: \"audio\"\n    };\n  },\n  setVideoSelection: function setVideoSelection(element, interval) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkInterval(interval);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      interval: interval,\n      mimeType: \"video\"\n    };\n  },\n  setObserverNodeSelection: function setObserverNodeSelection() {\n    var observerNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getObserverNodes();\n    SelectionUtil.currentSelection = {\n      startNode: observerNodes[0],\n      endNode: observerNodes[observerNodes.length - 1],\n      mimeType: \"multipart\" // TODO: FIX based on actual content\n\n    };\n  },\n  ensureFocusAnchorAreLeafNodes: function ensureFocusAnchorAreLeafNodes(selection) {\n    if (selection.focusNode.nodeType === Node.ELEMENT_NODE) {\n      selection.focusNode = selection.focusNode.childNodes[selection.focusOffset];\n      selection.focusOffset = 0;\n    }\n\n    if (selection.anchorNode.nodeType === Node.ELEMENT_NODE) {\n      selection.anchorNode = selection.anchorNode.childNodes[selection.anchorOffset];\n      selection.anchorOffset = 0;\n    }\n  },\n  endPreceedsStart: function endPreceedsStart(selection) {\n    var position = selection.startNode.compareDocumentPosition(selection.endNode);\n    var backwards = position & Node.DOCUMENT_POSITION_PRECEDING;\n    if (position === 0 && selection.startOffset > selection.endOffset) backwards = 1;\n    return backwards !== 0;\n  },\n  ensureSelectionStartPreceedsEnd: function ensureSelectionStartPreceedsEnd() {\n    var selection = SelectionUtil.currentSelection;\n\n    if (SelectionUtil.endPreceedsStart(selection)) {\n      var endNode = selection.startNode;\n      var endOffset = selection.startOffset;\n      selection.startNode = selection.endNode;\n      selection.startOffset = selection.endOffset;\n      selection.endNode = endNode;\n      selection.endOffset = endOffset;\n    }\n  },\n  setSelectionStartEndNodes: function setSelectionStartEndNodes(selection) {\n    SelectionUtil.ensureFocusAnchorAreLeafNodes(selection);\n    SelectionUtil.currentSelection = {\n      startNode: selection.anchorNode,\n      startOffset: selection.anchorOffset,\n      endNode: selection.focusNode,\n      endOffset: selection.focusOffset,\n      mimeType: \"text\"\n    };\n    SelectionUtil.ensureSelectionStartPreceedsEnd();\n  },\n  setDOMSelection: function setDOMSelection() {\n    var selection = null;\n\n    if (document.getSelection) {\n      selection = document.getSelection();\n    }\n\n    if (!selection || selection.isCollapsed) {\n      SelectionUtil.setObserverNodeSelection();\n      return true;\n    } else {\n      SelectionUtil.setSelectionStartEndNodes(selection);\n    } // Set container node of start and end nodes\n\n\n    SelectionUtil.currentSelection.selectionText = selection.toString();\n    SelectionUtil.setContainerNode(); // if end node or parent is an ignorable element, set parent to previous text node\n\n    var endParent = SelectionUtil.currentSelection.endNode.parentNode;\n\n    if (_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isRDFaIgnoreNode(endParent)) {\n      var prevNode = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getPreviousTextNode(SelectionUtil.currentSelection.endNode);\n      SelectionUtil.currentSelection.endNode = prevNode;\n      SelectionUtil.currentSelection.endOffset = prevNode.length; //SelectionUtil.adjustSelection(SelectionUtil.currentSelection);\n      //selection = document.getSelection();\n    }\n\n    SelectionUtil.setSelectionText();\n  },\n  setContainerNode: function setContainerNode() {\n    SelectionUtil.checkValidTextSelection();\n    var currentSelection = SelectionUtil.currentSelection;\n    var ancestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findCommonAncestors(currentSelection.startNode, currentSelection.endNode);\n    currentSelection.containerNode = ancestors[ancestors.length - 1];\n  },\n  checkValidTextSelection: function checkValidTextSelection() {\n    if (!SelectionUtil.currentSelection) {\n      throw Error(\"No currentSelection set\");\n    }\n\n    var selection = SelectionUtil.currentSelection;\n\n    if (!selection.mimeType) {\n      throw Error(\"No currentSelection mimeType set\");\n    } else if (selection.mimeType !== \"text\") {\n      throw Error(\"currentSelection mimeType is not text\");\n    } else if (!selection.startOffset || !selection.endOffset) {\n      throw Error(\"Invalid currentSelection\");\n    }\n  },\n\n  /*\n   * Considerations:\n   * - selection can contain ignorable elements, getSelection().toString captures ignored content\n   * - if there are ignorable elements, their content needs to be stripped from the selection text\n   * - displayed whitespace is difficult to predict for individual text nodes\n   * Strategy:\n   * - list all text nodes of container node and include an ignore flag which is set to true if\n   *   the text node is descendant of an ignorable element\n   * - process text nodes in display order\n   *   - move text node content from unfiltered to filtered selection text if it's not an ignore node\n   *   (trimmed to avoid incorrectly computed leading and trailing whitespace)\n   *   - remove text node content from unfiltered selection text if it is an ignore node\n   */\n  setSelectionText: function setSelectionText() {\n    SelectionUtil.checkValidTextSelection();\n\n    if (!SelectionUtil.currentSelection.containerNode) {\n      SelectionUtil.setContainerNode();\n    }\n\n    var selection = SelectionUtil.currentSelection;\n    var startOffset = SelectionUtil.getTrimmedOffset(selection.startNode, selection.startOffset);\n    var endOffset = SelectionUtil.getTrimmedOffset(selection.endNode, selection.endOffset);\n    var textNodes = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRDFaTextNodesExtended(selection.containerNode);\n    var ignoreNodes = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRDFaIgnoreNodes(selection.containerNode);\n    if (ignoreNodes.length === 0) return true; // no ignore nodes in selection, no changes needed\n\n    var include = false;\n    var textChunks = [];\n    var unfilteredText = selection.selectionText;\n    selection.selectionText = \"\";\n    textNodes.forEach(function (textNode) {\n      var displayText = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayText(textNode.node);\n      var startNodePosition = selection.startNode.compareDocumentPosition(textNode.node);\n      var startNodePreceeds = startNodePosition & Node.DOCUMENT_POSITION_FOLLOWING;\n      var endNodePosition = selection.endNode.compareDocumentPosition(textNode.node);\n      var endNodePreceeds = endNodePosition & Node.DOCUMENT_POSITION_FOLLOWING;\n\n      if (selection.startNode === textNode.node || startNodePreceeds) {\n        include = true;\n      }\n\n      if (selection.startNode === textNode.node) {\n        displayText = displayText.substr(startOffset);\n      }\n\n      if (selection.endNode === textNode.node) {\n        displayText = displayText.substr(0, endOffset);\n      }\n\n      if (include) {\n        if (textNode.ignore) {\n          var ignoreOffset = unfilteredText.indexOf(displayText);\n          selection.selectionText += unfilteredText.substr(0, ignoreOffset);\n          var chunkLength = ignoreOffset + displayText.length;\n          unfilteredText = unfilteredText.substr(chunkLength);\n        } else {\n          var _chunkLength = unfilteredText.indexOf(displayText.trim()) + displayText.trim().length;\n\n          selection.selectionText += unfilteredText.substr(0, _chunkLength);\n          unfilteredText = unfilteredText.substr(_chunkLength);\n        }\n\n        textChunks.push(displayText.trim());\n      }\n\n      if (selection.endNode === textNode.node || endNodePreceeds) {\n        include = false;\n      }\n    }); // if there is any trailing whitespace in the unfiltered text, move it to the filtered text\n\n    selection.selectionText += unfilteredText;\n  },\n  getTrimmedOffset: function getTrimmedOffset(node, offset) {\n    if (node.nodeType === window.Node.TEXT_NODE && offset > 0) {\n      //let textContent = node.textContent;\n      if (offset > 0) offset -= _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayOffset(node); //offset -= textContent.length - textContent.trimLeft().length;\n    }\n\n    return offset;\n  },\n  // Find nodes and offsets corresponding to the selection.\n  // Start node is always before end node in presentation order\n  // regardless of whether selection is done forwards or backwards.\n  getCurrentSelection: function getCurrentSelection() {\n    if (!SelectionUtil.currentSelection) SelectionUtil.setDOMSelection();\n    return SelectionUtil.currentSelection;\n  },\n  checkSelectionRange: function checkSelectionRange() {\n    // 1. do nothing if selection is collapsed (e.g. does not span a range)\n    if (document.getSelection().isCollapsed) {\n      return null;\n    } // 2. get start and end nodes of selection in display order\n\n\n    var selection = SelectionUtil.getCurrentSelection(); // 3. if selection start node has SelectWholeElement property\n\n    var startNode = SelectionUtil.selectWholeElement(selection.startNode);\n    var endNode = SelectionUtil.selectWholeElement(selection.endNode);\n\n    if (selection.startOffset !== undefined && startNode) {\n      // move selection to start of start node\n      selection.startOffset = 0;\n      selection.startNode = startNode;\n    } // 4. if selection end node has SelectWholeElement property\n\n\n    if (selection.endOffset !== undefined && endNode) {\n      // move selection to end of end node\n      var textNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodes(endNode);\n      selection.endNode = textNodes[textNodes.length - 1];\n      selection.endOffset = selection.endNode.length;\n    } // 5. if start and/or end nodes have SelectWholeElement property,\n    // make sure the offsets are set properly\n\n\n    if (startNode || endNode) {\n      SelectionUtil.adjustSelection(selection);\n    }\n  },\n  adjustSelection: function adjustSelection(selection) {\n    var range = document.createRange();\n    range.setStart(selection.startNode, selection.startOffset);\n    range.setEnd(selection.endNode, selection.endOffset);\n    var sel = document.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  },\n  selectWholeElement: function selectWholeElement(node) {\n    var ancestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAncestors(node);\n    var nodes = ancestors.concat([node]).reverse();\n\n    for (var index = 0; index < nodes.length; index++) {\n      var checkNode = nodes[index];\n\n      if (checkNode.attributes && checkNode.hasAttribute(\"property\") && checkNode.getAttribute(\"property\") === \"selectWholeElement\") {\n        return checkNode;\n      }\n    }\n\n    return null;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (SelectionUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9TZWxlY3Rpb25VdGlsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL3V0aWwvU2VsZWN0aW9uVXRpbC5qcz8zNGY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBUYWtlbiBmcm9tIGh0dHA6Ly9qc2ZpZGRsZS5uZXQvOG1kWDQvMTIxMS9cbiAqIFNlZSBzdGFja292ZXJmbG93IGRpc2N1c3Npb246IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjI0MDEzOS9oaWdobGlnaHQtdGV4dC1yYW5nZS11c2luZy1qYXZhc2NyaXB0XG4gKiBPcmlnaW5hbGx5IGNyZWF0ZWQgYnkgVGltIERvd25cbiAqIENvbnRyaWJ1dG9yczpcbiAqICAgLSBNYXJpam4gS29vbGVuXG4gKlxuICogSXQncyBkaWZmaWN1bHQgdG8gZ2V0IHNlbGVjdGVkIHRleHQgd2l0aG91dCBhbnkgaWdub3JhYmxlIGVsZW1lbnQgY29udGVudDpcbiAqIC0gaW5uZXJUZXh0IGludGVyZmFjZSBjb21wdXRlcyBob3cgZWxlbWVudCBjb250ZW50IGlzIGRpc3BsYXllZDpcbiAqICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxFbGVtZW50L2lubmVyVGV4dFxuICogLSBidXQgaW5uZXJUZXh0IGlzIG5vdCBhbiBpbnRlcmZhY2UgZm9yICN0ZXh0IG5vZGVzLCBhbmQgbm90IGF2YWlsYWJsZSBpbiBKU0RPTSBmb3IgdGVzdGluZ1xuICogICAgLSBodHRwczovL2dpdGh1Yi5jb20vanNkb20vanNkb20vaXNzdWVzLzEyNDVcbiAqIC0gaHR0cDovL3BlcmZlY3Rpb25raWxscy5jb20vdGhlLXBvb3ItbWlzdW5kZXJzdG9vZC1pbm5lclRleHQvXG4gKiAtIGlubmVyVGV4dCBhdmFpbGFibGUgaW46XG4gKiAgICAtIFBoYW50b21KUzogaHR0cHM6Ly9naXRodWIuY29tL2FyaXlhL3BoYW50b21qc1xuICogICAgLSByYW5neTogaHR0cHM6Ly9naXRodWIuY29tL3RpbWRvd24vcmFuZ3kvYmxvYi9tYXN0ZXIvc3JjL21vZHVsZXMvcmFuZ3ktdGV4dHJhbmdlLmpzXG4gKiBBdHRlbXB0IHNpbWlsYXIgdG8gd2hhdCdzIG5lZWRlZDpcbiAqICAgLSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNDIyMzMyNi9nZXQtc2VsZWN0ZWQtdGV4dC1leGNlcHQtZm9yLXVuLXNlbGVjdGFibGUtZWxlbWVudHNcbiAqXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBSREZhVXRpbCBmcm9tIFwiLi9SREZhVXRpbC5qc1wiO1xuaW1wb3J0IERPTVV0aWwgZnJvbSBcIi4vRE9NVXRpbC5qc1wiO1xuXG5jb25zdCBTZWxlY3Rpb25VdGlsID0ge1xuXG4gICAgY3VycmVudFNlbGVjdGlvbiA6IG51bGwsXG5cbiAgICBtYWtlRWRpdGFibGVBbmRIaWdobGlnaHQgOiBmdW5jdGlvbihjb2xvdXIpIHtcbiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbC5yYW5nZUNvdW50ICYmIHNlbC5nZXRSYW5nZUF0KSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5kZXNpZ25Nb2RlID0gXCJvblwiO1xuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlIEhpbGl0ZUNvbG9yIHNpbmNlIHNvbWUgYnJvd3NlcnMgYXBwbHkgQmFja0NvbG9yIHRvIHRoZSB3aG9sZSBibG9ja1xuICAgICAgICBpZiAoIWRvY3VtZW50LmV4ZWNDb21tYW5kKFwiSGlsaXRlQ29sb3JcIiwgZmFsc2UsIGNvbG91cikpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiQmFja0NvbG9yXCIsIGZhbHNlLCBjb2xvdXIpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmRlc2lnbk1vZGUgPSBcIm9mZlwiO1xuICAgIH0sXG5cbiAgICBhZGRIaWdobGlnaHQgOiBmdW5jdGlvbihjb2xvdXIpIHtcbiAgICAgICAgdmFyIHJhbmdlLCBzZWw7XG4gICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBJRTkgYW5kIG5vbi1JRVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmV4ZWNDb21tYW5kKFwiQmFja0NvbG9yXCIsIGZhbHNlLCBjb2xvdXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblV0aWwubWFrZUVkaXRhYmxlQW5kSGlnaGxpZ2h0KGNvbG91cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBTZWxlY3Rpb25VdGlsLm1ha2VFZGl0YWJsZUFuZEhpZ2hsaWdodChjb2xvdXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UpIHtcbiAgICAgICAgICAgIC8vIElFIDw9IDggY2FzZVxuICAgICAgICAgICAgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgIHJhbmdlLmV4ZWNDb21tYW5kKFwiQmFja0NvbG9yXCIsIGZhbHNlLCBjb2xvdXIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlSGlnaGxpZ2h0IDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvY3VtZW50LmRlc2lnbk1vZGUgPSBcIm9uXCI7XG4gICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwicmVtb3ZlRm9ybWF0XCIsIGZhbHNlLCBudWxsKTtcbiAgICAgICAgZG9jdW1lbnQuZGVzaWduTW9kZSA9IFwib2ZmXCI7XG4gICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICB9LFxuXG4gICAgc2VsZWN0QW5kSGlnaGxpZ2h0UmFuZ2UgOiBmdW5jdGlvbiAobm9kZSwgc3RhcnQsIGVuZCkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFJERmFTZWxlY3Rpb25SYW5nZShub2RlLCBzdGFydCwgZW5kKTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5hZGRIaWdobGlnaHQoXCJ5ZWxsb3dcIik7XG4gICAgfSxcblxuICAgIHNlbGVjdEFuZFJlbW92ZVJhbmdlIDogZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFJERmFTZWxlY3Rpb25SYW5nZShub2RlLCBzdGFydCwgZW5kKTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5yZW1vdmVIaWdobGlnaHQoKTtcbiAgICB9LFxuXG4gICAgc2V0UkRGYVNlbGVjdGlvblJhbmdlIDogZnVuY3Rpb24oZWwsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZVJhbmdlICYmIHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWwpO1xuICAgICAgICAgICAgdmFyIHRleHROb2RlcyA9IFJERmFVdGlsLmdldFJERmFUZXh0Tm9kZXMoZWwpO1xuICAgICAgICAgICAgdmFyIGZvdW5kU3RhcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBjaGFyQ291bnQgPSAwLCBlbmRDaGFyQ291bnQ7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHROb2RlID0gdGV4dE5vZGVzW2ldO1xuICAgICAgICAgICAgICAgIC8vIG9mZnNldCBvZiBkaXNwbGF5IHRleHQgdy5yLnQgdW5kZXJseWluZyB0ZXh0IGNvbnRlbnQgKGUuZy4gcmVtb3ZlZCBsZWFkaW5nIHdoaXRlc3BhY2UpXG4gICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlPZmZzZXQgPSBET01VdGlsLmdldFRleHROb2RlRGlzcGxheU9mZnNldCh0ZXh0Tm9kZSk7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gRE9NVXRpbC5nZXRUZXh0Tm9kZURpc3BsYXlUZXh0KHRleHROb2RlKTtcbiAgICAgICAgICAgICAgICBlbmRDaGFyQ291bnQgPSBjaGFyQ291bnQgKyBkaXNwbGF5VGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZFN0YXJ0ICYmIHN0YXJ0ID49IGNoYXJDb3VudCAmJiAoc3RhcnQgPCBlbmRDaGFyQ291bnQgfHwgKHN0YXJ0ID09PSBlbmRDaGFyQ291bnQgJiYgaSA8PSB0ZXh0Tm9kZXMubGVuZ3RoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGUsIHN0YXJ0IC0gY2hhckNvdW50ICsgZGlzcGxheU9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kU3RhcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmRTdGFydCAmJiBlbmQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXN0VGV4dE5vZGUgPSB0ZXh0Tm9kZXNbdGV4dE5vZGVzLmxlbmd0aC0xXTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kKGxhc3RUZXh0Tm9kZSwgbGFzdFRleHROb2RlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmb3VuZFN0YXJ0ICYmIGVuZCAhPT0gLTEgJiYgZW5kIDw9IGVuZENoYXJDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRFbmQodGV4dE5vZGUsIGVuZCAtIGNoYXJDb3VudCArIGRpc3BsYXlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhckNvdW50ID0gZW5kQ2hhckNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0UmFuZ2UgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICAgICAgdGV4dFJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KGVsKTtcbiAgICAgICAgICAgIHRleHRSYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgICAgIHRleHRSYW5nZS5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsIGVuZCk7XG4gICAgICAgICAgICB0ZXh0UmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIHN0YXJ0KTtcbiAgICAgICAgICAgIHRleHRSYW5nZS5zZWxlY3QoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjaGVja0RPTUVsZW1lbnQgOiAoZWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJhcmd1bWVudCAnZWxlbWVudCcgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkgfHwgIWRvY3VtZW50LmNvbnRhaW5zKGVsZW1lbnQpKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJlbGVtZW50IG11c3QgYmUgYSBET00gZWxlbWVudC5cIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBjaGVja1JlY3RhbmdsZSA6IChyZWN0KSA9PiB7XG4gICAgICAgIGlmIChyZWN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImFyZ3VtZW50ICdyZWN0JyBpcyByZXF1aXJlZC5cIik7XG4gICAgICAgIGlmICghKHJlY3QgaW5zdGFuY2VvZiBPYmplY3QpKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJyZWN0IHNob3VsZCBiZSBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5LCB3LCBoLlwiKTtcbiAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhyZWN0KTtcbiAgICAgICAgW1wieFwiLCBcInlcIiwgXCJ3XCIsIFwiaFwiXS5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWtleXMuaW5jbHVkZXMocHJvcCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJyZWN0IGlzIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCIgKyBwcm9wICsgXCIuXCIpO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHJlY3RbcHJvcF0pKVxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwicmVjdCBwcm9wZXJ0eSBcIiArIHByb3AgKyBcIiBpcyBub3QgYW4gaW50ZWdlci5cIik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgY2hlY2tJbnRlcnZhbCA6IChpbnRlcnZhbCkgPT4ge1xuICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiYXJndW1lbnQgJ2ludGVydmFsJyBpcyByZXF1aXJlZC5cIik7XG4gICAgICAgIGlmICghKGludGVydmFsIGluc3RhbmNlb2YgT2JqZWN0KSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiaW50ZXJ2YWwgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXM6IHN0YXJ0LCBlbmQuXCIpO1xuICAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGludGVydmFsKTtcbiAgICAgICAgW1wic3RhcnRcIiwgXCJlbmRcIl0uZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKHByb3ApKVxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiaW50ZXJ2YWwgaXMgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcIiArIHByb3AgKyBcIi5cIik7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGludGVydmFsW3Byb3BdKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImludGVydmFsIHByb3BlcnR5IFwiICsgcHJvcCArIFwiIGlzIG5vdCBhIG51bWJlci5cIik7XG4gICAgICAgICAgICAvL2lmICghTnVtYmVyLmlzSW50ZWdlcihpbnRlcnZhbFtwcm9wXSkpXG4gICAgICAgICAgICAvLyAgICBpbnRlcnZhbFtwcm9wXSA9IHBhcnNlSW50KGludGVydmFsW3Byb3BdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBzZXRTZWxlY3Rpb24gOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rpb24sIG1pbWVUeXBlKSB7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tET01FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICBTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBzdGFydE5vZGU6IGVsZW1lbnQsXG4gICAgICAgICAgICBlbmROb2RlOiBlbGVtZW50LFxuICAgICAgICAgICAgbWltZVR5cGU6IG1pbWVUeXBlXG4gICAgICAgIH07XG4gICAgICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChtaW1lVHlwZS5zdGFydHNXaXRoKFwidmlkZW9cIikgfHwgbWltZVR5cGUuc3RhcnRzV2l0aChcImF1ZGlvXCIpKSB7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLmNoZWNrSW50ZXJ2YWwoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbi5pbnRlcnZhbCA9IHNlbGVjdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChtaW1lVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2VcIikpIHtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tSZWN0YW5nbGUoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbi5yZWN0ID0gc2VsZWN0aW9uO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNldEltYWdlU2VsZWN0aW9uIDogZnVuY3Rpb24oZWxlbWVudCwgcmVjdCkge1xuICAgICAgICBTZWxlY3Rpb25VdGlsLmNoZWNrRE9NRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jaGVja1JlY3RhbmdsZShyZWN0KTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jdXJyZW50U2VsZWN0aW9uID0ge1xuICAgICAgICAgICAgc3RhcnROb2RlOiBlbGVtZW50LFxuICAgICAgICAgICAgZW5kTm9kZTogZWxlbWVudCxcbiAgICAgICAgICAgIHJlY3Q6IHJlY3QsXG4gICAgICAgICAgICBtaW1lVHlwZTogXCJpbWFnZVwiXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIHNldEF1ZGlvU2VsZWN0aW9uIDogZnVuY3Rpb24oZWxlbWVudCwgaW50ZXJ2YWwpIHtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jaGVja0RPTUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIHN0YXJ0Tm9kZTogZWxlbWVudCxcbiAgICAgICAgICAgIGVuZE5vZGU6IGVsZW1lbnQsXG4gICAgICAgICAgICBpbnRlcnZhbDogaW50ZXJ2YWwsXG4gICAgICAgICAgICBtaW1lVHlwZTogXCJhdWRpb1wiXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIHNldFZpZGVvU2VsZWN0aW9uIDogZnVuY3Rpb24oZWxlbWVudCwgaW50ZXJ2YWwpIHtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jaGVja0RPTUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIHN0YXJ0Tm9kZTogZWxlbWVudCxcbiAgICAgICAgICAgIGVuZE5vZGU6IGVsZW1lbnQsXG4gICAgICAgICAgICBpbnRlcnZhbDogaW50ZXJ2YWwsXG4gICAgICAgICAgICBtaW1lVHlwZTogXCJ2aWRlb1wiXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIHNldE9ic2VydmVyTm9kZVNlbGVjdGlvbigpIHtcbiAgICAgICAgbGV0IG9ic2VydmVyTm9kZXMgPSBET01VdGlsLmdldE9ic2VydmVyTm9kZXMoKTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jdXJyZW50U2VsZWN0aW9uID0ge1xuICAgICAgICAgICAgc3RhcnROb2RlOiBvYnNlcnZlck5vZGVzWzBdLFxuICAgICAgICAgICAgZW5kTm9kZTogb2JzZXJ2ZXJOb2Rlc1tvYnNlcnZlck5vZGVzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgbWltZVR5cGU6IFwibXVsdGlwYXJ0XCIgLy8gVE9ETzogRklYIGJhc2VkIG9uIGFjdHVhbCBjb250ZW50XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIGVuc3VyZUZvY3VzQW5jaG9yQXJlTGVhZk5vZGVzKHNlbGVjdGlvbikge1xuICAgICAgICBpZiAoc2VsZWN0aW9uLmZvY3VzTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5mb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlLmNoaWxkTm9kZXNbc2VsZWN0aW9uLmZvY3VzT2Zmc2V0XTtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5mb2N1c09mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5hbmNob3JOb2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgc2VsZWN0aW9uLmFuY2hvck5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yTm9kZS5jaGlsZE5vZGVzW3NlbGVjdGlvbi5hbmNob3JPZmZzZXRdO1xuICAgICAgICAgICAgc2VsZWN0aW9uLmFuY2hvck9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZW5kUHJlY2VlZHNTdGFydChzZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gc2VsZWN0aW9uLnN0YXJ0Tm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihzZWxlY3Rpb24uZW5kTm9kZSk7XG4gICAgICAgIGxldCBiYWNrd2FyZHMgPSBwb3NpdGlvbiAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HO1xuICAgICAgICBpZiAocG9zaXRpb24gPT09IDAgJiYgc2VsZWN0aW9uLnN0YXJ0T2Zmc2V0ID4gc2VsZWN0aW9uLmVuZE9mZnNldClcbiAgICAgICAgICAgIGJhY2t3YXJkcyA9IDE7XG4gICAgICAgIHJldHVybiAoYmFja3dhcmRzICE9PSAwKTtcbiAgICB9LFxuXG4gICAgZW5zdXJlU2VsZWN0aW9uU3RhcnRQcmVjZWVkc0VuZCgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbjtcbiAgICAgICAgaWYgKFNlbGVjdGlvblV0aWwuZW5kUHJlY2VlZHNTdGFydChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICBsZXQgZW5kTm9kZSA9IHNlbGVjdGlvbi5zdGFydE5vZGU7XG4gICAgICAgICAgICBsZXQgZW5kT2Zmc2V0ID0gc2VsZWN0aW9uLnN0YXJ0T2Zmc2V0O1xuICAgICAgICAgICAgc2VsZWN0aW9uLnN0YXJ0Tm9kZSA9IHNlbGVjdGlvbi5lbmROb2RlO1xuICAgICAgICAgICAgc2VsZWN0aW9uLnN0YXJ0T2Zmc2V0ID0gc2VsZWN0aW9uLmVuZE9mZnNldDtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5lbmROb2RlID0gZW5kTm9kZTtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5lbmRPZmZzZXQgPSBlbmRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0U2VsZWN0aW9uU3RhcnRFbmROb2RlcyhzZWxlY3Rpb24pIHtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5lbnN1cmVGb2N1c0FuY2hvckFyZUxlYWZOb2RlcyhzZWxlY3Rpb24pO1xuICAgICAgICBTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBzdGFydE5vZGU6IHNlbGVjdGlvbi5hbmNob3JOb2RlLFxuICAgICAgICAgICAgc3RhcnRPZmZzZXQ6IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQsXG4gICAgICAgICAgICBlbmROb2RlOiBzZWxlY3Rpb24uZm9jdXNOb2RlLFxuICAgICAgICAgICAgZW5kT2Zmc2V0OiBzZWxlY3Rpb24uZm9jdXNPZmZzZXQsXG4gICAgICAgICAgICBtaW1lVHlwZTogXCJ0ZXh0XCJcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5lbnN1cmVTZWxlY3Rpb25TdGFydFByZWNlZWRzRW5kKCk7XG4gICAgfSxcblxuICAgIHNldERPTVNlbGVjdGlvbiA6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldFNlbGVjdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxlY3Rpb24gfHwgc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLnNldE9ic2VydmVyTm9kZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFNlbGVjdGlvblN0YXJ0RW5kTm9kZXMoc2VsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgY29udGFpbmVyIG5vZGUgb2Ygc3RhcnQgYW5kIGVuZCBub2Rlc1xuICAgICAgICBTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24uc2VsZWN0aW9uVGV4dCA9IHNlbGVjdGlvbi50b1N0cmluZygpO1xuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldENvbnRhaW5lck5vZGUoKTtcbiAgICAgICAgLy8gaWYgZW5kIG5vZGUgb3IgcGFyZW50IGlzIGFuIGlnbm9yYWJsZSBlbGVtZW50LCBzZXQgcGFyZW50IHRvIHByZXZpb3VzIHRleHQgbm9kZVxuICAgICAgICBsZXQgZW5kUGFyZW50ID0gU2VsZWN0aW9uVXRpbC5jdXJyZW50U2VsZWN0aW9uLmVuZE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKFJERmFVdGlsLmlzUkRGYUlnbm9yZU5vZGUoZW5kUGFyZW50KSkge1xuICAgICAgICAgICAgbGV0IHByZXZOb2RlID0gRE9NVXRpbC5nZXRQcmV2aW91c1RleHROb2RlKFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbi5lbmROb2RlKTtcbiAgICAgICAgICAgIFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbi5lbmROb2RlID0gcHJldk5vZGU7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24uZW5kT2Zmc2V0ID0gcHJldk5vZGUubGVuZ3RoO1xuICAgICAgICAgICAgLy9TZWxlY3Rpb25VdGlsLmFkanVzdFNlbGVjdGlvbihTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24pO1xuICAgICAgICAgICAgLy9zZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBTZWxlY3Rpb25VdGlsLnNldFNlbGVjdGlvblRleHQoKTtcbiAgICB9LFxuXG4gICAgc2V0Q29udGFpbmVyTm9kZSgpIHtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5jaGVja1ZhbGlkVGV4dFNlbGVjdGlvbigpO1xuICAgICAgICBsZXQgY3VycmVudFNlbGVjdGlvbiA9IFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbjtcbiAgICAgICAgdmFyIGFuY2VzdG9ycyA9IERPTVV0aWwuZmluZENvbW1vbkFuY2VzdG9ycyhjdXJyZW50U2VsZWN0aW9uLnN0YXJ0Tm9kZSwgY3VycmVudFNlbGVjdGlvbi5lbmROb2RlKTtcbiAgICAgICAgY3VycmVudFNlbGVjdGlvbi5jb250YWluZXJOb2RlID0gYW5jZXN0b3JzW2FuY2VzdG9ycy5sZW5ndGggLSAxXTtcbiAgICB9LFxuXG4gICAgY2hlY2tWYWxpZFRleHRTZWxlY3Rpb24oKSB7XG4gICAgICAgIGlmICghU2VsZWN0aW9uVXRpbC5jdXJyZW50U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk5vIGN1cnJlbnRTZWxlY3Rpb24gc2V0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb247XG4gICAgICAgIGlmICghc2VsZWN0aW9uLm1pbWVUeXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk5vIGN1cnJlbnRTZWxlY3Rpb24gbWltZVR5cGUgc2V0XCIpXG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0aW9uLm1pbWVUeXBlICE9PSBcInRleHRcIikge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJjdXJyZW50U2VsZWN0aW9uIG1pbWVUeXBlIGlzIG5vdCB0ZXh0XCIpXG4gICAgICAgIH0gZWxzZSBpZiAoIXNlbGVjdGlvbi5zdGFydE9mZnNldCB8fCAhc2VsZWN0aW9uLmVuZE9mZnNldCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGN1cnJlbnRTZWxlY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLypcbiAgICAgKiBDb25zaWRlcmF0aW9uczpcbiAgICAgKiAtIHNlbGVjdGlvbiBjYW4gY29udGFpbiBpZ25vcmFibGUgZWxlbWVudHMsIGdldFNlbGVjdGlvbigpLnRvU3RyaW5nIGNhcHR1cmVzIGlnbm9yZWQgY29udGVudFxuICAgICAqIC0gaWYgdGhlcmUgYXJlIGlnbm9yYWJsZSBlbGVtZW50cywgdGhlaXIgY29udGVudCBuZWVkcyB0byBiZSBzdHJpcHBlZCBmcm9tIHRoZSBzZWxlY3Rpb24gdGV4dFxuICAgICAqIC0gZGlzcGxheWVkIHdoaXRlc3BhY2UgaXMgZGlmZmljdWx0IHRvIHByZWRpY3QgZm9yIGluZGl2aWR1YWwgdGV4dCBub2Rlc1xuICAgICAqIFN0cmF0ZWd5OlxuICAgICAqIC0gbGlzdCBhbGwgdGV4dCBub2RlcyBvZiBjb250YWluZXIgbm9kZSBhbmQgaW5jbHVkZSBhbiBpZ25vcmUgZmxhZyB3aGljaCBpcyBzZXQgdG8gdHJ1ZSBpZlxuICAgICAqICAgdGhlIHRleHQgbm9kZSBpcyBkZXNjZW5kYW50IG9mIGFuIGlnbm9yYWJsZSBlbGVtZW50XG4gICAgICogLSBwcm9jZXNzIHRleHQgbm9kZXMgaW4gZGlzcGxheSBvcmRlclxuICAgICAqICAgLSBtb3ZlIHRleHQgbm9kZSBjb250ZW50IGZyb20gdW5maWx0ZXJlZCB0byBmaWx0ZXJlZCBzZWxlY3Rpb24gdGV4dCBpZiBpdCdzIG5vdCBhbiBpZ25vcmUgbm9kZVxuICAgICAqICAgKHRyaW1tZWQgdG8gYXZvaWQgaW5jb3JyZWN0bHkgY29tcHV0ZWQgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSlcbiAgICAgKiAgIC0gcmVtb3ZlIHRleHQgbm9kZSBjb250ZW50IGZyb20gdW5maWx0ZXJlZCBzZWxlY3Rpb24gdGV4dCBpZiBpdCBpcyBhbiBpZ25vcmUgbm9kZVxuICAgICAqL1xuICAgIHNldFNlbGVjdGlvblRleHQoKSB7XG4gICAgICAgIFNlbGVjdGlvblV0aWwuY2hlY2tWYWxpZFRleHRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKCFTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24uY29udGFpbmVyTm9kZSkge1xuICAgICAgICAgICAgU2VsZWN0aW9uVXRpbC5zZXRDb250YWluZXJOb2RlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IFNlbGVjdGlvblV0aWwuY3VycmVudFNlbGVjdGlvbjtcbiAgICAgICAgdmFyIHN0YXJ0T2Zmc2V0ID0gU2VsZWN0aW9uVXRpbC5nZXRUcmltbWVkT2Zmc2V0KHNlbGVjdGlvbi5zdGFydE5vZGUsIHNlbGVjdGlvbi5zdGFydE9mZnNldCk7XG4gICAgICAgIHZhciBlbmRPZmZzZXQgPSBTZWxlY3Rpb25VdGlsLmdldFRyaW1tZWRPZmZzZXQoc2VsZWN0aW9uLmVuZE5vZGUsIHNlbGVjdGlvbi5lbmRPZmZzZXQpO1xuICAgICAgICBsZXQgdGV4dE5vZGVzID0gUkRGYVV0aWwuZ2V0UkRGYVRleHROb2Rlc0V4dGVuZGVkKHNlbGVjdGlvbi5jb250YWluZXJOb2RlKVxuICAgICAgICBsZXQgaWdub3JlTm9kZXMgPSBSREZhVXRpbC5nZXRSREZhSWdub3JlTm9kZXMoc2VsZWN0aW9uLmNvbnRhaW5lck5vZGUpO1xuICAgICAgICBpZiAoaWdub3JlTm9kZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIG5vIGlnbm9yZSBub2RlcyBpbiBzZWxlY3Rpb24sIG5vIGNoYW5nZXMgbmVlZGVkXG4gICAgICAgIHZhciBpbmNsdWRlID0gZmFsc2U7XG4gICAgICAgIHZhciB0ZXh0Q2h1bmtzID0gW107XG4gICAgICAgIHZhciB1bmZpbHRlcmVkVGV4dCA9IHNlbGVjdGlvbi5zZWxlY3Rpb25UZXh0O1xuICAgICAgICBzZWxlY3Rpb24uc2VsZWN0aW9uVGV4dCA9IFwiXCI7XG4gICAgICAgIHRleHROb2Rlcy5mb3JFYWNoKCh0ZXh0Tm9kZSkgPT4ge1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlUZXh0ID0gRE9NVXRpbC5nZXRUZXh0Tm9kZURpc3BsYXlUZXh0KHRleHROb2RlLm5vZGUpO1xuICAgICAgICAgICAgbGV0IHN0YXJ0Tm9kZVBvc2l0aW9uID0gc2VsZWN0aW9uLnN0YXJ0Tm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0ZXh0Tm9kZS5ub2RlKVxuICAgICAgICAgICAgbGV0IHN0YXJ0Tm9kZVByZWNlZWRzID0gc3RhcnROb2RlUG9zaXRpb24gJiBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORztcbiAgICAgICAgICAgIGxldCBlbmROb2RlUG9zaXRpb24gPSBzZWxlY3Rpb24uZW5kTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0ZXh0Tm9kZS5ub2RlKVxuICAgICAgICAgICAgbGV0IGVuZE5vZGVQcmVjZWVkcyA9IGVuZE5vZGVQb3NpdGlvbiAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5zdGFydE5vZGUgPT09IHRleHROb2RlLm5vZGUgfHwgc3RhcnROb2RlUHJlY2VlZHMpIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uc3RhcnROb2RlID09PSB0ZXh0Tm9kZS5ub2RlKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5zdWJzdHIoc3RhcnRPZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5lbmROb2RlID09PSB0ZXh0Tm9kZS5ub2RlKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5zdWJzdHIoMCwgZW5kT2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmNsdWRlKXtcbiAgICAgICAgICAgICAgICBpZiAodGV4dE5vZGUuaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpZ25vcmVPZmZzZXQgPSB1bmZpbHRlcmVkVGV4dC5pbmRleE9mKGRpc3BsYXlUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLnNlbGVjdGlvblRleHQgKz0gdW5maWx0ZXJlZFRleHQuc3Vic3RyKDAsIGlnbm9yZU9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjaHVua0xlbmd0aCA9IGlnbm9yZU9mZnNldCArIGRpc3BsYXlUZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdW5maWx0ZXJlZFRleHQgPSB1bmZpbHRlcmVkVGV4dC5zdWJzdHIoY2h1bmtMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjaHVua0xlbmd0aCA9IHVuZmlsdGVyZWRUZXh0LmluZGV4T2YoZGlzcGxheVRleHQudHJpbSgpKSArIGRpc3BsYXlUZXh0LnRyaW0oKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5zZWxlY3Rpb25UZXh0ICs9IHVuZmlsdGVyZWRUZXh0LnN1YnN0cigwLCBjaHVua0xlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHVuZmlsdGVyZWRUZXh0ID0gdW5maWx0ZXJlZFRleHQuc3Vic3RyKGNodW5rTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGV4dENodW5rcy5wdXNoKGRpc3BsYXlUZXh0LnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmVuZE5vZGUgPT09IHRleHROb2RlLm5vZGUgfHwgZW5kTm9kZVByZWNlZWRzKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW55IHRyYWlsaW5nIHdoaXRlc3BhY2UgaW4gdGhlIHVuZmlsdGVyZWQgdGV4dCwgbW92ZSBpdCB0byB0aGUgZmlsdGVyZWQgdGV4dFxuICAgICAgICBzZWxlY3Rpb24uc2VsZWN0aW9uVGV4dCArPSB1bmZpbHRlcmVkVGV4dDtcbiAgICB9LFxuXG4gICAgZ2V0VHJpbW1lZE9mZnNldCA6IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuVEVYVF9OT0RFICYmIG9mZnNldCA+IDApIHtcbiAgICAgICAgICAgIC8vbGV0IHRleHRDb250ZW50ID0gbm9kZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPiAwKVxuICAgICAgICAgICAgICAgIG9mZnNldCAtPSBET01VdGlsLmdldFRleHROb2RlRGlzcGxheU9mZnNldChub2RlKTtcbiAgICAgICAgICAgIC8vb2Zmc2V0IC09IHRleHRDb250ZW50Lmxlbmd0aCAtIHRleHRDb250ZW50LnRyaW1MZWZ0KCkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfSxcblxuICAgIC8vIEZpbmQgbm9kZXMgYW5kIG9mZnNldHMgY29ycmVzcG9uZGluZyB0byB0aGUgc2VsZWN0aW9uLlxuICAgIC8vIFN0YXJ0IG5vZGUgaXMgYWx3YXlzIGJlZm9yZSBlbmQgbm9kZSBpbiBwcmVzZW50YXRpb24gb3JkZXJcbiAgICAvLyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgc2VsZWN0aW9uIGlzIGRvbmUgZm9yd2FyZHMgb3IgYmFja3dhcmRzLlxuICAgIGdldEN1cnJlbnRTZWxlY3Rpb24gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFTZWxlY3Rpb25VdGlsLmN1cnJlbnRTZWxlY3Rpb24pXG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLnNldERPTVNlbGVjdGlvbigpO1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uVXRpbC5jdXJyZW50U2VsZWN0aW9uO1xuICAgIH0sXG5cbiAgICBjaGVja1NlbGVjdGlvblJhbmdlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIDEuIGRvIG5vdGhpbmcgaWYgc2VsZWN0aW9uIGlzIGNvbGxhcHNlZCAoZS5nLiBkb2VzIG5vdCBzcGFuIGEgcmFuZ2UpXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS5pc0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMi4gZ2V0IHN0YXJ0IGFuZCBlbmQgbm9kZXMgb2Ygc2VsZWN0aW9uIGluIGRpc3BsYXkgb3JkZXJcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IFNlbGVjdGlvblV0aWwuZ2V0Q3VycmVudFNlbGVjdGlvbigpO1xuICAgICAgICAvLyAzLiBpZiBzZWxlY3Rpb24gc3RhcnQgbm9kZSBoYXMgU2VsZWN0V2hvbGVFbGVtZW50IHByb3BlcnR5XG4gICAgICAgIGxldCBzdGFydE5vZGUgPSBTZWxlY3Rpb25VdGlsLnNlbGVjdFdob2xlRWxlbWVudChzZWxlY3Rpb24uc3RhcnROb2RlKTtcbiAgICAgICAgbGV0IGVuZE5vZGUgPSBTZWxlY3Rpb25VdGlsLnNlbGVjdFdob2xlRWxlbWVudChzZWxlY3Rpb24uZW5kTm9kZSk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24uc3RhcnRPZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBzdGFydE5vZGUpIHtcbiAgICAgICAgICAgIC8vIG1vdmUgc2VsZWN0aW9uIHRvIHN0YXJ0IG9mIHN0YXJ0IG5vZGVcbiAgICAgICAgICAgIHNlbGVjdGlvbi5zdGFydE9mZnNldCA9IDA7XG4gICAgICAgICAgICBzZWxlY3Rpb24uc3RhcnROb2RlID0gc3RhcnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIC8vIDQuIGlmIHNlbGVjdGlvbiBlbmQgbm9kZSBoYXMgU2VsZWN0V2hvbGVFbGVtZW50IHByb3BlcnR5XG4gICAgICAgIGlmIChzZWxlY3Rpb24uZW5kT2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgZW5kTm9kZSkge1xuICAgICAgICAgICAgLy8gbW92ZSBzZWxlY3Rpb24gdG8gZW5kIG9mIGVuZCBub2RlXG4gICAgICAgICAgICBsZXQgdGV4dE5vZGVzID0gRE9NVXRpbC5nZXRUZXh0Tm9kZXMoZW5kTm9kZSk7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZW5kTm9kZSA9IHRleHROb2Rlc1t0ZXh0Tm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBzZWxlY3Rpb24uZW5kT2Zmc2V0ID0gc2VsZWN0aW9uLmVuZE5vZGUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIC8vIDUuIGlmIHN0YXJ0IGFuZC9vciBlbmQgbm9kZXMgaGF2ZSBTZWxlY3RXaG9sZUVsZW1lbnQgcHJvcGVydHksXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgb2Zmc2V0cyBhcmUgc2V0IHByb3Blcmx5XG4gICAgICAgIGlmIChzdGFydE5vZGUgfHwgZW5kTm9kZSl7XG4gICAgICAgICAgICBTZWxlY3Rpb25VdGlsLmFkanVzdFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFkanVzdFNlbGVjdGlvbiA6IChzZWxlY3Rpb24pID0+IHtcbiAgICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoc2VsZWN0aW9uLnN0YXJ0Tm9kZSwgc2VsZWN0aW9uLnN0YXJ0T2Zmc2V0KTtcbiAgICAgICAgcmFuZ2Uuc2V0RW5kKHNlbGVjdGlvbi5lbmROb2RlLCBzZWxlY3Rpb24uZW5kT2Zmc2V0KTtcbiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgfSxcblxuICAgIHNlbGVjdFdob2xlRWxlbWVudCA6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbGV0IGFuY2VzdG9ycyA9IERPTVV0aWwuZ2V0QW5jZXN0b3JzKG5vZGUpO1xuICAgICAgICBsZXQgbm9kZXMgPSBhbmNlc3RvcnMuY29uY2F0KFtub2RlXSkucmV2ZXJzZSgpO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2tOb2RlID0gbm9kZXNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKGNoZWNrTm9kZS5hdHRyaWJ1dGVzICYmIGNoZWNrTm9kZS5oYXNBdHRyaWJ1dGUoXCJwcm9wZXJ0eVwiKSAmJiBjaGVja05vZGUuZ2V0QXR0cmlidXRlKFwicHJvcGVydHlcIikgPT09IFwic2VsZWN0V2hvbGVFbGVtZW50XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdGlvblV0aWw7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBemFBO0FBNmFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util/SelectionUtil.js\n");

/***/ }),

/***/ "./src/util/StringUtil.js":
/*!********************************!*\
  !*** ./src/util/StringUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar StringUtil = {\n  // Functions complementing trim, trimLeft and trimRight\n  // for consecutive inline elements\n  collapseRightWhitespace: function collapseRightWhitespace(text) {\n    return text[text.length - 1] === \" \" ? text.replace(/\\s+$/, \" \") : text;\n  },\n  collapseLeftWhitespace: function collapseLeftWhitespace(text) {\n    return /\\s/.test(text[0]) ? text.replace(/^\\s+/, \" \") : text;\n  },\n  collapseWhitespace: function collapseWhitespace(text) {\n    return StringUtil.collapseRightWhitespace(StringUtil.collapseLeftWhitespace(text));\n  },\n  alignRawAndDisplayStrings: function alignRawAndDisplayStrings(rawString, displayString) {\n    var map = {};\n    var rawIndex = 0;\n\n    for (var displayIndex = 0; displayIndex < displayString.length; displayIndex++) {\n      var displayChar = displayString[displayIndex];\n\n      if (displayChar === \"\\n\") {\n        // skip newline added by display block style\n        map[displayIndex] = -1;\n        continue;\n      }\n\n      var rawChar = rawString[rawIndex];\n\n      while (rawChar !== displayChar && rawIndex < rawString.length) {\n        if (displayChar.match(/\\s/) && rawChar.match(/\\S/)) {\n          break;\n        } // rawChar is not represented in displayString\n        // move to next char in rawString\n\n\n        rawIndex++;\n        rawChar = rawString[rawIndex];\n      }\n\n      if (displayChar.match(/\\s/) && rawChar.match(/\\S/)) {\n        // skip whitespace added by display inline style\n        map[displayIndex] = -1;\n        continue;\n      }\n\n      map[displayIndex] = rawIndex;\n      rawIndex++;\n\n      if (rawIndex > rawString.length) {\n        break;\n      }\n    }\n\n    var completeAlignment = Object.keys(map).length === displayString.length ? true : false;\n    return {\n      mapsTo: map,\n      complete: completeAlignment\n    };\n  },\n  isURL: function isURL(string) {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)' + // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name and extension\n    'localhost|' + // OR localhost\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n    '(\\\\:\\\\d+)?' + // port\n    '(\\\\/[-a-z\\\\d%@_.~+&:]*)*' + // path\n    '(\\\\?[;&a-z\\\\d%@_.,~+&:=-]*)?' + // query string\n    '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\n\n    return pattern.test(string);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (StringUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9TdHJpbmdVdGlsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL3V0aWwvU3RyaW5nVXRpbC5qcz8yNjAzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5jb25zdCBTdHJpbmdVdGlsID0ge1xuXG4gICAgLy8gRnVuY3Rpb25zIGNvbXBsZW1lbnRpbmcgdHJpbSwgdHJpbUxlZnQgYW5kIHRyaW1SaWdodFxuICAgIC8vIGZvciBjb25zZWN1dGl2ZSBpbmxpbmUgZWxlbWVudHNcbiAgICBjb2xsYXBzZVJpZ2h0V2hpdGVzcGFjZSA6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHRbdGV4dC5sZW5ndGgtMV0gPT09IFwiIFwiID8gdGV4dC5yZXBsYWNlKC9cXHMrJC8sIFwiIFwiKSA6IHRleHQ7XG4gICAgfSxcblxuICAgIGNvbGxhcHNlTGVmdFdoaXRlc3BhY2UgOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHJldHVybiAvXFxzLy50ZXN0KHRleHRbMF0pID8gdGV4dC5yZXBsYWNlKC9eXFxzKy8sIFwiIFwiKSA6IHRleHQ7XG4gICAgfSxcblxuICAgIGNvbGxhcHNlV2hpdGVzcGFjZSA6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWwuY29sbGFwc2VSaWdodFdoaXRlc3BhY2UoU3RyaW5nVXRpbC5jb2xsYXBzZUxlZnRXaGl0ZXNwYWNlKHRleHQpKTtcbiAgICB9LFxuXG4gICAgYWxpZ25SYXdBbmREaXNwbGF5U3RyaW5ncyA6IGZ1bmN0aW9uKHJhd1N0cmluZywgZGlzcGxheVN0cmluZykge1xuICAgICAgICB2YXIgbWFwID0ge307XG4gICAgICAgIHZhciByYXdJbmRleCA9IDA7XG4gICAgICAgIGZvciAodmFyIGRpc3BsYXlJbmRleCA9IDA7IGRpc3BsYXlJbmRleCA8IGRpc3BsYXlTdHJpbmcubGVuZ3RoOyBkaXNwbGF5SW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGRpc3BsYXlDaGFyID0gZGlzcGxheVN0cmluZ1tkaXNwbGF5SW5kZXhdO1xuICAgICAgICAgICAgaWYgKGRpc3BsYXlDaGFyID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBuZXdsaW5lIGFkZGVkIGJ5IGRpc3BsYXkgYmxvY2sgc3R5bGVcbiAgICAgICAgICAgICAgICBtYXBbZGlzcGxheUluZGV4XSA9IC0xO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhd0NoYXIgPSByYXdTdHJpbmdbcmF3SW5kZXhdO1xuICAgICAgICAgICAgd2hpbGUgKHJhd0NoYXIgIT09IGRpc3BsYXlDaGFyICYmIHJhd0luZGV4IDwgcmF3U3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5Q2hhci5tYXRjaCgvXFxzLykgJiYgcmF3Q2hhci5tYXRjaCgvXFxTLykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJhd0NoYXIgaXMgbm90IHJlcHJlc2VudGVkIGluIGRpc3BsYXlTdHJpbmdcbiAgICAgICAgICAgICAgICAvLyBtb3ZlIHRvIG5leHQgY2hhciBpbiByYXdTdHJpbmdcbiAgICAgICAgICAgICAgICByYXdJbmRleCsrO1xuICAgICAgICAgICAgICAgIHJhd0NoYXIgPSByYXdTdHJpbmdbcmF3SW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3BsYXlDaGFyLm1hdGNoKC9cXHMvKSAmJiByYXdDaGFyLm1hdGNoKC9cXFMvKSkge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgd2hpdGVzcGFjZSBhZGRlZCBieSBkaXNwbGF5IGlubGluZSBzdHlsZVxuICAgICAgICAgICAgICAgIG1hcFtkaXNwbGF5SW5kZXhdID0gLTE7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXBbZGlzcGxheUluZGV4XSA9IHJhd0luZGV4O1xuICAgICAgICAgICAgcmF3SW5kZXgrKztcbiAgICAgICAgICAgIGlmIChyYXdJbmRleCA+IHJhd1N0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29tcGxldGVBbGlnbm1lbnQgPSAoT2JqZWN0LmtleXMobWFwKS5sZW5ndGggPT09IGRpc3BsYXlTdHJpbmcubGVuZ3RoKSA/IHRydWU6IGZhbHNlO1xuICAgICAgICByZXR1cm4ge21hcHNUbzogbWFwLCBjb21wbGV0ZTogY29tcGxldGVBbGlnbm1lbnR9O1xuICAgIH0sXG5cbiAgICBpc1VSTCA6IChzdHJpbmcpID0+IHtcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKCdeKGh0dHBzPzpcXFxcL1xcXFwvKScrIC8vIHByb3RvY29sXG4gICAgICAgICcoKChbYS16XFxcXGRdKFthLXpcXFxcZC1dKlthLXpcXFxcZF0pKilcXFxcLikrW2Etel17Mix9fCcrIC8vIGRvbWFpbiBuYW1lIGFuZCBleHRlbnNpb25cbiAgICAgICAgJ2xvY2FsaG9zdHwnKyAvLyBPUiBsb2NhbGhvc3RcbiAgICAgICAgJygoXFxcXGR7MSwzfVxcXFwuKXszfVxcXFxkezEsM30pKScrIC8vIE9SIGlwICh2NCkgYWRkcmVzc1xuICAgICAgICAnKFxcXFw6XFxcXGQrKT8nKyAvLyBwb3J0XG4gICAgICAgICcoXFxcXC9bLWEtelxcXFxkJUBfLn4rJjpdKikqJysgLy8gcGF0aFxuICAgICAgICAnKFxcXFw/WzsmYS16XFxcXGQlQF8uLH4rJjo9LV0qKT8nKyAvLyBxdWVyeSBzdHJpbmdcbiAgICAgICAgJyhcXFxcI1stYS16XFxcXGRfXSopPyQnLCdpJyk7IC8vIGZyYWdtZW50IGxvY2F0b3JcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChzdHJpbmcpO1xuICAgIH0sXG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFN0cmluZ1V0aWw7XG4iXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUE3REE7QUFpRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/StringUtil.js\n");

/***/ }),

/***/ "./src/util/TargetUtil.js":
/*!********************************!*\
  !*** ./src/util/TargetUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FRBRooUtil.js */ \"./src/util/FRBRooUtil.js\");\n/* harmony import */ var _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\n/* harmony import */ var _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/*\n * TargetUtil.js allows user to select text fragments\n * in RDFa enriched HTML documents.\n *\n * This package calculates offsets of selected/highlighted text w.r.t.\n * anchor and focus nodes and their parent nodes. For this, browser\n * interpretation and treatment of whitespaces is relevant.\n * See:\n *   - https://www.w3.org/TR/html401/struct/text.html#h-9.1\n *   - https://www.w3.org/TR/html401/appendix/notes.html#notes-line-breaks\n *   - http://stackoverflow.com/questions/27025877/are-leading-and-trailing-whitespaces-ignored-in-html\n *\n * Detecting wether an element is displayed ineline:\n *   - http://stackoverflow.com/questions/2880957/detect-inline-block-type-of-a-dom-element\n */\n\n\n\n\n\n\n\nvar TargetUtil = {\n  /*\n   **************************\n   * RDFa annotation target *\n   * selection functions    *\n   **************************\n   */\n  // return all RDFa enriched nodes within range of a text selection\n  findSelectionRDFaNodes: function findSelectionRDFaNodes(selection) {\n    var descendants = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getNotIgnoreDescendants(selection.containerNode);\n    var selectionNodes;\n\n    if (selection.startNode === selection.containerNode) {\n      selectionNodes = descendants;\n    } else {\n      // select all descendants in depth first traversal order\n      // from start node up and including end node\n      var startNodeIndex = descendants.indexOf(selection.startNode);\n      var endNodeIndex = descendants.indexOf(selection.endNode);\n      selectionNodes = descendants.slice(startNodeIndex, endNodeIndex + 1); // ancestors of startnode which are descendants of container node\n      // are also selection nodes\n\n      var startAncestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAncestors(selection.startNode);\n      var containerIndex = startAncestors.indexOf(selection.containerNode);\n      var startAncestorsInSelection = startAncestors.slice(containerIndex + 1);\n      selectionNodes = startAncestorsInSelection.concat(selectionNodes);\n    }\n\n    return selectionNodes;\n  },\n  findNodeOffsetInContainer: function findNodeOffsetInContainer(container, targetNode) {\n    var descendants = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getNotIgnoreDescendants(container);\n    var precedingNodes = descendants.slice(0, descendants.indexOf(targetNode));\n    var textNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filterTextNodes(precedingNodes);\n    var targetOffset = 0;\n    textNodes.forEach(function (node) {\n      var displayText = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextNodeDisplayText(node);\n      targetOffset += displayText.length;\n    });\n    return targetOffset;\n  },\n  findHighlighted: function findHighlighted(container, selection, resourceIndex) {\n    var params = null;\n\n    if (selection.mimeType.startsWith(\"text\")) {\n      if (selection.selectionText.length > 0) {\n        params = TargetUtil.makeTextSelectors(container, selection);\n      }\n    } else if (selection.mimeType.startsWith(\"image\")) {\n      if (selection.rect !== undefined) {\n        params = {\n          rect: selection.rect\n        };\n      }\n    } else if (selection.mimeType.startsWith(\"audio\") || selection.mimeType.startsWith(\"video\")) {\n      if (selection.interval !== undefined) {\n        params = {\n          interval: selection.interval\n        };\n      }\n    } else {//console.error(\"Selection has unknown mimetype:\", selection);\n    }\n\n    params.breadcrumbs = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(container.source, resourceIndex);\n    return {\n      node: container.node,\n      mimeType: selection.mimeType,\n      params: params,\n      label: container.label,\n      source: container.source,\n      type: \"resource\"\n    };\n  },\n  makeTextSelectors: function makeTextSelectors(container, selection) {\n    var startNodeOffset = TargetUtil.findNodeOffsetInContainer(container.node, selection.startNode);\n    var endNodeOffset = TargetUtil.findNodeOffsetInContainer(container.node, selection.endNode);\n    selection.startContainerOffset = startNodeOffset + selection.startOffset;\n    selection.endContainerOffset = endNodeOffset + selection.endOffset;\n    return {\n      position: this.makeTextPositionParams(container, selection),\n      quote: this.makeTextQuoteParams(container, selection)\n    };\n  },\n  makeTextPositionParams: function makeTextPositionParams(container, selection) {\n    return {\n      start: selection.startContainerOffset,\n      end: selection.endContainerOffset\n    };\n  },\n  makeTextQuoteParams: function makeTextQuoteParams(container, selection) {\n    var textContent = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaTextContent(container.node);\n    var maxPrefix = selection.startContainerOffset >= 20 ? 20 : selection.startContainerOffset;\n    var selectionLength = selection.endContainerOffset - selection.startContainerOffset;\n    return {\n      exact: selection.selectionText,\n      prefix: textContent.substr(selection.startContainerOffset - maxPrefix, maxPrefix),\n      suffix: textContent.substr(selection.endContainerOffset, 20)\n    };\n  },\n  // given a list of nodes, select all RDFa enriched nodes\n  // and return as candidate annotation targets\n  getRDFaCandidates: function getRDFaCandidates(nodes, resourceIndex) {\n    return _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].selectRDFaNodes(nodes).map(function (node) {\n      var resourceId = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaResource(node);\n      return {\n        node: node,\n        type: \"resource\",\n        mimeType: \"text\",\n        // TODO - fix based on actual content\n        params: {\n          breadcrumbs: _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(resourceId, resourceIndex),\n          text: _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaTextContent(node)\n        },\n        label: node.getAttribute(\"typeof\"),\n        source: resourceId\n      };\n    });\n  },\n  // Return all potential annotation targets.\n  getCandidates: function getCandidates(annotations, defaultTargets, resourceData) {\n    var candidateResources = TargetUtil.getCandidateRDFaTargets(defaultTargets, resourceData.resourceIndex);\n    var candidateExternalResources = TargetUtil.getCandidateExternalResources(candidateResources, resourceData);\n    var candidateAnnotations = TargetUtil.selectCandidateAnnotations(annotations, candidateResources.highlighted);\n    return {\n      resource: candidateResources,\n      annotation: candidateAnnotations,\n      external: candidateExternalResources\n    };\n  },\n  // Given a set of potential target resources, return a list of all associated external resources\n  getCandidateExternalResources: function getCandidateExternalResources(resources, resourceData) {\n    var externalResources = {\n      highlighted: null,\n      wholeNodes: []\n    };\n\n    if (resources.highlighted && TargetUtil.hasRepresentedResource(resources.highlighted.source, resourceData)) {\n      var highlighted = TargetUtil.getCandidateExternalResource(resources.highlighted, resourceData);\n      externalResources.highlighted = highlighted;\n    }\n\n    var resourceIds = resources.wholeNodes.map(function (resource) {\n      return resource.source;\n    });\n    var wholeNodes = resources.wholeNodes.filter(function (resource) {\n      return TargetUtil.hasRepresentedResource(resource.source, resourceData);\n    });\n    externalResources.wholeNodes = wholeNodes.map(function (wholeNode) {\n      return TargetUtil.getCandidateExternalResource(wholeNode, resourceData);\n    });\n    return externalResources;\n  },\n  hasRepresentedResource: function hasRepresentedResource(resourceId, resourceData) {\n    if (!resourceData.representedResourceMap) {\n      return false;\n    } else {\n      return resourceData.representedResourceMap.hasOwnProperty(resourceId);\n    }\n  },\n  getCandidateExternalResource: function getCandidateExternalResource(resource, resourceData) {\n    if (TargetUtil.hasRepresentedResource(resource.source, resourceData)) {\n      var representationResource = resourceData.representedResourceMap[resource.source];\n      var externalMap = resourceData.externalResourceIndex[representationResource.parentResource];\n      var externalResource = {\n        resource: externalMap.resource,\n        parentResource: externalMap.parentResource,\n        relation: externalMap.relation,\n        rdfType: externalMap.rdfType,\n        type: externalMap.type\n      };\n      externalResource.params = {};\n\n      if (resource.params.hasOwnProperty(\"quote\")) {\n        externalResource.params.quote = resource.params.quote;\n      }\n\n      if (resource.params.hasOwnProperty(\"position\")) {\n        externalResource.params.position = resource.params.position;\n      }\n\n      if (resource.params.hasOwnProperty(\"text\")) {\n        externalResource.params.text = resource.params.text;\n      }\n\n      externalResource.params.position = resource.params.position;\n      externalResource.params.breadcrumbs = _FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createBreadcrumbTrail(externalResource.resource, resourceData.externalResourceIndex);\n      externalResource.mimeType = resource.mimeType;\n      externalResource.label = externalResource.rdfType.map(function (rdfType) {\n        return rdfType.substr(rdfType.indexOf(\"#\") + 1);\n      });\n      externalResource.source = externalResource.resource;\n      return externalResource;\n    } else {\n      return null;\n    }\n  },\n  // Annotation targets are elements containing\n  // or contained in the selected passage.\n  getCandidateRDFaTargets: function getCandidateRDFaTargets(defaultTargets, resourceIndex) {\n    var selection = _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCurrentSelection();\n    var ancestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findCommonAncestors(selection.startNode, selection.endNode);\n    selection.containerNode = ancestors[ancestors.length - 1];\n    var biggerNodes = TargetUtil.getRDFaCandidates(ancestors, resourceIndex);\n    var selectionNodes = TargetUtil.findSelectionRDFaNodes(selection);\n    var smallerNodes = TargetUtil.getRDFaCandidates(selectionNodes, resourceIndex);\n    var wholeNodes = biggerNodes.concat(smallerNodes);\n    var highlighted = null;\n\n    if (selection.startOffset !== undefined || selection.rect !== undefined || selection.interval !== undefined) {\n      var container = biggerNodes[biggerNodes.length - 1];\n      highlighted = TargetUtil.findHighlighted(container, selection, resourceIndex);\n    } else if (defaultTargets !== undefined && Array.isArray(defaultTargets)) {\n      wholeNodes = wholeNodes.filter(function (resource) {\n        return defaultTargets.includes(resource.label);\n      });\n    }\n\n    return {\n      wholeNodes: wholeNodes,\n      highlighted: highlighted\n    };\n  },\n  selectCandidateAnnotations: function selectCandidateAnnotations(annotations, highlighted) {\n    if (!highlighted) return TargetUtil.addCandidateAnnotations(annotations);\n    var candidates = annotations.filter(function (annotation) {\n      var targets = Array.isArray(annotation.target) ? annotation.target : [annotation.target];\n      return targets.some(function (target) {\n        return TargetUtil.hasOverlap(target, highlighted);\n      });\n    });\n    return TargetUtil.addCandidateAnnotations(candidates);\n  },\n  hasOverlap: function hasOverlap(target, highlighted) {\n    // if annotation target is not highlighted resource\n    // then annotation is not a candidate target\n    if (target.source !== highlighted.source) return false; // double check that annotation target and\n    // selected candidate have same mime type\n\n    if (target.type !== TargetUtil.mapMimeType(highlighted.mimeType)) return false; // if Text target has no selector, it overlaps\n    // with highlighted range\n\n    if (!target.selector) return true; // if selection and annotation target are of type Text\n    // check if text position of annotation target overlaps\n    // with highlighted range\n\n    if (target.type === \"Text\") {\n      var textPosition = TargetUtil.getSelectorByType(target, \"TextPositionSelector\");\n      var highlightPosition = highlighted.params.position; // if a Text target has a selector, it should have a text position selector\n\n      if (textPosition && highlightPosition.start < textPosition.end && highlightPosition.end > textPosition.start) return true; // otherwise, assume target doesn't overlap with highlighted range\n\n      return false;\n    }\n  },\n  addCandidateAnnotations: function addCandidateAnnotations(annotations) {\n    return annotations.map(function (annotation) {\n      var text = \"\";\n      var label = \"\";\n\n      if (annotation.body && annotation.body.length > 0) {\n        text = annotation.body[0].value;\n        label = annotation.body[0].purpose;\n      }\n\n      return {\n        source: annotation.id,\n        type: \"annotation\",\n        params: {\n          text: text\n        },\n        label: label,\n        target: {\n          source: annotation.id\n        }\n      };\n    });\n  },\n\n  /*\n   ********************\n   * RDFa annotation  *\n   * helper functions *\n   ********************\n   */\n  getSelectorTypes: function getSelectorTypes(target) {\n    if (!target.selector) return null;\n    var selectorTypes = [];\n    var selectors = Array.isArray(target.selector) ? target.selector : [target.selector];\n    selectors.forEach(function (selector) {\n      selectorTypes.push(selector.type);\n\n      if (selector.refinedBy) {\n        var refinements = Array.isArray(selector.refinedBy) ? selector.refinedBy : [selector.refinedBy];\n        refinements.forEach(function (refinement) {\n          selectorTypes.push(refinement.type);\n        });\n      }\n    });\n    return selectorTypes;\n  },\n  getSelectorByType: function getSelectorByType(target, selectorType) {\n    if (!target.selector) return null;\n    var typeSelector = null;\n    var selectors = Array.isArray(target.selector) ? target.selector : [target.selector];\n    selectors.forEach(function (selector) {\n      if (selector.type === selectorType) typeSelector = selector;else if (selector.refinedBy) {\n        var refinements = Array.isArray(selector.refinedBy) ? selector.refinedBy : [selector.refinedBy];\n        refinements.forEach(function (refinement) {\n          if (refinement.type === selectorType) typeSelector = refinement;\n        });\n      }\n    });\n    return typeSelector;\n  },\n  mimeTypeMap: {\n    \"text\": \"Text\",\n    \"image\": \"Image\",\n    \"audio\": \"Audio\",\n    \"video\": \"Video\",\n    \"application\": \"Data\"\n  },\n  mapMimeType: function mapMimeType(mimeType) {\n    return TargetUtil.mimeTypeMap[mimeType];\n  },\n  lookupIdentifier: function lookupIdentifier(targetId, resourceData, annotations) {\n    if (resourceData.resourceIndex.resources.hasOwnProperty(targetId)) {\n      return {\n        type: \"resource\",\n        data: resourceData.resourceIndex.resources[targetId]\n      };\n    } else if (resourceData.externalResourceIndex && resourceData.externalResourceIndex.hasOwnProperty(targetId)) {\n      return {\n        type: \"external\",\n        data: resourceData.externalResourceIndex[targetId]\n      };\n    } else {\n      var source = {\n        type: \"unknown\",\n        data: null\n      };\n      annotations.forEach(function (annotation) {\n        if (annotation.id == targetId) {\n          source.type = \"annotation\";\n          source.data = annotation;\n        }\n      });\n      return source;\n    }\n  },\n  mapTargetsToDOMElements: function mapTargetsToDOMElements(annotation, resourceData, annotations) {\n    var domTargets = [];\n    _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargets(annotation).forEach(function (target) {\n      var targetId = _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargetIdentifier(target);\n      if (!targetId) // target is not loaded in browser window\n        return [];\n      var source = TargetUtil.lookupIdentifier(targetId, resourceData, annotations);\n\n      if (source.type === undefined) {//console.error(\"source information for target \" + targetId + \" should have a type:\", source);\n      } else if (source.type === \"annotation\") {\n        _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargets(source.data).forEach(function () {\n          domTargets = domTargets.concat(TargetUtil.mapTargetsToDOMElements(source.data, resourceData, annotations));\n        });\n      } else if (source.type === \"resource\") {\n        if (target.type === undefined) {//console.error(\"Target should have a type property:\", target);\n        } else if (target.type === \"Text\") {\n          domTargets.push(TargetUtil.makeTextRange(target, source.data.domNode));\n        } else if (target.type === \"Image\") {\n          domTargets.push(TargetUtil.makeImageRegion(target, source.data.domNode));\n        } else if (target.type === \"Video\" || target.type === \"Audio\") {\n          domTargets.push(TargetUtil.makeTemporalSegment(target, source.data.domNode));\n        } else {//console.error(\"Unknown target type\", target);\n        }\n      } else {//console.error(\"no source type for source:\", source);\n        }\n    });\n    return domTargets;\n  },\n  makeImageRegion: function makeImageRegion(target, node) {\n    var imageRegion = {\n      type: \"Image\",\n      node: node\n    };\n\n    if (target.selector !== undefined && target.selector !== null) {\n      var mediaFragment = TargetUtil.getTargetMediaFragment(target);\n      imageRegion.rect = mediaFragment.rect;\n    }\n\n    return imageRegion;\n  },\n  makeTextRange: function makeTextRange(target, node) {\n    var targetRange = {\n      type: \"Text\",\n      start: 0,\n      end: -1,\n      node: node\n    };\n    var textPosition = TargetUtil.getSelectorByType(target, \"TextPositionSelector\");\n\n    if (textPosition && textPosition.start !== undefined) {\n      targetRange.start = textPosition.start;\n      targetRange.end = textPosition.end;\n    }\n\n    return targetRange;\n  },\n  makeTemporalSegment: function makeTemporalSegment(target, node) {\n    var segment = {\n      type: target.type,\n      node: node\n    };\n\n    if (target.selector !== undefined && target.selector !== null) {\n      var mediaFragment = TargetUtil.getTargetMediaFragment(target);\n      segment.interval = mediaFragment.interval;\n    }\n\n    return segment;\n  },\n  getTargetText: function getTargetText(target, resource) {\n    // if whole resource is the target,\n    // return the text content of the corresponding node\n    if (!target.selector && !resource.data.text) throw Error(\"Invalid text target! Should have selector or point to DOM element with text content\");\n    if (!target.selector) return resource.data.text;\n    var selector = target.selector;\n    if (target.selector.refinedBy) selector = target.selector.refinedBy; // if there are multiple selectors, pick any selector since they are alternatives\n\n    if (TargetUtil.hasQuoteSelector(selector)) {\n      selector = TargetUtil.getQuoteSelector(selector);\n      return selector.exact;\n    }\n\n    selector = Array.isArray(selector) ? selector[0] : selector;\n    if (!selector.type) return null;\n    if (selector.type === \"TextQuoteSelector\") return selector.exact;\n    if (selector.type === \"TextPositionSelector\") return TargetUtil.getTargetRangeText(resource.data.domNode, selector.start, selector.end);\n\n    if (selector.type === \"NestedPIDSelector\") {}\n\n    if (resource.data.text) return resource.data.text;\n    return \"\"; // if no text can is targeted, return empty string\n  },\n  hasQuoteSelector: function hasQuoteSelector(selector) {\n    var quoteSelector = null;\n\n    if (Array.isArray(selector)) {\n      return selector.some(function (s) {\n        return s.type === \"TextQuoteSelector\";\n      });\n    } else if (!selector.hasOwnProperty(\"type\")) {\n      console.log(\"selector:\", selector);\n      throw Error(\"Invalid selector! selector requires a 'type' property\");\n    } else {\n      return selector.type === \"TextQuoteSelector\";\n    }\n  },\n  getQuoteSelector: function getQuoteSelector(selector) {\n    var quoteSelector = null;\n\n    if (Array.isArray(selector)) {\n      selector.forEach(function (s) {\n        if (s.type === \"TextQuoteSelector\") {\n          quoteSelector = s;\n        }\n      });\n      return quoteSelector;\n    } else if (selector.hasOwnProperty(\"type\")) {\n      console.log(\"selector:\", selector);\n      throw Error(\"Invalid selector:\");\n    } else {\n      return selector.type === \"TextQuoteSelector\";\n    }\n  },\n  getTargetRangeText: function getTargetRangeText(node, start, end) {\n    _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setRDFaSelectionRange(node, start, end);\n    var selection = window.document.getSelection();\n    var text = selection.toString();\n    selection.removeAllRanges();\n    return text;\n  },\n  getTargetMediaFragment: function getTargetMediaFragment(target) {\n    if (typeof target === \"string\") return null;\n\n    if (target.selector && target.selector.type === \"FragmentSelector\") {\n      return target.selector;\n    } else if (target.selector.refinedBy && target.selector.refinedBy.type === \"FragmentSelector\") {\n      return target.selector.refinedBy;\n    }\n  },\n  toggleHighlight: function toggleHighlight(targetDOMElements, highlighted) {\n    targetDOMElements.forEach(function (target) {\n      if (target.type === undefined) {//console.error(\"Target should have a type:\", target);\n      } else if (target.type === \"Text\") {\n        TargetUtil.toggleTextHighlight(target, highlighted);\n      } else if (target.type === \"Audio\") {\n        TargetUtil.toggleAudioHighlight(target, highlighted);\n      } else if (target.type === \"Image\") {\n        TargetUtil.toggleImageHighlight(target, highlighted);\n      } else if (target.type === \"Video\") {\n        TargetUtil.toggleVideoHighlight(target, highlighted);\n      } else {//console.error(\"Unknown target type:\", target);\n      }\n    });\n  },\n  toggleTextHighlight: function toggleTextHighlight(target, highlighted) {\n    if (highlighted) _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectAndRemoveRange(target.node, target.start, target.end);else _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectAndHighlightRange(target.node, target.start, target.end);\n  },\n  toggleImageHighlight: function toggleImageHighlight(target, highlighted) {\n    // trigger toggleOverlay event with target node and rectangle as detail\n    var toggleOverlay = new CustomEvent(\"toggle-annotation-overlay\", {\n      detail: {\n        rect: target.rect,\n        highlighted: highlighted\n      }\n    });\n    target.node.dispatchEvent(toggleOverlay);\n  },\n  toggleVideoHighlight: function toggleVideoHighlight(target, started) {\n    // trigger toggleOverlay event with target node and rectangle as detail\n    var toggleOverlay = new CustomEvent(\"play-video-segment\", {\n      detail: {\n        interval: target.interval,\n        started: started\n      }\n    });\n    target.node.dispatchEvent(toggleOverlay);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TargetUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9UYXJnZXRVdGlsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vU2Nob2xhcmx5V2ViQW5ub3RhdG9yLy4vc3JjL3V0aWwvVGFyZ2V0VXRpbC5qcz9mYTA1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBUYXJnZXRVdGlsLmpzIGFsbG93cyB1c2VyIHRvIHNlbGVjdCB0ZXh0IGZyYWdtZW50c1xuICogaW4gUkRGYSBlbnJpY2hlZCBIVE1MIGRvY3VtZW50cy5cbiAqXG4gKiBUaGlzIHBhY2thZ2UgY2FsY3VsYXRlcyBvZmZzZXRzIG9mIHNlbGVjdGVkL2hpZ2hsaWdodGVkIHRleHQgdy5yLnQuXG4gKiBhbmNob3IgYW5kIGZvY3VzIG5vZGVzIGFuZCB0aGVpciBwYXJlbnQgbm9kZXMuIEZvciB0aGlzLCBicm93c2VyXG4gKiBpbnRlcnByZXRhdGlvbiBhbmQgdHJlYXRtZW50IG9mIHdoaXRlc3BhY2VzIGlzIHJlbGV2YW50LlxuICogU2VlOlxuICogICAtIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNDAxL3N0cnVjdC90ZXh0Lmh0bWwjaC05LjFcbiAqICAgLSBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDQwMS9hcHBlbmRpeC9ub3Rlcy5odG1sI25vdGVzLWxpbmUtYnJlYWtzXG4gKiAgIC0gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNzAyNTg3Ny9hcmUtbGVhZGluZy1hbmQtdHJhaWxpbmctd2hpdGVzcGFjZXMtaWdub3JlZC1pbi1odG1sXG4gKlxuICogRGV0ZWN0aW5nIHdldGhlciBhbiBlbGVtZW50IGlzIGRpc3BsYXllZCBpbmVsaW5lOlxuICogICAtIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg4MDk1Ny9kZXRlY3QtaW5saW5lLWJsb2NrLXR5cGUtb2YtYS1kb20tZWxlbWVudFxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgRE9NVXRpbCBmcm9tIFwiLi9ET01VdGlsLmpzXCI7XG5pbXBvcnQgUkRGYVV0aWwgZnJvbSBcIi4vUkRGYVV0aWwuanNcIjtcbmltcG9ydCBGUkJSb29VdGlsIGZyb20gXCIuL0ZSQlJvb1V0aWwuanNcIjtcbmltcG9ydCBTZWxlY3Rpb25VdGlsIGZyb20gXCIuL1NlbGVjdGlvblV0aWwuanNcIjtcbmltcG9ydCBBbm5vdGF0aW9uVXRpbCBmcm9tIFwiLi9Bbm5vdGF0aW9uVXRpbC5qc1wiO1xuXG5jb25zdCBUYXJnZXRVdGlsID0ge1xuXG4gICAgLypcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBSREZhIGFubm90YXRpb24gdGFyZ2V0ICpcbiAgICAgKiBzZWxlY3Rpb24gZnVuY3Rpb25zICAgICpcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKi9cblxuICAgIC8vIHJldHVybiBhbGwgUkRGYSBlbnJpY2hlZCBub2RlcyB3aXRoaW4gcmFuZ2Ugb2YgYSB0ZXh0IHNlbGVjdGlvblxuICAgIGZpbmRTZWxlY3Rpb25SREZhTm9kZXMgOiBmdW5jdGlvbihzZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IGRlc2NlbmRhbnRzID0gUkRGYVV0aWwuZ2V0Tm90SWdub3JlRGVzY2VuZGFudHMoc2VsZWN0aW9uLmNvbnRhaW5lck5vZGUpO1xuICAgICAgICB2YXIgc2VsZWN0aW9uTm9kZXM7XG4gICAgICAgIGlmIChzZWxlY3Rpb24uc3RhcnROb2RlID09PSBzZWxlY3Rpb24uY29udGFpbmVyTm9kZSkge1xuICAgICAgICAgICAgc2VsZWN0aW9uTm9kZXMgPSBkZXNjZW5kYW50cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlbGVjdCBhbGwgZGVzY2VuZGFudHMgaW4gZGVwdGggZmlyc3QgdHJhdmVyc2FsIG9yZGVyXG4gICAgICAgICAgICAvLyBmcm9tIHN0YXJ0IG5vZGUgdXAgYW5kIGluY2x1ZGluZyBlbmQgbm9kZVxuICAgICAgICAgICAgbGV0IHN0YXJ0Tm9kZUluZGV4ID0gZGVzY2VuZGFudHMuaW5kZXhPZihzZWxlY3Rpb24uc3RhcnROb2RlKTtcbiAgICAgICAgICAgIGxldCBlbmROb2RlSW5kZXggPSBkZXNjZW5kYW50cy5pbmRleE9mKHNlbGVjdGlvbi5lbmROb2RlKTtcbiAgICAgICAgICAgIHNlbGVjdGlvbk5vZGVzID0gZGVzY2VuZGFudHMuc2xpY2Uoc3RhcnROb2RlSW5kZXgsIGVuZE5vZGVJbmRleCsxKTtcbiAgICAgICAgICAgIC8vIGFuY2VzdG9ycyBvZiBzdGFydG5vZGUgd2hpY2ggYXJlIGRlc2NlbmRhbnRzIG9mIGNvbnRhaW5lciBub2RlXG4gICAgICAgICAgICAvLyBhcmUgYWxzbyBzZWxlY3Rpb24gbm9kZXNcbiAgICAgICAgICAgIGxldCBzdGFydEFuY2VzdG9ycyA9IERPTVV0aWwuZ2V0QW5jZXN0b3JzKHNlbGVjdGlvbi5zdGFydE5vZGUpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lckluZGV4ID0gc3RhcnRBbmNlc3RvcnMuaW5kZXhPZihzZWxlY3Rpb24uY29udGFpbmVyTm9kZSk7XG4gICAgICAgICAgICB2YXIgc3RhcnRBbmNlc3RvcnNJblNlbGVjdGlvbiA9IHN0YXJ0QW5jZXN0b3JzLnNsaWNlKGNvbnRhaW5lckluZGV4KzEpO1xuICAgICAgICAgICAgc2VsZWN0aW9uTm9kZXMgPSBzdGFydEFuY2VzdG9yc0luU2VsZWN0aW9uLmNvbmNhdChzZWxlY3Rpb25Ob2Rlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbk5vZGVzO1xuICAgIH0sXG5cbiAgICBmaW5kTm9kZU9mZnNldEluQ29udGFpbmVyIDogZnVuY3Rpb24oY29udGFpbmVyLCB0YXJnZXROb2RlKSB7XG4gICAgICAgIGxldCBkZXNjZW5kYW50cyA9IFJERmFVdGlsLmdldE5vdElnbm9yZURlc2NlbmRhbnRzKGNvbnRhaW5lcik7XG4gICAgICAgIGxldCBwcmVjZWRpbmdOb2RlcyA9IGRlc2NlbmRhbnRzLnNsaWNlKDAsIGRlc2NlbmRhbnRzLmluZGV4T2YodGFyZ2V0Tm9kZSkpO1xuICAgICAgICBsZXQgdGV4dE5vZGVzID0gRE9NVXRpbC5maWx0ZXJUZXh0Tm9kZXMocHJlY2VkaW5nTm9kZXMpO1xuICAgICAgICB2YXIgdGFyZ2V0T2Zmc2V0ID0gMDtcbiAgICAgICAgdGV4dE5vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gRE9NVXRpbC5nZXRUZXh0Tm9kZURpc3BsYXlUZXh0KG5vZGUpO1xuICAgICAgICAgICAgdGFyZ2V0T2Zmc2V0ICs9IGRpc3BsYXlUZXh0Lmxlbmd0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXRPZmZzZXQ7XG4gICAgfSxcblxuICAgIGZpbmRIaWdobGlnaHRlZCA6IGZ1bmN0aW9uKGNvbnRhaW5lciwgc2VsZWN0aW9uLCByZXNvdXJjZUluZGV4KSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBudWxsO1xuICAgICAgICBpZiAoc2VsZWN0aW9uLm1pbWVUeXBlLnN0YXJ0c1dpdGgoXCJ0ZXh0XCIpKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLnNlbGVjdGlvblRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IFRhcmdldFV0aWwubWFrZVRleHRTZWxlY3RvcnMoY29udGFpbmVyLCBzZWxlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbi5taW1lVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2VcIikpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24ucmVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zID0ge3JlY3Q6IHNlbGVjdGlvbi5yZWN0fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb24ubWltZVR5cGUuc3RhcnRzV2l0aChcImF1ZGlvXCIpIHx8IHNlbGVjdGlvbi5taW1lVHlwZS5zdGFydHNXaXRoKFwidmlkZW9cIikpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uaW50ZXJ2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHtpbnRlcnZhbDogc2VsZWN0aW9uLmludGVydmFsfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcihcIlNlbGVjdGlvbiBoYXMgdW5rbm93biBtaW1ldHlwZTpcIiwgc2VsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMuYnJlYWRjcnVtYnMgPSBSREZhVXRpbC5jcmVhdGVCcmVhZGNydW1iVHJhaWwoY29udGFpbmVyLnNvdXJjZSwgcmVzb3VyY2VJbmRleCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub2RlOiBjb250YWluZXIubm9kZSxcbiAgICAgICAgICAgIG1pbWVUeXBlOiBzZWxlY3Rpb24ubWltZVR5cGUsXG4gICAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICAgIGxhYmVsOiBjb250YWluZXIubGFiZWwsXG4gICAgICAgICAgICBzb3VyY2U6IGNvbnRhaW5lci5zb3VyY2UsXG4gICAgICAgICAgICB0eXBlOiBcInJlc291cmNlXCJcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgbWFrZVRleHRTZWxlY3RvcnMgOiBmdW5jdGlvbihjb250YWluZXIsIHNlbGVjdGlvbikge1xuICAgICAgICB2YXIgc3RhcnROb2RlT2Zmc2V0ID0gVGFyZ2V0VXRpbC5maW5kTm9kZU9mZnNldEluQ29udGFpbmVyKGNvbnRhaW5lci5ub2RlLCBzZWxlY3Rpb24uc3RhcnROb2RlKTtcbiAgICAgICAgdmFyIGVuZE5vZGVPZmZzZXQgPSBUYXJnZXRVdGlsLmZpbmROb2RlT2Zmc2V0SW5Db250YWluZXIoY29udGFpbmVyLm5vZGUsIHNlbGVjdGlvbi5lbmROb2RlKTtcbiAgICAgICAgc2VsZWN0aW9uLnN0YXJ0Q29udGFpbmVyT2Zmc2V0ID0gc3RhcnROb2RlT2Zmc2V0ICsgc2VsZWN0aW9uLnN0YXJ0T2Zmc2V0O1xuICAgICAgICBzZWxlY3Rpb24uZW5kQ29udGFpbmVyT2Zmc2V0ID0gZW5kTm9kZU9mZnNldCArIHNlbGVjdGlvbi5lbmRPZmZzZXQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5tYWtlVGV4dFBvc2l0aW9uUGFyYW1zKGNvbnRhaW5lciwgc2VsZWN0aW9uKSxcbiAgICAgICAgICAgIHF1b3RlOiB0aGlzLm1ha2VUZXh0UXVvdGVQYXJhbXMoY29udGFpbmVyLCBzZWxlY3Rpb24pXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIG1ha2VUZXh0UG9zaXRpb25QYXJhbXMgOiBmdW5jdGlvbihjb250YWluZXIsIHNlbGVjdGlvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnQ6IHNlbGVjdGlvbi5zdGFydENvbnRhaW5lck9mZnNldCxcbiAgICAgICAgICAgIGVuZDogc2VsZWN0aW9uLmVuZENvbnRhaW5lck9mZnNldFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBtYWtlVGV4dFF1b3RlUGFyYW1zIDogZnVuY3Rpb24oY29udGFpbmVyLCBzZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IHRleHRDb250ZW50ID0gUkRGYVV0aWwuZ2V0UkRGYVRleHRDb250ZW50KGNvbnRhaW5lci5ub2RlKTtcbiAgICAgICAgbGV0IG1heFByZWZpeCA9IHNlbGVjdGlvbi5zdGFydENvbnRhaW5lck9mZnNldCA+PSAyMCA/IDIwIDogc2VsZWN0aW9uLnN0YXJ0Q29udGFpbmVyT2Zmc2V0O1xuICAgICAgICBsZXQgc2VsZWN0aW9uTGVuZ3RoID0gc2VsZWN0aW9uLmVuZENvbnRhaW5lck9mZnNldCAtIHNlbGVjdGlvbi5zdGFydENvbnRhaW5lck9mZnNldDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGV4YWN0OiBzZWxlY3Rpb24uc2VsZWN0aW9uVGV4dCxcbiAgICAgICAgICAgIHByZWZpeDogdGV4dENvbnRlbnQuc3Vic3RyKHNlbGVjdGlvbi5zdGFydENvbnRhaW5lck9mZnNldCAtIG1heFByZWZpeCwgbWF4UHJlZml4KSxcbiAgICAgICAgICAgIHN1ZmZpeDogdGV4dENvbnRlbnQuc3Vic3RyKHNlbGVjdGlvbi5lbmRDb250YWluZXJPZmZzZXQsIDIwKVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICAvLyBnaXZlbiBhIGxpc3Qgb2Ygbm9kZXMsIHNlbGVjdCBhbGwgUkRGYSBlbnJpY2hlZCBub2Rlc1xuICAgIC8vIGFuZCByZXR1cm4gYXMgY2FuZGlkYXRlIGFubm90YXRpb24gdGFyZ2V0c1xuICAgIGdldFJERmFDYW5kaWRhdGVzIDogKG5vZGVzLCByZXNvdXJjZUluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBSREZhVXRpbC5zZWxlY3RSREZhTm9kZXMobm9kZXMpLm1hcCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc291cmNlSWQgPSBSREZhVXRpbC5nZXRSREZhUmVzb3VyY2Uobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZXNvdXJjZVwiLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBcInRleHRcIiwgLy8gVE9ETyAtIGZpeCBiYXNlZCBvbiBhY3R1YWwgY29udGVudFxuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iczogUkRGYVV0aWwuY3JlYXRlQnJlYWRjcnVtYlRyYWlsKHJlc291cmNlSWQsIHJlc291cmNlSW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSREZhVXRpbC5nZXRSREZhVGV4dENvbnRlbnQobm9kZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYWJlbDogbm9kZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlb2ZcIiksXG4gICAgICAgICAgICAgICAgc291cmNlOiByZXNvdXJjZUlkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFsbCBwb3RlbnRpYWwgYW5ub3RhdGlvbiB0YXJnZXRzLlxuICAgIGdldENhbmRpZGF0ZXMgOiAoYW5ub3RhdGlvbnMsIGRlZmF1bHRUYXJnZXRzLCByZXNvdXJjZURhdGEpID0+IHtcbiAgICAgICAgbGV0IGNhbmRpZGF0ZVJlc291cmNlcyA9IFRhcmdldFV0aWwuZ2V0Q2FuZGlkYXRlUkRGYVRhcmdldHMoZGVmYXVsdFRhcmdldHMsIHJlc291cmNlRGF0YS5yZXNvdXJjZUluZGV4KTtcbiAgICAgICAgbGV0IGNhbmRpZGF0ZUV4dGVybmFsUmVzb3VyY2VzID0gVGFyZ2V0VXRpbC5nZXRDYW5kaWRhdGVFeHRlcm5hbFJlc291cmNlcyhjYW5kaWRhdGVSZXNvdXJjZXMsIHJlc291cmNlRGF0YSk7XG4gICAgICAgIGxldCBjYW5kaWRhdGVBbm5vdGF0aW9ucyA9IFRhcmdldFV0aWwuc2VsZWN0Q2FuZGlkYXRlQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnMsIGNhbmRpZGF0ZVJlc291cmNlcy5oaWdobGlnaHRlZCk7XG4gICAgICAgIHJldHVybiB7cmVzb3VyY2U6IGNhbmRpZGF0ZVJlc291cmNlcywgYW5ub3RhdGlvbjogY2FuZGlkYXRlQW5ub3RhdGlvbnMsIGV4dGVybmFsOiBjYW5kaWRhdGVFeHRlcm5hbFJlc291cmNlc307XG4gICAgfSxcblxuICAgIC8vIEdpdmVuIGEgc2V0IG9mIHBvdGVudGlhbCB0YXJnZXQgcmVzb3VyY2VzLCByZXR1cm4gYSBsaXN0IG9mIGFsbCBhc3NvY2lhdGVkIGV4dGVybmFsIHJlc291cmNlc1xuICAgIGdldENhbmRpZGF0ZUV4dGVybmFsUmVzb3VyY2VzKHJlc291cmNlcywgcmVzb3VyY2VEYXRhKSB7XG4gICAgICAgIGxldCBleHRlcm5hbFJlc291cmNlcyA9IHtoaWdobGlnaHRlZDogbnVsbCwgd2hvbGVOb2RlczogW119O1xuICAgICAgICBpZiAocmVzb3VyY2VzLmhpZ2hsaWdodGVkICYmIFRhcmdldFV0aWwuaGFzUmVwcmVzZW50ZWRSZXNvdXJjZShyZXNvdXJjZXMuaGlnaGxpZ2h0ZWQuc291cmNlLCByZXNvdXJjZURhdGEpKSB7XG4gICAgICAgICAgICBsZXQgaGlnaGxpZ2h0ZWQgPSBUYXJnZXRVdGlsLmdldENhbmRpZGF0ZUV4dGVybmFsUmVzb3VyY2UocmVzb3VyY2VzLmhpZ2hsaWdodGVkLCByZXNvdXJjZURhdGEpO1xuICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZXMuaGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRlZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzb3VyY2VJZHMgPSByZXNvdXJjZXMud2hvbGVOb2Rlcy5tYXAoKHJlc291cmNlKSA9PiB7IHJldHVybiByZXNvdXJjZS5zb3VyY2UgfSk7XG4gICAgICAgIGxldCB3aG9sZU5vZGVzID0gcmVzb3VyY2VzLndob2xlTm9kZXMuZmlsdGVyKChyZXNvdXJjZSkgPT4geyByZXR1cm4gVGFyZ2V0VXRpbC5oYXNSZXByZXNlbnRlZFJlc291cmNlKHJlc291cmNlLnNvdXJjZSwgcmVzb3VyY2VEYXRhKTsgfSk7XG4gICAgICAgIGV4dGVybmFsUmVzb3VyY2VzLndob2xlTm9kZXMgPSB3aG9sZU5vZGVzLm1hcCgod2hvbGVOb2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gVGFyZ2V0VXRpbC5nZXRDYW5kaWRhdGVFeHRlcm5hbFJlc291cmNlKHdob2xlTm9kZSwgcmVzb3VyY2VEYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBleHRlcm5hbFJlc291cmNlcztcbiAgICB9LFxuXG4gICAgaGFzUmVwcmVzZW50ZWRSZXNvdXJjZShyZXNvdXJjZUlkLCByZXNvdXJjZURhdGEpIHtcbiAgICAgICAgaWYgKCFyZXNvdXJjZURhdGEucmVwcmVzZW50ZWRSZXNvdXJjZU1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlRGF0YS5yZXByZXNlbnRlZFJlc291cmNlTWFwLmhhc093blByb3BlcnR5KHJlc291cmNlSWQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldENhbmRpZGF0ZUV4dGVybmFsUmVzb3VyY2UocmVzb3VyY2UsIHJlc291cmNlRGF0YSkge1xuICAgICAgICBpZiAoVGFyZ2V0VXRpbC5oYXNSZXByZXNlbnRlZFJlc291cmNlKHJlc291cmNlLnNvdXJjZSwgcmVzb3VyY2VEYXRhKSkge1xuICAgICAgICAgICAgbGV0IHJlcHJlc2VudGF0aW9uUmVzb3VyY2UgPSByZXNvdXJjZURhdGEucmVwcmVzZW50ZWRSZXNvdXJjZU1hcFtyZXNvdXJjZS5zb3VyY2VdO1xuICAgICAgICAgICAgbGV0IGV4dGVybmFsTWFwID0gcmVzb3VyY2VEYXRhLmV4dGVybmFsUmVzb3VyY2VJbmRleFtyZXByZXNlbnRhdGlvblJlc291cmNlLnBhcmVudFJlc291cmNlXTtcbiAgICAgICAgICAgIGxldCBleHRlcm5hbFJlc291cmNlID0ge1xuICAgICAgICAgICAgICAgIHJlc291cmNlOiBleHRlcm5hbE1hcC5yZXNvdXJjZSxcbiAgICAgICAgICAgICAgICBwYXJlbnRSZXNvdXJjZTogZXh0ZXJuYWxNYXAucGFyZW50UmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgcmVsYXRpb246IGV4dGVybmFsTWFwLnJlbGF0aW9uLFxuICAgICAgICAgICAgICAgIHJkZlR5cGU6IGV4dGVybmFsTWFwLnJkZlR5cGUsXG4gICAgICAgICAgICAgICAgdHlwZTogZXh0ZXJuYWxNYXAudHlwZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHRlcm5hbFJlc291cmNlLnBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlc291cmNlLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcInF1b3RlXCIpKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZS5wYXJhbXMucXVvdGUgPSByZXNvdXJjZS5wYXJhbXMucXVvdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzb3VyY2UucGFyYW1zLmhhc093blByb3BlcnR5KFwicG9zaXRpb25cIikpIHtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFJlc291cmNlLnBhcmFtcy5wb3NpdGlvbiA9IHJlc291cmNlLnBhcmFtcy5wb3NpdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc291cmNlLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcInRleHRcIikpIHtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFJlc291cmNlLnBhcmFtcy50ZXh0ID0gcmVzb3VyY2UucGFyYW1zLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHRlcm5hbFJlc291cmNlLnBhcmFtcy5wb3NpdGlvbiA9IHJlc291cmNlLnBhcmFtcy5wb3NpdGlvbjtcbiAgICAgICAgICAgIGV4dGVybmFsUmVzb3VyY2UucGFyYW1zLmJyZWFkY3J1bWJzID0gRlJCUm9vVXRpbC5jcmVhdGVCcmVhZGNydW1iVHJhaWwoZXh0ZXJuYWxSZXNvdXJjZS5yZXNvdXJjZSwgcmVzb3VyY2VEYXRhLmV4dGVybmFsUmVzb3VyY2VJbmRleClcbiAgICAgICAgICAgIGV4dGVybmFsUmVzb3VyY2UubWltZVR5cGUgPSByZXNvdXJjZS5taW1lVHlwZTtcbiAgICAgICAgICAgIGV4dGVybmFsUmVzb3VyY2UubGFiZWwgPSBleHRlcm5hbFJlc291cmNlLnJkZlR5cGUubWFwKChyZGZUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJkZlR5cGUuc3Vic3RyKHJkZlR5cGUuaW5kZXhPZihcIiNcIikgKyAxKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBleHRlcm5hbFJlc291cmNlLnNvdXJjZSA9IGV4dGVybmFsUmVzb3VyY2UucmVzb3VyY2U7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxSZXNvdXJjZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIEFubm90YXRpb24gdGFyZ2V0cyBhcmUgZWxlbWVudHMgY29udGFpbmluZ1xuICAgIC8vIG9yIGNvbnRhaW5lZCBpbiB0aGUgc2VsZWN0ZWQgcGFzc2FnZS5cbiAgICBnZXRDYW5kaWRhdGVSREZhVGFyZ2V0cyA6IChkZWZhdWx0VGFyZ2V0cywgcmVzb3VyY2VJbmRleCkgPT4ge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gU2VsZWN0aW9uVXRpbC5nZXRDdXJyZW50U2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciBhbmNlc3RvcnMgPSBET01VdGlsLmZpbmRDb21tb25BbmNlc3RvcnMoc2VsZWN0aW9uLnN0YXJ0Tm9kZSwgc2VsZWN0aW9uLmVuZE5vZGUpO1xuICAgICAgICBzZWxlY3Rpb24uY29udGFpbmVyTm9kZSA9IGFuY2VzdG9yc1thbmNlc3RvcnMubGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBiaWdnZXJOb2RlcyA9IFRhcmdldFV0aWwuZ2V0UkRGYUNhbmRpZGF0ZXMoYW5jZXN0b3JzLCByZXNvdXJjZUluZGV4KTtcbiAgICAgICAgbGV0IHNlbGVjdGlvbk5vZGVzID0gVGFyZ2V0VXRpbC5maW5kU2VsZWN0aW9uUkRGYU5vZGVzKHNlbGVjdGlvbik7XG4gICAgICAgIGxldCBzbWFsbGVyTm9kZXMgPSBUYXJnZXRVdGlsLmdldFJERmFDYW5kaWRhdGVzKHNlbGVjdGlvbk5vZGVzLCByZXNvdXJjZUluZGV4KTtcbiAgICAgICAgdmFyIHdob2xlTm9kZXMgPSBiaWdnZXJOb2Rlcy5jb25jYXQoc21hbGxlck5vZGVzKTtcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkID0gbnVsbDtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5zdGFydE9mZnNldCAhPT0gdW5kZWZpbmVkIHx8IHNlbGVjdGlvbi5yZWN0ICE9PSB1bmRlZmluZWQgfHwgc2VsZWN0aW9uLmludGVydmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBiaWdnZXJOb2Rlc1tiaWdnZXJOb2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkID0gVGFyZ2V0VXRpbC5maW5kSGlnaGxpZ2h0ZWQoY29udGFpbmVyLCBzZWxlY3Rpb24sIHJlc291cmNlSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlZmF1bHRUYXJnZXRzICE9PSB1bmRlZmluZWQgJiYgQXJyYXkuaXNBcnJheShkZWZhdWx0VGFyZ2V0cykpe1xuICAgICAgICAgICAgd2hvbGVOb2RlcyA9IHdob2xlTm9kZXMuZmlsdGVyKChyZXNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VGFyZ2V0cy5pbmNsdWRlcyhyZXNvdXJjZS5sYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge3dob2xlTm9kZXM6IHdob2xlTm9kZXMsIGhpZ2hsaWdodGVkOiBoaWdobGlnaHRlZH07XG4gICAgfSxcblxuICAgIHNlbGVjdENhbmRpZGF0ZUFubm90YXRpb25zIDogKGFubm90YXRpb25zLCBoaWdobGlnaHRlZCkgPT4ge1xuICAgICAgICBpZiAoIWhpZ2hsaWdodGVkKVxuICAgICAgICAgICAgcmV0dXJuIFRhcmdldFV0aWwuYWRkQ2FuZGlkYXRlQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnMpO1xuICAgICAgICBsZXQgY2FuZGlkYXRlcyA9IGFubm90YXRpb25zLmZpbHRlcihmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IEFycmF5LmlzQXJyYXkoYW5ub3RhdGlvbi50YXJnZXQpID8gYW5ub3RhdGlvbi50YXJnZXQgOiBbYW5ub3RhdGlvbi50YXJnZXRdO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldHMuc29tZSgodGFyZ2V0KSA9PiB7IHJldHVybiBUYXJnZXRVdGlsLmhhc092ZXJsYXAodGFyZ2V0LCBoaWdobGlnaHRlZCkgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gVGFyZ2V0VXRpbC5hZGRDYW5kaWRhdGVBbm5vdGF0aW9ucyhjYW5kaWRhdGVzKTtcbiAgICB9LFxuXG4gICAgaGFzT3ZlcmxhcCA6IGZ1bmN0aW9uKHRhcmdldCwgaGlnaGxpZ2h0ZWQpIHtcbiAgICAgICAgLy8gaWYgYW5ub3RhdGlvbiB0YXJnZXQgaXMgbm90IGhpZ2hsaWdodGVkIHJlc291cmNlXG4gICAgICAgIC8vIHRoZW4gYW5ub3RhdGlvbiBpcyBub3QgYSBjYW5kaWRhdGUgdGFyZ2V0XG4gICAgICAgIGlmICh0YXJnZXQuc291cmNlICE9PSBoaWdobGlnaHRlZC5zb3VyY2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIGRvdWJsZSBjaGVjayB0aGF0IGFubm90YXRpb24gdGFyZ2V0IGFuZFxuICAgICAgICAvLyBzZWxlY3RlZCBjYW5kaWRhdGUgaGF2ZSBzYW1lIG1pbWUgdHlwZVxuICAgICAgICBpZiAodGFyZ2V0LnR5cGUgIT09IFRhcmdldFV0aWwubWFwTWltZVR5cGUoaGlnaGxpZ2h0ZWQubWltZVR5cGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBpZiBUZXh0IHRhcmdldCBoYXMgbm8gc2VsZWN0b3IsIGl0IG92ZXJsYXBzXG4gICAgICAgIC8vIHdpdGggaGlnaGxpZ2h0ZWQgcmFuZ2VcbiAgICAgICAgaWYgKCF0YXJnZXQuc2VsZWN0b3IpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgLy8gaWYgc2VsZWN0aW9uIGFuZCBhbm5vdGF0aW9uIHRhcmdldCBhcmUgb2YgdHlwZSBUZXh0XG4gICAgICAgIC8vIGNoZWNrIGlmIHRleHQgcG9zaXRpb24gb2YgYW5ub3RhdGlvbiB0YXJnZXQgb3ZlcmxhcHNcbiAgICAgICAgLy8gd2l0aCBoaWdobGlnaHRlZCByYW5nZVxuICAgICAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiVGV4dFwiKSB7XG4gICAgICAgICAgICBsZXQgdGV4dFBvc2l0aW9uID0gVGFyZ2V0VXRpbC5nZXRTZWxlY3RvckJ5VHlwZSh0YXJnZXQsIFwiVGV4dFBvc2l0aW9uU2VsZWN0b3JcIik7XG4gICAgICAgICAgICBsZXQgaGlnaGxpZ2h0UG9zaXRpb24gPSBoaWdobGlnaHRlZC5wYXJhbXMucG9zaXRpb247XG4gICAgICAgICAgICAvLyBpZiBhIFRleHQgdGFyZ2V0IGhhcyBhIHNlbGVjdG9yLCBpdCBzaG91bGQgaGF2ZSBhIHRleHQgcG9zaXRpb24gc2VsZWN0b3JcbiAgICAgICAgICAgIGlmICh0ZXh0UG9zaXRpb24gJiYgaGlnaGxpZ2h0UG9zaXRpb24uc3RhcnQgPCB0ZXh0UG9zaXRpb24uZW5kICYmIGhpZ2hsaWdodFBvc2l0aW9uLmVuZCA+IHRleHRQb3NpdGlvbi5zdGFydClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgYXNzdW1lIHRhcmdldCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBoaWdobGlnaHRlZCByYW5nZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFkZENhbmRpZGF0ZUFubm90YXRpb25zIDogZnVuY3Rpb24oYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGFubm90YXRpb25zLm1hcChmdW5jdGlvbihhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKGFubm90YXRpb24uYm9keSAmJiBhbm5vdGF0aW9uLmJvZHkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSBhbm5vdGF0aW9uLmJvZHlbMF0udmFsdWU7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBhbm5vdGF0aW9uLmJvZHlbMF0ucHVycG9zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBhbm5vdGF0aW9uLmlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYW5ub3RhdGlvblwiLFxuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogYW5ub3RhdGlvbi5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKlxuICAgICAqKioqKioqKioqKioqKioqKioqKlxuICAgICAqIFJERmEgYW5ub3RhdGlvbiAgKlxuICAgICAqIGhlbHBlciBmdW5jdGlvbnMgKlxuICAgICAqKioqKioqKioqKioqKioqKioqKlxuICAgICAqL1xuXG4gICAgZ2V0U2VsZWN0b3JUeXBlcyA6IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldC5zZWxlY3RvcilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIGxldCBzZWxlY3RvclR5cGVzID0gW107XG5cbiAgICAgICAgbGV0IHNlbGVjdG9ycyA9IEFycmF5LmlzQXJyYXkodGFyZ2V0LnNlbGVjdG9yKSA/IHRhcmdldC5zZWxlY3RvciA6IFt0YXJnZXQuc2VsZWN0b3JdO1xuICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICAgICAgc2VsZWN0b3JUeXBlcy5wdXNoKHNlbGVjdG9yLnR5cGUpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yLnJlZmluZWRCeSkge1xuICAgICAgICAgICAgICAgIGxldCByZWZpbmVtZW50cyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0b3IucmVmaW5lZEJ5KSA/IHNlbGVjdG9yLnJlZmluZWRCeSA6IFtzZWxlY3Rvci5yZWZpbmVkQnldO1xuICAgICAgICAgICAgICAgIHJlZmluZW1lbnRzLmZvckVhY2goZnVuY3Rpb24ocmVmaW5lbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclR5cGVzLnB1c2gocmVmaW5lbWVudC50eXBlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RvclR5cGVzO1xuICAgIH0sXG5cbiAgICBnZXRTZWxlY3RvckJ5VHlwZSA6IGZ1bmN0aW9uKHRhcmdldCwgc2VsZWN0b3JUeXBlKSB7XG4gICAgICAgIGlmICghdGFyZ2V0LnNlbGVjdG9yKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgbGV0IHR5cGVTZWxlY3RvciA9IG51bGw7XG5cbiAgICAgICAgbGV0IHNlbGVjdG9ycyA9IEFycmF5LmlzQXJyYXkodGFyZ2V0LnNlbGVjdG9yKSA/IHRhcmdldC5zZWxlY3RvciA6IFt0YXJnZXQuc2VsZWN0b3JdO1xuICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yLnR5cGUgPT09IHNlbGVjdG9yVHlwZSlcbiAgICAgICAgICAgICAgICB0eXBlU2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yLnJlZmluZWRCeSkge1xuICAgICAgICAgICAgICAgIGxldCByZWZpbmVtZW50cyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0b3IucmVmaW5lZEJ5KSA/IHNlbGVjdG9yLnJlZmluZWRCeSA6IFtzZWxlY3Rvci5yZWZpbmVkQnldO1xuICAgICAgICAgICAgICAgIHJlZmluZW1lbnRzLmZvckVhY2goZnVuY3Rpb24ocmVmaW5lbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVmaW5lbWVudC50eXBlID09PSBzZWxlY3RvclR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlU2VsZWN0b3IgPSByZWZpbmVtZW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHR5cGVTZWxlY3RvcjtcblxuICAgIH0sXG5cbiAgICBtaW1lVHlwZU1hcCA6IHtcbiAgICAgICAgXCJ0ZXh0XCI6IFwiVGV4dFwiLFxuICAgICAgICBcImltYWdlXCI6IFwiSW1hZ2VcIixcbiAgICAgICAgXCJhdWRpb1wiOiBcIkF1ZGlvXCIsXG4gICAgICAgIFwidmlkZW9cIjogXCJWaWRlb1wiLFxuICAgICAgICBcImFwcGxpY2F0aW9uXCI6IFwiRGF0YVwiXG4gICAgfSxcblxuICAgIG1hcE1pbWVUeXBlIDogKG1pbWVUeXBlKSA9PiB7XG4gICAgICAgIHJldHVybiBUYXJnZXRVdGlsLm1pbWVUeXBlTWFwW21pbWVUeXBlXTtcbiAgICB9LFxuXG4gICAgbG9va3VwSWRlbnRpZmllciA6ICh0YXJnZXRJZCwgcmVzb3VyY2VEYXRhLCBhbm5vdGF0aW9ucykgPT4ge1xuICAgICAgICBpZiAocmVzb3VyY2VEYXRhLnJlc291cmNlSW5kZXgucmVzb3VyY2VzLmhhc093blByb3BlcnR5KHRhcmdldElkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHt0eXBlOiBcInJlc291cmNlXCIsIGRhdGE6IHJlc291cmNlRGF0YS5yZXNvdXJjZUluZGV4LnJlc291cmNlc1t0YXJnZXRJZF19O1xuICAgICAgICB9IGVsc2UgaWYgKHJlc291cmNlRGF0YS5leHRlcm5hbFJlc291cmNlSW5kZXggJiYgcmVzb3VyY2VEYXRhLmV4dGVybmFsUmVzb3VyY2VJbmRleC5oYXNPd25Qcm9wZXJ0eSh0YXJnZXRJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7dHlwZTogXCJleHRlcm5hbFwiLCBkYXRhOiByZXNvdXJjZURhdGEuZXh0ZXJuYWxSZXNvdXJjZUluZGV4W3RhcmdldElkXX07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgc291cmNlID0ge3R5cGU6IFwidW5rbm93blwiLCBkYXRhOiBudWxsfTtcbiAgICAgICAgICAgIGFubm90YXRpb25zLmZvckVhY2goKGFubm90YXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi5pZCA9PSB0YXJnZXRJZCkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UudHlwZSA9IFwiYW5ub3RhdGlvblwiO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZGF0YSA9IGFubm90YXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1hcFRhcmdldHNUb0RPTUVsZW1lbnRzIDogKGFubm90YXRpb24sIHJlc291cmNlRGF0YSwgYW5ub3RhdGlvbnMpID0+IHtcbiAgICAgICAgdmFyIGRvbVRhcmdldHMgPSBbXTtcbiAgICAgICAgQW5ub3RhdGlvblV0aWwuZXh0cmFjdFRhcmdldHMoYW5ub3RhdGlvbikuZm9yRWFjaCgodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBBbm5vdGF0aW9uVXRpbC5leHRyYWN0VGFyZ2V0SWRlbnRpZmllcih0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXRJZCkgLy8gdGFyZ2V0IGlzIG5vdCBsb2FkZWQgaW4gYnJvd3NlciB3aW5kb3dcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB2YXIgc291cmNlID0gVGFyZ2V0VXRpbC5sb29rdXBJZGVudGlmaWVyKHRhcmdldElkLCByZXNvdXJjZURhdGEsIGFubm90YXRpb25zKTtcblxuICAgICAgICAgICAgaWYgKHNvdXJjZS50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZXJyb3IoXCJzb3VyY2UgaW5mb3JtYXRpb24gZm9yIHRhcmdldCBcIiArIHRhcmdldElkICsgXCIgc2hvdWxkIGhhdmUgYSB0eXBlOlwiLCBzb3VyY2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gXCJhbm5vdGF0aW9uXCIpe1xuICAgICAgICAgICAgICAgIEFubm90YXRpb25VdGlsLmV4dHJhY3RUYXJnZXRzKHNvdXJjZS5kYXRhKS5mb3JFYWNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZG9tVGFyZ2V0cyA9IGRvbVRhcmdldHMuY29uY2F0KFRhcmdldFV0aWwubWFwVGFyZ2V0c1RvRE9NRWxlbWVudHMoc291cmNlLmRhdGEsIHJlc291cmNlRGF0YSwgYW5ub3RhdGlvbnMpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlLnR5cGUgPT09IFwicmVzb3VyY2VcIikge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcihcIlRhcmdldCBzaG91bGQgaGF2ZSBhIHR5cGUgcHJvcGVydHk6XCIsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQudHlwZSA9PT0gXCJUZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tVGFyZ2V0cy5wdXNoKFRhcmdldFV0aWwubWFrZVRleHRSYW5nZSh0YXJnZXQsIHNvdXJjZS5kYXRhLmRvbU5vZGUpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC50eXBlID09PSBcIkltYWdlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tVGFyZ2V0cy5wdXNoKFRhcmdldFV0aWwubWFrZUltYWdlUmVnaW9uKHRhcmdldCwgc291cmNlLmRhdGEuZG9tTm9kZSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnR5cGUgPT09IFwiVmlkZW9cIiB8fCB0YXJnZXQudHlwZSA9PT0gXCJBdWRpb1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbVRhcmdldHMucHVzaChUYXJnZXRVdGlsLm1ha2VUZW1wb3JhbFNlZ21lbnQodGFyZ2V0LCBzb3VyY2UuZGF0YS5kb21Ob2RlKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKFwiVW5rbm93biB0YXJnZXQgdHlwZVwiLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKFwibm8gc291cmNlIHR5cGUgZm9yIHNvdXJjZTpcIiwgc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkb21UYXJnZXRzO1xuICAgIH0sXG5cbiAgICBtYWtlSW1hZ2VSZWdpb24gOiBmdW5jdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICAgICAgdmFyIGltYWdlUmVnaW9uID0ge1xuICAgICAgICAgICAgdHlwZTogXCJJbWFnZVwiLFxuICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGFyZ2V0LnNlbGVjdG9yICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNlbGVjdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgbWVkaWFGcmFnbWVudCA9IFRhcmdldFV0aWwuZ2V0VGFyZ2V0TWVkaWFGcmFnbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgaW1hZ2VSZWdpb24ucmVjdCA9IG1lZGlhRnJhZ21lbnQucmVjdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1hZ2VSZWdpb247XG4gICAgfSxcblxuICAgIG1ha2VUZXh0UmFuZ2UodGFyZ2V0LCBub2RlKSB7XG4gICAgICAgIHZhciB0YXJnZXRSYW5nZSA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiVGV4dFwiLFxuICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICBlbmQ6IC0xLFxuICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgdGV4dFBvc2l0aW9uID0gVGFyZ2V0VXRpbC5nZXRTZWxlY3RvckJ5VHlwZSh0YXJnZXQsIFwiVGV4dFBvc2l0aW9uU2VsZWN0b3JcIik7XG4gICAgICAgIGlmICh0ZXh0UG9zaXRpb24gJiYgdGV4dFBvc2l0aW9uLnN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRhcmdldFJhbmdlLnN0YXJ0ID0gdGV4dFBvc2l0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgdGFyZ2V0UmFuZ2UuZW5kID0gdGV4dFBvc2l0aW9uLmVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0UmFuZ2U7XG4gICAgfSxcblxuICAgIG1ha2VUZW1wb3JhbFNlZ21lbnQgOiBmdW5jdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiB0YXJnZXQudHlwZSxcbiAgICAgICAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRhcmdldC5zZWxlY3RvciAhPT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZWxlY3RvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IG1lZGlhRnJhZ21lbnQgPSBUYXJnZXRVdGlsLmdldFRhcmdldE1lZGlhRnJhZ21lbnQodGFyZ2V0KTtcbiAgICAgICAgICAgIHNlZ21lbnQuaW50ZXJ2YWwgPSBtZWRpYUZyYWdtZW50LmludGVydmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWdtZW50O1xuICAgIH0sXG5cbiAgICBnZXRUYXJnZXRUZXh0KHRhcmdldCwgcmVzb3VyY2UpIHtcbiAgICAgICAgLy8gaWYgd2hvbGUgcmVzb3VyY2UgaXMgdGhlIHRhcmdldCxcbiAgICAgICAgLy8gcmV0dXJuIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgbm9kZVxuICAgICAgICBpZiAoIXRhcmdldC5zZWxlY3RvciAmJiAhcmVzb3VyY2UuZGF0YS50ZXh0KVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHRleHQgdGFyZ2V0ISBTaG91bGQgaGF2ZSBzZWxlY3RvciBvciBwb2ludCB0byBET00gZWxlbWVudCB3aXRoIHRleHQgY29udGVudFwiKTtcbiAgICAgICAgaWYgKCF0YXJnZXQuc2VsZWN0b3IpXG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZGF0YS50ZXh0O1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSB0YXJnZXQuc2VsZWN0b3I7XG4gICAgICAgIGlmICh0YXJnZXQuc2VsZWN0b3IucmVmaW5lZEJ5KVxuICAgICAgICAgICAgc2VsZWN0b3IgPSB0YXJnZXQuc2VsZWN0b3IucmVmaW5lZEJ5O1xuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgc2VsZWN0b3JzLCBwaWNrIGFueSBzZWxlY3RvciBzaW5jZSB0aGV5IGFyZSBhbHRlcm5hdGl2ZXNcbiAgICAgICAgaWYgKFRhcmdldFV0aWwuaGFzUXVvdGVTZWxlY3RvcihzZWxlY3RvcikpIHtcbiAgICAgICAgICAgIHNlbGVjdG9yID0gVGFyZ2V0VXRpbC5nZXRRdW90ZVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rvci5leGFjdDtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RvciA9IEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpID8gc2VsZWN0b3JbMF0gOiBzZWxlY3RvcjtcbiAgICAgICAgaWYgKCFzZWxlY3Rvci50eXBlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChzZWxlY3Rvci50eXBlID09PSBcIlRleHRRdW90ZVNlbGVjdG9yXCIpXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IuZXhhY3Q7XG4gICAgICAgIGlmIChzZWxlY3Rvci50eXBlID09PSBcIlRleHRQb3NpdGlvblNlbGVjdG9yXCIpXG4gICAgICAgICAgICByZXR1cm4gVGFyZ2V0VXRpbC5nZXRUYXJnZXRSYW5nZVRleHQocmVzb3VyY2UuZGF0YS5kb21Ob2RlLCBzZWxlY3Rvci5zdGFydCwgc2VsZWN0b3IuZW5kKTtcbiAgICAgICAgaWYgKHNlbGVjdG9yLnR5cGUgPT09IFwiTmVzdGVkUElEU2VsZWN0b3JcIikge1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvdXJjZS5kYXRhLnRleHQpXG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZGF0YS50ZXh0O1xuICAgICAgICByZXR1cm4gXCJcIjsgLy8gaWYgbm8gdGV4dCBjYW4gaXMgdGFyZ2V0ZWQsIHJldHVybiBlbXB0eSBzdHJpbmdcbiAgICB9LFxuXG4gICAgaGFzUXVvdGVTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICBsZXQgcXVvdGVTZWxlY3RvciA9IG51bGw7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3Iuc29tZSgocykgPT4geyByZXR1cm4gcy50eXBlID09PSBcIlRleHRRdW90ZVNlbGVjdG9yXCJ9KTtcbiAgICAgICAgfSBlbHNlIGlmICghc2VsZWN0b3IuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNlbGVjdG9yOlwiLCBzZWxlY3Rvcik7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgc2VsZWN0b3IhIHNlbGVjdG9yIHJlcXVpcmVzIGEgJ3R5cGUnIHByb3BlcnR5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yLnR5cGUgPT09IFwiVGV4dFF1b3RlU2VsZWN0b3JcIjtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRRdW90ZVNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIGxldCBxdW90ZVNlbGVjdG9yID0gbnVsbDtcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShzZWxlY3RvcikpIHtcbiAgICAgICAgICAgIHNlbGVjdG9yLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocy50eXBlID09PSBcIlRleHRRdW90ZVNlbGVjdG9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZWxlY3RvciA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcXVvdGVTZWxlY3RvclxuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdG9yLmhhc093blByb3BlcnR5KFwidHlwZVwiKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZWxlY3RvcjpcIiwgc2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHNlbGVjdG9yOlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rvci50eXBlID09PSBcIlRleHRRdW90ZVNlbGVjdG9yXCI7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0VGFyZ2V0UmFuZ2VUZXh0KG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgU2VsZWN0aW9uVXRpbC5zZXRSREZhU2VsZWN0aW9uUmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCk7XG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciB0ZXh0ID0gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfSxcblxuICAgIGdldFRhcmdldE1lZGlhRnJhZ21lbnQodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0eXBlb2YodGFyZ2V0KSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodGFyZ2V0LnNlbGVjdG9yICYmIHRhcmdldC5zZWxlY3Rvci50eXBlID09PSBcIkZyYWdtZW50U2VsZWN0b3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5zZWxlY3RvcjtcbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuc2VsZWN0b3IucmVmaW5lZEJ5ICYmIHRhcmdldC5zZWxlY3Rvci5yZWZpbmVkQnkudHlwZSA9PT0gXCJGcmFnbWVudFNlbGVjdG9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQuc2VsZWN0b3IucmVmaW5lZEJ5O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHRvZ2dsZUhpZ2hsaWdodCh0YXJnZXRET01FbGVtZW50cywgaGlnaGxpZ2h0ZWQpIHtcbiAgICAgICAgdGFyZ2V0RE9NRWxlbWVudHMuZm9yRWFjaCgodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcihcIlRhcmdldCBzaG91bGQgaGF2ZSBhIHR5cGU6XCIsIHRhcmdldCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC50eXBlID09PSBcIlRleHRcIikge1xuICAgICAgICAgICAgICAgIFRhcmdldFV0aWwudG9nZ2xlVGV4dEhpZ2hsaWdodCh0YXJnZXQsIGhpZ2hsaWdodGVkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnR5cGUgPT09IFwiQXVkaW9cIikge1xuICAgICAgICAgICAgICAgIFRhcmdldFV0aWwudG9nZ2xlQXVkaW9IaWdobGlnaHQodGFyZ2V0LCBoaWdobGlnaHRlZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC50eXBlID09PSBcIkltYWdlXCIpIHtcbiAgICAgICAgICAgICAgICBUYXJnZXRVdGlsLnRvZ2dsZUltYWdlSGlnaGxpZ2h0KHRhcmdldCwgaGlnaGxpZ2h0ZWQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQudHlwZSA9PT0gXCJWaWRlb1wiKSB7XG4gICAgICAgICAgICAgICAgVGFyZ2V0VXRpbC50b2dnbGVWaWRlb0hpZ2hsaWdodCh0YXJnZXQsIGhpZ2hsaWdodGVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKFwiVW5rbm93biB0YXJnZXQgdHlwZTpcIiwgdGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRvZ2dsZVRleHRIaWdobGlnaHQodGFyZ2V0LCBoaWdobGlnaHRlZCkge1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWQgKVxuICAgICAgICAgICAgU2VsZWN0aW9uVXRpbC5zZWxlY3RBbmRSZW1vdmVSYW5nZSh0YXJnZXQubm9kZSwgdGFyZ2V0LnN0YXJ0LCB0YXJnZXQuZW5kKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgU2VsZWN0aW9uVXRpbC5zZWxlY3RBbmRIaWdobGlnaHRSYW5nZSh0YXJnZXQubm9kZSwgdGFyZ2V0LnN0YXJ0LCB0YXJnZXQuZW5kKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlSW1hZ2VIaWdobGlnaHQodGFyZ2V0LCBoaWdobGlnaHRlZCkge1xuICAgICAgICAvLyB0cmlnZ2VyIHRvZ2dsZU92ZXJsYXkgZXZlbnQgd2l0aCB0YXJnZXQgbm9kZSBhbmQgcmVjdGFuZ2xlIGFzIGRldGFpbFxuICAgICAgICBsZXQgdG9nZ2xlT3ZlcmxheSA9IG5ldyBDdXN0b21FdmVudChcInRvZ2dsZS1hbm5vdGF0aW9uLW92ZXJsYXlcIiwge1xuICAgICAgICAgICAgZGV0YWlsOiB7cmVjdDogdGFyZ2V0LnJlY3QsIGhpZ2hsaWdodGVkOiBoaWdobGlnaHRlZH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRhcmdldC5ub2RlLmRpc3BhdGNoRXZlbnQodG9nZ2xlT3ZlcmxheSk7XG4gICAgfSxcblxuICAgIHRvZ2dsZVZpZGVvSGlnaGxpZ2h0KHRhcmdldCwgc3RhcnRlZCkge1xuICAgICAgICAvLyB0cmlnZ2VyIHRvZ2dsZU92ZXJsYXkgZXZlbnQgd2l0aCB0YXJnZXQgbm9kZSBhbmQgcmVjdGFuZ2xlIGFzIGRldGFpbFxuICAgICAgICBsZXQgdG9nZ2xlT3ZlcmxheSA9IG5ldyBDdXN0b21FdmVudChcInBsYXktdmlkZW8tc2VnbWVudFwiLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtpbnRlcnZhbDogdGFyZ2V0LmludGVydmFsLCBzdGFydGVkOiBzdGFydGVkfVxuICAgICAgICB9KTtcbiAgICAgICAgdGFyZ2V0Lm5vZGUuZGlzcGF0Y2hFdmVudCh0b2dnbGVPdmVybGF5KTtcbiAgICB9XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRhcmdldFV0aWw7XG5cblxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFQQTtBQVdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFPQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFuaEJBO0FBdWhCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/util/TargetUtil.js\n");

/***/ }),

/***/ "./src/util/TimeUtil.js":
/*!******************************!*\
  !*** ./src/util/TimeUtil.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ \"./node_modules/moment/moment.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);\n\nvar TimeUtil = {\n  //formats seconds to a neat time string hh:mm:ss\n  formatTime: function formatTime(t) {\n    if (t == -1) {\n      return \"00:00:00\";\n    }\n\n    var pt = moment__WEBPACK_IMPORTED_MODULE_0___default.a.duration(t * 1000);\n    var h = pt.hours() < 10 ? \"0\" + pt.hours() : pt.hours();\n    var m = pt.minutes() < 10 ? \"0\" + pt.minutes() : pt.minutes();\n    var s = pt.seconds() < 10 ? \"0\" + pt.seconds() : pt.seconds();\n    return h + \":\" + m + \":\" + s;\n  },\n  //formats milliseconds to a time string hh:mm:ss\n  formatMillisToTime: function formatMillisToTime(millis) {\n    if (millis == -1) {\n      return \"00:00:00\";\n    }\n\n    var pt = moment__WEBPACK_IMPORTED_MODULE_0___default.a.duration(millis);\n    var h = pt.hours() < 10 ? \"0\" + pt.hours() : pt.hours();\n    var m = pt.minutes() < 10 ? \"0\" + pt.minutes() : pt.minutes();\n    var s = pt.seconds() < 10 ? \"0\" + pt.seconds() : pt.seconds();\n    return h + \":\" + m + \":\" + s;\n  },\n  //TODO not sure anymore why this was useful. It seems bad to round off seconds\n  playerPosToMillis: function playerPosToMillis(sec) {\n    //a double\n    return parseInt(sec) * 1000;\n  },\n  getYearFromDate: function getYearFromDate(dateMillis) {\n    return new Date(dateMillis).getFullYear();\n  },\n  yearToUNIXTime: function yearToUNIXTime(year) {\n    return new Date(year + \"-01-01\").valueOf();\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TimeUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9UaW1lVXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy91dGlsL1RpbWVVdGlsLmpzPzQyYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5cbmNvbnN0IFRpbWVVdGlsID0ge1xuXG4gICAgLy9mb3JtYXRzIHNlY29uZHMgdG8gYSBuZWF0IHRpbWUgc3RyaW5nIGhoOm1tOnNzXG4gICAgZm9ybWF0VGltZSA6IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYodCA9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiMDA6MDA6MDBcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHQgPSBtb21lbnQuZHVyYXRpb24odCAqIDEwMDApO1xuICAgICAgICB2YXIgaCA9IHB0LmhvdXJzKCkgPCAxMCA/IFwiMFwiICsgcHQuaG91cnMoKSA6IHB0LmhvdXJzKCk7XG4gICAgICAgIHZhciBtID0gcHQubWludXRlcygpIDwgMTAgPyBcIjBcIiArIHB0Lm1pbnV0ZXMoKSA6IHB0Lm1pbnV0ZXMoKTtcbiAgICAgICAgdmFyIHMgPSBwdC5zZWNvbmRzKCkgPCAxMCA/IFwiMFwiICsgcHQuc2Vjb25kcygpIDogcHQuc2Vjb25kcygpO1xuICAgICAgICByZXR1cm4gaCArIFwiOlwiICsgbSArIFwiOlwiICsgcztcbiAgICB9LFxuXG4gICAgLy9mb3JtYXRzIG1pbGxpc2Vjb25kcyB0byBhIHRpbWUgc3RyaW5nIGhoOm1tOnNzXG4gICAgZm9ybWF0TWlsbGlzVG9UaW1lIDogZnVuY3Rpb24obWlsbGlzKSB7XG4gICAgICAgIGlmKG1pbGxpcyA9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiMDA6MDA6MDBcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHQgPSBtb21lbnQuZHVyYXRpb24obWlsbGlzKTtcbiAgICAgICAgdmFyIGggPSBwdC5ob3VycygpIDwgMTAgPyBcIjBcIiArIHB0LmhvdXJzKCkgOiBwdC5ob3VycygpO1xuICAgICAgICB2YXIgbSA9IHB0Lm1pbnV0ZXMoKSA8IDEwID8gXCIwXCIgKyBwdC5taW51dGVzKCkgOiBwdC5taW51dGVzKCk7XG4gICAgICAgIHZhciBzID0gcHQuc2Vjb25kcygpIDwgMTAgPyBcIjBcIiArIHB0LnNlY29uZHMoKSA6IHB0LnNlY29uZHMoKTtcbiAgICAgICAgcmV0dXJuIGggKyBcIjpcIiArIG0gKyBcIjpcIiArIHM7XG4gICAgfSxcblxuICAgIC8vVE9ETyBub3Qgc3VyZSBhbnltb3JlIHdoeSB0aGlzIHdhcyB1c2VmdWwuIEl0IHNlZW1zIGJhZCB0byByb3VuZCBvZmYgc2Vjb25kc1xuICAgIHBsYXllclBvc1RvTWlsbGlzIDogZnVuY3Rpb24oc2VjKSB7Ly9hIGRvdWJsZVxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc2VjKSAqIDEwMDA7XG4gICAgfSxcblxuICAgIGdldFllYXJGcm9tRGF0ZSA6IGZ1bmN0aW9uKGRhdGVNaWxsaXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVNaWxsaXMpLmdldEZ1bGxZZWFyKCk7XG4gICAgfSxcblxuICAgIHllYXJUb1VOSVhUaW1lIDogZnVuY3Rpb24oeWVhcikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoeWVhciArIFwiLTAxLTAxXCIpLnZhbHVlT2YoKTtcbiAgICB9XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRpbWVVdGlsO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXJDQTtBQXlDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/util/TimeUtil.js\n");

/***/ }),

/***/ "./src/util/VocabularyUtil.js":
/*!************************************!*\
  !*** ./src/util/VocabularyUtil.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rdflib/lib/fetcher */ \"./node_modules/rdflib/lib/fetcher.js\");\n/* harmony import */ var rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rdflib/lib/namespace */ \"./node_modules/rdflib/lib/namespace.js\");\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rdflib/lib/data-factory */ \"./node_modules/rdflib/lib/data-factory.js\");\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rdflib */ \"./node_modules/rdflib/lib/index.js\");\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rdflib__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\nvar VocabularyUtil = {\n  //rdf : rdf,\n  rdfStore: null,\n  fetcher: null,\n  OWL: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2002/07/owl#\"),\n  RDF: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"),\n  RDFS: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2000/01/rdf-schema#\"),\n  newStore: function newStore() {\n    var store = rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph();\n    VocabularyUtil.fetcher = new rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0___default.a(store, 500);\n    return store;\n  },\n  prefixes: {\n    // common prefixes for ease of reference\n    rdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n    owl: \"http://www.w3.org/2002/07/owl#\"\n  },\n  importPredicate: \"http://www.w3.org/2002/07/owl#imports\",\n  readVocabulariesFromURL: function readVocabulariesFromURL(vocabularyURLs, callback) {\n    vocabularyURLs.forEach(function (vocabularyURL, index) {\n      VocabularyUtil.readVocabularyFromURL(vocabularyURL, function (error) {\n        if (error) {\n          window.alert(\"Error reading vocabulary from \" + vocabularyURLi + \"\\n\" + error.toString());\n          return callback(error);\n        }\n\n        if (index + 1 == vocabularyURLs.length) return callback(null);\n      });\n    });\n  },\n  readVocabularyFromURL: function readVocabularyFromURL(vocabularyURL, callback) {\n    VocabularyUtil.fetcher.nowOrWhenFetched(vocabularyURL, undefined, function (ok, body) {\n      if (!ok) {\n        return callback(body, null);\n      } else {\n        return callback(null, body);\n      }\n    });\n  },\n  toString: function toString(literal) {\n    return literal.replace(/['\"]/g, \"\");\n  },\n  toStrings: function toStrings(literals) {\n    return literals.map(function (literal) {\n      return VocabularyUtil.toString(literal);\n    });\n  },\n  getLabelClass: function getLabelClass(store, classLabel) {\n    var predicate = VocabularyUtil.RDFS('label');\n    var subject = store.any(undefined, predicate, classLabel);\n\n    if (!subject) {\n      return null;\n    } else {\n      return subject.value;\n    }\n  },\n  getClassLabel: function getClassLabel(store, classURI) {\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var predicate = VocabularyUtil.RDFS('label');\n    var object = store.any(classNode, predicate, undefined);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getInverseOfRelation: function getInverseOfRelation(rdfStore, propertyURI) {\n    var predicate = VocabularyUtil.OWL('inverseOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var object = rdfStore.any(undefined, predicate, propertyNode);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getSubProperties: function getSubProperties(rdfStore, propertyURI) {\n    var predicate = VocabularyUtil.RDFS('subPropertyOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var objects = rdfStore.each(undefined, predicate, propertyNode);\n    return objects.map(function (object) {\n      return object.value;\n    });\n  },\n  getDescendantProperties: function getDescendantProperties(rdfStore, propertyURI) {\n    if (!propertyURI) {\n      throw Error(\"propertyURI undefined!\");\n    }\n\n    var predicate = VocabularyUtil.RDFS('subPropertyOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var objects = rdfStore.each(undefined, predicate, propertyNode);\n    var descendantURIs = objects.map(function (object) {\n      return object.value;\n    });\n    descendantURIs.forEach(function (descendantURI) {\n      var deeperDescendants = VocabularyUtil.getDescendantProperties(rdfStore, descendantURI);\n      descendantURIs = descendantURIs.concat(deeperDescendants);\n    });\n    return descendantURIs;\n  },\n  getSubClasses: function getSubClasses(rdfStore, classURI) {\n    if (!classURI) {\n      throw Error(\"classURI undefined!\");\n    } //let predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n\n\n    var predicate = VocabularyUtil.RDFS('subClassOf');\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var objects = rdfStore.each(undefined, predicate, classNode);\n    return objects.map(function (object) {\n      return object.value;\n    });\n  },\n  getDescendantClasses: function getDescendantClasses(rdfStore, classURI) {\n    if (!classURI) {\n      throw Error(\"classURI undefined!\");\n    } //let predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n\n\n    var predicate = VocabularyUtil.RDFS('subClassOf');\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var objects = rdfStore.each(undefined, predicate, classNode);\n    var descendantURIs = objects.map(function (object) {\n      return object.value;\n    });\n    descendantURIs.forEach(function (descendantURI) {\n      var deeperDescendants = VocabularyUtil.getDescendantClasses(rdfStore, descendantURI);\n      descendantURIs = descendantURIs.concat(deeperDescendants);\n    });\n    return descendantURIs;\n  },\n  getSuperClass: function getSuperClass(classURI) {\n    var predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n    var object = VocabularyUtil.rdfStore.any(classURI, predicate, undefined);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getSuperClasses: function getSuperClasses(className) {\n    var superClasses = [];\n    var superClass = VocabularyUtil.getSuperClass(className);\n\n    while (superClass) {\n      superClasses.push(superClass);\n      superClass = VocabularyUtil.getSuperClass(className);\n    }\n\n    return superClasses;\n  },\n  expand: function expand(prefixedName) {\n    var prefix = prefixedName.split(\":\")[0];\n    var name = prefixedName.split(\":\")[1];\n    return VocabularyUtil.prefixes[prefix] + name;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (VocabularyUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9Wb2NhYnVsYXJ5VXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci8uL3NyYy91dGlsL1ZvY2FidWxhcnlVdGlsLmpzPzdiNTAiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IEZldGNoZXIgZnJvbSBcInJkZmxpYi9saWIvZmV0Y2hlclwiO1xuaW1wb3J0IE5hbWVzcGFjZSBmcm9tIFwicmRmbGliL2xpYi9uYW1lc3BhY2VcIjtcbmltcG9ydCBEYXRhRmFjdG9yeSBmcm9tIFwicmRmbGliL2xpYi9kYXRhLWZhY3RvcnlcIjtcbmltcG9ydCByZGYgZnJvbSBcInJkZmxpYlwiO1xuXG5jb25zdCBWb2NhYnVsYXJ5VXRpbCA9IHtcblxuICAgIC8vcmRmIDogcmRmLFxuICAgIHJkZlN0b3JlIDogbnVsbCxcbiAgICBmZXRjaGVyIDogbnVsbCxcbiAgICBPV0wgOiBOYW1lc3BhY2UoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCNcIiksXG4gICAgUkRGIDogTmFtZXNwYWNlKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zI1wiKSxcbiAgICBSREZTIDogTmFtZXNwYWNlKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC8wMS9yZGYtc2NoZW1hI1wiKSxcblxuICAgIG5ld1N0b3JlIDogKCkgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZSA9IERhdGFGYWN0b3J5LmdyYXBoKCk7XG4gICAgICAgIFZvY2FidWxhcnlVdGlsLmZldGNoZXIgPSBuZXcgRmV0Y2hlcihzdG9yZSwgNTAwKTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH0sXG5cbiAgICBwcmVmaXhlcyA6IHtcbiAgICAgICAgLy8gY29tbW9uIHByZWZpeGVzIGZvciBlYXNlIG9mIHJlZmVyZW5jZVxuICAgICAgICByZGZzOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSNcIixcbiAgICAgICAgb3dsOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDIvMDcvb3dsI1wiXG4gICAgfSxcblxuICAgIGltcG9ydFByZWRpY2F0ZSA6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjaW1wb3J0c1wiLFxuXG4gICAgcmVhZFZvY2FidWxhcmllc0Zyb21VUkwgOiAodm9jYWJ1bGFyeVVSTHMsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHZvY2FidWxhcnlVUkxzLmZvckVhY2goKHZvY2FidWxhcnlVUkwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBWb2NhYnVsYXJ5VXRpbC5yZWFkVm9jYWJ1bGFyeUZyb21VUkwodm9jYWJ1bGFyeVVSTCwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChcIkVycm9yIHJlYWRpbmcgdm9jYWJ1bGFyeSBmcm9tIFwiICsgdm9jYWJ1bGFyeVVSTGkgKyBcIlxcblwiICsgZXJyb3IudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCsxID09IHZvY2FidWxhcnlVUkxzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlYWRWb2NhYnVsYXJ5RnJvbVVSTCA6ICh2b2NhYnVsYXJ5VVJMLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICBWb2NhYnVsYXJ5VXRpbC5mZXRjaGVyLm5vd09yV2hlbkZldGNoZWQodm9jYWJ1bGFyeVVSTCwgdW5kZWZpbmVkLCAob2ssIGJvZHkpID0+IHtcbiAgICAgICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYm9keSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZyA6IGZ1bmN0aW9uKGxpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIGxpdGVyYWwucmVwbGFjZSgvWydcIl0vZywgXCJcIik7XG4gICAgfSxcblxuICAgIHRvU3RyaW5ncyA6IGZ1bmN0aW9uKGxpdGVyYWxzKSB7XG4gICAgICAgIHJldHVybiBsaXRlcmFscy5tYXAoZnVuY3Rpb24obGl0ZXJhbCkge1xuICAgICAgICAgICAgcmV0dXJuIFZvY2FidWxhcnlVdGlsLnRvU3RyaW5nKGxpdGVyYWwpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0TGFiZWxDbGFzcyA6IChzdG9yZSwgY2xhc3NMYWJlbCkgPT4ge1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuUkRGUygnbGFiZWwnKTtcbiAgICAgICAgbGV0IHN1YmplY3QgPSBzdG9yZS5hbnkodW5kZWZpbmVkLCBwcmVkaWNhdGUsIGNsYXNzTGFiZWwpO1xuICAgICAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1YmplY3QudmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0Q2xhc3NMYWJlbCA6IChzdG9yZSwgY2xhc3NVUkkpID0+IHtcbiAgICAgICAgbGV0IGNsYXNzTm9kZSA9IHJkZi5zeW0oY2xhc3NVUkkpO1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuUkRGUygnbGFiZWwnKTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHN0b3JlLmFueShjbGFzc05vZGUsIHByZWRpY2F0ZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCFvYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRJbnZlcnNlT2ZSZWxhdGlvbiA6IChyZGZTdG9yZSwgcHJvcGVydHlVUkkpID0+IHtcbiAgICAgICAgbGV0IHByZWRpY2F0ZSA9IFZvY2FidWxhcnlVdGlsLk9XTCgnaW52ZXJzZU9mJyk7XG4gICAgICAgIGxldCBwcm9wZXJ0eU5vZGUgPSByZGYuc3ltKHByb3BlcnR5VVJJKTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHJkZlN0b3JlLmFueSh1bmRlZmluZWQsIHByZWRpY2F0ZSwgcHJvcGVydHlOb2RlKTtcbiAgICAgICAgaWYgKCFvYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRTdWJQcm9wZXJ0aWVzIDogKHJkZlN0b3JlLCBwcm9wZXJ0eVVSSSkgPT4ge1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuUkRGUygnc3ViUHJvcGVydHlPZicpO1xuICAgICAgICBsZXQgcHJvcGVydHlOb2RlID0gcmRmLnN5bShwcm9wZXJ0eVVSSSk7XG4gICAgICAgIGxldCBvYmplY3RzID0gcmRmU3RvcmUuZWFjaCh1bmRlZmluZWQsIHByZWRpY2F0ZSwgcHJvcGVydHlOb2RlKTtcbiAgICAgICAgcmV0dXJuIG9iamVjdHMubWFwKChvYmplY3QpID0+IHsgcmV0dXJuIG9iamVjdC52YWx1ZTsgfSk7XG4gICAgfSxcblxuICAgIGdldERlc2NlbmRhbnRQcm9wZXJ0aWVzIDogKHJkZlN0b3JlLCBwcm9wZXJ0eVVSSSkgPT4ge1xuICAgICAgICBpZiAoIXByb3BlcnR5VVJJKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInByb3BlcnR5VVJJIHVuZGVmaW5lZCFcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByZWRpY2F0ZSA9IFZvY2FidWxhcnlVdGlsLlJERlMoJ3N1YlByb3BlcnR5T2YnKTtcbiAgICAgICAgbGV0IHByb3BlcnR5Tm9kZSA9IHJkZi5zeW0ocHJvcGVydHlVUkkpO1xuICAgICAgICBsZXQgb2JqZWN0cyA9IHJkZlN0b3JlLmVhY2godW5kZWZpbmVkLCBwcmVkaWNhdGUsIHByb3BlcnR5Tm9kZSk7XG4gICAgICAgIGxldCBkZXNjZW5kYW50VVJJcyA9IG9iamVjdHMubWFwKChvYmplY3QpID0+IHsgcmV0dXJuIG9iamVjdC52YWx1ZTsgfSk7XG4gICAgICAgIGRlc2NlbmRhbnRVUklzLmZvckVhY2goKGRlc2NlbmRhbnRVUkkpID0+IHtcbiAgICAgICAgICAgIGxldCBkZWVwZXJEZXNjZW5kYW50cyA9IFZvY2FidWxhcnlVdGlsLmdldERlc2NlbmRhbnRQcm9wZXJ0aWVzKHJkZlN0b3JlLCBkZXNjZW5kYW50VVJJKTtcbiAgICAgICAgICAgIGRlc2NlbmRhbnRVUklzID0gZGVzY2VuZGFudFVSSXMuY29uY2F0KGRlZXBlckRlc2NlbmRhbnRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZXNjZW5kYW50VVJJcztcbiAgICB9LFxuXG4gICAgZ2V0U3ViQ2xhc3NlcyA6IGZ1bmN0aW9uKHJkZlN0b3JlLCBjbGFzc1VSSSkge1xuICAgICAgICBpZiAoIWNsYXNzVVJJKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImNsYXNzVVJJIHVuZGVmaW5lZCFcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy9sZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuZXhwYW5kKFwicmRmczpzdWJDbGFzc09mXCIpO1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuUkRGUygnc3ViQ2xhc3NPZicpO1xuICAgICAgICBsZXQgY2xhc3NOb2RlID0gcmRmLnN5bShjbGFzc1VSSSk7XG4gICAgICAgIGxldCBvYmplY3RzID0gcmRmU3RvcmUuZWFjaCh1bmRlZmluZWQsIHByZWRpY2F0ZSwgY2xhc3NOb2RlKTtcbiAgICAgICAgcmV0dXJuIG9iamVjdHMubWFwKChvYmplY3QpID0+IHsgcmV0dXJuIG9iamVjdC52YWx1ZTsgfSk7XG4gICAgfSxcblxuICAgIGdldERlc2NlbmRhbnRDbGFzc2VzIDogZnVuY3Rpb24ocmRmU3RvcmUsIGNsYXNzVVJJKSB7XG4gICAgICAgIGlmICghY2xhc3NVUkkpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiY2xhc3NVUkkgdW5kZWZpbmVkIVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvL2xldCBwcmVkaWNhdGUgPSBWb2NhYnVsYXJ5VXRpbC5leHBhbmQoXCJyZGZzOnN1YkNsYXNzT2ZcIik7XG4gICAgICAgIGxldCBwcmVkaWNhdGUgPSBWb2NhYnVsYXJ5VXRpbC5SREZTKCdzdWJDbGFzc09mJyk7XG4gICAgICAgIGxldCBjbGFzc05vZGUgPSByZGYuc3ltKGNsYXNzVVJJKTtcbiAgICAgICAgbGV0IG9iamVjdHMgPSByZGZTdG9yZS5lYWNoKHVuZGVmaW5lZCwgcHJlZGljYXRlLCBjbGFzc05vZGUpO1xuICAgICAgICBsZXQgZGVzY2VuZGFudFVSSXMgPSBvYmplY3RzLm1hcCgob2JqZWN0KSA9PiB7IHJldHVybiBvYmplY3QudmFsdWU7IH0pO1xuICAgICAgICBkZXNjZW5kYW50VVJJcy5mb3JFYWNoKChkZXNjZW5kYW50VVJJKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGVlcGVyRGVzY2VuZGFudHMgPSBWb2NhYnVsYXJ5VXRpbC5nZXREZXNjZW5kYW50Q2xhc3NlcyhyZGZTdG9yZSwgZGVzY2VuZGFudFVSSSk7XG4gICAgICAgICAgICBkZXNjZW5kYW50VVJJcyA9IGRlc2NlbmRhbnRVUklzLmNvbmNhdChkZWVwZXJEZXNjZW5kYW50cyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVzY2VuZGFudFVSSXM7XG4gICAgfSxcblxuICAgIGdldFN1cGVyQ2xhc3MgOiBmdW5jdGlvbihjbGFzc1VSSSkge1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gVm9jYWJ1bGFyeVV0aWwuZXhwYW5kKFwicmRmczpzdWJDbGFzc09mXCIpO1xuICAgICAgICBsZXQgb2JqZWN0ID0gVm9jYWJ1bGFyeVV0aWwucmRmU3RvcmUuYW55KGNsYXNzVVJJLCBwcmVkaWNhdGUsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICghb2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QudmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0U3VwZXJDbGFzc2VzIDogZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBzdXBlckNsYXNzZXMgPSBbXTtcbiAgICAgICAgdmFyIHN1cGVyQ2xhc3MgPSBWb2NhYnVsYXJ5VXRpbC5nZXRTdXBlckNsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIHdoaWxlIChzdXBlckNsYXNzKSB7XG4gICAgICAgICAgICBzdXBlckNsYXNzZXMucHVzaChzdXBlckNsYXNzKTtcbiAgICAgICAgICAgIHN1cGVyQ2xhc3MgPSBWb2NhYnVsYXJ5VXRpbC5nZXRTdXBlckNsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyQ2xhc3NlcztcbiAgICB9LFxuXG4gICAgZXhwYW5kIDogZnVuY3Rpb24ocHJlZml4ZWROYW1lKSB7XG4gICAgICAgIGxldCBwcmVmaXggPSBwcmVmaXhlZE5hbWUuc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICBsZXQgbmFtZSA9IHByZWZpeGVkTmFtZS5zcGxpdChcIjpcIilbMV07XG4gICAgICAgIHJldHVybiBWb2NhYnVsYXJ5VXRpbC5wcmVmaXhlc1twcmVmaXhdICsgbmFtZTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWb2NhYnVsYXJ5VXRpbDtcbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxLQTtBQXFLQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/util/VocabularyUtil.js\n");

/***/ }),

/***/ 0:
/*!***********************!*\
  !*** vertx (ignored) ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci92ZXJ0eCAoaWdub3JlZCk/MzBmZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),

/***/ 1:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci91dGlsIChpZ25vcmVkKT9jOTY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),

/***/ 2:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1NjaG9sYXJseVdlYkFubm90YXRvci91dGlsIChpZ25vcmVkKT82ODliIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ })

/******/ });